(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{322:function(e,t,n){"use strict";t.__esModule=!0,t.canUseDOM=t.slidesOnLeft=t.slidesOnRight=t.siblingDirection=t.getTotalSlides=t.getPostClones=t.getPreClones=t.getTrackLeft=t.getTrackAnimateCSS=t.getTrackCSS=t.checkSpecKeys=t.getSlideCount=t.checkNavigable=t.getNavigableIndexes=t.swipeEnd=t.swipeMove=t.swipeStart=t.keyHandler=t.changeSlide=t.slideHandler=t.initializedState=t.extractObject=t.canGoNext=t.getSwipeDirection=t.getHeight=t.getWidth=t.lazySlidesOnRight=t.lazySlidesOnLeft=t.lazyEndIndex=t.lazyStartIndex=t.getRequiredLazySlides=t.getOnDemandLazySlides=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=a(n(0)),o=a(n(9));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.getOnDemandLazySlides=function(e){for(var t=[],n=u(e),i=l(e),r=n;r<i;r++)e.lazyLoadedList.indexOf(r)<0&&t.push(r);return t},u=(t.getRequiredLazySlides=function(e){for(var t=[],n=u(e),i=l(e),r=n;r<i;r++)t.push(r);return t},t.lazyStartIndex=function(e){return e.currentSlide-c(e)}),l=t.lazyEndIndex=function(e){return e.currentSlide+f(e)},c=t.lazySlidesOnLeft=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0},f=t.lazySlidesOnRight=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow},d=t.getWidth=function(e){return e&&e.offsetWidth||0},h=t.getHeight=function(e){return e&&e.offsetHeight||0},p=t.getSwipeDirection=function(e){var t,n,i,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.startX-e.curX,n=e.startY-e.curY,i=Math.atan2(n,t),(r=Math.round(180*i/Math.PI))<0&&(r=360-Math.abs(r)),r<=45&&r>=0||r<=360&&r>=315?"left":r>=135&&r<=225?"right":!0===o?r>=35&&r<=135?"up":"down":"vertical"},v=t.canGoNext=function(e){var t=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1?t=!1:(e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1)),t},m=(t.extractObject=function(e,t){var n={};return t.forEach(function(t){return n[t]=e[t]}),n},t.initializedState=function(e){var t=r.default.Children.count(e.children),n=Math.ceil(d(o.default.findDOMNode(e.listRef))),i=Math.ceil(d(o.default.findDOMNode(e.trackRef))),a=void 0;if(e.vertical)a=n;else{var u=e.centerMode&&2*parseInt(e.centerPadding);"string"===typeof e.centerPadding&&"%"===e.centerPadding.slice(-1)&&(u*=n/100),a=Math.ceil((n-u)/e.slidesToShow)}var l=o.default.findDOMNode(e.listRef)&&h(o.default.findDOMNode(e.listRef).querySelector('[data-index="0"]')),c=l*e.slidesToShow,f=void 0===e.currentSlide?e.initialSlide:e.currentSlide;e.rtl&&void 0===e.currentSlide&&(f=t-1-e.initialSlide);var p=e.lazyLoadedList||[],v=s({currentSlide:f,lazyLoadedList:p},e);p.concat(v);var m={slideCount:t,slideWidth:a,listWidth:n,trackWidth:i,currentSlide:f,slideHeight:l,listHeight:c,lazyLoadedList:p};return null===e.autoplaying&&e.autoplay&&(m.autoplaying="playing"),m},t.slideHandler=function(e){var t=e.waitForAnimate,n=e.animating,r=e.fade,o=e.infinite,a=e.index,u=e.slideCount,l=e.lazyLoadedList,c=e.lazyLoad,f=e.currentSlide,d=e.centerMode,h=e.slidesToScroll,p=e.slidesToShow,m=e.useCSS;if(t&&n)return{};var g=a,y=void 0,b=void 0,S=void 0,k={},T={};if(r){if(!o&&(a<0||a>=u))return{};a<0?g=a+u:a>=u&&(g=a-u),c&&l.indexOf(g)<0&&l.push(g),k={animating:!0,currentSlide:g,lazyLoadedList:l},T={animating:!1}}else y=g,g<0?(y=g+u,o?u%h!==0&&(y=u-u%h):y=0):!v(e)&&g>f?g=y=f:d&&g>=u?(g=o?u:u-1,y=o?0:u-1):g>=u&&(y=g-u,o?u%h!==0&&(y=0):y=u-p),b=E(i({},e,{slideIndex:g})),S=E(i({},e,{slideIndex:y})),o||(b===S&&(g=y),b=S),c&&l.concat(s(i({},e,{currentSlide:g}))),m?(k={animating:!0,currentSlide:y,trackStyle:_(i({},e,{left:b})),lazyLoadedList:l},T={animating:!1,currentSlide:y,trackStyle:w(i({},e,{left:S})),swipeLeft:null}):k={currentSlide:y,trackStyle:w(i({},e,{left:S})),lazyLoadedList:l};return{state:k,nextState:T}},t.changeSlide=function(e,t){var n,r,o,a,s=e.slidesToScroll,u=e.slidesToShow,l=e.slideCount,c=e.currentSlide,f=e.lazyLoad,d=e.infinite;if(n=l%s!==0?0:(l-c)%s,"previous"===t.message)a=c-(o=0===n?s:u-n),f&&!d&&(a=-1===(r=c-o)?l-1:r);else if("next"===t.message)a=c+(o=0===n?s:n),f&&!d&&(a=(c+s)%l+n);else if("dots"===t.message){if((a=t.index*t.slidesToScroll)===t.currentSlide)return null}else if("children"===t.message){if((a=t.index)===t.currentSlide)return null;if(d){var h=A(i({},e,{targetSlide:a}));a>t.currentSlide&&"left"===h?a-=l:a<t.currentSlide&&"right"===h&&(a+=l)}}else if("index"===t.message&&(a=Number(t.index))===t.currentSlide)return null;return a},t.keyHandler=function(e,t,n){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!t?"":37===e.keyCode?n?"next":"previous":39===e.keyCode?n?"previous":"next":""},t.swipeStart=function(e,t,n){return"IMG"===e.target.tagName&&e.preventDefault(),!t||!n&&-1!==e.type.indexOf("mouse")?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}},t.swipeMove=function(e,t){var n=t.scrolling,r=t.animating,o=t.vertical,a=t.swipeToSlide,s=t.verticalSwiping,u=t.rtl,l=t.currentSlide,c=t.edgeFriction,f=t.edgeDragged,d=t.onEdge,h=t.swiped,m=t.swiping,g=t.slideCount,y=t.slidesToScroll,b=t.infinite,_=t.touchObject,S=t.swipeEvent,k=t.listHeight,T=t.listWidth;if(!n){if(r)return e.preventDefault();o&&a&&s&&e.preventDefault();var A=void 0,O={},x=E(t);_.curX=e.touches?e.touches[0].pageX:e.clientX,_.curY=e.touches?e.touches[0].pageY:e.clientY,_.swipeLength=Math.round(Math.sqrt(Math.pow(_.curX-_.startX,2)));var M=Math.round(Math.sqrt(Math.pow(_.curY-_.startY,2)));if(!s&&!m&&M>10)return{scrolling:!0};s&&(_.swipeLength=M);var L=(u?-1:1)*(_.curX>_.startX?1:-1);s&&(L=_.curY>_.startY?1:-1);var I=Math.ceil(g/y),D=p(t.touchObject,s),C=_.swipeLength;return b||(0===l&&"right"===D||l+1>=I&&"left"===D||!v(t)&&"left"===D)&&(C=_.swipeLength*c,!1===f&&d&&(d(D),O.edgeDragged=!0)),!h&&S&&(S(D),O.swiped=!0),A=o?x+C*(k/T)*L:u?x-C*L:x+C*L,s&&(A=x+C*L),O=i({},O,{touchObject:_,swipeLeft:A,trackStyle:w(i({},t,{left:A}))}),Math.abs(_.curX-_.startX)<.8*Math.abs(_.curY-_.startY)?O:(_.swipeLength>10&&(O.swiping=!0,e.preventDefault()),O)}},t.swipeEnd=function(e,t){var n=t.dragging,r=t.swipe,o=t.touchObject,a=t.listWidth,s=t.touchThreshold,u=t.verticalSwiping,l=t.listHeight,c=t.currentSlide,f=t.swipeToSlide,d=t.scrolling,h=t.onSwipe;if(!n)return r&&e.preventDefault(),{};var v=u?l/s:a/s,m=p(o,u),b={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(d)return b;if(!o.swipeLength)return b;if(o.swipeLength>v){e.preventDefault(),h&&h(m);var w=void 0,S=void 0;switch(m){case"left":case"up":S=c+y(t),w=f?g(t,S):S,b.currentDirection=0;break;case"right":case"down":S=c-y(t),w=f?g(t,S):S,b.currentDirection=1;break;default:w=c}b.triggerSlideHandler=w}else{var k=E(t);b.trackStyle=_(i({},t,{left:k}))}return b},t.getNavigableIndexes=function(e){for(var t=e.infinite?2*e.slideCount:e.slideCount,n=e.infinite?-1*e.slidesToShow:0,i=e.infinite?-1*e.slidesToShow:0,r=[];n<t;)r.push(n),n=i+e.slidesToScroll,i+=Math.min(e.slidesToScroll,e.slidesToShow);return r}),g=t.checkNavigable=function(e,t){var n=m(e),i=0;if(t>n[n.length-1])t=n[n.length-1];else for(var r in n){if(t<n[r]){t=i;break}i=n[r]}return t},y=t.getSlideCount=function(e){var t=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var n=void 0,i=o.default.findDOMNode(e.listRef).querySelectorAll(".slick-slide");if(Array.from(i).every(function(i){if(e.vertical){if(i.offsetTop+h(i)/2>-1*e.swipeLeft)return n=i,!1}else if(i.offsetLeft-t+d(i)/2>-1*e.swipeLeft)return n=i,!1;return!0}),!n)return 0;var r=!0===e.rtl?e.slideCount-e.currentSlide:e.currentSlide;return Math.abs(n.dataset.index-r)||1}return e.slidesToScroll},b=t.checkSpecKeys=function(e,t){return t.reduce(function(t,n){return t&&e.hasOwnProperty(n)},!0)?null:console.error("Keys Missing:",e)},w=t.getTrackCSS=function(e){b(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var t=void 0,n=void 0,r=e.slideCount+2*e.slidesToShow;e.vertical?n=r*e.slideHeight:t=T(e)*e.slideWidth;var o={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var a=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",s=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",u=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";o=i({},o,{WebkitTransform:a,transform:s,msTransform:u})}else e.vertical?o.top=e.left:o.left=e.left;return e.fade&&(o={opacity:1}),t&&(o.width=t),n&&(o.height=n),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?o.marginTop=e.left+"px":o.marginLeft=e.left+"px"),o},_=t.getTrackAnimateCSS=function(e){b(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=w(e);return e.useTransform?(t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?t.transition="top "+e.speed+"ms "+e.cssEase:t.transition="left "+e.speed+"ms "+e.cssEase,t},E=t.getTrackLeft=function(e){if(e.unslick)return 0;b(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t,n,i=e.slideIndex,r=e.trackRef,a=e.infinite,s=e.centerMode,u=e.slideCount,l=e.slidesToShow,c=e.slidesToScroll,f=e.slideWidth,d=e.listWidth,h=e.variableWidth,p=e.slideHeight,v=e.fade,m=e.vertical;if(v||1===e.slideCount)return 0;var g=0;if(a?(g=-S(e),u%c!==0&&i+c>u&&(g=-(i>u?l-(i-u):u%c)),s&&(g+=parseInt(l/2))):(u%c!==0&&i+c>u&&(g=l-u%c),s&&(g=parseInt(l/2))),t=m?i*p*-1+g*p:i*f*-1+g*f,!0===h){var y,w=o.default.findDOMNode(r);if(y=i+S(e),t=(n=w&&w.childNodes[y])?-1*n.offsetLeft:0,!0===s){y=a?i+S(e):i,n=w&&w.children[y],t=0;for(var _=0;_<y;_++)t-=w&&w.children[_]&&w.children[_].offsetWidth;t-=parseInt(e.centerPadding),t+=n&&(d-n.offsetWidth)/2}}return t},S=t.getPreClones=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)},k=t.getPostClones=function(e){return e.unslick||!e.infinite?0:e.slideCount},T=t.getTotalSlides=function(e){return 1===e.slideCount?1:S(e)+e.slideCount+k(e)},A=t.siblingDirection=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+O(e)?"left":"right":e.targetSlide<e.currentSlide-x(e)?"right":"left"},O=t.slidesOnRight=function(e){var t=e.slidesToShow,n=e.centerMode,i=e.rtl,r=e.centerPadding;if(n){var o=(t-1)/2+1;return parseInt(r)>0&&(o+=1),i&&t%2===0&&(o+=1),o}return i?0:t-1},x=t.slidesOnLeft=function(e){var t=e.slidesToShow,n=e.centerMode,i=e.rtl,r=e.centerPadding;if(n){var o=(t-1)/2+1;return parseInt(r)>0&&(o+=1),i||t%2!==0||(o+=1),o}return i?t-1:0};t.canUseDOM=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}},342:function(e,t,n){(function(t){var n;n=function(){"use strict";var e="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var r=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},o=function(e){return Object(r(e))},a={}.hasOwnProperty,s=function(e,t){return a.call(e,t)},u=i(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),l=(u.version,i(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),c=i(function(e){var t=l["__core-js_shared__"]||(l["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:u.version,mode:"pure",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})}),f=0,d=Math.random(),h=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++f+d).toString(36))},p=c("keys"),m=function(e){return p[e]||(p[e]=h(e))},g=m("IE_PROTO"),y=Object.prototype,b=Object.getPrototypeOf||function(e){return e=o(e),s(e,g)?e[g]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?y:null},w=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},_=function(e,t,n){if(w(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},E=function(e){return"object"===typeof e?null!==e:"function"===typeof e},S=function(e){if(!E(e))throw TypeError(e+" is not an object!");return e},k=function(e){try{return!!e()}catch(t){return!0}},T=!k(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),A=l.document,O=E(A)&&E(A.createElement),x=function(e){return O?A.createElement(e):{}},M=!T&&!k(function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a}),L=function(e,t){if(!E(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!E(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!E(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!E(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},I=Object.defineProperty,D={f:T?Object.defineProperty:function(e,t,n){if(S(e),t=L(t,!0),S(n),M)try{return I(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},C=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},R=T?function(e,t,n){return D.f(e,t,C(1,n))}:function(e,t,n){return e[t]=n,e},N=function e(t,n,i){var r,o,a,c=t&e.F,f=t&e.G,d=t&e.S,h=t&e.P,p=t&e.B,v=t&e.W,m=f?u:u[n]||(u[n]={}),g=m.prototype,y=f?l:d?l[n]:(l[n]||{}).prototype;for(r in f&&(i=n),i)(o=!c&&y&&void 0!==y[r])&&s(m,r)||(a=o?y[r]:i[r],m[r]=f&&"function"!=typeof y[r]?i[r]:p&&o?_(a,l):v&&y[r]==a?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(a):h&&"function"==typeof a?_(Function.call,a):a,h&&((m.virtual||(m.virtual={}))[r]=a,t&e.R&&g&&!g[r]&&R(g,r,a)))};N.F=1,N.G=2,N.S=4,N.P=8,N.B=16,N.W=32,N.U=64,N.R=128;var P=N,j=function(e,t){var n=(u.Object||{})[e]||Object[e],i={};i[e]=t(n),P(P.S+P.F*k(function(){n(1)}),"Object",i)};j("getPrototypeOf",function(){return function(e){return b(o(e))}});var F,B=u.Object.getPrototypeOf,z=i(function(e){e.exports={default:B,__esModule:!0}}),U=n(z),G=n(i(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}})),W=Math.ceil,$=Math.floor,V=function(e){return isNaN(e=+e)?0:(e>0?$:W)(e)},H=R,Y={},K={}.toString,Z=function(e){return K.call(e).slice(8,-1)},X=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Z(e)?e.split(""):Object(e)},q=function(e){return X(r(e))},Q=Math.min,J=function(e){return e>0?Q(V(e),9007199254740991):0},ee=Math.max,te=Math.min,ne=(F=!1,function(e,t,n){var i,r=q(e),o=J(r.length),a=function(e,t){return(e=V(e))<0?ee(e+t,0):te(e,t)}(n,o);if(F&&t!=t){for(;o>a;)if((i=r[a++])!=i)return!0}else for(;o>a;a++)if((F||a in r)&&r[a]===t)return F||a||0;return!F&&-1}),ie=m("IE_PROTO"),re=function(e,t){var n,i=q(e),r=0,o=[];for(n in i)n!=ie&&s(i,n)&&o.push(n);for(;t.length>r;)s(i,n=t[r++])&&(~ne(o,n)||o.push(n));return o},oe="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ae=Object.keys||function(e){return re(e,oe)},se=T?Object.defineProperties:function(e,t){S(e);for(var n,i=ae(t),r=i.length,o=0;r>o;)D.f(e,n=i[o++],t[n]);return e},ue=l.document,le=ue&&ue.documentElement,ce=m("IE_PROTO"),fe=function(){},de=function(){var e,t=x("iframe"),n=oe.length;for(t.style.display="none",le.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),de=e.F;n--;)delete de.prototype[oe[n]];return de()},he=Object.create||function(e,t){var n;return null!==e?(fe.prototype=S(e),n=new fe,fe.prototype=null,n[ce]=e):n=de(),void 0===t?n:se(n,t)},pe=i(function(e){var t=c("wks"),n=l.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:h)("Symbol."+e))}).store=t}),ve=D.f,me=pe("toStringTag"),ge=function(e,t,n){e&&!s(e=n?e:e.prototype,me)&&ve(e,me,{configurable:!0,value:t})},ye={};R(ye,pe("iterator"),function(){return this});var be,we=function(e,t,n){e.prototype=he(ye,{next:C(1,n)}),ge(e,t+" Iterator")},_e=pe("iterator"),Ee=!([].keys&&"next"in[].keys()),Se=function(){return this},ke=function(e,t,n,i,r,o,a){we(n,t,i);var s,u,l,c=function(e){if(!Ee&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",d="values"==r,h=!1,p=e.prototype,v=p[_e]||p["@@iterator"]||r&&p[r],m=v||c(r),g=r?d?c("entries"):m:void 0,y="Array"==t&&p.entries||v;if(y&&(l=b(y.call(new e)))!==Object.prototype&&l.next&&ge(l,f,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(Ee||h||!p[_e])&&R(p,_e,m),Y[t]=m,Y[f]=Se,r)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:g},a)for(u in s)u in p||H(p,u,s[u]);else P(P.P+P.F*(Ee||h),t,s);return s},Te=(be=!0,function(e,t){var n,i,o=String(r(e)),a=V(t),s=o.length;return a<0||a>=s?be?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?be?o.charAt(a):n:be?o.slice(a,a+2):i-56320+(n-55296<<10)+65536});ke(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Te(t,n),this._i+=e.length,{value:e,done:!1})});var Ae=function(e,t){return{value:t,done:!!e}};ke(Array,"Array",function(e,t){this._t=q(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Ae(1)):Ae(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),Y.Arguments=Y.Array;for(var Oe=pe("toStringTag"),xe="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Me=0;Me<xe.length;Me++){var Le=xe[Me],Ie=l[Le],De=Ie&&Ie.prototype;De&&!De[Oe]&&R(De,Oe,Le),Y[Le]=Y.Array}var Ce={f:pe},Re=Ce.f("iterator"),Ne=i(function(e){e.exports={default:Re,__esModule:!0}});n(Ne);var Pe=i(function(e){var t=h("meta"),n=D.f,i=0,r=Object.isExtensible||function(){return!0},o=!k(function(){return r(Object.preventExtensions({}))}),a=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},u=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!E(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,t)){if(!r(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!s(e,t)){if(!r(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&u.NEED&&r(e)&&!s(e,t)&&a(e),e}}}),je=(Pe.KEY,Pe.NEED,Pe.fastKey,Pe.getWeak,Pe.onFreeze,D.f),Fe=function(e){var t=u.Symbol||(u.Symbol={});"_"==e.charAt(0)||e in t||je(t,e,{value:Ce.f(e)})},Be={f:Object.getOwnPropertySymbols},ze={f:{}.propertyIsEnumerable},Ue=Array.isArray||function(e){return"Array"==Z(e)},Ge=oe.concat("length","prototype"),We={f:Object.getOwnPropertyNames||function(e){return re(e,Ge)}},$e=We.f,Ve={}.toString,He="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ye={f:function(e){return He&&"[object Window]"==Ve.call(e)?function(e){try{return $e(e)}catch(t){return He.slice()}}(e):$e(q(e))}},Ke=Object.getOwnPropertyDescriptor,Ze={f:T?Ke:function(e,t){if(e=q(e),t=L(t,!0),M)try{return Ke(e,t)}catch(n){}if(s(e,t))return C(!ze.f.call(e,t),e[t])}},Xe=Pe.KEY,qe=Ze.f,Qe=D.f,Je=Ye.f,et=l.Symbol,tt=l.JSON,nt=tt&&tt.stringify,it=pe("_hidden"),rt=pe("toPrimitive"),ot={}.propertyIsEnumerable,at=c("symbol-registry"),st=c("symbols"),ut=c("op-symbols"),lt=Object.prototype,ct="function"==typeof et,ft=l.QObject,dt=!ft||!ft.prototype||!ft.prototype.findChild,ht=T&&k(function(){return 7!=he(Qe({},"a",{get:function(){return Qe(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=qe(lt,t);i&&delete lt[t],Qe(e,t,n),i&&e!==lt&&Qe(lt,t,i)}:Qe,pt=function(e){var t=st[e]=he(et.prototype);return t._k=e,t},vt=ct&&"symbol"==typeof et.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof et},mt=function(e,t,n){return e===lt&&mt(ut,t,n),S(e),t=L(t,!0),S(n),s(st,t)?(n.enumerable?(s(e,it)&&e[it][t]&&(e[it][t]=!1),n=he(n,{enumerable:C(0,!1)})):(s(e,it)||Qe(e,it,C(1,{})),e[it][t]=!0),ht(e,t,n)):Qe(e,t,n)},gt=function(e,t){S(e);for(var n,i=function(e){var t=ae(e),n=Be.f;if(n)for(var i,r=n(e),o=ze.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}(t=q(t)),r=0,o=i.length;o>r;)mt(e,n=i[r++],t[n]);return e},yt=function(e){var t=ot.call(this,e=L(e,!0));return!(this===lt&&s(st,e)&&!s(ut,e))&&(!(t||!s(this,e)||!s(st,e)||s(this,it)&&this[it][e])||t)},bt=function(e,t){if(e=q(e),t=L(t,!0),e!==lt||!s(st,t)||s(ut,t)){var n=qe(e,t);return!n||!s(st,t)||s(e,it)&&e[it][t]||(n.enumerable=!0),n}},wt=function(e){for(var t,n=Je(q(e)),i=[],r=0;n.length>r;)s(st,t=n[r++])||t==it||t==Xe||i.push(t);return i},_t=function(e){for(var t,n=e===lt,i=Je(n?ut:q(e)),r=[],o=0;i.length>o;)!s(st,t=i[o++])||n&&!s(lt,t)||r.push(st[t]);return r};ct||(H((et=function(){if(this instanceof et)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0);return T&&dt&&ht(lt,e,{configurable:!0,set:function t(n){this===lt&&t.call(ut,n),s(this,it)&&s(this[it],e)&&(this[it][e]=!1),ht(this,e,C(1,n))}}),pt(e)}).prototype,"toString",function(){return this._k}),Ze.f=bt,D.f=mt,We.f=Ye.f=wt,ze.f=yt,Be.f=_t,Ce.f=function(e){return pt(pe(e))}),P(P.G+P.W+P.F*!ct,{Symbol:et});for(var Et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),St=0;Et.length>St;)pe(Et[St++]);for(var kt=ae(pe.store),Tt=0;kt.length>Tt;)Fe(kt[Tt++]);P(P.S+P.F*!ct,"Symbol",{for:function(e){return s(at,e+="")?at[e]:at[e]=et(e)},keyFor:function(e){if(!vt(e))throw TypeError(e+" is not a symbol!");for(var t in at)if(at[t]===e)return t},useSetter:function(){dt=!0},useSimple:function(){dt=!1}}),P(P.S+P.F*!ct,"Object",{create:function(e,t){return void 0===t?he(e):gt(he(e),t)},defineProperty:mt,defineProperties:gt,getOwnPropertyDescriptor:bt,getOwnPropertyNames:wt,getOwnPropertySymbols:_t}),tt&&P(P.S+P.F*(!ct||k(function(){var e=et();return"[null]"!=nt([e])||"{}"!=nt({a:e})||"{}"!=nt(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(E(t)||void 0!==e)&&!vt(e))return Ue(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!vt(t))return t}),i[1]=t,nt.apply(tt,i)}}),et.prototype[rt]||R(et.prototype,rt,et.prototype.valueOf),ge(et,"Symbol"),ge(Math,"Math",!0),ge(l.JSON,"JSON",!0),Fe("asyncIterator"),Fe("observable");var At=u.Symbol,Ot=i(function(e){e.exports={default:At,__esModule:!0}});n(Ot);var xt=i(function(e,t){t.__esModule=!0;var n=o(Ne),i=o(Ot),r="function"===typeof i.default&&"symbol"===typeof n.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===r(n.default)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)}}),Mt=n(xt),Lt=n(i(function(e,t){t.__esModule=!0;var n,i=(n=xt)&&n.__esModule?n:{default:n};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}})),It=function(e,t){if(S(e),!E(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},Dt={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=_(Function.call,Ze.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,i){return It(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:It};P(P.S,"Object",{setPrototypeOf:Dt.set});var Ct=u.Object.setPrototypeOf,Rt=i(function(e){e.exports={default:Ct,__esModule:!0}});n(Rt),P(P.S,"Object",{create:he});var Nt=u.Object,Pt=function(e,t){return Nt.create(e,t)},jt=i(function(e){e.exports={default:Pt,__esModule:!0}}),Ft=n(jt),Bt=n(i(function(e,t){t.__esModule=!0;var n=o(Rt),i=o(jt),r=o(xt);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,r.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}}));P(P.S+P.F*!T,"Object",{defineProperty:D.f});var zt=u.Object,Ut=function(e,t,n){return zt.defineProperty(e,t,n)},Gt=i(function(e){e.exports={default:Ut,__esModule:!0}}),Wt=n(Gt),$t=n(i(function(e,t){t.__esModule=!0;var n,i=(n=Gt)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()}));j("keys",function(){return function(e){return ae(o(e))}});var Vt=u.Object.keys,Ht=n(i(function(e){e.exports={default:Vt,__esModule:!0}})),Yt=Math.floor;P(P.S,"Number",{isInteger:function(e){return!E(e)&&isFinite(e)&&Yt(e)===e}});var Kt=u.Number.isInteger,Zt=n(i(function(e){e.exports={default:Kt,__esModule:!0}})),Xt="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",qt="["+Xt+"]",Qt=RegExp("^"+qt+qt+"*"),Jt=RegExp(qt+qt+"*$"),en=function(e,t,n){var i={},r=k(function(){return!!Xt[e]()||"\u200b\x85"!="\u200b\x85"[e]()}),o=i[e]=r?t(tn):Xt[e];n&&(i[n]=o),P(P.P+P.F*r,"String",i)},tn=en.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(Qt,"")),2&t&&(e=e.replace(Jt,"")),e},nn=en,rn=l.parseFloat,on=nn.trim,an=1/rn(Xt+"-0")!==-1/0?function(e){var t=on(String(e),3),n=rn(t);return 0===n&&"-"==t.charAt(0)?-0:n}:rn;P(P.S+P.F*(Number.parseFloat!=an),"Number",{parseFloat:an});var sn=u.Number.parseFloat,un=n(i(function(e){e.exports={default:sn,__esModule:!0}}));function ln(e){return"undefined"!==typeof e}function cn(e){return void 0===e||null===e}function fn(e){return Array.isArray(e)}function dn(e){return"function"===typeof e}function hn(e){return Object(e)===e&&"[object Object]"===String(e)&&!dn(e)&&!fn(e)}function pn(e){return"number"===typeof e}function vn(e){return Zt(e)}function mn(e){return fn(e)?0===e.length:hn(e)?0===Ht(e).length:!e}function gn(e){return e instanceof Event||(e&&e.originalEvent)instanceof Event}function yn(e){return"string"===typeof e||e instanceof String}function bn(e){return"boolean"===typeof e}function wn(e){return!!e&&("object"===("undefined"===typeof e?"undefined":Mt(e))||"function"===typeof e)&&"function"===typeof e.then}function _n(e){return cn(e)||bn(e)||yn(e)||pn(e)}function En(e){return!!("object"===("undefined"===typeof Node?"undefined":Mt(Node))?e instanceof Node:e&&"object"===("undefined"===typeof e?"undefined":Mt(e))&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName)}function Sn(e){return!!("object"===("undefined"===typeof HTMLElement?"undefined":Mt(HTMLElement))?e instanceof HTMLElement:e&&"object"===("undefined"===typeof e?"undefined":Mt(e))&&null!==e&&1===e.nodeType&&"string"===typeof e.nodeName)}function kn(e,t){if(!En(e)||!En(t))return!1;for(;t.parentNode;)if((t=t.parentNode)===e)return!0;return!1}function Tn(e){return e instanceof Error}function An(e,t){if(!yn(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+("undefined"===typeof e?"undefined":Mt(e)));return yn(t)?"["+(e=On.FORCE_GLOBAL_TAG?On.GLOBAL_TAG:e||On.GLOBAL_TAG)+"] > "+t:"["+On.GLOBAL_TAG+"] > "+e}var On=function(){function e(){G(this,e)}return $t(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,An(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log).call(console,An(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log).call(console,An(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log).call(console,An(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(An(t,n))}}]),e}();On.GLOBAL_TAG="chimee",On.FORCE_GLOBAL_TAG=!1,On.ENABLE_ERROR=!0,On.ENABLE_INFO=!0,On.ENABLE_WARN=!0,On.ENABLE_DEBUG=!0,On.ENABLE_VERBOSE=!0,i(function(t,n){!function(e,i){var r="model",o="name",a="type",s="vendor",u="version",l="mobile",c="tablet",f={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"===typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(e,t){for(var n,i,r,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(n=i=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(r=0;r<c.length;r++)s=a[++i],"object"===typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!==typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"===typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(f.has(t[n][i],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,u],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[o,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],u],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[o,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[o,u],[/(QQ)\/([\d\.]+)/i],[o,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[o,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[o,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[o],[/(LBBROWSER)/i],[o],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[o,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,u],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[u,d.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[r,s,[a,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[s,"Apple"],[a,c]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,r,[a,c]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[r,[s,"Amazon"],[a,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[r,d.str,h.device.amazon.model],[s,"Amazon"],[a,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,s,[a,l]],[/\((ip[honed|\s\w*]+);/i],[r,[s,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,r,[a,l]],[/\(bb10;\s(\w+)/i],[r,[s,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[r,[s,"Asus"],[a,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[r,"Xperia Tablet"],[a,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[r,[s,"Sony"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,r,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[r,[s,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[r,[s,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[s,d.str,h.device.sprint.vendor],[r,d.str,h.device.sprint.model],[a,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,r,[a,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[s,[r,/_/g," "],[a,l]],[/(nexus\s9)/i],[r,[s,"HTC"],[a,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[r,[s,"Huawei"],[a,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[s,r,[a,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[s,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[s,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[r,[s,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[s,"Motorola"],[a,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[s,f.trim],[r,f.trim],[a,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[r,/^/,"SmartTV"],[s,"Samsung"],[a,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[r,[s,"Sharp"],[a,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],r,[a,c]],[/smart-tv.+(samsung)/i],[s,[a,"smarttv"],r],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[s,"Samsung"],r,[a,l]],[/sie-(\w*)/i],[r,[s,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[s,"Nokia"],r,[a,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[r,[s,"Acer"],[a,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[r,[s,"LG"],[a,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],r,[a,c]],[/(lg) netcast\.tv/i],[s,r,[a,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[r,[s,"LG"],[a,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[s,"Lenovo"],[a,c]],[/linux;.+((jolla));/i],[s,r,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[s,r,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[s,r,[a,l]],[/crkey/i],[[r,"Chromecast"],[s,"Google"]],[/android.+;\s(glass)\s\d/i],[r,[s,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)\s/i],[r,[s,"Google"],[a,c]],[/android.+;\s(pixel xl|pixel)\s/i],[r,[s,"Google"],[a,l]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,l]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[r,[s,"Meizu"],[a,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[r,[s,"OnePlus"],[a,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[r,[s,"RCA"],[a,c]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[r,[s,"Dell"],[a,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[r,[s,"Verizon"],[a,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[s,"Barnes & Noble"],r,[a,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[r,[s,"NuVision"],[a,c]],[/android.+;\s(k88)\sbuild/i],[r,[s,"ZTE"],[a,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[r,[s,"Swiss"],[a,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[r,[s,"Swiss"],[a,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[r,[s,"Zeki"],[a,c]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[s,"Dragon Touch"],r,[a,c]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[r,[s,"Insignia"],[a,c]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[r,[s,"NextBook"],[a,c]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[s,"Voice"],r,[a,l]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[s,"LvTel"],r,[a,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[r,[s,"Envizen"],[a,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[r,[s,"MachSpeed"],[a,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[r,[s,"Rotor"],[a,c]],[/android.+(KS(.+))\s+build/i],[r,[s,"Amazon"],[a,c]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[s,r,[a,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,f.lowerize],s,r],[/(android[\w\.\s\-]{0,9});.+build/i],[r,[s,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[u,d.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[u,d.str,h.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[o,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[o,"Symbian"],u],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[o,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[o,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[o,u],[/(haiku)\s(\w+)/i],[o,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[o,u]]},v=function t(n,i){if("object"===typeof n&&(i=n,n=void 0),!(this instanceof t))return new t(n,i).getResult();var r=n||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=i?f.extend(p,i):p;return this.getBrowser=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return d.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};v.VERSION="0.7.18",v.BROWSER={NAME:o,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:r,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:o,VERSION:u},v.OS={NAME:o,VERSION:u},t.exports&&(n=t.exports=v),n.UAParser=v;var m=e&&(e.jQuery||e.Zepto);if("undefined"!==typeof m){var g=new v;m.ua=g.getResult(),m.ua.get=function(){return g.getUA()},m.ua.set=function(e){g.setUA(e);var t=g.getResult();for(var n in t)m.ua[n]=t[n]}}}("object"===typeof window?window:e)}).UAParser;var xn=function(e,t,n,i){try{return i?t(S(n)[0],n[1]):t(n)}catch(o){var r=e.return;throw void 0!==r&&S(r.call(e)),o}},Mn=pe("iterator"),Ln=Array.prototype,In=function(e){return void 0!==e&&(Y.Array===e||Ln[Mn]===e)},Dn=function(e,t,n){t in e?D.f(e,t,C(0,n)):e[t]=n},Cn=pe("toStringTag"),Rn="Arguments"==Z(function(){return arguments}()),Nn=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),Cn))?n:Rn?Z(t):"Object"==(i=Z(t))&&"function"==typeof t.callee?"Arguments":i},Pn=pe("iterator"),jn=u.getIteratorMethod=function(e){if(void 0!=e)return e[Pn]||e["@@iterator"]||Y[Nn(e)]},Fn=pe("iterator"),Bn=!1;try{[7][Fn]().return=function(){Bn=!0}}catch(_c){}var zn=function(e,t){if(!t&&!Bn)return!1;var n=!1;try{var i=[7],r=i[Fn]();r.next=function(){return{done:n=!0}},i[Fn]=function(){return r},e(i)}catch(_c){}return n};P(P.S+P.F*!zn(function(e){}),"Array",{from:function(e){var t,n,i,r,a=o(e),s="function"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,c=void 0!==l,f=0,d=jn(a);if(c&&(l=_(l,u>2?arguments[2]:void 0,2)),void 0==d||s==Array&&In(d))for(n=new s(t=J(a.length));t>f;f++)Dn(n,f,c?l(a[f],f):a[f]);else for(r=d.call(a),n=new s;!(i=r.next()).done;f++)Dn(n,f,c?xn(r,l,[i.value,f],!0):i.value);return n.length=f,n}});var Un=u.Array.from,Gn=i(function(e){e.exports={default:Un,__esModule:!0}}),Wn=n(Gn),$n=n(i(function(e,t){t.__esModule=!0;var n,i=(n=Gn)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}})),Vn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t,n){e[t]=n};return function n(i,r,o){if(fn(i)||hn(i)){for(var a in r=_n(r)?hn(i)?{}:[]:r,i)t(r,a,n(i[a],r[a],a));return r}return e(i,r,o)}}(function(e){return e});function Hn(e){if(_n(e))throw new TypeError("deepClone only accept non primitive type");return Vn(e)}function Yn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var i=t.length-1;i>-1;i--)if(_n(t[i]))throw new TypeError("deepAssign only accept non primitive type");var r=t.shift();return t.forEach(function(e){return Vn(e,r)}),r}function Kn(e,t){return e.replace(/(^|[^a-zA-Z]+)([a-zA-Z])/g,function(e,n,i,r){return t||0!==r?i.toUpperCase():i.toLowerCase()})}function Zn(e,t){return e.bind?e.bind(t):e.apply?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(t,i)}:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.call.apply(e,[t].concat($n(i)))}}function Xn(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var qn,Qn,Jn,ei=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e},ti=i(function(e){var t={},n={},i=e.exports=function(e,i,r,o,a){var s,u,l,c,f=a?function(){return e}:jn(e),d=_(r,o,i?2:1),h=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(In(f)){for(s=J(e.length);s>h;h++)if((c=i?d(S(u=e[h])[0],u[1]):d(e[h]))===t||c===n)return c}else for(l=f.call(e);!(u=l.next()).done;)if((c=xn(l,d,u.value,i))===t||c===n)return c};i.BREAK=t,i.RETURN=n}),ni=pe("species"),ii=function(e,t){var n,i=S(e).constructor;return void 0===i||void 0==(n=S(i)[ni])?t:w(n)},ri=l.process,oi=l.setImmediate,ai=l.clearImmediate,si=l.MessageChannel,ui=l.Dispatch,li=0,ci={},fi=function(){var e=+this;if(ci.hasOwnProperty(e)){var t=ci[e];delete ci[e],t()}},di=function(e){fi.call(e.data)};oi&&ai||(oi=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return ci[++li]=function(){!function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},qn(li),li},ai=function(e){delete ci[e]},"process"==Z(ri)?qn=function(e){ri.nextTick(_(fi,e,1))}:ui&&ui.now?qn=function(e){ui.now(_(fi,e,1))}:si?(Jn=(Qn=new si).port2,Qn.port1.onmessage=di,qn=_(Jn.postMessage,Jn,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(qn=function(e){l.postMessage(e+"","*")},l.addEventListener("message",di,!1)):qn="onreadystatechange"in x("script")?function(e){le.appendChild(x("script")).onreadystatechange=function(){le.removeChild(this),fi.call(e)}}:function(e){setTimeout(_(fi,e,1),0)});var hi={set:oi,clear:ai},pi=hi.set,vi=l.MutationObserver||l.WebKitMutationObserver,mi=l.process,gi=l.Promise,yi="process"==Z(mi);function bi(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=w(t),this.reject=w(n)}var wi,_i,Ei,Si,ki={f:function(e){return new bi(e)}},Ti=function(e){try{return{e:!1,v:e()}}catch(_c){return{e:!0,v:_c}}},Ai=l.navigator,Oi=Ai&&Ai.userAgent||"",xi=function(e,t){if(S(e),E(t)&&t.constructor===e)return t;var n=ki.f(e);return(0,n.resolve)(t),n.promise},Mi=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:R(e,i,t[i]);return e},Li=pe("species"),Ii=function(e){var t="function"==typeof u[e]?u[e]:l[e];T&&t&&!t[Li]&&D.f(t,Li,{configurable:!0,get:function(){return this}})},Di=hi.set,Ci=function(){var e,t,n,i=function(){var i,r;for(yi&&(i=mi.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(_c){throw e?n():t=void 0,_c}}t=void 0,i&&i.enter()};if(yi)n=function(){mi.nextTick(i)};else if(!vi||l.navigator&&l.navigator.standalone)if(gi&&gi.resolve){var r=gi.resolve(void 0);n=function(){r.then(i)}}else n=function(){pi.call(l,i)};else{var o=!0,a=document.createTextNode("");new vi(i).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}(),Ri=l.TypeError,Ni=l.process,Pi=Ni&&Ni.versions,ji=Pi&&Pi.v8||"",Fi=l.Promise,Bi="process"==Nn(Ni),zi=function(){},Ui=_i=ki.f,Gi=!!function(){try{var e=Fi.resolve(1),t=(e.constructor={})[pe("species")]=function(e){e(zi,zi)};return(Bi||"function"==typeof PromiseRejectionEvent)&&e.then(zi)instanceof t&&0!==ji.indexOf("6.6")&&-1===Oi.indexOf("Chrome/66")}catch(_c){}}(),Wi=function(e){var t;return!(!E(e)||"function"!=typeof(t=e.then))&&t},$i=function(e,t){if(!e._n){e._n=!0;var n=e._c;Ci(function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a,s=r?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(r||(2==e._h&&Yi(e),e._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),a=!0)),n===t.promise?l(Ri("Promise-chain cycle")):(o=Wi(n))?o.call(n,u,l):u(n)):l(i)}catch(_c){c&&!a&&c.exit(),l(_c)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&Vi(e)})}},Vi=function(e){Di.call(l,function(){var t,n,i,r=e._v,o=Hi(e);if(o&&(t=Ti(function(){Bi?Ni.emit("unhandledRejection",r,e):(n=l.onunhandledrejection)?n({promise:e,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=Bi||Hi(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},Hi=function(e){return 1!==e._h&&0===(e._a||e._c).length},Yi=function(e){Di.call(l,function(){var t;Bi?Ni.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},Ki=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),$i(t,!0))},Zi=function e(t){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw Ri("Promise can't be resolved itself");(n=Wi(t))?Ci(function(){var r={_w:i,_d:!1};try{n.call(t,_(e,r,1),_(Ki,r,1))}catch(_c){Ki.call(r,_c)}}):(i._v=t,i._s=1,$i(i,!1))}catch(_c){Ki.call({_w:i,_d:!1},_c)}}};Gi||(Fi=function(e){ei(this,Fi,"Promise","_h"),w(e),wi.call(this);try{e(_(Zi,this,1),_(Ki,this,1))}catch(t){Ki.call(this,t)}},(wi=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Mi(Fi.prototype,{then:function(e,t){var n=Ui(ii(this,Fi));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=Bi?Ni.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&$i(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Ei=function(){var e=new wi;this.promise=e,this.resolve=_(Zi,e,1),this.reject=_(Ki,e,1)},ki.f=Ui=function(e){return e===Fi||e===Si?new Ei(e):_i(e)}),P(P.G+P.W+P.F*!Gi,{Promise:Fi}),ge(Fi,"Promise"),Ii("Promise"),Si=u.Promise,P(P.S+P.F*!Gi,"Promise",{reject:function(e){var t=Ui(this);return(0,t.reject)(e),t.promise}}),P(P.S+!0*P.F,"Promise",{resolve:function(e){return xi(this===Si?Fi:this,e)}}),P(P.S+P.F*!(Gi&&zn(function(e){Fi.all(e).catch(zi)})),"Promise",{all:function(e){var t=this,n=Ui(t),i=n.resolve,r=n.reject,o=Ti(function(){var n=[],o=0,a=1;ti(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=Ui(t),i=n.reject,r=Ti(function(){ti(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),P(P.P+P.R,"Promise",{finally:function(e){var t=ii(this,u.Promise||l.Promise),n="function"==typeof e;return this.then(n?function(n){return xi(t,e()).then(function(){return n})}:e,n?function(n){return xi(t,e()).then(function(){throw n})}:e)}}),P(P.S,"Promise",{try:function(e){var t=ki.f(this),n=Ti(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var Xi=u.Promise,qi=n(i(function(e){e.exports={default:Xi,__esModule:!0}})),Qi="undefined"!==typeof window&&"[object Object]"!==Object.prototype.toString.call(window);function Ji(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return+e-+t};return Ht(e).sort(t).reduce(function(t,n){return t.concat(e[n])},[])}function er(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new qi(function(t,i){!function r(o){if(!(o>=e.length)){var a=dn(e[o])?e[o].apply(e,$n(n)):e[o];return!1===a?i("stop"):qi.resolve(a).then(function(){return r(o+1)}).catch(function(e){return i(e||"stop")})}t()}(0)})}function tr(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function t(i){return i>=e.length||!1!==(dn(e[i])?e[i].apply(e,$n(n)):e[i])&&t(++i)}(0)}function nr(e,t){var n=t,i=(e=""+(e||"")).length;return(((t=(t||i)-i)>0?e.repeat?"0".repeat(t):new Array(t+1).join("0"):"")+e).slice(0,n)}function ir(e){var t=Math.floor(e/3600);e=Math.floor(e%3600);var n=nr(Math.floor(e/60),2),i=nr(e=Math.floor(e%60),2);return t>=1?t+":"+n+":"+i:n+":"+i}function rr(e){try{return window.localStorage.getItem(e)}catch(_c){try{var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return fn(t)?unescape(t[2]):""}catch(_c){return""}}}function or(e,t){try{window.localStorage.setItem(e,t)}catch(_c){var n=new Date;n.setTime(n.getTime()+2592e7);try{document.cookie=e+"="+escape(t)+";expires="+n.toUTCString()+";path=/;"}catch(_c){console.error(_c)}}}Qi&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),Qi&&(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame);var ar=Object.assign,sr=!ar||k(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=ar({},e)[n]||Object.keys(ar({},t)).join("")!=i})?function(e,t){for(var n=o(e),i=arguments.length,r=1,a=Be.f,s=ze.f;i>r;)for(var u,l=X(arguments[r++]),c=a?ae(l).concat(a(l)):ae(l),f=c.length,d=0;f>d;)s.call(l,u=c[d++])&&(n[u]=l[u]);return n}:ar;P(P.S+P.F,"Object",{assign:sr});var ur=u.Object.assign,lr=n(i(function(e){e.exports={default:ur,__esModule:!0}})),cr=Ft(null);function fr(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++cr.count);var i=n+"_"+t,r=cr[i];return r||(r=cr[i]=[]),r}function dr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];dn(i)&&!r&&(r=i,i=void 0);var o=[n,void 0,i];i&&!r&&(r=function(){hr(e,t,n,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(e,o)}),r&&(o[1]=r),fr(e,t).push(o)}function hr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=fr(e,t);if(n||i){var o=-1,a=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,a=e[1],!0}),-1!==o&&r.splice(o,1),a}r.length=0}cr.count=0;var pr=function(){function e(t,n){var i=this;if(G(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==("undefined"===typeof t?"undefined":Mt(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}return $t(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return dr(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return hr(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return function(e,t,n){var i=Ft(null);i.type=t,i.target=e,n&&lr(i,hn(n)?n:{data:n}),fr(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[i])})}(this.__target,e,{data:t}),this}}]),e}(),vr=Qi?document.createElement("div"):{},mr="innerText";"textContent"in vr&&(mr="textContent");var gr=Array.prototype;function yr(e,t){return e.getAttribute(t)}function br(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n)}function wr(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.add(t)});else{var i=" "+(e.className||"")+" ";n.forEach(function(e){-1===i.indexOf(" "+e+" ")&&(i+=" "+e)}),e.className=i.trim()}}}function _r(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.remove(t)});else{var i=" "+e.className+" ";n.forEach(function(e){for(var t=" "+e+" ";-1!==i.indexOf(t);)i=i.replace(t," ")}),e.className=i.trim()}}}var Er=!1;try{var Sr=Object.defineProperty({},"passive",{get:function(){Er=!0}});Qi&&window.addEventListener("test",null,Sr)}catch(_c){console.error(_c)}function kr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==r&&!bn(r)&&Er&&(r={passive:!0}),i){var o=hr(e,t+"_once",n);o&&(n=o)}e.removeEventListener(t,n,r)}function Tr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==r&&!bn(r)&&Er&&(r={passive:!0}),i){var o=n;n=function(){for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];o.apply(this,s),kr(e,t,n,i,r)},dr(e,t+"_once",o,n)}e.addEventListener(t,n,r)}function Ar(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==r&&!bn(r)&&Er&&(r={passive:!0});var o=function(n){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],i=arguments[3],r=[];n&&r.push(e);for(;e&&e.parentNode!==t;)(e=e.parentNode)&&r.push(e);i&&r.push(t);return r}(n.target||n.srcElement,e,!0),o=Mr(t,e,!0),a=void 0;o.find?a=o.find(function(e){return r.find(function(t){return e===t})}):o.forEach(function(e){return!a&&r.forEach(function(t){a||e!==t||(a=t)})}),a&&i.apply(a,arguments)};dr(e,n+"_delegate_"+t,i,o),e.addEventListener(n,o,r)}function Or(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,null))[t]||e.style[t]}function xr(e,t,n){if(hn(t))for(var i in t)xr(e,i,t[i]);else e.style[t]=n}function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],i=t.querySelectorAll(e);return n?Wn(i):i}var Lr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;G(this,e);this.selector=t;var i=void 0;t&&t.constructor===NodeList?i=Wn(t):fn(t)?i=t:yn(t)?0===t.indexOf("<")?(vr.innerHTML=t,i=Mr("*",vr,!0)):i=Mr(t,n,!0):i=[t],lr(this,i),this.length=i.length}return $t(e,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return gr.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return gr.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ir(gr.splice.apply(this,t))}},{key:"find",value:function(e){var t=[];this.each(function(n){t=t.concat(Mr(e,n,!0))});var n=Ir(t);return n.parent=this,n.selector=e,n}},{key:"append",value:function(e){var t=Ir(e),n=this[0];return t.each(function(e){return n.appendChild(e)}),this}},{key:"appendTo",value:function(e){return Ir(e).append(this),this}},{key:"text",value:function(e){return 0===arguments.length?this[0][mr]:this.each(function(t){t[mr]=e})}},{key:"html",value:function(e){return 0===arguments.length?this[0].innerHTML:this.each(function(t){t.innerHTML=e})}},{key:"attr",value:function(e,t){return 1===arguments.length?yr(this[0],e):this.each(function(n){return br(n,e,t)})}},{key:"data",value:function(e,t){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[e]:this.each(function(n){(n.dataset||(n.dataset={}))[e]=t})}},{key:"css",value:function(e,t){return 1!==arguments.length||hn(e)?this.each(function(n){return xr(n,e,t)}):Or(this[0],e)}},{key:"addClass",value:function(e){return this.each(function(t){return wr(t,e)})}},{key:"removeClass",value:function(e){return this.each(function(t){return _r(t,e)})}},{key:"hasClass",value:function(e){return t=this[0],new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t.className);var t}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Tr(r,e,t,n,i)})}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return kr(r,e,t,n,i)})}},{key:"delegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Ar(r,e,t,n,i)})}},{key:"undelegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==r&&!bn(r)&&Er&&(r={passive:!0});var o=hr(e,n+"_delegate_"+t,i);o&&e.removeEventListener(n,o,r)}(r,e,t,n,i)})}},{key:"remove",value:function(){return this.each(function(e){return function(e){e.parentNode.removeChild(e)}(e)})}}]),e}();function Ir(e,t){return e.constructor===Lr?e:new Lr(e,t)}P(P.S,"Number",{isNaN:function(e){return e!=e}});var Dr=u.Number.isNaN,Cr=n(i(function(e){e.exports={default:Dr,__esModule:!0}})),Rr=l.Reflect,Nr=Rr&&Rr.ownKeys||function(e){var t=We.f(S(e)),n=Be.f;return n?t.concat(n(e)):t};P(P.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=q(e),r=Ze.f,o=Nr(i),a={},s=0;o.length>s;)void 0!==(n=r(i,t=o[s++]))&&Dn(a,t,n);return a}});var Pr=u.Object.getOwnPropertyDescriptors,jr=n(i(function(e){e.exports={default:Pr,__esModule:!0}})),Fr=u.Object.getOwnPropertySymbols,Br=n(i(function(e){e.exports={default:Fr,__esModule:!0}}));j("getOwnPropertyNames",function(){return Ye.f});var zr=u.Object,Ur=function(e){return zr.getOwnPropertyNames(e)},Gr=n(i(function(e){e.exports={default:Ur,__esModule:!0}})),Wr=Ze.f;j("getOwnPropertyDescriptor",function(){return function(e,t){return Wr(q(e),t)}});var $r=u.Object,Vr=function(e,t){return $r.getOwnPropertyDescriptor(e,t)},Hr=i(function(e){e.exports={default:Vr,__esModule:!0}}),Yr=n(Hr);function Kr(e,t){return e.bind?e.bind(t):e.apply?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(t,i)}:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.call.apply(e,[t].concat($n(i)))}}function Zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.throwError,r=void 0!==i&&i,o=n.backup;if(yn(t)&&(t=t.split(".")),!fn(t))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var a=[],s=e,u=0,l=t.length;u<l;u++){var c=t[u];if(cn(s)){if(r)throw new Error("obj"+(a.length>0?"."+a.join("."):" itself")+" is "+s);return o}s=s[c],a.push(c)}return s}var Xr=pe("iterator"),qr=u.isIterable=function(e){var t=Object(e);return void 0!==t[Xr]||"@@iterator"in t||Y.hasOwnProperty(Nn(t))},Qr=i(function(e){e.exports={default:qr,__esModule:!0}});n(Qr);var Jr=u.getIterator=function(e){var t=jn(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return S(t.call(e))},eo=i(function(e){e.exports={default:Jr,__esModule:!0}}),to=n(eo),no=n(i(function(e,t){t.__esModule=!0;var n=r(Qr),i=r(eo);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,u=(0,i.default)(e);!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,a=l}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()})),io=pe("species"),ro=function(e,t){return new(function(e){var t;return Ue(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Ue(t.prototype)||(t=void 0),E(t)&&null===(t=t[io])&&(t=void 0)),void 0===t?Array:t}(e))(t)},oo=function(e,t){var n=1==e,i=2==e,r=3==e,a=4==e,s=6==e,u=5==e||s,l=t||ro;return function(t,c,f){for(var d,h,p=o(t),v=X(p),m=_(c,f,3),g=J(v.length),y=0,b=n?l(t,g):i?l(t,0):void 0;g>y;y++)if((u||y in v)&&(h=m(d=v[y],y,p),e))if(n)b[y]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return y;case 2:b.push(d)}else if(a)return!1;return s?-1:r||a?a:b}},ao=function(e,t){if(!E(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},so=Pe.getWeak,uo=oo(5),lo=oo(6),co=0,fo=function(e){return e._l||(e._l=new ho)},ho=function(){this.a=[]},po=function(e,t){return uo(e.a,function(e){return e[0]===t})};ho.prototype={get:function(e){var t=po(this,e);if(t)return t[1]},has:function(e){return!!po(this,e)},set:function(e,t){var n=po(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=lo(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var vo={getConstructor:function(e,t,n,i){var r=e(function(e,o){ei(e,r,t,"_i"),e._t=t,e._i=co++,e._l=void 0,void 0!=o&&ti(o,n,e[i],e)});return Mi(r.prototype,{delete:function(e){if(!E(e))return!1;var n=so(e);return!0===n?fo(ao(this,t)).delete(e):n&&s(n,this._i)&&delete n[this._i]},has:function(e){if(!E(e))return!1;var n=so(e);return!0===n?fo(ao(this,t)).has(e):n&&s(n,this._i)}}),r},def:function(e,t,n){var i=so(S(t),!0);return!0===i?fo(e).set(t,n):i[e._i]=n,e},ufstore:fo},mo=D.f,go=oo(0),yo=function(e,t,n,i,r,o){var a=l[e],s=a,u=r?"set":"add",c=s&&s.prototype,f={};return T&&"function"==typeof s&&(o||c.forEach&&!k(function(){(new s).entries().next()}))?(s=t(function(t,n){ei(t,s,e,"_c"),t._c=new a,void 0!=n&&ti(n,r,t[u],t)}),go("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in c&&(!o||"clear"!=e)&&R(s.prototype,e,function(n,i){if(ei(this,s,e),!t&&o&&!E(n))return"get"==e&&void 0;var r=this._c[e](0===n?0:n,i);return t?this:r})}),o||mo(s.prototype,"size",{get:function(){return this._c.size}})):(s=i.getConstructor(t,e,r,u),Mi(s.prototype,n),Pe.NEED=!0),ge(s,e),f[e]=s,P(P.G+P.W+P.F,f),o||i.setStrong(s,e,r),s},bo=(i(function(e){var t,n=oo(0),i=Pe.getWeak,r=Object.isExtensible,o=vo.ufstore,a={},s=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},u={get:function(e){if(E(e)){var t=i(e);return!0===t?o(ao(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return vo.def(ao(this,"WeakMap"),e,t)}},l=e.exports=yo("WeakMap",s,u,vo,!0,!0);k(function(){return 7!=(new l).set((Object.freeze||Object)(a),7).get(a)})&&(t=vo.getConstructor(s,"WeakMap"),sr(t.prototype,u),Pe.NEED=!0,n(["delete","has","get","set"],function(e){var n=l.prototype,i=n[e];H(n,e,function(n,o){if(E(n)&&!r(n)){this._f||(this._f=new t);var a=this._f[e](n,o);return"set"==e?this:a}return i.call(this,n,o)})}))}),function(e){P(P.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})});bo("WeakMap");var wo=function(e){P(P.S,e,{from:function(e){var t,n,i,r,o=arguments[1];return w(this),(t=void 0!==o)&&w(o),void 0==e?new this:(n=[],t?(i=0,r=_(o,arguments[2],2),ti(e,!1,function(e){n.push(r(e,i++))})):ti(e,!1,n.push,n),new this(n))}})};wo("WeakMap");var _o=u.WeakMap,Eo=n(i(function(e){e.exports={default:_o,__esModule:!0}})),So=n(i(function(e,t){t.__esModule=!0;var n,i=(n=Gt)&&n.__esModule?n:{default:n};t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}})),ko=Pe.onFreeze;j("preventExtensions",function(e){return function(t){return e&&E(t)?e(ko(t)):t}});var To=u.Object.preventExtensions;n(i(function(e){e.exports={default:To,__esModule:!0}}));var Ao=Yr;function Oo(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],n=0,i=t.length;n<i;n++)if(e.hasOwnProperty(t[n]))return!0;return!1}function xo(e){return!!e&&(dn(e.get)||dn(e.set))&&bn(e.configurable)&&bn(e.enumerable)&&void 0===e.writable}function Mo(e){return!!e&&dn(e.initializer)&&bn(e.configurable)&&bn(e.enumerable)&&bn(e.writable)}function Lo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"You must pass me an array of function";if(!fn(e)||e.length<1)throw new TypeError(t);if(1===e.length){if(!dn(e[0]))throw new TypeError(t);return e[0]}return e.reduce(function(e,n){if(!dn(n)||!dn(e))throw new TypeError(t);return function(t){return Kr(n,this)(Kr(e,this)(t))}})}var Io=function(){var e=Gr,t=Br;return dn(t)?function(n){return Wn(e(n).concat(t(n)))}:e}(),Do=dn(jr)?jr:function(e){return Io(e).reduce(function(t,n){return t[n]=Ao(e,n),t},{})};function Co(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)throw new TypeError("You must pass in decorators in compressMultipleDecorators");return t.forEach(function(e){if(!dn(e))throw new TypeError('Decorators must be a function, but not "'+e+'" in '+("undefined"===typeof e?"undefined":Mt(e)))}),1===t.length?t[0]:function(e,n,i){return t.reduce(function(t,i){return i(e,n,t)},i)}}function Ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.get,n=e.set,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.preGet,o=void 0!==r&&r,a=i.preSet,s=void 0===a||a;if(!dn(t)&&!dn(n)&&!(fn(t)&&t.length>0)&&!(fn(n)&&n.length>0))throw new TypeError("@accessor need a getter or setter. If you don't need to add setter/getter. You should remove @accessor");var u="@accessor only accept function or array of function as getter/setter";return t=fn(t)?Lo(t,u):t,n=fn(n)?Lo(n,u):n,function(e,i,r){var a=r||{},u=a.configurable,l=void 0===u||u,c=a.enumerable,f=void 0===c||c,d=dn(t),h=dn(n),p=function(e){return d?Kr(t,this)(e):e},v=function(e){return h?Kr(n,this)(e):e};if(xo(r)){var m=r.get,g=r.set,y=dn(m),b=dn(g);return{get:y||d?function(){var e=this,t=Kr(p,this),n=function(){return y?Kr(m,e)():void 0};return(o?[t,n]:[n,t]).reduce(function(e,t){return t(e)},void 0)}:void 0,set:b||h?function(e){var t=this,n=Kr(v,this),i=function(e){return b?Kr(g,t)(e):e};return(s?[n,i]:[i,n]).reduce(function(e,t){return t(e)},e)}:void 0,configurable:l,enumerable:f}}if(Mo(r)){var w=r.initializer,_=void 0,E=!1;return{get:function(){var e=Kr(p,this);return E?e(_):(_=Kr(w,this)(),E=!0,e(_))},set:function(e){var t=Kr(v,this);return _=s?t(e):e,E=!0,s||t(_),_},configurable:l,enumerable:f}}var S=(r||{}).value;return{get:function(){return Kr(p,this)(S)},set:function(e){var t=Kr(v,this);return S=s?t(e):e,s||t(S),S},configurable:l,enumerable:f}}}function No(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("@before accept at least one parameter. If you don't need to preprocess before your function, do not add @before decorators");if(t.length>2&&Oo(t[2]))throw new Error("You may use @before straightly, @before return decorators, you should call it before you set it as decorator.");for(var i=t.length-1;i>-1;i--)if(!dn(t[i]))throw new TypeError("@before only accept function parameter");return function(e,n,i){var r=i||{},o=r.value,a=r.configurable,s=r.enumerable,u=r.writable;if(!dn(o))throw new TypeError('@before can only be used on function, please check the property "'+n+'" is a method or not.');return{value:function(){for(var e=this,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=t.reduce(function(t,n){var i=Kr(n,e).apply(void 0,$n(t));return void 0===i?t:fn(i)?i:[i]},i);return Kr(o,this).apply(void 0,$n(a))},configurable:a,enumerable:s,writable:u}}}function Po(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("@initialize accept at least one parameter. If you don't need to initialize your value, do not add @initialize.");if(t.length>2&&Oo(t[2]))throw new Error("You may use @initialize straightly, @initialize return decorators, you need to call it");var i=Lo(t,"@initialize only accept function parameter");return function(e,t,n){if(void 0===n)return{value:Kr(i,e)(),configurable:!0,writable:!0,enumerable:!0};if(xo(n)){var r=!1;return Ro({get:function(e){return r?e:Kr(i,this)(e)},set:n.set?function(e){return r=!0,e}:void 0})(e,t,n)}if(Mo(n)){var o=n.initializer;return{initializer:function(){return Kr(i,this)(Kr(o,this)())},configurable:n.configurable,writable:n.writable,enumerable:n.enumerable}}return{value:Kr(i,this)(n.value),writable:n.writable,configurable:n.configurable,enumerable:n.enumerable}}}var jo=Yr,Fo=Wt;function Bo(e,t,n,i,r,o){var a=n.configurable,s=n.enumerable,u=o.force,l=o.omit,c=jo(i,r);if(void 0!==c){if(l)return;if(!u)throw new Error('"'+t+'" is an existing property, if you want to override it, please set "force" true in @alias option.');if(!c.configurable)throw new Error('property "'+t+'" is unconfigurable.')}Fo(i,r,{get:function(){return e[t]},set:function(n){return e[t]=n,t},configurable:a,enumerable:s})}function zo(e,t,n){if(2===arguments.length?yn(e)&&(n=t,t=e,e=void 0):1===arguments.length&&(t=e,e=void 0),!yn(t))throw new TypeError("@alias need a string as a key to find the porperty to set alias on");var i="If you want to use @alias to set alias on other instance, you must pass in a legal instance";if(void 0!==e&&_n(e))throw new TypeError(i);var r=hn(n)?n:{force:!1,omit:!1},o=r.force,a=r.omit;return function(n,r,s){function u(e,t,n){var r=_n(e)?t:e,o=n.split("."),a=o.slice(-1),s=no(a,1)[0];if(_n(r=Zr(r,o.slice(0,-1),{throwError:!0})))throw new TypeError(i);return{target:r,name:s}}if(Mo(s=s||{value:void 0,configurable:!0,writable:!0,enumerable:!0}))return Po(function(n){var i=u(e,this,t),l=i.target,c=i.name;return Bo(this,r,s,l,c,{force:o,omit:a}),n})(n,r,s);if(xo(s)){var l=void 0,c=function(n){if(l)return n;var i=u(e,this,t),c=i.target,f=i.name;return Bo(this,r,s,c,f,{force:o,omit:a}),l=!0,n};return Ro({get:c,set:c})(n,r,s)}var f=u(e,n,t),d=f.target,h=f.name;return Bo(n,r,s,d,h,{force:o,omit:a}),s}}var Uo=Wt,Go=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.requirement,i=t.customArgs,r=void 0!==i&&i;return function(){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.exclude,u=void 0===s?[]:s,l=a.include,c=void 0===l?[]:l,f=a.construct,d=void 0!==f&&f,h=a.self,p=void 0!==h&&h;if(!fn(u))throw new TypeError("options.exclude must be an array");if(!fn(c))throw new TypeError("options.include must be an array");return function(t){var o=dn(t);if(!p&&!o)throw new TypeError("@"+e.name+"Class can only be used on class");if(p&&_n(t))throw new TypeError("@"+e.name+"Class must be used on non-primitive type value in 'self' mode");var a=p?t:t.prototype;if(cn(a))throw new Error("The prototype of the "+t.name+" is empty, please check it");var s=Do(a);Io(a).concat(c).forEach(function(t){var l=s[t];"constructor"===t&&!d||p&&o&&["name","length","prototype"].indexOf(t)>-1||u.indexOf(t)>-1||dn(n)&&!1===n(a,t,l,{self:p})||Uo(a,t,(r?e.apply(void 0,$n(i)):e)(a,t,l))})}}}($o,{requirement:function(e,t,n){return function(e){return!!e&&e.hasOwnProperty("value")&&bn(e.configurable)&&bn(e.enumerable)&&bn(e.writable)}(n)&&dn(n.value)}}),Wo=void 0;function $o(e,t,n){if(1===arguments.length)return Go()(e);var i=n||{},r=i.value,o=i.configurable;if(!dn(r))throw new TypeError('@autobind can only be used on functions, not "'+r+'" in '+("undefined"===typeof r?"undefined":Mt(r))+' on property "'+t+'"');var a,s=e.constructor;return{configurable:o,enumerable:!1,get:function(){var n=this,i=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.call.apply(r,[n].concat($n(t)))};return this===e?r:this.constructor!==s&&U(this).constructor===s?r:this.constructor!==s&&t in this.constructor.prototype?function(e,t){if("undefined"===typeof Eo)throw new Error("Using @autobind on "+t.name+"() requires WeakMap support due to its use of super."+t.name+"()");Wo||(Wo=new Eo),!1===Wo.has(e)&&Wo.set(e,new Eo);var n=Wo.get(e);return!1===n.has(t)&&n.set(t,Kr(t,e)),n.get(t)}(this,r):(Wt(this,t,{configurable:!0,writable:!0,enumerable:!1,value:i}),i)},set:(a=t,function(e){return Wt(this,a,{configurable:!0,writable:!0,enumerable:!0,value:e}),e})}}var Vo=Wt;function Ho(e,t,n){if(void 0===n)return{value:void 0,writable:!1,enumerable:!1,configurable:!1};if(n.enumerable=!1,n.configurable=!1,xo(n)){var i=n.get;if(n.set=void 0,!dn(i))return;return{get:function(){var e=Kr(i,this)();return Vo(this,t,{value:e,writable:!1,configurable:!1,enumerable:!1}),e},set:void 0,configurable:!1,enumerable:!1}}return n.writable=!1,n}var Yo=Yr,Ko=Wt;function Zo(e,t,n){return void 0===n?{value:void 0,enumerable:!1,configurable:!0,writable:!0}:(n.enumerable=!1,n)}var Xo=Wt,qo=Yr;function Qo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.self,r=void 0!==i&&i,o=n.omit,a=void 0!==o&&o,s=dn(t);if(s||fn(t)){if(!dn(e))throw new TypeError("If you want to decorator class, you must pass it a legal class");if(s)t(e);else for(var u=0,l=t.length;u<l;u++){var c=t[u];if(!dn(c))throw new TypeError("If you want to decorate an class, you must pass it function or array of function");c(e)}return e}if(!r&&!dn(e))throw new TypeError("applyDecorators only accept class as first arguments. If you want to modify instance, you should set options.self true.");if(r&&_n(e))throw new TypeError("We can't apply docorators on a primitive value, even in self mode");if(!hn(t))throw new TypeError("applyDecorators only accept object as second arguments");var f=r?e:e.prototype;if(cn(f))throw new Error("The class muse have a prototype, please take a check");for(var d in t){var h=t[d],p=fn(h)?h:[h],v=void 0;try{v=Co.apply(void 0,$n(p))}catch(g){throw new Error("The decorators set on props must be Function or Array of Function")}var m=qo(f,d);if(!m||m.configurable)Xo(f,d,v(f,d,m));else if(!a)throw new Error(d+" of "+f+" is unconfigurable")}return e}var Jo=["push","pop","unshift","shift","splice","sort","reverse"];function ea(e,t,n){var i,r=n.diff,o=n.operationPrefix,a={},s=!1,u=new Proxy(e,{get:function(e,n,i){var u=e[n];if(fn(e)&&Jo.indexOf(n)>-1)return function(){s=!0,Kr(u,i).apply(void 0,arguments),s=!1,t()};if(!0===a[n])return u;if(hn(u)||fn(u)){var l=a[n]||ea(u,t,{diff:r,operationPrefix:o});return a[n]=l,l}return a[n]=!0,u},set:function(e,n,i){var u=e[n],l=hn(i)||fn(i)?ea(i,t,{diff:r,operationPrefix:o}):i;return e[n]=l,a[n]=!0,!!(s||r&&u===l)||(t(),!0)},deleteProperty:function(e,n){return delete e[n],delete a[n],!!s||(t(),!0)}}),l=(So(i={},o+"set",[Po(function(e){return function(e,t){u[e]=t}}),Zo]),So(i,o+"del",[Po(function(e){return function(e){delete u[e]}}),Zo]),i);return Qo(u,l,{self:!0}),u}function ta(e,t,n){var i,r=this,o=n.operationPrefix,a=n.diff,s={},u=!1;function l(e){var n=void 0;return e.reduce(function(e,i){return e[i]=[Ro({set:function(e){return n=this[i],e}}),Ro({get:function(e){return s[i]?e:((hn(e)||fn(e))&&ta(e,t,{operationPrefix:o,diff:a}),s[i]=!0,e)},set:function(e){return(hn(e)||fn(e))&&ta(e,t,{operationPrefix:o,diff:a}),s[i]=!0,u||a&&n===e||t(),e}},{preSet:!1})],e},{})}var c=l(Io(e));if(Qo(e,c,{self:!0,omit:!0}),fn(e)){var f=Jo.reduce(function(n,i){return n[i]=[Po(function(n){return n=dn(n)?n:Array.prototype[i],function(){var i=e.length;if(u=!0,Kr(n,e).apply(void 0,arguments),u=!1,i<e.length){var r=l(new Array(e.length-i).fill(1).map(function(e,t){return(t+i).toString()}));Qo(e,r,{self:!0,omit:!0})}t()}}),Zo],n},{});Qo(e,f,{self:!0})}var d=(So(i={},o+"set",[Po(function(t){return function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.disable,s=o.isNewVal;if(s=s||-1===Io(e).indexOf(n),dn(t)&&Kr(t,r)(n,i,{disable:!0,isNewVal:s}),s){var u=l([n]);Qo(e,u,{self:!0,omit:!0})}a||(e[n]=i)}}),Zo]),So(i,o+"del",[Po(function(n){return function(i){dn(n)?Kr(n,r)(i):delete e[i],t()}}),Zo]),i);return Qo(e,d,{self:!0}),e}function na(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.other,i=t.backup;if(!dn(e)&&!yn(e))throw new TypeError("@runnable only accept Function or String");return function(t,r,o){var a=o||{},s=a.value,u=a.configurable;if(!dn(s))throw new TypeError("@runnable can only be used on method, but not "+s+' on property "'+r+'".');var l=dn(e)?e:function(){var t=e.split(".");return Zr(_n(n)?this:n,t)};return i=dn(i)?i:function(){},{value:function(){return!0===Kr(l,this).apply(void 0,arguments)?Kr(s,this).apply(void 0,arguments):Kr(i,this).apply(void 0,arguments)},enumerable:!1,configurable:u,writable:!1}}}function ia(e,t,n){return void 0===n?{value:void 0,enumerable:!0,configurable:!0,writable:!0}:(n.configurable=!0,n)}function ra(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=yn(t[0])?t.shift():"";return t.unshift(function(e){return yn(e)?e:i}),Ro({set:t,get:t})}function oa(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!!bn(t[0])&&t.shift();return t.unshift(function(e){return bn(e)?e:i}),Ro({set:t,get:t})}function aa(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=pn(t[0])?t.shift():0;return t.unshift(function(e){return pn(e)?e:i}),Ro({set:t,get:t})}var sa,ua,la,ca,fa,da,ha,pa=u.JSON||(u.JSON={stringify:JSON.stringify}),va=function(e){return pa.stringify.apply(pa,arguments)},ma=n(i(function(e){e.exports={default:va,__esModule:!0}})),ga=n(i(function(e,t){t.__esModule=!0;var n=r(z),i=r(Hr);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,r,o){null===t&&(t=Function.prototype);var a=(0,i.default)(t,r);if(void 0===a){var s=(0,n.default)(t);return null===s?void 0:e(s,r,o)}if("value"in a)return a.value;var u=a.get;return void 0!==u?u.call(o):void 0}})),ya=["","o","ms","moz","webkit","webkitCurrent"],ba=[["",""],["exit","cancel"],["screen","Screen"]],wa={position:"fixed",zIndex:"2147483647",left:0,top:0,right:0,bottom:0,overflow:"hidden",width:"100%",height:"100%"},_a=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Ea=["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"],Sa="undefined"!==typeof document;function ka(e,t,n){if(hn(t))for(var i in t)ka(e,i,t[i]);else e.style[t]=n}function Ta(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hn(t)&&(n=t),yn(e)&&(t=e);var i=n.keyOnly,r=void 0!==i&&i;if(!Sa)return r?"":void 0;if(Sn(e)||(e=document),!yn(t))throw new Error("You must pass in a string as name, but not "+("undefined"===typeof t?"undefined":Mt(t))+".");for(var o=0;o<ba.length;o++){t=t.replace(ba[o][0],ba[o][1]);for(var a=0;a<ya.length;a++){var s=0===a?t:ya[a]+t.charAt(0).toUpperCase()+t.substr(1);if(void 0!==e[s])return r?s:e[s]}}return r?"":void 0}function Aa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.bubbles,r=void 0===i||i,o=n.cancelable,a=void 0===o||o,s=void 0;if(dn(Event)?s=new Event(t,{bubbles:r,cancelable:a}):Sa&&document.createEvent?(s=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):Sa&&document.createEventObject&&((s=document.createEventObject()).eventType=t,s.eventName=t),!hn(s)&&!gn(s))throw new Error("We can't create an object on this browser, please report to author");e.dispatchEvent?e.dispatchEvent(s):e.fireEvent?e.fireEvent("on"+s.eventType,s):e[t]?e[t]():e["on"+t]&&e["on"+t]()}function Oa(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var xa=Ta("fullscreenEnabled"),Ma=!1,La=new(sa=Go(),ua=zo("requestFullscreen"),la=zo("exitFullscreen"),ca=zo("addEventListener"),fa=zo("removeEventListener"),sa((Oa((ha=function(){function e(){G(this,e),this._fullscreenElement=null,this.isNativelySupport=ln(Ta("fullscreenElement"))&&(!ln(xa)||!0===xa),this._openKey=Sa?Ta(document.body||document.documentElement,"requestFullscreen",{keyOnly:!0}):"",this._exitKey=Ta("exitFullscreen",{keyOnly:!0}),this._useStyleFirst=!1,this.hasUsedStyle=!1}return $t(e,[{key:"open",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).force,n=void 0!==t&&t,i=this.fullscreenElement;if(i&&i!==e){if(!n)return Aa(document,"fullscreenerror"),!1;this.exit()}if(!this.useStyleFirst){if(this.isNativelySupport)return dn(e[this._openKey])&&e[this._openKey](),!0;if(e instanceof HTMLVideoElement&&e.webkitSupportsFullscreen&&dn(e.webkitEnterFullscreen))return e.webkitEnterFullscreen(),this._fullscreenElement=e,!0}return this._savedStyles=Ht(wa).reduce(function(t,n){return t[n]=e.style[n],t},{}),ka(e,wa),document.body&&(this._bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden"),document.documentElement&&(this._htmlOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden"),this._fullscreenElement=e,this.hasUsedStyle=!0,Aa(e,"fullscreenchange"),!0}},{key:"exit",value:function(){if(!this.isFullscreen)return!1;if(this.isNativelySupport&&!this.useStyleFirst&&!this.hasUsedStyle)return document[this._exitKey](),!0;var e=this._fullscreenElement;return ka(e,this._savedStyles),document.body&&(document.body.style.overflow=this._bodyOverflow),document.documentElement&&(document.documentElement.style.overflow=this._htmlOverflow),this._fullscreenElement=null,this._savedStyles={},Aa(e,"fullscreenchange"),!0}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;this._handleEvent(n,"addEventListener",e,t)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;this._handleEvent(n,"removeEventListener",e,t)}},{key:"_handleEvent",value:function(e,t,n,i){("fullscreenchange"===n?_a:"fullscreenerror"===n?Ea:[n]).forEach(function(n){e[t](n,i)})}},{key:"useStyleFirst",get:function(){return Ma},set:function(e){return(e=!!e)===Ma?e:(Ma=e,Aa(document,"esfullscreenmethodchange"),e)}},{key:"fullscreenElement",get:function(){return["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].reduce(function(e,t){return e||document[t]},null)||this._fullscreenElement}},{key:"isFullscreen",get:function(){return Sn(this.fullscreenElement)}}]),e}()).prototype,"open",[ua],Yr(ha.prototype,"open"),ha.prototype),Oa(ha.prototype,"exit",[la],Yr(ha.prototype,"exit"),ha.prototype),Oa(ha.prototype,"on",[ca],Yr(ha.prototype,"on"),ha.prototype),Oa(ha.prototype,"off",[fa],Yr(ha.prototype,"off"),ha.prototype),da=ha))||da),Ia=D.f,Da=Pe.fastKey,Ca=T?"_s":"size",Ra=function(e,t){var n,i=Da(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n},Na={getConstructor:function(e,t,n,i){var r=e(function(e,o){ei(e,r,t,"_i"),e._t=t,e._i=he(null),e._f=void 0,e._l=void 0,e[Ca]=0,void 0!=o&&ti(o,n,e[i],e)});return Mi(r.prototype,{clear:function(){for(var e=ao(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[Ca]=0},delete:function(e){var n=ao(this,t),i=Ra(n,e);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[Ca]--}return!!i},forEach:function(e){ao(this,t);for(var n,i=_(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!Ra(ao(this,t),e)}}),T&&Ia(r.prototype,"size",{get:function(){return ao(this,t)[Ca]}}),r},def:function(e,t,n){var i,r,o=Ra(e,t);return o?o.v=n:(e._l=o={i:r=Da(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[Ca]++,"F"!==r&&(e._i[r]=o)),e},getEntry:Ra,setStrong:function(e,t,n){ke(e,t,function(e,n){this._t=ao(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?Ae(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,Ae(1))},n?"entries":"values",!n,!0),Ii(t)}};yo("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=Na.getEntry(ao(this,"Map"),e);return t&&t.v},set:function(e,t){return Na.def(ao(this,"Map"),0===e?0:e,t)}},Na,!0),P(P.P+P.R,"Map",{toJSON:function(e){return function(){if(Nn(this)!=e)throw TypeError(e+"#toJSON isn't generic");return function(e,t){var n=[];return ti(e,!1,n.push,n,t),n}(this)}}("Map")}),bo("Map"),wo("Map");var Pa,ja=u.Map,Fa=n(i(function(e){e.exports={default:ja,__esModule:!0}})),Ba=ze.f,za=(Pa=!0,function(e){for(var t,n=q(e),i=ae(n),r=i.length,o=0,a=[];r>o;)Ba.call(n,t=i[o++])&&a.push(Pa?[t,n[t]]:n[t]);return a});P(P.S,"Object",{entries:function(e){return za(e)}});var Ua=u.Object.entries,Ga=n(i(function(e){e.exports={default:Ua,__esModule:!0}})),Wa=i(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),$a=i(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),Va=($a.version,function(e){return"object"===typeof e?null!==e:"function"===typeof e}),Ha=function(e){if(!Va(e))throw TypeError(e+" is not an object!");return e},Ya=function(e){try{return!!e()}catch(_c){return!0}},Ka=!Ya(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Za=Wa.document,Xa=Va(Za)&&Va(Za.createElement),qa=!Ka&&!Ya(function(){return 7!=Object.defineProperty((e="div",Xa?Za.createElement(e):{}),"a",{get:function(){return 7}}).a;var e}),Qa=Object.defineProperty,Ja={f:Ka?Object.defineProperty:function(e,t,n){if(Ha(e),t=function(e,t){if(!Va(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!Va(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!Va(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!Va(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}(t,!0),Ha(n),qa)try{return Qa(e,t,n)}catch(_c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},es=Ka?function(e,t,n){return Ja.f(e,t,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}(1,n))}:function(e,t,n){return e[t]=n,e},ts={}.hasOwnProperty,ns=function(e,t){return ts.call(e,t)},is=0,rs=Math.random(),os=i(function(e){var t,n="Symbol(".concat(void 0===(t="src")?"":t,")_",(++is+rs).toString(36)),i=Function.toString,r=(""+i).split("toString");$a.inspectSource=function(e){return i.call(e)},(e.exports=function(e,t,i,o){var a="function"==typeof i;a&&(ns(i,"name")||es(i,"name",t)),e[t]!==i&&(a&&(ns(i,n)||es(i,n,e[t]?""+e[t]:r.join(String(t)))),e===Wa?e[t]=i:o?e[t]?e[t]=i:es(e,t,i):(delete e[t],es(e,t,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[n]||i.call(this)})}),as=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},ss=function e(t,n,i){var r,o,a,s,u=t&e.F,l=t&e.G,c=t&e.P,f=t&e.B,d=l?Wa:t&e.S?Wa[n]||(Wa[n]={}):(Wa[n]||{}).prototype,h=l?$a:$a[n]||($a[n]={}),p=h.prototype||(h.prototype={});for(r in l&&(i=n),i)a=((o=!u&&d&&void 0!==d[r])?d:i)[r],s=f&&o?as(a,Wa):c&&"function"==typeof a?as(Function.call,a):a,d&&os(d,r,a,t&e.U),h[r]!=a&&es(h,r,s),c&&p[r]!=a&&(p[r]=a)};Wa.core=$a,ss.F=1,ss.G=2,ss.S=4,ss.P=8,ss.B=16,ss.W=32,ss.U=64,ss.R=128,ss(ss.G,{global:Wa}),$a.global;var us=0,ls=function(e){function t(e,n,i){G(this,t);var r=Lt(this,(t.__proto__||U(t)).call(this));if(!Sn(e))throw new Error("You must pass in an legal video element but not "+("undefined"===typeof e?"undefined":Mt(e)));return r.video=e,r.config=n,r.customConfig=i,r}return Bt(t,pr),$t(t,null,[{key:"isSupport",value:function(){return!0}}]),$t(t,[{key:"load",value:function(e){this.video.setAttribute("src",e),this.video.src=e}},{key:"startLoad",value:function(e){var t=this.video.currentTime||us;this.load(e),this.seek(t)}},{key:"stopLoad",value:function(){us=this.video.currentTime,this.video.src="",this.video.removeAttribute("src")}},{key:"destroy",value:function(){Sn(this.video)&&this.stopLoad()}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){return this.video.pause()}},{key:"refresh",value:function(){this.video.src=this.config.src}},{key:"attachMedia",value:function(){}},{key:"seek",value:function(e){this.video.currentTime=e}}]),t}(),cs={flv:".flv",hls:".m3u8",native:".mp4"};function fs(e){var t=e.src,n=e.box;if(yn(n)&&n)return n;for(var i in t=t.toLowerCase(),cs){var r=cs[i];if(t.indexOf(r)>-1)return i}return"native"}var ds,hs,ps,vs,ms,gs,ys,bs,ws,_s,Es=function(){function e(t,n){if(G(this,e),!Sn(t))throw new Error("You must pass in an video element to the chimee-kernel");this.config=n,this.videoElement=t,this.initVideoKernel()}return $t(e,[{key:"destroy",value:function(){this.videoKernel.destroy()}},{key:"initVideoKernel",value:function(){var e=this.config,t=fs(e);this.box=t;var n=this.chooseVideoKernel(this.box,e.preset);if(!dn(n))throw new Error("We can't find video kernel for "+t+". Please check your config and make sure it's installed or provided");var i=e.presetConfig[this.box];i&&Yn(e,i),this.videoKernel=new n(this.videoElement,e,i)}},{key:"chooseVideoKernel",value:function(e,t){switch(e){case"native":return ls;case"mp4":return this.getMp4Kernel(t.mp4);case"flv":case"hls":return t[e];default:throw new Error("We currently do not support box "+e+", please contact us through https://github.com/Chimeejs/chimee/issues.")}}},{key:"getMp4Kernel",value:function(e){var t=e&&dn(e.isSupport);return t&&e.isSupport()?e:(t&&On.warn("chimee","mp4 decode is not support in this browser, we will switch to the native video kernel"),this.box="native",ls)}},{key:"attachMedia",value:function(){this.videoKernel.attachMedia()}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.src;this.config.src=e,this.videoKernel.load(e)}},{key:"startLoad",value:function(){if(!dn(this.videoKernel.startLoad))throw new Error("This video kernel do not support startLoad, please contact us on https://github.com/Chimeejs/chimee/issues");this.videoKernel.startLoad(this.config.src)}},{key:"stopLoad",value:function(){dn(this.videoKernel.stopLoad)&&this.videoKernel.stopLoad()}},{key:"play",value:function(){this.videoKernel.play()}},{key:"pause",value:function(){this.videoKernel.pause()}},{key:"seek",value:function(e){pn(e)?this.videoKernel.seek(e):On.error("chimee","When you try to seek, you must offer us a number, but not "+("undefined"===typeof e?"undefined":Mt(e)))}},{key:"refresh",value:function(){this.videoKernel.refresh()}},{key:"on",value:function(e,t){this.videoKernel.on(e,t)}},{key:"off",value:function(e,t){this.videoKernel.off(e,t)}},{key:"currentTime",get:function(){return this.videoElement.currentTime||0}}]),e}(),Ss=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],ks=["buffered","currentSrc","duration","error","ended","networkState","paused","readyState","seekable","sinkId","controlsList","tabIndex","dataset","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth"],Ts=["beforeinput","blur","click","compositionend","compositionstart","compositionupdate","dblclick","focus","focusin","focusout","input","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","resize","scroll","select","wheel","mousewheel","contextmenu","touchstart","touchmove","touchend","fullscreen"],As=["fullscreenchange"],Os=["wheel","mousewheel","touchstart","touchmove"],xs=["silentLoad","fullscreen"],Ms=["mouseenter","mouseleave"],Ls=["play","pause","seek","startLoad","stopLoad"],Is=["load"],Ds=["mediaInfo","heartbeat","error"],Cs=["focus","fullscreen","requestFullscreen","exitFullscreen"],Rs=["canPlayType","captureStream","setSinkId"];function Ns(e,t){if(!yn(e))throw new TypeError("key parameter must be String");if(!dn(t))throw new TypeError("fn parameter must be Function")}function Ps(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length>2?["set"].concat(t):2===t.length?["video","container","wrapper","videoElement"].indexOf(t[0])>-1?["get"].concat(t):["set","container"].concat(t):["get","container"].concat(t)}function js(e,t,n,i){n&&Wt(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Fs(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function Bs(e){return yn(e)?e:void 0}function zs(e){return Ro({get:function(t){return this.dispatcher.videoConfigReady&&this.inited?this.dom.videoElement[e]:t},set:function(t){return this.dispatcher.videoConfigReady?(this.dom.videoElement[e]=t,t):t}})}function Us(e){var t=hn(e)?e:{set:e,get:e,isBoolean:!1},n=t.set,i=t.get,r=t.isBoolean;return Ro({get:function(e){return this.dispatcher.videoConfigReady&&this.inited?this.dom.videoElement[i]:e},set:function(e){if(!this.dispatcher.videoConfigReady)return e;var t=r?e?"":void 0:null===e?void 0:e;return this.dom.setAttr("video",n,t),e}},{preSet:!1})}function Gs(e,t){return Ro({get:function(n){var i=this.dom.getAttr("video",e);return this.dispatcher.videoConfigReady&&this.inited?t?!!i:i:n},set:function(n){if(!this.dispatcher.videoConfigReady)return n;var i=t?n||void 0:null===n?void 0:n;return this.dom.setAttr("video",e,i),n}})}function Ws(e){return Ro({get:function(t){if(!this.dispatcher.videoConfigReady||!this.inited)return t;var n,i=this.dom.getAttr("video",e),r=this.dom.videoElement[e];return!fn(n=i)&&n-un(n)+1>=0&&pn(r)?r:i||void 0},set:function(t){if(!this.dispatcher.videoConfigReady)return t;var n=void 0;return void 0===t||pn(t)?n=t:yn(t)&&!Cr(parseFloat(t))&&(n=t),this.dom.setAttr("video",e,n),n}})}var $s,Vs,Hs,Ys,Ks,Zs,Xs,qs,Qs,Js,eu,tu,nu,iu,ru,ou,au,su,uu,lu,cu,fu={src:[ra(),Ro({set:function(e){return this.dispatcher.readySync&&this.autoload&&e!==this.src&&(this.needToLoadSrc=!0),e}}),Ro({set:function(e){return this.needToLoadSrc&&(this.needToLoadSrc=!1,this.dispatcher.binder.emit({name:"load",target:"plugin",id:"dispatcher"},e)),e}},{preSet:!1})],autoload:oa(),autoplay:[oa(),zs("autoplay")],controls:[oa(),zs("controls")],width:[Ws("width")],height:[Ws("height")],crossOrigin:[Ro({set:Bs}),Us({set:"crossorigin",get:"crossOrigin"})],loop:[oa(),zs("loop")],defaultMuted:[oa(),Us({get:"defaultMuted",set:"muted",isBoolean:!0})],muted:[oa(),zs("muted")],preload:[Ro({set:function(e){return["none","auto","metadata",""].indexOf(e)>-1?e:"none"}},{preSet:!0}),Us("preload")],poster:[ra(),Ro({get:function(e){return this.dispatcher.videoConfigReady&&this.inited?this.dom.videoElement.poster:e},set:function(e){return this.dispatcher.videoConfigReady?(e.length&&this.dom.setAttr("video","poster",e),e):e}})],playsInline:[Ro({get:function(e){var t=this.dom.videoElement.playsInline;return this.dispatcher.videoConfigReady&&this.inited?void 0===t?e:t:e},set:function(e){if(!this.dispatcher.videoConfigReady)return e;this.dom.videoElement.playsInline=e;var t=e?"":void 0;return this.dom.setAttr("video","playsinline",t),this.dom.setAttr("video","webkit-playsinline",t),this.dom.setAttr("video","x5-playsinline",t),e}}),oa()],x5VideoPlayerFullscreen:[Ro({set:function(e){return!!e},get:function(e){return!!e}}),Gs("x5-video-player-fullscreen",!0)],x5VideoOrientation:[Ro({set:Bs}),Gs("x5-video-orientation")],x5VideoPlayerType:[Ro({set:function(e){if(!this.dispatcher.videoConfigReady)return e;var t="h5"===e?"h5":void 0;return this.dom.setAttr("video","x5-video-player-type",t),e},get:function(e){return this.dispatcher.videoConfigReady&&e||(this.dom.getAttr("video","x5-video-player-type")?"h5":void 0)}})],xWebkitAirplay:[Ro({set:function(e){return!!e},get:function(e){return!!e}}),Gs("x-webkit-airplay",!0)],playbackRate:[aa(1),zs("playbackRate")],defaultPlaybackRate:[zs("defaultPlaybackRate"),aa(1)],disableRemotePlayback:[oa(),zs("disableRemotePlayback")],volume:[aa(1),zs("volume")]},du=(ds=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!!bn(t[0])&&t.shift();return t.unshift(function(e){return bn(e)?e:i}),Po.apply(void 0,t)}(),hs=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=yn(t[0])?t.shift():"";return t.unshift(function(e){return yn(e)?e:i}),Po.apply(void 0,t)}(function(e){return e.toLocaleLowerCase()}),ps=function(){function e(t,n){G(this,e),js(this,"needToLoadSrc",vs,this),js(this,"changeWatchable",ms,this),js(this,"inited",gs,this),this.src="",js(this,"isLive",ys,this),js(this,"box",bs,this),this.preset={},this.presetConfig={},this.autoload=!0,this.autoplay=!1,this.controls=!1,this.width="100%",this.height="100%",this.crossOrigin=void 0,this.loop=!1,this.defaultMuted=!1,this.muted=!1,this.preload="auto",this.poster=void 0,this.playsInline=!1,this.x5VideoPlayerFullscreen=!1,this.x5VideoOrientation=void 0,this.x5VideoPlayerType=void 0,this.xWebkitAirplay=!1,this.playbackRate=1,this.defaultPlaybackRate=1,this.disableRemotePlayback=!1,this.volume=1,js(this,"_kernelProperty",ws,this),js(this,"_realDomAttr",_s,this),Qo(this,fu,{self:!0}),Object.defineProperty(this,"dispatcher",{value:t,enumerable:!1,writable:!1,configurable:!1}),Object.defineProperty(this,"dom",{value:t.dom,enumerable:!1,writable:!1,configurable:!1}),Yn(this,n)}return $t(e,[{key:"init",value:function(){var e=this;this._realDomAttr.forEach(function(t){e[t]=e[t]}),this.inited=!0}}]),e}(),vs=Fs(ps.prototype,"needToLoadSrc",[Zo],{enumerable:!0,initializer:function(){return!1}}),ms=Fs(ps.prototype,"changeWatchable",[Zo],{enumerable:!0,initializer:function(){return!0}}),gs=Fs(ps.prototype,"inited",[Zo],{enumerable:!0,initializer:function(){return!1}}),ys=Fs(ps.prototype,"isLive",[ds,ia],{enumerable:!0,initializer:function(){return!1}}),bs=Fs(ps.prototype,"box",[hs,ia],{enumerable:!0,initializer:function(){return""}}),ws=Fs(ps.prototype,"_kernelProperty",[Ho],{enumerable:!0,initializer:function(){return["isLive","box","preset","kernels","presetConfig"]}}),_s=Fs(ps.prototype,"_realDomAttr",[Ho],{enumerable:!0,initializer:function(){return["src","controls","width","height","crossOrigin","loop","muted","preload","poster","autoplay","playsInline","x5VideoPlayerFullscreen","x5VideoOrientation","xWebkitAirplay","playbackRate","defaultPlaybackRate","autoload","disableRemotePlayback","defaultMuted","volume","x5VideoPlayerType"]}}),ps);function hu(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var pu,vu,mu,gu,yu,bu,wu,_u,Eu=($s=Go(),Vs=zo("silentLoad"),Hs=zo("fullScreen"),Ys=zo("$fullScreen"),Ks=zo("fullscreen"),Zs=zo("emit"),Xs=zo("emitSync"),qs=zo("on"),Qs=zo("addEventListener"),Js=No(Ns),eu=zo("off"),tu=zo("removeEventListener"),nu=No(Ns),iu=zo("once"),ru=No(Ns),ou=zo("css"),au=No(Ps),su=zo("attr"),uu=No(Ps),$s((hu((cu=function(){function e(){G(this,e),this.__events={},this.__unwatchHandlers=[]}return $t(e,[{key:"__wrapAsVideo",value:function(e){var t=this;ks.forEach(function(e){Wt(t,e,{get:function(){return this.__dispatcher.dom.videoElement[e]},set:void 0,configurable:!1,enumerable:!1})}),Rs.forEach(function(e){Wt(t,e,{get:function(){var t=this.__dispatcher.dom.videoElement;return Zn(t[e],t)},set:void 0,configurable:!1,enumerable:!1})}),Qo(this,e._realDomAttr.concat(e._kernelProperty).reduce(function(t,n){return t[n]=[Ro({get:function(){return e[n]},set:function(t){return e[n]=t,t}}),Zo],t},{}),{self:!0}),Ls.forEach(function(e){Wt(t,e,{value:function(){for(var t=this,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return new qi(function(n){var r,o=t.__id;t.__dispatcher.binder.once({id:o,name:"_"+e,fn:n}),(r=t.__dispatcher.binder)[/^(seek)$/.test(e)?"emitSync":"emit"].apply(r,[{target:"video",name:e,id:o}].concat($n(i)))})},configurable:!0,enumerable:!1,writable:!0})}),Cs.forEach(function(e){"fullscreen"!==e&&Wt(t,e,{value:function(){var t;return(t=this.__dispatcher.dom)[e].apply(t,arguments)},configurable:!0,enumerable:!1,writable:!0})})}},{key:"$watch",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.deep,o=i.diff,a=void 0===o||o,s=i.other,u=i.proxy,l=void 0!==u&&u;if(!yn(e)&&!fn(e))throw new TypeError("$watch only accept string and Array<string> as key to find the target to spy on, but not "+e+", whose type is "+("undefined"===typeof e?"undefined":Mt(e)));var c=!0,f=function e(){c=!1;var t=n.__unwatchHandlers.indexOf(e);t>-1&&n.__unwatchHandlers.splice(t,1)},d=yn(e)?e.split("."):e,h=d.pop(),p=this.__dispatcher.videoConfig;return Qo(0===d.length&&!s&&p._realDomAttr.indexOf(h)>-1?p:["isFullscreen","fullscreenElement"].indexOf(h)>-1?this.__dispatcher.dom:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.throwError,r=void 0!==i&&i,o=n.backup;if(yn(t)&&(t=t.split(".")),!fn(t))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var a=[],s=e,u=0,l=t.length;u<l;u++){var c=t[u];if(cn(s)){if(r)throw new Error("obj"+(a.length>0?"."+a.join("."):" itself")+" is "+s);return o}s=s[c],a.push(c)}return s}(s||this,d,{throwError:!0}),So({},h,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=hn(t[t.length-1])?t[t.length-1]:{},r=i.deep,o=i.omit,a=i.other,s=i.operationPrefix,u=void 0===s?"__":s,l=i.diff,c=void 0===l||l,f=i.proxy;if("function"!==typeof Proxy&&(f=!1),!t.length)throw new TypeError("You must pass a function or a string to find the hanlder function.");if(void 0!==a&&_n(a))throw new TypeError("If you want us to trigger function on the other instance, you must pass in a legal instance");if(!yn(u))throw new TypeError("operationPrefix must be an string");return function(e,n,i){var s=t.reduce(function(n,i,r){if(!yn(i)&&!dn(i)){if(!r||r!==t.length-1)throw new TypeError("You can only pass function or string as handler");return n}return n.push(yn(i)?function(t,n){var r=Zr(a||e,i);if(dn(r))return Kr(r,this)(t,n);if(!o)throw new Error("You pass in a function for us to trigger, please ensure the property to be a function or set omit flag true")}:i),n},[]),l=function(e,t){var n=this;s.forEach(function(i){return Kr(i,n)(e,t)})},d=!1,h=void 0,p=void 0,v=void 0;return Co(Ro({set:function(e){var t=this;h=this[n],v=void 0;var i=function(){return Kr(l,t)(p,h)};return r&&(hn(e)||fn(e))?f?ea(e,i,{diff:c,operationPrefix:u}):ta(e,i,{operationPrefix:u,diff:c}):e},get:function(e){var t=this;if(v)return v;if(!d){d=!0;var n=function(){return Kr(l,t)(p,h)};if(r&&(hn(e)||fn(e))){if(f)return v=ea(e,n,{diff:c,operationPrefix:u}),h=v,p=v,v;ta(e,n,{operationPrefix:u,diff:c})}h=e,p=e}return e}},{preSet:!0}),Ro({set:function(e){return p=e,c&&h===e||Kr(l,this)(p,h),h=e,e}},{preSet:!1}))(e,n,i)}}(function(){!c||this instanceof du&&!this.dispatcher.changeWatchable||Zn(t,this).apply(void 0,arguments)},{deep:r,diff:a,proxy:l})),{self:!0}),this.__unwatchHandlers.push(f),f}},{key:"$set",value:function(e,t,n){if(!hn(e)&&!fn(e))throw new TypeError("$set only support Array or Object, but not "+e+", whose type is "+("undefined"===typeof e?"undefined":Mt(e)));dn(e.__set)?e.__set(t,n):e[t]=n}},{key:"$del",value:function(e,t){if(!hn(e)&&!fn(e))throw new TypeError("$del only support Array or Object, but not "+e+", whose type is "+("undefined"===typeof e?"undefined":Mt(e)));dn(e.__del)?e.__del(t):delete e[t]}},{key:"load",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return new qi(function(t){var i;e.__dispatcher.binder.once({id:e.__id,name:"_load",target:"plugin",fn:t}),(i=e.__dispatcher.binder).emit.apply(i,[{name:"load",target:"plugin",id:e.__id}].concat(n))})}},{key:"$silentLoad",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.__dispatcher.binder.emit({name:"silentLoad",target:"video",id:this.__id}).then(function(){var t;return(t=e.__dispatcher).silentLoad.apply(t,n)}).then(function(t){e.__dispatcher.binder.trigger({name:"silentLoad",target:"video",id:e.__id},t)})}},{key:"$fullscreen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"container";if(!this.__dispatcher.binder.emitSync({name:"fullscreen",id:this.__id,target:"video-dom"},e,t))return!1;var n=this.__dispatcher.dom.fullscreen(e,t);return this.__dispatcher.binder.triggerSync({name:"fullscreen",id:this.__id,target:"video-dom"},e,t),n}},{key:"$emit",value:function(e){var t,n=void 0;if(hn(e)&&yn(e.name)&&yn(e.target)&&(n=e.target,e=e.name),!yn(e))throw new TypeError("emit key parameter must be String");for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return(t=this.__dispatcher.binder).emit.apply(t,[{name:e,id:this.__id,target:n}].concat($n(r)))}},{key:"$emitSync",value:function(e){var t,n=void 0;if(hn(e)&&yn(e.name)&&yn(e.target)&&(n=e.target,e=e.name),!yn(e))throw new TypeError("emitSync key parameter must be String");for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return(t=this.__dispatcher.binder).emitSync.apply(t,[{name:e,id:this.__id,target:n}].concat($n(r)))}},{key:"$on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=lr({},n,{name:e,id:this.__id,fn:t});this.__dispatcher.binder.on(i),this.__addEvents(e,t)}},{key:"$off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=lr({},n,{name:e,id:this.__id,fn:t});this.__dispatcher.binder.off(i),this.__removeEvents(e,t)}},{key:"$once",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this,r=function n(){Zn(t,this).apply(void 0,arguments),i.__removeEvents(e,n)};i.__addEvents(e,r);var o=lr({},n,{name:e,id:this.__id,fn:r});this.__dispatcher.binder.once(o)}},{key:"$css",value:function(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=this.__dispatcher.dom)[e+"Style"].apply(t,i)}},{key:"$attr",value:function(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if("set"===e&&/video/.test(i[0])){if(!this.__dispatcher.videoConfigReady)return i[2];if(this.__dispatcher.videoConfig._realDomAttr.indexOf(i[1])>-1){var o=i[1],a=i[2];return this.__dispatcher.videoConfig[o]=a,a}}return(t=this.__dispatcher.dom)[e+"Attr"].apply(t,i)}},{key:"__addEvents",value:function(e,t){this.__events[e]=this.__events[e]||[],this.__events[e].push(t)}},{key:"__removeEvents",value:function(e,t){if(!mn(this.__events[e])){var n=this.__events[e].indexOf(t);n<0||(this.__events[e].splice(n,1),mn(this.__events[e])&&delete this.__events[e])}}},{key:"__destroy",value:function(){var e=this;this.__unwatchHandlers.forEach(function(e){return e()}),Ht(this.__events).forEach(function(t){fn(e.__events[t])&&e.__events[t].forEach(function(n){return e.$off(t,n)})}),delete this.__events}},{key:"currentTime",get:function(){return this.__dispatcher.kernel.currentTime},set:function(e){this.__dispatcher.binder.emitSync({name:"seek",target:"video",id:this.__id},e)}},{key:"$plugins",get:function(){return this.__dispatcher.plugins}},{key:"$pluginOrder",get:function(){return this.__dispatcher.order}},{key:"$wrapper",get:function(){return this.__dispatcher.dom.wrapper}},{key:"$container",get:function(){return this.__dispatcher.dom.container}},{key:"$video",get:function(){return this.__dispatcher.dom.videoElement}},{key:"isFullscreen",get:function(){return this.__dispatcher.dom.isFullscreen}},{key:"fullscreenElement",get:function(){return this.__dispatcher.dom.fullscreenElement}},{key:"container",get:function(){return this.__dispatcher.containerConfig},set:function(e){if(!hn(e))throw new Error("The config of container must be Object, but not "+("undefined"===typeof e?"undefined":Mt(e))+".");return Yn(this.__dispatcher.containerConfig,e),this.__dispatcher.container}},{key:"videoRequireGuardedAttributes",get:function(){return this.__dispatcher.dom.videoRequireGuardedAttributes}}]),e}()).prototype,"$silentLoad",[Vs],Yr(cu.prototype,"$silentLoad"),cu.prototype),hu(cu.prototype,"$fullscreen",[Hs,Ys,Ks],Yr(cu.prototype,"$fullscreen"),cu.prototype),hu(cu.prototype,"$emit",[Zs],Yr(cu.prototype,"$emit"),cu.prototype),hu(cu.prototype,"$emitSync",[Xs],Yr(cu.prototype,"$emitSync"),cu.prototype),hu(cu.prototype,"$on",[qs,Qs,Js],Yr(cu.prototype,"$on"),cu.prototype),hu(cu.prototype,"$off",[eu,tu,nu],Yr(cu.prototype,"$off"),cu.prototype),hu(cu.prototype,"$once",[iu,ru],Yr(cu.prototype,"$once"),cu.prototype),hu(cu.prototype,"$css",[ou,au],Yr(cu.prototype,"$css"),cu.prototype),hu(cu.prototype,"$attr",[su,uu],Yr(cu.prototype,"$attr"),cu.prototype),hu(cu.prototype,"$plugins",[Zo],Yr(cu.prototype,"$plugins"),cu.prototype),hu(cu.prototype,"$pluginOrder",[Zo],Yr(cu.prototype,"$pluginOrder"),cu.prototype),hu(cu.prototype,"$wrapper",[Zo],Yr(cu.prototype,"$wrapper"),cu.prototype),hu(cu.prototype,"$container",[Zo],Yr(cu.prototype,"$container"),cu.prototype),hu(cu.prototype,"$video",[Zo],Yr(cu.prototype,"$video"),cu.prototype),lu=cu))||lu),Su=Go()(pu=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.name,r=e.level,o=void 0===r?0:r,a=e.operable,s=void 0===a||a,u=e.beforeCreate,l=e.create,c=e.init,f=e.inited,d=e.destroy,h=e.events,p=void 0===h?{}:h,v=e.data,m=void 0===v?{}:v,g=e.computed,y=void 0===g?{}:g,b=e.methods,w=void 0===b?{}:b,_=e.el,E=e.penetrate,S=void 0!==E&&E,k=e.inner,T=void 0===k||k,A=e.autoFocus,O=e.className,x=arguments[1],M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{name:i};G(this,t);var L=Lt(this,(t.__proto__||U(t)).call(this));if(L.destroyed=!1,L.VERSION="0.10.6",L.__operable=!0,L.__level=0,mn(x))throw new TypeError("lack of dispatcher");if(!yn(n))throw new TypeError("id of PluginConfig must be string");L.__id=n,L.__dispatcher=x,L.$videoConfig=L.__dispatcher.videoConfig,L.__wrapAsVideo(L.$videoConfig),L.beforeCreate=L.beforeCreate||u;try{dn(L.beforeCreate)&&L.beforeCreate({events:p,data:m,computed:y,methods:w},M)}catch(D){L.$throwError(D)}if(!mn(w)&&hn(w)&&Ht(w).forEach(function(e){var t=w[e];if(!dn(t))throw new TypeError("plugins methods must be Function");Wt(L,e,{value:Zn(t,L),writable:!0,enumerable:!1,configurable:!0})}),!mn(p)&&hn(p)&&Ht(p).forEach(function(e){if(!dn(p[e]))throw new TypeError("plugins events hook must bind with Function");L.$on(e,p[e])}),!mn(m)&&hn(m)&&Yn(L,m),!mn(y)&&hn(y)){var I=Ht(y).reduce(function(e,t){var n=y[t];return dn(n)?(e[t]=Ro({get:n}),e):hn(n)&&(dn(n.get)||dn(n.set))?(e[t]=Ro(n),e):e},{});Qo(L,I,{self:!0})}L.create=L.create||l,L.init=L.init||c,L.inited=L.inited||f,L.destroy=L.destroy||d,L.$dom=L.__dispatcher.dom.insertPlugin(L.__id,_,{penetrate:S,inner:T,className:O}),L.$autoFocus=bn(A)?A:T,L.$inner=T,L.$penetrate=S,Qo(L,{$inner:Ho,$penetrate:Ho},{self:!0}),L.$operable=bn(M.operable)?M.operable:s,L.__level=vn(M.level)?M.level:o,L.$config=M;try{dn(L.create)&&L.create()}catch(D){L.$throwError(D)}return L}return Bt(t,Eu),$t(t,[{key:"__init",value:function(e){try{dn(this.init)&&this.init(e)}catch(t){this.$throwError(t)}}},{key:"__inited",value:function(){var e=this,t=void 0;try{t=dn(this.inited)&&this.inited()}catch(n){this.$throwError(n)}return this.readySync=!wn(t),this.ready=this.readySync?qi.resolve(this):t.then(function(){return e.readySync=!0,e}).catch(function(t){return Tn(t)?e.$throwError(t):qi.reject(t)}),this.readySync?this:this.ready}},{key:"$bumpToTop",value:function(){var e=this.__dispatcher._getTopLevel(this.$inner);this.$level=e+1}},{key:"$throwError",value:function(e){this.__dispatcher.throwError(e)}},{key:"$destroy",value:function(){this.destroyed||(dn(this.destroy)&&this.destroy(),ga(t.prototype.__proto__||U(t.prototype),"__destroy",this).call(this),this.__dispatcher.dom.removePlugin(this.__id),delete this.__dispatcher,delete this.$dom,this.destroyed=!0)}},{key:"$operable",set:function(e){bn(e)&&(this.$dom.style.pointerEvents=e?"auto":"none",this.__operable=e)},get:function(){return this.__operable}},{key:"$level",set:function(e){vn(e)&&(this.__level=e,this.__dispatcher._sortZIndex())},get:function(){return this.__level}},{key:"$autoFocus",get:function(){return this.__autoFocus},set:function(e){this.__autoFocus=e,this.__dispatcher.dom._autoFocusToVideo(this.$dom,!e)}}]),t}())||pu;function ku(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function Tu(e){if("video"===e&&(e="videoElement"),!Sn(this[e]))throw new TypeError('Your target "'+e+'" is not a legal HTMLElement');for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return[e].concat(n)}function Au(e,t,n){if(!yn(t))throw new TypeError("to handle dom's attribute or style, your attr parameter must be string, but not "+t+" in "+("undefined"===typeof t?"undefined":Mt(t)));if(!yn(e))throw new TypeError("to handle dom's attribute or style, your target parameter must be string, , but not "+e+" in "+("undefined"===typeof e?"undefined":Mt(e)));return[e,t,n]}var Ou,xu,Mu,Lu,Iu,Du=(vu=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).other;if(!dn(e)&&!wn(e)&&!yn(e))throw new TypeError("@waitUntil only accept Function, Promise or String");return function(n,i,r){var o=r||{},a=o.value,s=o.configurable;if(!dn(a))throw new TypeError("@waituntil can only be used on function, but not "+a+' on property "'+i+'"');var u=!1,l=[],c=wn(e)?function(){return e}:dn(e)?e:function(){var n=e.split("."),i=n.slice(-1),r=_n(t)?this:t;if(!u){var o=Zr(r,n.slice(0,-1));if(cn(o))return o;var a=Yo(o,i),s=function(e){if(!0===e)for(;l.length>0;)l[0](),l.shift();return e},c=Oo(a)?Ro({set:s})(o,i,a):Ro({set:s})(o,i,{value:void 0,configurable:!0,enumerable:!0,writable:!0});Ko(o,i,c),u=!0}return Zr(r,n)};return{value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Kr(a,this),o=Kr(c,this).apply(void 0,n);return wn(o)?qi.resolve(o).then(function(){return Kr(a,e).apply(void 0,n)}):!0===o?Kr(a,this).apply(void 0,n):new qi(function(e){l.push(function(){r.apply(void 0,n),e()})})},enumerable:!1,configurable:s,writable:!1}}}("__dispatcher.videoConfigReady"),mu=No(Au,Tu),gu=No(Au,Tu),yu=No(Au,Tu),bu=No(Au,Tu),wu=No(Tu),ku((_u=function(){function e(t,n){G(this,e),this.plugins={},this.originHTML="",this.__mouseInVideo=!1,this.destroyed=!1,this.__videoExtendedNodes=[],this.isFullscreen=!1,this.fullscreenElement=void 0;var i=(t||{}).wrapper;if(this.__dispatcher=n,!Sn(i)&&!yn(i))throw new TypeError("Wrapper can only be string or HTMLElement, but not "+("undefined"===typeof i?"undefined":Mt(i)));var r=Ir(i);if(0===r.length)throw new TypeError("Can not get dom node accroding wrapper. Please check your wrapper");this.wrapper=r[0],this.originHTML=this.wrapper.innerHTML;var o=r.find("video")[0];o||(o=document.createElement("video")),this.installVideo(o),this._fullscreenMonitor(),La.on("fullscreenchange",this._fullscreenMonitor);var a=fn(t.videoRequiredGuardedAttributes)?t.videoRequiredGuardedAttributes:[];a.indexOf("style")<0&&a.unshift("style"),this.videoRequireGuardedAttributes=a}return $t(e,[{key:"mouseInVideo",get:function(){return this.__mouseInVideo},set:function(e){this.__mouseInVideo=!!e}},{key:"videoExtendedNodes",get:function(){return this.__videoExtendedNodes}}]),$t(e,[{key:"installVideo",value:function(e){if(this.__videoExtendedNodes.push(e),br(e,"tabindex",-1),this._autoFocusToVideo(e),Sn(this.container)){var t=this.container;0===t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[0])}else e.parentElement&&Sn(e.parentElement)&&e.parentElement!==this.wrapper?this.container=e.parentElement:(this.container=document.createElement("container"),Ir(this.container).append(e));return this.container.parentElement!==this.wrapper&&Ir(this.wrapper).append(this.container),this.videoElement=e,e}},{key:"removeVideo",value:function(){var e=this.videoElement;return this._autoFocusToVideo(this.videoElement,!1),this.__dispatcher.binder&&this.__dispatcher.binder.bindEventOnVideo(e,!0),Ir(e).remove(),delete this.videoElement,e}},{key:"insertPlugin",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!yn(e))throw new TypeError("insertPlugin id parameter must be string");if(Sn(this.plugins[e])&&this.removePlugin(e),yn(t))if(/<[^>]+?>/.test(t)){var i=document.createElement("div");i.innerHTML=t,t=i.children[0]}else t=document.createElement(function(e){return Kn(e).replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}(t));else hn(t)&&(n=t);var r=n,o=r.inner,a=r.penetrate,s=n.className,u=t&&Sn(t)?t:document.createElement("div");fn(s)&&(s=s.join(" ")),yn(s)&&wr(u,s),this.plugins[e]=u;var l=o?this.container:this.wrapper,c=o?this.videoElement:this.container;return a&&(this.__dispatcher.binder.bindEventOnPenetrateNode(u),this.__videoExtendedNodes.push(u)),l.lastChild===c?(l.appendChild(u),u):(l.insertBefore(u,c.nextSibling),u)}},{key:"removePlugin",value:function(e){if(yn(e)){var t=this.plugins[e];Sn(t)&&(t.parentNode&&t.parentNode.removeChild(t),this._autoFocusToVideo(t,!0));var n=(Dl.getPluginConfig(e)||{}).penetrate;void 0!==n&&n&&this.__dispatcher.binder.bindEventOnPenetrateNode(t,!0),delete this.plugins[e]}}},{key:"setPluginsZIndex",value:function(e){var t=this;e.forEach(function(e,n){return xr(e.match(/^(videoElement|container)$/)?t[e]:t.plugins[e],"z-index",++n)})}},{key:"setAttr",value:function(e,t,n){br(this[e],t,n)}},{key:"getAttr",value:function(e,t){return yr(this[e],t)}},{key:"setStyle",value:function(e,t,n){xr(this[e],t,n)}},{key:"getStyle",value:function(e,t){return Or(this[e],t)}},{key:"requestFullscreen",value:function(e){return La.open(this[e])}},{key:"exitFullscreen",value:function(){return La.exit()}},{key:"fullscreen",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"container",n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e?this.requestFullscreen.apply(this,[t].concat($n(i))):this.exitFullscreen.apply(this,$n(i))}},{key:"focus",value:function(){this.videoElement.focus()}},{key:"isNodeInsideVideo",value:function(e){return this.__videoExtendedNodes.indexOf(e)>-1||this.__videoExtendedNodes.reduce(function(t,n){return t||kn(n,e)},!1)}},{key:"migrateVideoRequiredGuardedAttributes",value:function(e){var t=this;this.videoRequireGuardedAttributes.map(function(e){return[e,yr(t.videoElement,e)]}).forEach(function(t){var n=no(t,2),i=n[0],r=n[1];return br(e,i,r)})}},{key:"destroy",value:function(){this.removeVideo(),La.off("fullscreenchange",this._fullscreenMonitor),this.wrapper.innerHTML=this.originHTML,delete this.wrapper,delete this.plugins,this.destroyed=!0}},{key:"_autoFocusToVideo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Sn(e)&&((t?kr:Tr)(e,"mouseup",this._focusToVideo,!1,!0),(t?kr:Tr)(e,"touchend",this._focusToVideo,!1,!0))}},{key:"_focusToVideo",value:function(){var e=window.scrollX,t=window.scrollY;dn(this.videoElement.focus)&&this.videoElement.focus(),window.scrollTo(e,t)}},{key:"_fullscreenMonitor",value:function(e){var t=La.fullscreenElement,n=this.isFullscreen;!t||!kn(this.wrapper,t)&&t!==this.wrapper?(this.isFullscreen=!1,this.fullscreenElement=void 0):(this.isFullscreen=!0,this.fullscreenElement=this.wrapper===t?"wrapper":this.container===t?"container":this.videoElement===t?"video":t),gn(e)&&n!==this.isFullscreen&&this.__dispatcher.binder.triggerSync({name:"fullscreenchange",target:"esFullscreen",id:"dispatcher"},e)}}]),e}()).prototype,"setAttr",[vu,mu],Yr(_u.prototype,"setAttr"),_u.prototype),ku(_u.prototype,"getAttr",[gu],Yr(_u.prototype,"getAttr"),_u.prototype),ku(_u.prototype,"setStyle",[yu],Yr(_u.prototype,"setStyle"),_u.prototype),ku(_u.prototype,"getStyle",[bu],Yr(_u.prototype,"getStyle"),_u.prototype),ku(_u.prototype,"requestFullscreen",[wu],Yr(_u.prototype,"requestFullscreen"),_u.prototype),ku(_u.prototype,"_focusToVideo",[$o],Yr(_u.prototype,"_focusToVideo"),_u.prototype),ku(_u.prototype,"_fullscreenMonitor",[$o],Yr(_u.prototype,"_fullscreenMonitor"),_u.prototype),_u),Cu={width:"100%",height:"100%",position:"relative",display:"block"},Ru=function e(t,n,i){var r=this;G(this,e),this.__dispatcher=t,this.__target=n,["width","height","position","display"].forEach(function(e){Wt(r,e,{get:function(){return this.__dispatcher.dom.getStyle(this.__target,e)},set:function(t){if(pn(t)&&(t+="px"),!yn(t))throw new Error("The value of "+e+" in "+this.__target+"Config must be string, but not "+("undefined"===typeof t?"undefined":Mt(t))+".");this.__dispatcher.dom.setStyle(this.__target,e,t)},configurable:!0,enumerable:!0})}),Yn(this,i)};function Nu(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Pu=/^(before|after|_)/;function ju(e){return!e.match(Pu)}var Fu,Bu,zu,Uu,Gu,Wu,$u,Vu,Hu,Yu,Ku,Zu,Xu=(Ou=na(ju),xu=na(ju,{backup:function(){return!1}}),Mu=na(ju),Lu=na(ju,{backup:function(){return!1}}),Nu((Iu=function(){function e(t,n){G(this,e),this.events={},this.onceMap={},this.__dispatcher=t,this.__kind=n}return $t(e,[{key:"on",value:function(e,t,n,i){this._addEvent([t,i,e],n)}},{key:"off",value:function(e,t,n,i){var r=[t,i,e];if(!this._removeEvent(r,n)){var o=this._getHandlerFromOnceMap(r,n);dn(o)&&this._removeEvent(r,o)&&this._removeFromOnceMap(r,n,o)}}},{key:"once",value:function(e,t,n,i){var r=this,o=[t,i,e],a=function e(){Zn(n,this).apply(void 0,arguments),r._removeEvent(o,e),r._removeFromOnceMap(o,n,e)};this._addEvent(o,a),this._addToOnceMap(o,n,a)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=this.events[e];if(mn(o))return xs.indexOf(e)>-1?qi.resolve():this._eventProcessor.apply(this,[e,{sync:!1}].concat($n(i)));var a=this._getEventQueue(o.before,this.__dispatcher.order);return er.apply(void 0,[a].concat($n(i))).then(function(){if(!(xs.indexOf(e)>-1))return t._eventProcessor.apply(t,[e,{sync:!1}].concat($n(i)))}).catch(function(e){return Tn(e)&&t.__dispatcher.throwError(e),qi.reject(e)})}},{key:"emitSync",value:function(e){for(var t=this.events[e],n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(mn(t))return xs.indexOf(e)>-1||this._eventProcessor.apply(this,[e,{sync:!0}].concat($n(i)));var o=this._getEventQueue(t.before,this.__dispatcher.order);return tr.apply(void 0,[o].concat($n(i)))&&(xs.indexOf(e)>-1||this._eventProcessor.apply(this,[e,{sync:!0}].concat($n(i))))}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=this.events[e];if(mn(o))return qi.resolve(!0);var a=this._getEventQueue(o.main,this.__dispatcher.order);return er.apply(void 0,[a].concat($n(i))).then(function(){var e=t._getEventQueue(o.after,t.__dispatcher.order);return er.apply(void 0,[e].concat($n(i)))}).then(function(){return t._runSideEffectEvent.apply(t,[e,t.__dispatcher.order].concat($n(i)))}).catch(function(n){return Tn(n)&&t.__dispatcher.throwError(n),t._runSideEffectEvent.apply(t,[e,t.__dispatcher.order].concat($n(i)))})}},{key:"triggerSync",value:function(e){var t=this.events[e];if(mn(t))return!0;for(var n=this._getEventQueue(t.main,this.__dispatcher.order),i=this._getEventQueue(t.after,this.__dispatcher.order),r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];var s=tr.apply(void 0,[n].concat($n(o)))&&tr.apply(void 0,[i].concat($n(o)));return this._runSideEffectEvent.apply(this,[e,this.__dispatcher.order].concat($n(o))),s}},{key:"destroy",value:function(){delete this.events,delete this.__dispatcher}},{key:"_addEvent",value:function(e,t){var n=(e=Hn(e)).pop(),i=e.reduce(function(e,t){return e[t]=e[t]||{},e[t]},this.events);i[n]=i[n]||[],i[n].push(t)}},{key:"_removeEvent",value:function(e,t){for(var n=(e=Hn(e)).pop(),i=this.events,r=[],o=0,a=e.length;o<a;o++){var s=i[e[o]];if(mn(s))return;r.push([i,e[o]]),i=s}var u=i[n]||[],l=u.indexOf(t),c=l>-1;if(c&&u.splice(l,1),u.length<1){delete i[n];for(var f=r.length-1;f>-1;f--){var d=no(r[f],2),h=d[0],p=d[1];if(!mn(h[p]))break;delete h[p]}}return c}},{key:"_addToOnceMap",value:function(e,t,n){var i=e.join("-"),r=this.onceMap[i]=this.onceMap[i]||new Fa;r.has(t)||r.set(t,[]),r.get(t).push(n)}},{key:"_removeFromOnceMap",value:function(e,t,n){var i=e.join("-"),r=this.onceMap[i],o=r.get(t),a=o.indexOf(n);o.splice(a,1),mn(o)&&r.delete(t)}},{key:"_getHandlerFromOnceMap",value:function(e,t){var n=e.join("-"),i=this.onceMap[n];if(!cn(i)&&i.has(t))return i.get(t)[0]}},{key:"_getEventStage",value:function(e){var t=e.match(Pu),n=t&&t[0]||"main";return t&&(e=Kn(e.replace(Pu,""))),{stage:n,key:e}}},{key:"_getEventQueue",value:function(e,t){var n=this;return t=fn(t)?t.concat(["_vm"]):["_vm"],mn(e)?[]:t.reduce(function(t,i){return mn(e[i])||!fn(e[i])||!n.__dispatcher.plugins[i]&&"_vm"!==i?t:t.concat(e[i].map(function(e){return Zn(e,n.__dispatcher.plugins[i]||n.__dispatcher.vm)}))},[])}},{key:"_eventProcessor",value:function(e,t){for(var n=t.sync,i=Ls.indexOf(e)>-1,r=Cs.indexOf(e)>-1,o=Is.indexOf(e)>-1,a=arguments.length,s=Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];if(i||r||o){var l,c;if(o)(l=this.__dispatcher)[e].apply(l,$n(s));else(c=this.__dispatcher[i?"kernel":"dom"])[e].apply(c,$n(s));if(Ss.indexOf(e)>-1||Ts.indexOf(e)>-1)return!0}return this[n?"triggerSync":"trigger"].apply(this,[e].concat($n(s)))}},{key:"_runSideEffectEvent",value:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=this.events[e];return!mn(o)&&(this._getEventQueue(o._,t).forEach(function(e){return e.apply(void 0,$n(i))}),!0)}}]),e}()).prototype,"emit",[Ou],Yr(Iu.prototype,"emit"),Iu.prototype),Nu(Iu.prototype,"emitSync",[xu],Yr(Iu.prototype,"emitSync"),Iu.prototype),Nu(Iu.prototype,"trigger",[Mu],Yr(Iu.prototype,"trigger"),Iu.prototype),Nu(Iu.prototype,"triggerSync",[Lu],Yr(Iu.prototype,"triggerSync"),Iu.prototype),Iu);function qu(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Qu=/^(before|after|_)/;function Ju(e){var t=e.name,n=e.target,i=e.stage,r=function(e){var t=new RegExp("^(c|w)_");return e.match(t)?{name:e.replace(t,""),target:0===e.indexOf("c")?"container":"wrapper"}:"error"===e&&{name:"error",target:"kernel"}}(t);r&&(t=r.name,n=r.target);var o=function(e){var t=e.match(Qu),n=t&&t[0]||"main";return t&&(e=Kn(e.replace(Qu,""))),{name:e,stage:n}}(t),a=o.stage;return t=o.name,n||(n=function(e){return Ss.indexOf(e)>-1?"video":Ds.indexOf(e)>-1?"kernel":Ts.indexOf(e)>-1?"video-dom":As.indexOf(e)>-1?"esFullscreen":"plugin"}(t)),{name:t,stage:i||a,target:n}}function el(e){var t=e.id,n=e.fn,i=Ju(e),r=i.name,o=i.target,a=i.stage;if(!dn(n))throw new Error("You must provide a function to handle with event "+r+", but not "+("undefined"===typeof n?"undefined":Mt(n)));return{id:t,fn:n,name:r,target:o,stage:a}}function tl(e){var t=e.id,n=e.name;return n&&yn(n)&&!Qu.test(n)?!(!t||!yn(t))||(On.error("You must provide the id of emitter"),!1):(On.error("You must provide a legal event name, which is string and could not started with before/after/_"),!1)}function nl(e){e.target=Ju(e).target;for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return[e].concat($n(n))}var il,rl,ol,al,sl,ul,ll=(Fu=No(el),Bu=No(el),zu=No(el),Uu=na(tl),Gu=No(nl),Wu=na(tl,{backup:function(){return!1}}),$u=No(nl),Vu=na(tl),Hu=No(nl),Yu=na(tl,{backup:function(){return!1}}),Ku=No(nl),qu((Zu=function(){function e(t){G(this,e),this.__dispatcher=t,this.kinds=["kernel","container","wrapper","video","video-dom","plugin","esFullscreen"],this.buses={},this.bindedEventNames={},this.bindedEventInfo={},this.pendingEventsInfo={};var n=!0,i=!1,r=void 0;try{for(var o,a=to(this.kinds);!(n=(o=a.next()).done);n=!0){var s=o.value;this.bindedEventNames[s]=[],this.bindedEventInfo[s]=[],this.pendingEventsInfo[s]=[],this.buses[s]=new Xu(t,s)}}catch(u){i=!0,r=u}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}return $t(e,[{key:"on",value:function(e){var t=e.target,n=e.id,i=e.name,r=e.fn,o=e.stage;return this._addEventListenerOnTarget({name:i,target:t,id:n}),this.buses[t].on(n,i,r,o)}},{key:"off",value:function(e){var t=e.target,n=e.id,i=e.name,r=e.fn,o=e.stage,a=this.buses[t].off(n,i,r,o);return this._removeEventListenerOnTargetWhenIsUseless({name:i,target:t}),a}},{key:"once",value:function(e){var t=e.target,n=e.id,i=e.name,r=e.fn,o=e.stage;return this.buses[t].once(n,i,r,o)}},{key:"emit",value:function(e){for(var t,n=e.target,i=e.name,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return(t=this.buses[n]).emit.apply(t,[i].concat($n(o)))}},{key:"emitSync",value:function(e){for(var t,n=e.target,i=e.name,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return(t=this.buses[n]).emitSync.apply(t,[i].concat($n(o)))}},{key:"trigger",value:function(e){for(var t,n=e.target,i=e.name,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return(t=this.buses[n]).trigger.apply(t,[i].concat($n(o)))}},{key:"triggerSync",value:function(e){for(var t,n=e.target,i=e.name,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return(t=this.buses[n]).triggerSync.apply(t,[i].concat($n(o)))}},{key:"bindEventOnPenetrateNode",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bindedEventInfo["video-dom"].forEach(function(i){var r=no(i,2),o=r[0],a=r[1];n?kr(e,o,a):t._addEventOnDom(e,o,a)})}},{key:"bindEventOnVideo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bindedEventInfo["video-dom"].concat(this.bindedEventInfo.video).forEach(function(i){var r=no(i,2),o=r[0],a=r[1];n?kr(e,o,a):t._addEventOnDom(e,o,a)})}},{key:"listenOnMouseMoveEvent",value:function(e){var t=this,n=this.__dispatcher.dom,i="video-dom",r="_vm";Ms.forEach(function(o){var a=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];var u=a[0],l=u.toElement,c=u.currentTarget,f=u.relatedTarget,d=u.type,h=l||f;return n.mouseInVideo&&"mouseleave"===d&&!n.isNodeInsideVideo(h)?(n.mouseInVideo=!1,t.triggerSync.apply(t,[{target:i,name:o,id:r}].concat(a))):!n.mouseInVideo&&"mouseenter"===d&&n.isNodeInsideVideo(c)?(n.mouseInVideo=!0,t.triggerSync.apply(t,[{target:i,name:o,id:r}].concat(a))):void 0};t._addEventOnDom(e,o,a),t.bindedEventNames[i].indexOf(o)<0&&(t.bindedEventNames[i].push(o),t.bindedEventInfo[i].push([o,a]))})}},{key:"migrateKernelEvent",value:function(e,t){this.bindedEventInfo.kernel.forEach(function(n){var i=no(n,2),r=i[0],o=i[1];e.off(r,o),t.on(r,o)})}},{key:"destroy",value:function(){var e=this;this.kinds.forEach(function(t){if("kernel"===t)e.bindedEventInfo.kernel.forEach(function(t){var n=no(t,2),i=n[0],r=n[1];e.__dispatcher.kernel.off(i,r)});else{var n=e._getTargetDom(t);e.bindedEventInfo[t].forEach(function(i){var r=no(i,2),o=r[0],a=r[1];kr(n,o,a),"video-dom"===t&&e.__dispatcher.dom.videoExtendedNodes.forEach(function(e){return kr(e,o,a)})})}e.bindedEventInfo.kernel=[],e.bindedEventNames.kernel=[]})}},{key:"_addEventOnDom",value:function(e,t,n){if(Os.indexOf(t)>-1)return Tr(e,t,n,!1,{passive:!0});Tr(e,t,n)}},{key:"_addEventListenerOnTarget",value:function(e){var t=this,n=e.name,i=e.target,r=e.id;if(this._isEventNeedToBeHandled(i,n)){var o=void 0;if(!(this.bindedEventNames[i].indexOf(n)>-1)){var a=this._getTargetDom(i);if("kernel"===i){if(!this.__dispatcher.kernel)return void this.addPendingEvent(i,n,r);o=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.triggerSync.apply(t,[{target:i,name:n,id:"kernel"}].concat(r))},this.__dispatcher.kernel.on(n,o)}else"container"===i||"wrapper"===i?(o=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.triggerSync.apply(t,[{target:i,name:n,id:i}].concat(r))},this._addEventOnDom(a,n,o)):"video"===i?(o=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.trigger.apply(t,[{target:i,name:n,id:i}].concat(r))},this._addEventOnDom(a,n,o)):"video-dom"===i&&(o=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.triggerSync.apply(t,[{target:i,name:n,id:i}].concat(r))},this.__dispatcher.dom.videoExtendedNodes.forEach(function(e){return t._addEventOnDom(e,n,o)}),this._addEventOnDom(a,n,o));this.bindedEventNames[i].push(n),this.bindedEventInfo[i].push([n,o])}}}},{key:"_removeEventListenerOnTargetWhenIsUseless",value:function(e){var t=e.name,n=e.target;if(this._isEventNeedToBeHandled(n,t)){var i=this.bindedEventNames[n],r=i.indexOf(t);if(!(r<0)&&mn(this.buses[n].events[t])){var o=this.bindedEventInfo[n],a=void 0,s=void 0;for(s=0;s<o.length;s++)if(o[s][0]===t){a=o[s][1];break}if(dn(a)){if("kernel"===n)this.__dispatcher.kernel.off(t,a);else kr(this._getTargetDom(n),t,a),"video-dom"===n&&this.__dispatcher.dom.videoExtendedNodes.forEach(function(e){kr(e,t,a)});o.splice(s,1),i.splice(r,1)}}}}},{key:"_getTargetDom",value:function(e){var t=void 0;switch(e){case"container":case"wrapper":t=this.__dispatcher.dom[e];break;default:t=this.__dispatcher.dom.videoElement}return t}},{key:"_isEventNeedToBeHandled",value:function(e,t){return"plugin"!==e&&"esFullscreen"!==e&&(Ms.indexOf(t)<0||"video"!==e)}},{key:"addPendingEvent",value:function(e,t,n){this.pendingEventsInfo[e].push([t,n])}},{key:"applyPendingEvents",value:function(e){for(var t=this.pendingEventsInfo[e],n=t.splice(0,t.length);n.length;){var i=n.pop(),r=no(i,2),o=r[0],a=r[1];this._addEventListenerOnTarget({name:o,target:e,id:a})}}}]),e}()).prototype,"on",[Fu],Yr(Zu.prototype,"on"),Zu.prototype),qu(Zu.prototype,"off",[Bu],Yr(Zu.prototype,"off"),Zu.prototype),qu(Zu.prototype,"once",[zu],Yr(Zu.prototype,"once"),Zu.prototype),qu(Zu.prototype,"emit",[Uu,Gu],Yr(Zu.prototype,"emit"),Zu.prototype),qu(Zu.prototype,"emitSync",[Wu,$u],Yr(Zu.prototype,"emitSync"),Zu.prototype),qu(Zu.prototype,"trigger",[Vu,Hu],Yr(Zu.prototype,"trigger"),Zu.prototype),qu(Zu.prototype,"triggerSync",[Yu,Ku],Yr(Zu.prototype,"triggerSync"),Zu.prototype),Zu);function cl(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var fl={},dl={};function hl(e){if(!yn(e))throw new Error("Plugin's name must be a string, but not \""+e+'" in '+("undefined"===typeof e?"undefined":Mt(e)));return Kn(e)}var pl,vl,ml,gl,yl,bl,wl,_l,El,Sl,kl,Tl,Al,Ol,xl,Ml,Ll,Il,Dl=(il=No(hl),rl=No(function(e){if(dn(e)){if(!(e.prototype instanceof Su))throw new TypeError("Your are trying to install plugin "+e.name+", but it's not extends from Chimee.plugin.")}else{if(!hn(e)||mn(e))throw new TypeError("plugin's config must be an Object, but not \""+e+'" in '+("undefined"===typeof e?"undefined":Mt(e)));var t=e.name;if(!yn(t)||t.length<1)throw new TypeError('plugin must have a legal namea, but not "'+t+'" in '+("undefined"===typeof t?"undefined":Mt(t)))}}),ol=No(hl),al=No(hl),sl=No(hl),cl((ul=function(){function e(t,n){var i=this;if(G(this,e),this.plugins={},this.order=[],this.readySync=!1,this.zIndexMap={inner:[],outer:[]},this.changeWatchable=!0,this.kernelEventHandlerList=[],!hn(t))throw new TypeError('UserConfig must be an Object, but not "'+t+'" in '+("undefined"===typeof t?"undefined":Mt(t)));this.dom=new Du(t,this),this.vm=n,this.videoConfigReady=!1,this.videoConfig=new du(this,t),fn(t.plugins)&&!fn(t.plugin)&&(t.plugin=t.plugins,delete t.plugins),this.binder=new ll(this),this.binder.listenOnMouseMoveEvent(this.dom.videoElement),this._initUserPlugin(t.plugin);var r=Yn({},Cu,t.container||{});if(this.order.forEach(function(e){return i.plugins[e].__init(i.videoConfig,r)}),this.videoConfigReady=!0,this.videoConfig.init(),this.containerConfig=new Ru(this,"container",r),this.kernel=this._createKernel(this.dom.videoElement,this.videoConfig),this.binder.applyPendingEvents("kernel"),t.noDefaultContextMenu){var o=t.noDefaultContextMenu,a="container"===o||"wrapper"===o?o:"video-dom";this.binder.on({target:a,id:"_vm",name:"contextmenu",fn:function(e){return e.preventDefault()},stage:"main"})}var s=[];this.order.forEach(function(e){var t=i.plugins[e].__inited();wn(t)&&s.push(t)}),this.readySync=0===s.length,this.ready=this.readySync?qi.resolve():qi.all(s).then(function(){i.readySync=!0,i.onReady()}),this.readySync&&this.onReady()}return $t(e,[{key:"onReady",value:function(){this.binder.trigger({target:"plugin",name:"ready",id:"dispatcher"}),this._autoloadVideoSrcAtFirst()}},{key:"use",value:function(t){if(yn(t)&&(t={name:t,alias:void 0}),!hn(t)||hn(t)&&!yn(t.name))throw new TypeError("pluginConfig do not match requirement");yn(t.alias)||(t.alias=void 0);var n=t,i=n.name,r=n.alias;t.name=r||i,delete t.alias;var o=Kn(i),a=Kn(r||i),s=t,u=e.getPluginConfig(o);if(mn(u))throw new TypeError("You have not installed plugin "+o);hn(u)&&(u.id=a);var l=dn(u)?new u({id:a},this,s):new Su(u,this,s);return this.plugins[a]=l,Wt(this.vm,a,{value:l,configurable:!0,enumerable:!1,writable:!1}),this.order.push(a),this._sortZIndex(),this.videoConfigReady&&l.__inited(),l.ready}},{key:"unuse",value:function(e){var t=this.plugins[e];if(hn(t)&&dn(t.$destroy)){t.$destroy();var n=this.order.indexOf(e);n>-1&&this.order.splice(n,1),delete this.plugins[e],delete this.vm[e]}else delete this.plugins[e]}},{key:"throwError",value:function(e){this.vm.__throwError(e)}},{key:"silentLoad",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.duration,r=void 0===i?3:i,o=n.bias,a=void 0===o?0:o,s=n.repeatTimes,u=void 0===s?0:s,l=n.increment,c=void 0===l?0:l,f=n.isLive,d=void 0===f?this.videoConfig.isLive:f,h=n.box,p=void 0===h?this.videoConfig.box:h,v=n.kernels,m=void 0===v?this.videoConfig.kernels:v,g=n.preset,y=void 0===g?this.videoConfig.preset:g,b=n.immediate||d,w={isLive:d,box:p,src:e,kernels:m,preset:y};return er(new Array(u+1).fill(1).map(function(e,i){return function(){return new qi(function(e,o){n.abort&&o({error:!0,message:"user abort the mission"});var s=document.createElement("video"),l=t.kernel.currentTime+r+c*i;s.muted=!0;var f=!1,h=void 0,p=void 0,v=void 0,m=void 0,g=function n(){var i=t.kernel.currentTime;if(a<=0&&i>=l||a>0&&(Math.abs(l-i)<=a&&f||i-l>a))return kr(t.dom.videoElement,"timeupdate",n),kr(s,"error",p,!0),f?o({error:!1,video:s,kernel:h}):(kr(s,"canplay",v,!0),kr(s,"loadedmetadata",m,!0),h.destroy(),e())};v=function(){if(f=!0,b)return kr(t.dom.videoElement,"timeupdate",g),kr(s,"error",p,!0),o({error:!1,video:s,kernel:h})},m=function(){d||h.seek(b?t.kernel.currentTime:l)},p=function(n){kr(s,"canplay",v,!0),kr(s,"loadedmetadata",m,!0),kr(t.dom.videoElement,"timeupdate",g),h.off("error",p);var r=void 0;if(!mn(n.data)&&n.data.errmsg){var a=n.data.errmsg;On.error("chimee's silentload bump into a kernel error",a),r=new Error(a)}else r=mn(s.error)?new Error("unknow video error"):new Error(s.error.message),On.error("chimee's silentload",r.message);return h.destroy(),t._silentLoadTempKernel=void 0,i===u?o(r):e(r)},Tr(s,"canplay",v,!0),Tr(s,"loadedmetadata",m,!0),Tr(s,"error",p,!0),h=t._createKernel(s,w),t._silentLoadTempKernel=h,h.on("error",p),Tr(t.dom.videoElement,"timeupdate",g),h.load()})}})).then(function(){var t="The silentLoad for "+e+" timed out. Please set a longer duration or check your network";return qi.reject(new Error(t))}).catch(function(e){if(Tn(e))return qi.reject(e);if(e.error)return qi.reject(new Error(e.message));var i=e.video,r=e.kernel;return n.abort?(r.destroy(),qi.reject(new Error("user abort the mission"))):t.dom.videoElement.paused?(t.switchKernel({video:i,kernel:r,config:w}),qi.resolve()):new qi(function(e){Tr(i,"play",function(){t.switchKernel({video:i,kernel:r,config:w}),e()},!0),i.play()})})}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=yn(e)?e:hn(e)&&yn(e.src)?e.src:"";hn(e)&&(delete e.src,t=e);var i=this.kernel.box,r=this.videoConfig,o=t,a=o.isLive,s=void 0===a?r.isLive:a,u=o.box,l=void 0===u?fs({src:n,box:r.box}):u,c=o.preset,f=void 0===c?r.preset:c,d=o.kernels,h=void 0===d?r.kernels:d;if("native"!==l||l!==i||!mn(t)){var p=document.createElement("video"),v={isLive:s,box:l,preset:f,src:n,kernels:h},m=this._createKernel(p,v);this.switchKernel({video:p,kernel:m,config:v,notifyChange:!0})}var g=this.videoConfig.autoload;this._changeUnwatchable(this.videoConfig,"autoload",!1),this.videoConfig.src=n||this.videoConfig.src,this.kernel.load(this.videoConfig.src),this._changeUnwatchable(this.videoConfig,"autoload",g)}},{key:"switchKernel",value:function(e){var t=this,n=e.video,i=e.kernel,r=e.config,o=e.notifyChange,a=this.kernel,s=Hn(this.videoConfig);this.dom.migrateVideoRequiredGuardedAttributes(n),this.dom.removeVideo(),this.dom.installVideo(n),this.videoConfig.changeWatchable=!1,this.videoConfig.autoload=!1,this.videoConfig.src=r.src,this.videoConfig._realDomAttr.forEach(function(e){"src"!==e&&(t.videoConfig[e]=s[e])}),this.videoConfig.changeWatchable=!0,this.binder.migrateKernelEvent(a,i),this.kernel=i,this._silentLoadTempKernel=void 0;var u=r.isLive,l=r.box,c=r.preset,f=r.kernels;lr(this.videoConfig,{isLive:u,box:l,preset:c,kernels:f}),a.destroy(),o?this.binder&&this.binder.bindEventOnVideo&&this.binder.bindEventOnVideo(n):setTimeout(function(){t.binder&&t.binder.bindEventOnVideo&&t.binder.bindEventOnVideo(n)})}},{key:"destroy",value:function(){for(var e in this.plugins)this.unuse(e);this.binder.destroy(),delete this.binder,this.dom.destroy(),delete this.dom,this.kernel.destroy(),delete this.kernel,delete this.vm,delete this.plugins,delete this.order}},{key:"_initUserPlugin",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return fn(t)||(t=[]),t.map(function(t){return e.use(t)})}},{key:"_sortZIndex",value:function(){var e=this,t=this.order.reduce(function(t,n){var i=e.plugins[n];if(mn(i))return t;var r=t[i.$inner?"inner":"outer"],o=i.$level;return r[o]=r[o]||[],r[o].push(n),t},{inner:{},outer:{}}),n=t.inner,i=t.outer;n[0]=n[0]||[],n[0].unshift("videoElement"),i[0]=i[0]||[],i[0].unshift("container");var r=Ji(n),o=Ji(i);this.dom.setPluginsZIndex(r),this.dom.setPluginsZIndex(o),this.zIndexMap.inner=r,this.zIndexMap.outer=o}},{key:"_getTopLevel",value:function(e){var t=this.zIndexMap[e?"inner":"outer"],n=this.plugins[t[t.length-1]];return mn(n)?0:n.$level}},{key:"_autoloadVideoSrcAtFirst",value:function(){if(this.videoConfig.autoload){if(!this.videoConfig.src)return void On.warn("You have not set the src, so you better set autoload to be false. Accroding to https://github.com/Chimeejs/chimee/blob/master/doc/zh-cn/chimee-api.md#src.");this.binder.emit({name:"load",target:"plugin",id:"dispatcher"},{src:this.videoConfig.src})}}},{key:"_changeUnwatchable",value:function(e,t,n){this.changeWatchable=!1,e[t]=n,this.changeWatchable=!0}},{key:"_createKernel",value:function(e,t){var n=t.kernels,i=t.preset,r={},o={};return fn(n)&&(o=n.reduce(function(e,t){if(yn(t)){var n=dl[t];return dn(n)?(e[t]=n,e):(On.warn("You have not installed kernel for "+t+"."),e)}if(hn(t)){var i=t.name,o=t.handler;if(yn(o)){var a=dl[o];return dn(a)?(e[o]=a,r[o]=t,e):(On.warn("You have not installed kernel for "+o+"."),e)}if(dn(o)){var s=i||o.name;return e[s]=o,r[s]=t,e}return On.warn("When you pass in an SingleKernelConfig in Array, you must clarify it's handler, we only support handler in string or function but not "+("undefined"===typeof o?"undefined":Mt(o))),e}return On.warn("If you pass in kernels as array, you must pass in kernels in string or function, but not "+("undefined"===typeof t?"undefined":Mt(t))),e},{})),hn(n)&&Ht(n).forEach(function(e){var t=n[e];if(!dn(t)){if(hn(t)){var i=t.handler;if(yn(i)){var a=dl[i];return dn(a)?(o[e]=a,void(r[e]=t)):void On.warn("You have not installed kernel for "+i+".")}return dn(i)?(o[e]=i,void(r[e]=t)):void On.warn("When you pass in an SingleKernelConfig in Object, you must clarify it's handler, we only support handler in string or function but not "+("undefined"===typeof i?"undefined":Mt(i)))}return On.warn("If you pass in kernels as object, you must pass in kernels in string or function, but not "+("undefined"===typeof t?"undefined":Mt(t))),n}o[e]=t}),t.preset=lr(o,i),t.presetConfig=r,new Es(e,t)}}],[{key:"install",value:function(e){var t=Kn(e.name);mn(fl[t]);var n=dn(e)?e:Yn({id:t},e);return fl[t]=n,t}},{key:"hasInstalled",value:function(e){return!mn(fl[e])}},{key:"uninstall",value:function(e){delete fl[e]}},{key:"getPluginConfig",value:function(e){return fl[e]}},{key:"installKernel",value:function(e,t){(hn(e)?Ga(e):[[e,t]]).forEach(function(e){var t=no(e,2),n=t[0],i=t[1];if(!dn(i))throw new Error("The kernel you install on "+n+" must be a Function, but not "+("undefined"===typeof i?"undefined":Mt(i)));dn(dl[n])&&On.warn("You have alrady install a kernel on "+n+", and now we will replace it"),dl[n]=i})}},{key:"uninstallKernel",value:function(e){delete dl[e]}},{key:"hasInstalledKernel",value:function(e){return dn(dl[e])}}]),e}()).prototype,"unuse",[il],Yr(ul.prototype,"unuse"),ul.prototype),cl(ul.prototype,"throwError",[$o],Yr(ul.prototype,"throwError"),ul.prototype),cl(ul,"install",[rl],Yr(ul,"install"),ul),cl(ul,"hasInstalled",[ol],Yr(ul,"hasInstalled"),ul),cl(ul,"uninstall",[al],Yr(ul,"uninstall"),ul),cl(ul,"getPluginConfig",[sl],Yr(ul,"getPluginConfig"),ul),ul),Cl=(pl=function(){function e(){var t,n,i,r;G(this,e),this.log={error:!0,info:!0,warn:!0,debug:!0,verbose:!0},t=this,n="_silent",r=this,(i=vl)&&Wt(t,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0}),this.errorHandler=void 0;var o=Ht(this.log).reduce(function(e,t){return e[t]=Ro({get:function(){return On["ENABLE_"+t.toUpperCase()]},set:function(e){return On["ENABLE_"+t.toUpperCase()]=e,!0===e&&(this.silent=!1),e}}),e},{});Qo(this.log,o,{self:!0})}return $t(e,[{key:"silent",get:function(){return this._silent},set:function(e){var t=this;e=!!e,this._silent=e,Ht(this.log).forEach(function(n){t.log[n]=!e})}},{key:"useStyleFullscreen",get:function(){return La.useStyleFirst},set:function(e){La.useStyleFirst=!!e}}]),e}(),vl=function(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(pl.prototype,"_silent",[Zo],{enumerable:!0,initializer:function(){return!1}}),pl);function Rl(e,t,n,i){n&&Wt(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Nl(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Pl,jl=Go()((Il=Ll=function(e){function t(e){G(this,t);var n=Lt(this,(t.__proto__||U(t)).call(this));if(n.destroyed=!1,Rl(n,"__id",yl,n),Rl(n,"version",bl,n),Rl(n,"config",wl,n),yn(e)||Sn(e))e={wrapper:e,controls:!0};else{if(!hn(e))throw new Error("You must pass in an Object containing wrapper or string or element to new a Chimee");if(!e.wrapper)throw new Error("You must pass in an legal object")}return n.__dispatcher=new Dl(e,n),n.ready=n.__dispatcher.ready,n.readySync=n.__dispatcher.readySync,n.__wrapAsVideo(n.__dispatcher.videoConfig),n}return Bt(t,Eu),$t(t,null,[{key:"registerEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.target;if(!t||!yn(t))throw new Error("The event name must be a string, but not "+("undefined"===typeof t?"undefined":Mt(t)));if(!n||!yn(n))throw new Error("The event target must be a string, but not "+("undefined"===typeof n?"undefined":Mt(n)));"kernel"===n&&Ds.push(t)}}]),$t(t,[{key:"destroy",value:function(){this.destroyed||(ga(t.prototype.__proto__||U(t.prototype),"__destroy",this).call(this),this.__dispatcher.destroy(),Object.defineProperty(this,"__dispatcher",{get:function(){throw new Error("This instance has been destroyed.")},enumerable:!0,configurable:!0}),this.destroyed=!0)}},{key:"use",value:function(e){return this.__dispatcher.use(e)}},{key:"unuse",value:function(e){return this.__dispatcher.unuse(e)}},{key:"__throwError",value:function(e){yn(e)&&(e=new Error(e));var n=this.config.errorHandler||t.config.errorHandler;if(dn(n))return n(e);if(!t.config.silent){if(Tn(e))throw e;console.error(e)}}}]),t}(),Ll.plugin=Su,Ll.config=new Cl,Ll.install=Dl.install,Ll.uninstall=Dl.uninstall,Ll.hasInstalled=Dl.hasInstalled,Ll.installKernel=Dl.installKernel,Ll.uninstallKernel=Dl.uninstallKernel,Ll.hasInstalledKernel=Dl.hasInstalledKernel,Ll.getPluginConfig=Dl.getPluginConfig,yl=Nl((gl=Il).prototype,"__id",[Ho],{enumerable:!0,initializer:function(){return"_vm"}}),bl=Nl(gl.prototype,"version",[Ho],{enumerable:!0,initializer:function(){return"0.10.6"}}),wl=Nl(gl.prototype,"config",[Ho],{enumerable:!0,initializer:function(){return{errorHandler:void 0}}}),Nl(gl,"plugin",[Ho],(_l=(_l=Yr(gl,"plugin"))?_l.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return _l}}),gl),Nl(gl,"config",[Ho],(El=(El=Yr(gl,"config"))?El.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return El}}),gl),Nl(gl,"install",[Ho],(Sl=(Sl=Yr(gl,"install"))?Sl.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Sl}}),gl),Nl(gl,"uninstall",[Ho],(kl=(kl=Yr(gl,"uninstall"))?kl.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return kl}}),gl),Nl(gl,"hasInstalled",[Ho],(Tl=(Tl=Yr(gl,"hasInstalled"))?Tl.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Tl}}),gl),Nl(gl,"installKernel",[Ho],(Al=(Al=Yr(gl,"installKernel"))?Al.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Al}}),gl),Nl(gl,"uninstallKernel",[Ho],(Ol=(Ol=Yr(gl,"uninstallKernel"))?Ol.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Ol}}),gl),Nl(gl,"hasInstalledKernel",[Ho],(xl=(xl=Yr(gl,"hasInstalledKernel"))?xl.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return xl}}),gl),Nl(gl,"getPluginConfig",[Ho],(Ml=(Ml=Yr(gl,"getPluginConfig"))?Ml.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Ml}}),gl),ml=gl))||ml,Fl=function(){function e(t){G(this,e),this.parent=t}return $t(e,[{key:"create",value:function(){this.createEl(),this.addAllEvent(),this.option.create&&this.option.create.apply(this)}},{key:"destroy",value:function(){this.removeAllEvent(),this.option.destroy&&this.option.destroy.apply(this)}},{key:"createEl",value:function(){this.$dom=document.createElement(this.option.tag),"string"===typeof this.option.html?this.$dom.innerHTML=this.option.html:this.$dom.appendChild(this.option.html),this.parent.$wrap.appendChild(this.$dom)}},{key:"addAllEvent",value:function(){var e=this;this.option.defaultEvent&&Ht(this.option.defaultEvent).forEach(function(t){var n=e.option.defaultEvent[t];e[n]=Zn(e[n],e),Tr(e.$dom,t,e[n],!1,!1)}),this.option.event&&Ht(this.option.event).forEach(function(t){var n="__"+t;e[n]=Zn(e.option.event[t],e),Tr(e.$dom,t,e[n],!1,!1)})}},{key:"removeAllEvent",value:function(){var e=this;this.$dom instanceof HTMLElement||(this.$dom=this.$dom[0]),this.option.defaultEvent&&Ht(this.option.defaultEvent).forEach(function(t){var n=e.option.defaultEvent[t];e[n]=Zn(e[n],e),kr(e.$dom,t,e[n],!1,!1)}),this.option.event&&Ht(this.option.event).forEach(function(t){var n="__"+t;e[n]=Zn(e.option.event[t],e),kr(e.$dom,t,e[n],!1,!1)})}}]),e}(),Bl=function(e){function t(e,n){G(this,t);var i=Lt(this,(t.__proto__||U(t)).call(this,e));return i.option=n,i.init(),i}return Bt(t,Fl),$t(t,[{key:"init",value:function(){ga(t.prototype.__proto__||U(t.prototype),"create",this).call(this),wr(this.$dom,"chimee-flex-component")}}]),t}(),zl={tag:"chimee-control-state",html:"\n    <chimee-control-state-play></chimee-control-state-play>\n    <chimee-control-state-pause></chimee-control-state-pause>\n  ",animate:{icon:'\n      <svg viewBox="0 0 200 200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g fill="#ffffff" stroke="#ffffff">\n          <path class="left"></path>\n          <path class="right"></path>\n        </g>\n      </svg>\n    ',path:{play:{left:"M0.921875,0.265625L0.921875,197.074852L95.7890625,149L96.2929688,49Z",right:"M90.3142151,45.9315226L90.3142151,151.774115L201.600944,99.9938782L201.600944,98.0237571Z"},pause:{left:"M0.921875,1.265625L0.921875,198.074852L79.3611677,198.074852L79.3611677,0.258923126Z",right:"M126.921875,1.265625L126.921875,198.074852L205.361168,198.074852L205.361168,0.258923126Z"}}},defaultEvent:{click:"click"}},Ul=function(e){function t(e,n){G(this,t);var i=Lt(this,(t.__proto__||U(t)).call(this,e));return i.option=Yn(zl,hn(n)?n:{}),i.animate=!1,i.init(),i}return Bt(t,Fl),$t(t,[{key:"init",value:function(){ga(t.prototype.__proto__||U(t.prototype),"create",this).call(this),this.$dom=Ir(this.$dom),this.$dom.addClass("chimee-flex-component"),this.option.icon&&this.option.icon.play&&this.option.icon.pause?(this.$play=this.$dom.find("chimee-control-state-play"),this.$pause=this.$dom.find("chimee-control-state-pause"),this.$play.html(this.option.icon.play),this.$pause.html(this.option.icon.pause)):this.option.bitmap||(this.animate=!0,this.option.animate.path=this.option.path?this.option.path:this.option.animate.path,this.$dom.html(this.option.animate.icon),this.$left=this.$dom.find(".left"),this.$right=this.$dom.find(".right")),this.changeState("pause")}},{key:"changeState",value:function(e){var t="play"===e?"pause":"play";this.state=e,wr(this.parent.$dom,t),_r(this.parent.$dom,e),this.animate&&this.setPath(t)}},{key:"setPath",value:function(e){var t=this.option.animate.path;"play"===e?(this.$left.attr("d",t.play.left),this.$right.attr("d",t.play.right)):(this.$left.attr("d",t.pause.left),this.$right.attr("d",t.pause.right))}},{key:"click",value:function(e){var t="play"===this.state?"pause":"play";this.changeState(t),this.parent.$emit(t)}}]),t}();function Gl(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Wl,$l={tag:"chimee-volume",html:"\n    <chimee-volume-state>\n      <chimee-volume-state-mute></chimee-volume-state-mute>\n      <chimee-volume-state-low></chimee-volume-state-low>\n      <chimee-volume-state-high></chimee-volume-state-high>\n    </chimee-volume-state>\n    <chimee-volume-bar>\n      <chimee-volume-bar-wrap>\n        <chimee-volume-bar-bg></chimee-volume-bar-bg>\n        <chimee-volume-bar-all>\n          <chimee-volume-bar-ball></chimee-volume-bar-ball>\n        </chimee-volume-bar-all>\n        <chimee-volume-bar-track></chimee-volume-bar-track>\n      </chimee-volume-bar-wrap>\n    </chimee-volume-bar>\n  ",animate:{icon:'\n      <svg viewBox="0 0 107 101" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g class="volume">\n          <polygon class="horn" points="0.403399942 30 27.3842118 30 56.8220589 2.84217094e-14 57.9139815 100 27.3842118 70 0.403399942 70"></polygon>\n          <path class="ring1" d="M63,5.00975239 C69.037659,4.78612057 75.9178585,8.40856146 83.6405984,15.877075 C95.2247083,27.0798454 100,34.7975125 100,50.9608558 C100,67.1241991 95.3628694,73.7907482 83.6405984,83.8306724 C75.8257511,90.5239552 68.9455516,94.0320644 63,94.355" fill-opacity="0" stroke-width="10"></path>\n          <path class="ring2" d="M65.2173913,29.4929195 C67.8779343,29.3931169 70.9097496,31.0097416 74.3128371,34.3427934 C79.4174684,39.3423712 81.5217391,42.7866154 81.5217391,50 C81.5217391,57.2133846 79.4783502,60.1885354 74.3128371,64.6691576 C70.8691617,67.656239 67.8373465,69.2218397 65.2173913,69.3659595" fill-opacity="0" stroke-width="10"></path>\n          <path class="line" d="M4.19119202,3.65220497 L102,96" stroke-width="10"></path>\n        </g>\n      </svg>\n    '},defaultEvent:{mousedown:"mousedown"}},Vl=(Gl((Pl=function(e){function t(e,n){G(this,t);var i=Lt(this,(t.__proto__||U(t)).call(this,e));return i.parent.preVolume=0,i.option=Yn($l,hn(n)?n:{}),i.init(),i}return Bt(t,Fl),$t(t,[{key:"init",value:function(){var e=this;ga(t.prototype.__proto__||U(t.prototype),"create",this).call(this),this.$dom=Ir(this.$dom),this.$state=this.$dom.find("chimee-volume-state"),this.$bar=this.$dom.find("chimee-volume-bar"),this.$all=this.$dom.find("chimee-volume-bar-all"),this.$bg=this.$dom.find("chimee-volume-bar-bg"),this.layout="vertical"===this.option.layout?"vertical":"horizonal",this.option.icon&&this.option.icon.mute&&this.option.icon.low?(this.option.icon.high=this.option.icon.high||this.option.icon.low,this.$mute=this.$dom.find("chimee-volume-state-mute"),this.$low=this.$dom.find("chimee-volume-state-low"),this.$high=this.$dom.find("chimee-volume-state-high"),this.$mute.html(this.option.icon.mute),this.$low.html(this.option.icon.low),this.$high.html(this.option.icon.high)):this.option.bitmap||(this.animate=!0,this.$state.html(this.option.animate.icon)),this.$dom.addClass("chimee-flex-component "+this.layout),this.changeState(),this.watch_muted=this.parent.$watch("muted",function(t){e.update()})}},{key:"inited",value:function(){this.update()}},{key:"destroy",value:function(){this.watch_muted(),ga(t.prototype.__proto__||U(t.prototype),"destroy",this).call(this)}},{key:"changeState",value:function(){this.parent.muted||0===this.parent.volume?this.state="mute":this.parent.volume>0&&this.parent.volume<=.5?this.state="low":this.parent.volume>.5&&this.parent.volume<=1&&(this.state="high"),this.$dom.removeClass("mute low high"),this.$dom.addClass(this.state)}},{key:"click",value:function(e){var t=e.path||function(e){var t=[];if(null===e)return t;for(t.push(e);null!==e.parentNode;)e=e.parentNode,t.push(e);return t}(e.target);return-1!==t.indexOf(this.$state[0])?(this.stateClick(e),"state"):-1!==t.indexOf(this.$bar[0])?(this.barClick(e),"bar"):"padding"}},{key:"stateClick",value:function(){if(this.parent.muted)this.parent.muted=!1;else{var e=this.parent.volume;this.parent.volume=0===e?this.parent.preVolume:0,this.parent.preVolume=e,this.changeState()}}},{key:"barClick",value:function(e){var t="vertical"===this.layout?1-e.offsetY/this.$bg[0].offsetHeight:e.offsetX/this.$bg[0].offsetWidth;this.parent.volume=t<0?0:t>1?1:t,this.update()}},{key:"mousedown",value:function(e){"bar"===this.click(e)&&(this.startX="vertical"===this.layout?e.clientY:e.clientX,this.startVolume=this.parent.volume,Tr(window,"mousemove",this.draging),Tr(window,"mouseup",this.dragEnd),Tr(window,"contextmenu",this.dragEnd))}},{key:"update",value:function(){this.changeState();var e=this.parent.muted?0:this.parent.volume;"vertical"===this.layout?this.$all.css("height",100*e+"%"):this.$all.css("width",100*e+"%")}},{key:"draging",value:function(e){this.endX="vertical"===this.layout?e.clientY:e.clientX;var t="vertical"===this.layout?(this.startX-this.endX)/this.$bg[0].offsetHeight:(this.endX-this.startX)/this.$bg[0].offsetWidth,n=+(this.startVolume+t).toFixed(2);this.parent.volume=n<0?0:n>1?1:n,this.parent.muted=!1}},{key:"dragEnd",value:function(){this.startX=0,this.startVolume=0,kr(window,"mousemove",this.draging),kr(window,"mouseup",this.dragEnd),kr(window,"contextmenu",this.dragEnd)}}]),t}()).prototype,"draging",[$o],Yr(Pl.prototype,"draging"),Pl.prototype),Gl(Pl.prototype,"dragEnd",[$o],Yr(Pl.prototype,"dragEnd"),Pl.prototype),Pl);function Hl(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Yl,Kl={tag:"chimee-progressbar",html:'\n    <chimee-progressbar-wrap>\n      <chimee-progressbar-bg class="chimee-progressbar-line"></chimee-progressbar-bg>\n      <chimee-progressbar-buffer class="chimee-progressbar-line"></chimee-progressbar-buffer>\n      <chimee-progressbar-all class="chimee-progressbar-line">\n        <chimee-progressbar-ball></chimee-progressbar-ball>\n      </chimee-progressbar-all>\n      <chimee-progressbar-tip></chimee-progressbar-tip>\n    </chimee-progressbar-wrap>\n  '},Zl=(Hl((Wl=function(e){function t(e,n){G(this,t);var i=Lt(this,(t.__proto__||U(t)).call(this,e));return i.option=Yn(Kl,hn(n)?n:{}),i.visiable=!1!==n,i.init(),i}return Bt(t,Fl),$t(t,[{key:"init",value:function(){ga(t.prototype.__proto__||U(t.prototype),"create",this).call(this),this.$dom=Ir(this.$dom),this.$wrap=this.$dom.find("chimee-progressbar-wrap"),this.$buffer=this.$dom.find("chimee-progressbar-buffer"),this.$all=this.$dom.find("chimee-progressbar-all"),this.$tip=this.$dom.find("chimee-progressbar-tip"),this.$track=this.$dom.find("chimee-progressbar-track"),this.$line=this.$dom.find(".chimee-progressbar-line"),this.$ball=this.$dom.find("chimee-progressbar-ball"),this.$dom.addClass("chimee-flex-component"),!this.visiable&&this.$dom.css("visibility","hidden"),"top"===this.option.layout&&(this.$dom.addClass("progressbar-layout-top"),this.$wrap.css({top:-this.$ball[0].offsetHeight+"px"}),xr(this.parent.$wrap,"paddingTop",this.$ball[0].offsetHeight+"px")),this.addWrapEvent()}},{key:"destroy",value:function(){this.removeWrapEvent(),this.watch_screen&&this.watch_screen(),ga(t.prototype.__proto__||U(t.prototype),"destroy",this).call(this)}},{key:"addWrapEvent",value:function(){this.$wrap.on("mousedown",this.mousedown),this.$wrap.on("mousemove",this.tipShow),this.$wrap.on("mouseleave",this.tipEnd)}},{key:"removeWrapEvent",value:function(){this.$wrap.off("mousedown",this.mousedown),this.$wrap.off("mousemove",this.tipShow),this.$wrap.off("mouseleave",this.tipEnd)}},{key:"progress",value:function(){var e=0;try{e=this.parent.buffered.end(0)}catch(_c){}var t=e/this.parent.duration*100+"%";this.$buffer.css("width",t)}},{key:"update",value:function(){var e=void 0!==this._currentTime?this._currentTime:this.parent.currentTime,t=e?e/this.parent.duration:0;this.$all.css("width","calc("+100*t+"% - "+this.$ball[0].offsetWidth/2+"px")}},{key:"mousedown",value:function(e){e.target!==this.$tip[0]&&(this.parent.duration===this.parent.duration?(this._currentTime=e.offsetX/this.$wrap[0].offsetWidth*this.parent.duration,this.startX=e.clientX,this.startTime=this._currentTime,Tr(window,"mousemove",this.draging),Tr(window,"mouseup",this.dragEnd),Tr(window,"contextmenu",this.dragEnd)):console.error("isNaN(duration) === true"))}},{key:"draging",value:function(e){this.endX=e.clientX;var t=(this.endX-this.startX)/this.$wrap[0].offsetWidth*this.parent.duration,n=+(this.startTime+t).toFixed(2);this._currentTime=n<0?0:n>this.parent.duration?this.parent.duration:n,this.update()}},{key:"dragEnd",value:function(){this.update(),this.startX=0,this.startTime=0,this.parent.currentTime=this._currentTime,this._currentTime=void 0,kr(window,"mousemove",this.draging),kr(window,"mouseup",this.dragEnd),kr(window,"contextmenu",this.dragEnd)}},{key:"tipShow",value:function(e){if(e.target!==this.$tip[0]&&e.target!==this.$ball[0]){var t=e.offsetX/this.$wrap[0].offsetWidth*this.parent.duration,n=ir(t=t<0?0:t>this.parent.duration?this.parent.duration:t),i=e.offsetX-this.$tip[0].offsetWidth/2,r=this.$wrap[0].offsetWidth-this.$tip[0].offsetWidth;i=i<0?0:i>r?r:i,this.$tip.text(n),this.$tip.css("display","inline-block"),this.$tip.css("left",i+"px")}else this.$tip.css("display","none")}},{key:"tipEnd",value:function(){this.$tip.css("display","none")}},{key:"changePointerEvent",value:function(e){this.$wrap.css("pointerEvents",e)}}]),t}()).prototype,"mousedown",[$o],Yr(Wl.prototype,"mousedown"),Wl.prototype),Hl(Wl.prototype,"draging",[$o],Yr(Wl.prototype,"draging"),Wl.prototype),Hl(Wl.prototype,"dragEnd",[$o],Yr(Wl.prototype,"dragEnd"),Wl.prototype),Hl(Wl.prototype,"tipShow",[$o],Yr(Wl.prototype,"tipShow"),Wl.prototype),Hl(Wl.prototype,"tipEnd",[$o],Yr(Wl.prototype,"tipEnd"),Wl.prototype),Wl),Xl={tag:"chimee-progresstime",html:"\n    <chimee-progresstime-pass>00:00</chimee-progresstime-pass\n    ><chimee-progresstime-total\n      ><span>/</span\n      ><chimee-progresstime-total-value>00:00</chimee-progresstime-total-value>\n    </chimee-progresstime-total>\n  "},ql=function(e){function t(e,n){G(this,t);var i=Lt(this,(t.__proto__||U(t)).call(this,e));return i.option=Yn(Xl,hn(n)?n:{}),i.init(),i}return Bt(t,Fl),$t(t,[{key:"init",value:function(){ga(t.prototype.__proto__||U(t.prototype),"create",this).call(this),this.$dom=Ir(this.$dom),this.$total=this.$dom.find("chimee-progresstime-total-value"),this.$pass=this.$dom.find("chimee-progresstime-pass"),this.$dom.addClass("chimee-flex-component")}},{key:"updatePass",value:function(){this.$pass.text(ir(this.parent.currentTime))}},{key:"updateTotal",value:function(){this.$total.text(ir(this.parent.duration))}}]),t}(),Ql={tag:"chimee-screen",html:'\n    <chimee-screen-full>\n      <svg viewBox="0 0 67 66" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n          <desc>Created with Sketch.</desc>\n          <defs></defs>\n          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="screen-small" transform="translate(33.756308, 32.621867) rotate(45.000000) translate(-33.756308, -32.621867) translate(18.756308, -10.378133)" fill="#FFFFFF">\n                  <polygon id="Path" transform="translate(14.967695, 66.389245) rotate(180.000000) translate(-14.967695, -66.389245) " points="11.5190786 46.9431778 11.7210093 70.7913773 0.565180527 70.7913773 15.4674455 85.8353125 29.3702096 70.7913773 18.5573247 70.7702156 18.5573247 46.9431778"></polygon>\n                  <polygon id="Path" points="11.5190786 0.274130278 11.7210093 24.1223298 0.565180527 24.1223298 15.4674455 39.1662649 29.3702096 24.1223298 18.5573247 24.1011681 18.5573247 0.274130278"></polygon>\n              </g>\n          </g>\n      </svg>\n    </chimee-screen-full>\n    <chimee-screen-small>\n      <svg viewBox="0 0 61 62" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n        <desc>Created with Sketch.</desc>\n        <defs></defs>\n        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="Group" transform="translate(30.756308, 30.621867) rotate(45.000000) translate(-30.756308, -30.621867) translate(15.756308, -12.378133)" fill="#FFFFFF">\n                <polygon id="Path" points="11.5190786 46.9431778 11.7210093 70.7913773 0.565180527 70.7913773 15.4674455 85.8353125 29.3702096 70.7913773 18.5573247 70.7702156 18.5573247 46.9431778"></polygon>\n                <polygon id="Path" transform="translate(14.967695, 19.720198) rotate(180.000000) translate(-14.967695, -19.720198) " points="11.5190786 0.274130278 11.7210093 24.1223298 0.565180527 24.1223298 15.4674455 39.1662649 29.3702096 24.1223298 18.5573247 24.1011681 18.5573247 0.274130278"></polygon>\n            </g>\n        </g>\n      </svg>\n    </chimee-screen-small>\n  ',defaultEvent:{click:"click"}},Jl=(function(e,t,n,i,r){var o={};Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Yl=function(e){function t(e,n){G(this,t);var i=Lt(this,(t.__proto__||U(t)).call(this,e));return i.state="small",i.option=Yn(Ql,hn(n)?n:{}),i.init(),i}return Bt(t,Fl),$t(t,[{key:"init",value:function(){ga(t.prototype.__proto__||U(t.prototype),"create",this).call(this),this.$dom=Ir(this.$dom),this.changeState(this.state),this.$dom.addClass("chimee-flex-component"),this.$full=this.$dom.find("chimee-screen-full"),this.$small=this.$dom.find("chimee-screen-small"),this.option.icon&&this.option.icon.full&&this.option.icon.small?(this.$full.html(this.option.icon.full),this.$small.html(this.option.icon.small)):this.option.bitmap&&(this.$full.html(""),this.$small.html(""))}},{key:"changeState",value:function(e){var t="small"===e?"full":"small";wr(this.parent.$dom,e),_r(this.parent.$dom,t)}},{key:"click",value:function(){var e=!1;"small"===this.state?(this.state="full",e=!0):(this.state="small",e=!1),this.changeState(this.state),this.parent.$fullscreen(e,"container"),e?this.watch_screen=this.parent.$watch("isFullscreen",this.screenChange):this.watch_screen()}},{key:"screenChange",value:function(){this.parent.fullscreenElement&&(this.state="small",this.changeState("small"),this.parent.$fullscreen(!1,"container"))}}]),t}()).prototype,"screenChange",[$o],Yr(Yl.prototype,"screenChange"),Yl.prototype),Yl),ec={tag:"chimee-clarity",width:"2em",html:'\n    <chimee-clarity-text></chimee-clarity-text>\n    <chimee-clarity-list>\n      <ul></ul>\n      <div class="chimee-clarity-list-arrow">\n        <svg viewBox="0 0 115 6"  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g id="Group-3-Copy" fill="#57B0F6">\n            <polygon id="Path-2" points="0.0205224145 0.0374249581 0.0205224145 2.12677903 53.9230712 2.12677903 57.1127727 5.3468462 60.2283558 2.12677903 113.820935 2.12677903 113.820935 0.0374249581"></polygon>\n          </g>\n        </svg>\n      </div>\n    </chimee-clarity-list>\n  ',defaultEvent:{click:"click"},duration:3,bias:0,increment:0,repeatTimes:0,immediate:!1,abort:!1,list:[]},tc=function(e){function t(e,n){G(this,t);var i=Lt(this,(t.__proto__||U(t)).call(this,e));return i.option=Yn(ec,hn(n)?n:{}),i.init(),i}return Bt(t,Fl),$t(t,[{key:"init",value:function(){if(ga(t.prototype.__proto__||U(t.prototype),"create",this).call(this),wr(this.$dom,"chimee-flex-component"),this.$text=Ir(this.$dom).find("chimee-clarity-text"),this.$list=Ir(this.$dom).find("chimee-clarity-list"),this.$listUl=this.$list.find("ul"),this.option.width&&xr(this.$dom,"width",this.option.width),!this.option.list.length)return xr(this.$dom,{display:"none"});this.initTextList(this.option.list)}},{key:"initTextList",value:function(e){var t=this;this.$listUl.html(""),e.forEach(function(e){var n=Ir(document.createElement("li"));n.attr("data-url",e.src),n.text(e.name),e.src===t.parent.$videoConfig.src&&(t.$text.text(e.name),n.addClass("active")),t.$listUl.append(n)})}},{key:"click",value:function(e){var t=this,n=e.target;if("LI"===n.tagName){var i=n.getAttribute("data-url")||"";this.switchClarity(i).then(function(){t.loadOption=void 0,Wn(n.parentElement.children).map(function(e){_r(e,"active")}),wr(e.target,"active"),t.$text.text(e.target.textContent)}).catch(function(e){console.warn(e)})}}},{key:"switchClarity",value:function(e){this.loadOption&&(this.loadOption.abort=!0);var t=this.option,n=t.duration,i=t.bias,r=t.increment,o=t.repeatTimes,a=t.immediate,s=t.abort;return this.loadOption={duration:n,bias:i,increment:r,repeatTimes:o,immediate:a,abort:s},this.parent.$silentLoad(e,this.loadOption)}}]),t}(),nc={tag:"chimee-playbackrate",width:"4em",html:'\n    <chimee-playbackrate-text></chimee-playbackrate-text>\n    <chimee-playbackrate-list>\n      <ul></ul>\n      <div class="chimee-playbackrate-list-arrow">\n        <svg viewBox="0 0 115 6"  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g id="Group-3-Copy" fill="#57B0F6">\n            <polygon id="Path-2" points="0.0205224145 0.0374249581 0.0205224145 2.12677903 53.9230712 2.12677903 57.1127727 5.3468462 60.2283558 2.12677903 113.820935 2.12677903 113.820935 0.0374249581"></polygon>\n          </g>\n        </svg>\n      </div>\n    </chimee-playbackrate-list>\n  ',defaultEvent:{click:"click"}},ic=function(e){function t(e,n){G(this,t);var i=Lt(this,(t.__proto__||U(t)).call(this,e));return i.option=Yn(nc,hn(n)?n:{}),i.init(),i}return Bt(t,Fl),$t(t,[{key:"init",value:function(){ga(t.prototype.__proto__||U(t.prototype),"create",this).call(this),wr(this.$dom,"chimee-flex-component"),this.$text=Ir(this.$dom).find("chimee-playbackrate-text"),this.$list=Ir(this.$dom).find("chimee-playbackrate-list"),this.$listUl=this.$list.find("ul"),this.option.width&&xr(this.$dom,"width",this.option.width),this.initTextList()}},{key:"initTextList",value:function(){var e=this,t=this.option.list.length,n=!1;this.option.list.forEach(function(i,r){var o=Ir(document.createElement("li"));o.attr("data-value",i.value),o.text(i.name),(i.default||!n&&r===t-1)&&(n=!0,!i.default&&console.warn("\u64ad\u653e\u901f\u7387\u5217\u8868\u9700\u8981\u7ed9\u6bcf\u9879\u914d\u7f6e `default(boolean)` \u6765\u6807\u660e\u662f\u5426\u662f\u9ed8\u8ba4\u64ad\u653e\u901f\u7387"),e.$text.text(i.name),o.addClass("active"),e.switchPlaybackrate(i.value)),e.$listUl.append(o)})}},{key:"click",value:function(e){var t=e.target;if("LI"===t.tagName){var n=t.getAttribute("data-value")||1;this.switchPlaybackrate(n),Wn(t.parentElement.children).map(function(e){_r(e,"active")}),wr(e.target,"active"),this.$text.text(e.target.textContent)}}},{key:"switchPlaybackrate",value:function(e){var t=this;setTimeout(function(n){t.parent.playbackRate=e},0)}}]),t}(),rc={hideBarTime:2e3,barShowByMouse:"move"},oc={name:"chimeeControl",el:"chimee-control",data:{children:{},show:!1,disabled:!0},level:99,operable:!1,penetrate:!1,create:function(){},init:function(e){},destroy:function(){for(var e in window.clearTimeout(this.timeId),this.children)this.children[e].destroy()},inited:function(){var e=this.$videoConfig;e.controls&&(this.show=!0,e.controls=!1);var t=this;for(var n in Qo(e,{controls:Ro({get:function(){return t.show},set:function(e){return t.show=Boolean(e),t._display(),!1}},{preSet:!0})},{self:!0}),this.config=hn(this.$config)?Yn(rc,this.$config):rc,this.config.hideBarTime="move"===this.config.barShowByMouse?this.config.hideBarTime:0,this.$dom.innerHTML="<chimee-control-wrap></chimee-control-wrap>",this.$wrap=this.$dom.querySelector("chimee-control-wrap"),this.children=function(e){var t=e.config.children=function(e){return e.$config.children?e.$config.children:e.isLive?{play:!0,progressTime:!1,progressBar:!1,volume:!0,screen:!0}:{play:!0,progressTime:!0,progressBar:!0,volume:!0,screen:!0}}(e),n={};return t?Ht(t).forEach(function(i){switch(i){case"play":t.play&&(n.play=new Ul(e,t.play));break;case"progressTime":t.progressTime&&(n.progressTime=new ql(e,t.progressTime));break;case"progressBar":n.progressBar=new Zl(e,t.progressBar);break;case"volume":t.volume&&(n.volume=new Vl(e,t.volume));break;case"screen":t.screen&&(n.screen=new Jl(e,t.screen));break;case"clarity":t.clarity&&(n.clarity=new tc(e,t.clarity));break;case"playbackrate":t.playbackrate&&Array.isArray(t.playbackrate.list)&&t.playbackrate.list.length&&(n.playbackrate=new ic(e,t.playbackrate));break;default:n[i]=new Bl(e,t[i])}}):(n.play=new Ul(e),n.progressTime=new ql(e),n.progressBar=new Zl(e),n.volume=new Vl(e),n.screen=new Jl(e)),n}(this),this._setStyle(),this.children)this.children[n].inited&&this.children[n].inited()},events:{load:function(){this._showItself(),this._progressUpdate(),this.children.play&&this.children.play.changeState("pause"),this.children.progressTime&&this.children.progressTime.updateTotal(),this.children.progressBar&&this.children.progressBar.changePointerEvent("none")},loadstart:function(){this._disable(!0)},canplay:function(){this._disable(!1)},play:function(){this.children.play&&this.children.play.changeState("play"),"move"===this.config.barShowByMouse&&this._hideItself()},pause:function(){this.children.play&&this.children.play.changeState("pause"),this._showItself()},c_mouseenter:function(){"move"!==this.config.barShowByMouse&&this._showItself()},c_mousemove:function(){this._mousemove()},c_mouseleave:function(){"move"!==this.config.barShowByMouse&&this._hideItself()},durationchange:function(){this.children.progressTime&&this.children.progressTime.updateTotal(),this.children.progressBar&&this.children.progressBar.changePointerEvent("auto")},timeupdate:function(){this._progressUpdate()},progress:function(){this.children.progressBar&&this.children.progressBar.progress()},volumechange:function(){this.children.volume&&this.children.volume.update()},keydown:function(e){switch(e.stopPropagation(),e.keyCode){case 32:e.preventDefault(),this.children.play&&this.children.play.click(e);break;case 37:e.preventDefault();var t=this.currentTime-10;this.currentTime=t<0?0:t,this._mousemove();break;case 39:e.preventDefault();var n=this.currentTime+10;this.currentTime=n>this.duration?this.duration:n,this._mousemove();break;case 38:e.preventDefault();var i=this.volume+.1;this.volume=i>1?1:i,this._mousemove();break;case 40:e.preventDefault();var r=this.volume-.1;this.volume=r<0?0:r,this._mousemove()}},click:function(e){var t=this,n=new Date,i=this.clickTime;this.clickTime=n,n-i<300?clearTimeout(this.clickTimeId):this.clickTimeId=setTimeout(function(){!t.disabled&&t.children.play&&t.children.play.click(e)},300)},dblclick:function(e){!this.disabled&&this.children.screen&&this.children.screen.click()}},methods:{_progressUpdate:function(){this.children.progressBar&&this.children.progressBar.update(),this.children.progressTime&&this.children.progressTime.updatePass()},_hideItself:function(){var e=this;window.clearTimeout(this.timeId),this.timeId=setTimeout(function(){var t=e.$wrap.offsetHeight;t=e.children.progressBar?e.children.progressBar.$wrap[0].offsetTop-t:-t,xr(e.$wrap,{bottom:t+"px"}),xr(e.$dom,{visibility:"hidden"})},this.config.hideBarTime)},_showItself:function(){window.clearTimeout(this.timeId),xr(this.$wrap,{bottom:"0"}),xr(this.$dom,{visibility:"visible"})},_display:function(){var e=this.show?"block":"none";xr(this.$dom,{display:e})},_mousemove:function(e){this.paused||"enter"===this.config.barShowByMouse||(this._showItself(),this._hideItself())},_disable:function(e){this.show&&(this.disabled=e)},_setStyle:function(){var e="";e+=this.config.majorColor?"\n  .chimee-flex-component svg * {\n    fill: majorColor;\n    stroke: majorColor;\n  }\n\n  chimee-progressbar-all {\n    background: majorColor;\n  }\n\n  chimee-volume.chimee-flex-component chimee-volume-bar-all {\n    background: majorColor;\n  }\n\n  chimee-playbackrate-list li:hover,\n  chimee-playbackrate-list li.active,\n  chimee-clarity-list li:hover,\n  chimee-clarity-list li.active {\n    color: majorColor;\n  }\n".replace(/majorColor/g,this.config.majorColor):"",e+=this.config.hoverColor?"\n  .chimee-flex-component svg:hover *{\n    fill: hoverColor;\n    stroke: hoverColor;\n  }\n".replace(/hoverColor/g,this.config.hoverColor):"";var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t)},updateClarity:function(e){if(!fn(e))return console.error("list must be an array.");this.children.clarity.initTextList(e)}}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("chimee-popup{position:absolute;color:#fff;background-color:rgba(88,88,88,.5);font-size:13px;font-family:sans-serif;border:1px solid hsla(0,0%,100%,.08);padding:3px}chimee-popup cm-pp-close{float:right;color:#fff;text-decoration:none;line-height:14px;text-shadow:0 0 1px #000;font-size:15px;padding:0 3px;cursor:pointer;opacity:.8}chimee-popup cm-pp-close:hover{opacity:1}chimee-popup cm-pp-body,chimee-popup cm-pp-head{display:block;padding:3px 3px 6px}chimee-popup cm-pp-head{font-weight:700;border-bottom:1px solid hsla(0,0%,100%,.18);padding:0 5px 4px;margin-bottom:5px}chimee-popup cm-pp-body{font-size:12px}",{});var ac=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tagName,n=void 0===t?"chimee-popup":t,i=e.className,r=e.name,o=void 0===r?"popup":r,a=e.html,s=e.title,u=void 0===s?"\u8fd9\u662f\u4e00\u4e2a\u4fe1\u606f\u6846":s,l=e.body,c=void 0===l?"\u8fd9\u91cc\u662f\u4fe1\u606f\u5185\u5bb9":l,f=e.offsetAttr,d=void 0===f?"left top":f,h=e.offset,p=void 0===h?"50% 50%":h,v=e.translate,m=void 0===v?"":v,g=e.width,y=e.height,b=e.level,w=e.init,_=e.inited,E=e.data,S=e.create,k=e.beforeCreate,T=e.destroy,A=e.events,O=e.computed,x=e.methods,M=void 0===x?{}:x,L=e.penetrate,I=void 0!==L&&L,D=e.operable,C=void 0===D||D,R=e.hide,N=void 0!==R&&R,P=e.opened,j=e.closed,F=e.autoFocus,B={html:a||"\n      <cm-pp-close>\xd7</cm-pp-close>\n      "+(!1!==u?"<cm-pp-head>"+u+"</cm-pp-head>":"")+"\n      "+(!1!==c?"<cm-pp-body>"+c+"</cm-pp-body>":"")+"\n    ",closeSelector:"._close"};return{name:o,el:n,className:i,beforeCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.events,n=e.methods,i=arguments[1];hn(i)&&(hn(i.events)&&Yn(t,i.events),hn(i.methods)&&Yn(n,i.methods)),k&&k.apply(this,arguments)},create:function(){var e=hn(this.$config)?Yn(B,this.$config):B;(this.$domWrap=Ir(this.$dom).css("display","none")).html(e.html).delegate("cm-pp-close, "+e.closeSelector,"click",this.close),this.width(g).height(y).offset(p).translate(m),this._hide=N;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];S&&S.apply(this,n),!this._hide&&this.open()},destroy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];T&&T.apply(this,t),this.$domWrap.undelegate(this.$config.closeSelector,"click",this.close).remove()},level:b,init:w,inited:_,data:E,events:A,computed:O,penetrate:I,operable:C,autoFocus:F,methods:Yn({open:function(){if(this.destroyed)return this;this.$domWrap.css("display","block"),this._hide=!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupOpen",t,this),dn(P)&&P.apply(this,t),this},close:function(){if(this.destroyed)return this;this.$domWrap.css("display","none"),this._hide=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupClose",t,this),dn(j)&&j.apply(this,t),this},width:function(e){return e&&this.$domWrap.css("width",e),this},height:function(e){return e&&this.$domWrap.css("height",e),this},offset:function(e){var t=(""+(e||"")).split(" "),n={};if(t.length>2)return["top","right","bottom","left"].forEach(function(e,i){t[i]&&(n[e]=t[i])}),this.$domWrap.css(n),this;var i=no(t,2),r=i[0],o=i[1];if(""===r)return this;var a=o||r,s=d.split(" ");n[s[0]]=r,n[s[1]]=a,this.$domWrap.css(n);var u=[];return"50%"===r&&u.push("-50%"),"50%"===a&&u.push("-50%"),u.length>0&&this.translate(u.join(" ")),this},translate:function(e){var t=(""+(e||"")).split(" "),n=no(t,2),i=n[0],r=n[1];return""!==i&&(this.$domWrap.css("transform","translate("+i+", "+(r||i)+")"),"transform"in document.createElement("a").style||!window.console||!window.console.warn||console.warn("[chimee-plugin-popup] \u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301CSS3\u7684transform\u7279\u6027\uff0cDom\u5143\u7d20\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528translate\u3002")),this}},M)}}({tagName:"chimee-menu",name:"chimeeContextmenu",html:"<ul></ul>",offset:"0",hide:!0,data:{baseMenus:[{text:"\u67e5\u770b\u65e5\u5fd7",action:"openLogPopup",hide:!0},{text:"Chimee {VERSION} &copy; 360",url:"http://chimee.org",disable:!0}]},create:function(){var e=this,t=this.$config,n=t.baseMenus,i=t.menus;fn(n)&&(this.baseMenus=n),this.updatemenu(i),this.$domWrap.on("click",this.clickHandler),this.$plugins.chimeeLog&&this.switchLogMenu(!1),this._doc=new this.$domWrap.constructor(document),this._doc_click=function(t){return e.close()},this._doc.on("click",this._doc_click)},destroy:function(){this._doc.off("click",this._doc_click)},opened:function(){this.$bumpToTop()},events:{contextmenu:function(e){var t=e.offsetX,n=e.offsetY,i=this.$dom.parentElement;if(dn(i.getBoundingClientRect)){var r=i.getBoundingClientRect();t=e.pageX-r.left-(document.documentElement.scrollLeft||document.body.scrollLeft||0),n=e.pageY-r.top-(document.documentElement.scrollTop||document.body.scrollTop||0)}this.offset(t+"px "+n+"px").open(e),e.preventDefault()},logPluginDestroy:function(){this.switchLogMenu(!0)},logPluginCreate:function(){this.switchLogMenu(!1)}},methods:{switchLogMenu:function(e){var t=this.baseMenus.find(function(e){return"openLogPopup"===e.action});t&&(t.hide=e,this.$domWrap.find('[data-action="openLogPopup"]').css("display",e?"none":""))},updatemenu:function(e){var t=this,n=[];fn(e)&&(n=n.concat(e));var i=n.concat(this.baseMenus).map(function(e){var n=e.hide,i=e.disable,r=e.action,o=e.className,a=e.text,s=e.url,u=i?"disable":"",l=r?'data-action="'+r+'"':"",c=o?'class="'+o+'"':"",f=n?'style="display:none"':"",d=a.replace(/\{([^)]*)\}/g,function(e,n){return t[n]});return s&&(d='<a href="'+s+'" target="_blank">'+d+"</a>"),"<li "+u+" "+l+" "+c+" "+f+">"+d+"</li>"}).join("");this.$domWrap.find("ul").html(i)},clickHandler:function(e){var t=e.target;if(!t.disable){var n=t.dataset.action;n&&(this.$emit(n),dn(this[n])&&this[n](e)),this.close()}e.stopPropagation()}}});!function(e,t){if("undefined"===typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}("chimee-popup{position:absolute;color:#fff;background-color:rgba(88,88,88,.5);font-size:13px;font-family:sans-serif;border:1px solid hsla(0,0%,100%,.08);padding:3px}chimee-popup cm-pp-close{float:right;color:#fff;text-decoration:none;line-height:14px;text-shadow:0 0 1px #000;font-size:15px;padding:0 3px;cursor:pointer;opacity:.8}chimee-popup cm-pp-close:hover{opacity:1}chimee-popup cm-pp-body,chimee-popup cm-pp-head{display:block;padding:3px 3px 6px}chimee-popup cm-pp-head{font-weight:700;border-bottom:1px solid hsla(0,0%,100%,.18);padding:0 5px 4px;margin-bottom:5px}chimee-popup cm-pp-body{font-size:12px}",void 0),function(e,t){if("undefined"===typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}(".chimee-log{padding:2px;box-shadow:0 1px 4px rgba(0,0,0,.6)}.chimee-log label{margin-left:10px;font-weight:100;font-size:12px}.chimee-log label input{vertical-align:middle;display:inline;width:auto;padding:0;margin:0}.chimee-log vs-pp-body{padding:3px}.chimee-log textarea{display:block;width:100%;height:200px;margin:-3px;border:1px solid hsla(0,0%,100%,.5);background-color:hsla(0,0%,100%,.9)}",void 0);var sc=(new Date).getTime().toString();or("_chimee_t",sc);var uc,lc=rr("_chimee_t")===sc,cc=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i={};return t.forEach(function(e){i[e]=function(t){for(var n=this,i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];this.writeLog(t);var a=this.box,s=this.type,u=this.src,l=this._waiting_num,c=this.currentTime,f=this._is_seek,d=void 0!==f&&f,h=this._is_play,p=void 0!==h&&h,v=this.playingTimestamp,m=this.loadstartTimestamp,g=this.waitingTimestamp;switch(e){case"loadstart":this.sendLog(e,{box:a,type:s,src:u}),this._ls_timeout=setTimeout(function(){n.sendLog("timeout",{src:u})},this.timeoutDelay),this._total_waiting_time=0;break;case"seeking":this._is_seek=!0;break;case"play":this._is_play=!0;break;case"pause":this.sendLog(e,{src:u,currentTime:c});break;case"canplay":clearTimeout(this._ls_timeout);var y=this.canplayTimestamp;this.sendLog(e,{src:u,currentTime:c,waitingNum:l,waitingTime:y-(m||g||y)});break;case"playing":clearTimeout(this._ls_timeout);var b=v-(m||g||v);this._total_waiting_time+=b,this.sendLog(e,{src:u,waitingNum:l,currentTime:c,isSeek:d,isPlay:p,waitingTime:b}),this.loadstartTimestamp=0,this.waitingTimestamp=0,this._is_seek=!1,this._is_play=!1;break;case"ended":this.sendLog(e,{src:u,waitingNum:l,totalWaitingTime:this._total_waiting_time});break;case"waiting":this._waiting_num++,this.sendLog(e,{src:u,waitingNum:l,currentTime:c,isSeek:d,isPlay:p});break;case"error":this.sendLog(e,{src:u,args:r})}}}),i}("loadstart","abort","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough","pause","play","playing","emptied","ended","seeking","seeked","stalled","suspend","timeupdate","waiting","error"),fc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tagName,n=void 0===t?"chimee-popup":t,i=e.className,r=e.name,o=void 0===r?"popup":r,a=e.html,s=e.title,u=void 0===s?"\u8fd9\u662f\u4e00\u4e2a\u4fe1\u606f\u6846":s,l=e.body,c=void 0===l?"\u8fd9\u91cc\u662f\u4fe1\u606f\u5185\u5bb9":l,f=e.offsetAttr,d=void 0===f?"left top":f,h=e.offset,p=void 0===h?"50% 50%":h,v=e.translate,m=void 0===v?"":v,g=e.width,y=e.height,b=e.level,w=e.init,_=e.inited,E=e.data,S=e.create,k=e.beforeCreate,T=e.destroy,A=e.events,O=e.computed,x=e.methods,M=void 0===x?{}:x,L=e.penetrate,I=void 0!==L&&L,D=e.operable,C=void 0===D||D,R=e.hide,N=void 0!==R&&R,P=e.opened,j=e.closed,F=e.autoFocus,B={html:a||"\n      <cm-pp-close>\xd7</cm-pp-close>\n      "+(!1!==u?"<cm-pp-head>"+u+"</cm-pp-head>":"")+"\n      "+(!1!==c?"<cm-pp-body>"+c+"</cm-pp-body>":"")+"\n    ",closeSelector:"._close"};return{name:o,el:n,className:i,beforeCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.events,n=e.methods,i=arguments[1];hn(i)&&(hn(i.events)&&Yn(t,i.events),hn(i.methods)&&Yn(n,i.methods)),k&&k.apply(this,arguments)},create:function(){var e=hn(this.$config)?Yn(B,this.$config):B;(this.$domWrap=Ir(this.$dom).css("display","none")).html(e.html).delegate("cm-pp-close, "+e.closeSelector,"click",this.close),this.width(g).height(y).offset(p).translate(m),this._hide=N;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];S&&S.apply(this,n),!this._hide&&this.open()},destroy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];T&&T.apply(this,t),this.$domWrap.undelegate(this.$config.closeSelector,"click",this.close).remove()},level:b,init:w,inited:_,data:E,events:A,computed:O,penetrate:I,operable:C,autoFocus:F,methods:Yn({open:function(){if(this.destroyed)return this;this.$domWrap.css("display","block"),this._hide=!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupOpen",t,this),dn(P)&&P.apply(this,t),this},close:function(){if(this.destroyed)return this;this.$domWrap.css("display","none"),this._hide=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupClose",t,this),dn(j)&&j.apply(this,t),this},width:function(e){return e&&this.$domWrap.css("width",e),this},height:function(e){return e&&this.$domWrap.css("height",e),this},offset:function(e){var t=(""+(e||"")).split(" "),n={};if(t.length>2)return["top","right","bottom","left"].forEach(function(e,i){t[i]&&"auto"!==t[i]&&(n[e]=t[i])}),this.$domWrap.css(n),this;var i=no(t,2),r=i[0],o=i[1];if(""===r)return this;var a=o||r,s=d.split(" ");n[s[0]]=r,n[s[1]]=a,this.$domWrap.css(n);var u=[];return"50%"===r&&u.push("-50%"),"50%"===a&&u.push("-50%"),u.length>0&&this.translate(u.join(" ")),this},translate:function(e){var t=(""+(e||"")).split(" "),n=no(t,2),i=n[0],r=n[1];return i&&this.$domWrap.css("transform","translate("+i+", "+(r||i)+")"),this}},M)}}({name:"chimeeLog",className:"chimee-log",title:"\u65e5\u5fd7\u4fe1\u606f"+(lc?'<label><input type="checkbox">\u4e0b\u6b21\u81ea\u52a8\u6253\u5f00</label>':""),body:"<textarea>Chimee logs:</textarea>",offset:"0",width:"400px",hide:!0,autoFocus:!1,logPostUrl:void 0,beforeCreate:function(e,t){var n;yn(n=t.logPostUrl)&&n.match(/^((https?|ftp|rtsp|mms):\/\/)(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6}|localhost)(:[0-9]{1,4})?((\/?)|(\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/i)&&(this.logPostUrl=t.logPostUrl),t.timeoutDelay&&(this.timeoutDelay=t.timeoutDelay)},create:function(){this.logBase.ver=this.VERSION;var e=this.$domWrap;if(this.$txtEl=e.find("textarea"),lc){var t="1"===rr("auto_on");e.find('input[type="checkbox"]').on("change",function(e){or("auto_on",+this.checked)})[0].checked=t,this._hide=!t}this.writeLog({type:"ready"}),this.$emitSync("logPluginCreate")},destroy:function(){clearTimeout(this._ls_timeout),this.$emitSync("logPluginDestroy"),this.sendLog("destroy")},inited:function(){},closed:function(){this.$txtEl.text("")},opened:function(){this.$bumpToTop()},methods:{writeLog:function(e){var t=e.type;if(this[t+"Timestamp"]=+new Date,!this._hide){var n=void 0,i="write_"+t+"_log";if(this[i]){for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];n=this[i](t,o)}var s=this.$txtEl.text()+"\n["+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss.i",n=e.getFullYear().toString(),i={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),i:e.getMilliseconds()};t=t.replace(/(y+)/gi,function(e,t){return n.substr(4-Math.min(4,t.length))});var r=function(e){t=t.replace(new RegExp("("+e+"+)","g"),function(t,n){return(i[e]<10&&n.length>1?"0":"")+i[e]})};for(var o in i)r(o);return t}(new Date(this[t+"Timestamp"]),"yyyy-MM-dd hh:mm:ss.i")+"] "+t+" "+(void 0!==n?ma(n):""),u=this.$txtEl.text(s)[0];u.scrollTop=u.scrollHeight}},write_loadstart_log:function(e){return{box:this.box,type:this.type,src:this.src}},write_durationchange_log:function(){return{duration:this.duration}},write_timeupdate_log:function(){return{currentTime:this.currentTime}},send_inited_log:function(){var e=this.box,t=this.type,n=this.src,i=this.controls,r=this.loop;return{pro:location.protocol,box:e,type:t,src:n,ctrs:i,loop:r}},sendLog:function(e,t){var n=this.logPostUrl;if(n){var i=Yn(t||{},this.logBase),r="send_"+e+"_log";this[r]&&Yn(i,this[r](e,i)),Yn(i,{evt:e,_t:+new Date,_r:Math.random()});var o=[];Ht(i).forEach(function(e){return o.push(encodeURIComponent(e)+"="+encodeURIComponent(i[e]))});var a=new Image;a.onload=a.onerror=function(e){a=null},a.src=n+"?"+o.join("&")}}},events:Yn(cc,{openLogPopup:function(){this.open()}}),data:{timeoutDelay:3e4,pageLoadedTimestamp:sc,_waiting_num:0,_total_waiting_time:0,logBase:{uid:(uc=rr("_chimee_uid"),uc||or("_chimee_uid",uc=Xn()+Xn()+"-"+Xn()+"-"+Xn()+"-"+Xn()+"-"+Xn()+Xn()+Xn()),uc),ref:location.href}},computed:{type:function(){return this.$videoConfig.isLive?"live":"vod"}}});!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("chimee-popup{position:absolute;color:#fff;background-color:rgba(88,88,88,.5);font-size:13px;font-family:sans-serif;border:1px solid hsla(0,0%,100%,.08);padding:3px}chimee-popup cm-pp-close{float:right;color:#fff;text-decoration:none;line-height:14px;text-shadow:0 0 1px #000;font-size:15px;padding:0 3px;cursor:pointer;opacity:.8}chimee-popup cm-pp-close:hover{opacity:1}chimee-popup cm-pp-body,chimee-popup cm-pp-head{display:block;padding:3px 3px 6px}chimee-popup cm-pp-head{font-weight:700;border-bottom:1px solid hsla(0,0%,100%,.18);padding:0 5px 4px;margin-bottom:5px}chimee-popup cm-pp-body{font-size:12px}",{});var dc,hc={errorTips:"\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5"},pc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tagName,n=void 0===t?"chimee-popup":t,i=e.className,r=e.name,o=void 0===r?"popup":r,a=e.html,s=e.title,u=void 0===s?"\u8fd9\u662f\u4e00\u4e2a\u4fe1\u606f\u6846":s,l=e.body,c=void 0===l?"\u8fd9\u91cc\u662f\u4fe1\u606f\u5185\u5bb9":l,f=e.offsetAttr,d=void 0===f?"left top":f,h=e.offset,p=void 0===h?"50% 50%":h,v=e.translate,m=void 0===v?"":v,g=e.width,y=e.height,b=e.level,w=e.init,_=e.inited,E=e.data,S=e.create,k=e.beforeCreate,T=e.destroy,A=e.events,O=e.computed,x=e.methods,M=void 0===x?{}:x,L=e.penetrate,I=void 0!==L&&L,D=e.operable,C=void 0===D||D,R=e.hide,N=void 0!==R&&R,P=e.opened,j=e.closed,F=e.autoFocus,B={html:a||"\n      <cm-pp-close>\xd7</cm-pp-close>\n      "+(!1!==u?"<cm-pp-head>"+u+"</cm-pp-head>":"")+"\n      "+(!1!==c?"<cm-pp-body>"+c+"</cm-pp-body>":"")+"\n    ",closeSelector:"._close"};return{name:o,el:n,className:i,beforeCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.events,n=e.methods,i=arguments[1];hn(i)&&(hn(i.events)&&Yn(t,i.events),hn(i.methods)&&Yn(n,i.methods)),k&&k.apply(this,arguments)},create:function(){var e=hn(this.$config)?Yn(B,this.$config):B;(this.$domWrap=Ir(this.$dom).css("display","none")).html(e.html).delegate("cm-pp-close, "+e.closeSelector,"click",this.close),this.width(g).height(y).offset(p).translate(m),this._hide=N;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];S&&S.apply(this,n),!this._hide&&this.open()},destroy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];T&&T.apply(this,t),this.$domWrap.undelegate(this.$config.closeSelector,"click",this.close).remove()},level:b,init:w,inited:_,data:E,events:A,computed:O,penetrate:I,operable:C,autoFocus:F,methods:Yn({open:function(){if(this.destroyed)return this;this.$domWrap.css("display","block"),this._hide=!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupOpen",t,this),dn(P)&&P.apply(this,t),this},close:function(){if(this.destroyed)return this;this.$domWrap.css("display","none"),this._hide=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupClose",t,this),dn(j)&&j.apply(this,t),this},width:function(e){return e&&this.$domWrap.css("width",e),this},height:function(e){return e&&this.$domWrap.css("height",e),this},offset:function(e){var t=(""+(e||"")).split(" "),n={};if(t.length>2)return["top","right","bottom","left"].forEach(function(e,i){t[i]&&(n[e]=t[i])}),this.$domWrap.css(n),this;var i=no(t,2),r=i[0],o=i[1];if(""===r)return this;var a=o||r,s=d.split(" ");n[s[0]]=r,n[s[1]]=a,this.$domWrap.css(n);var u=[];return"50%"===r&&u.push("-50%"),"50%"===a&&u.push("-50%"),u.length>0&&this.translate(u.join(" ")),this},translate:function(e){var t=(""+(e||"")).split(" "),n=no(t,2),i=n[0],r=n[1];return""!==i&&(this.$domWrap.css("transform","translate("+i+", "+(r||i)+")"),"transform"in document.createElement("a").style||!window.console||!window.console.warn||console.warn("[chimee-plugin-popup] \u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301CSS3\u7684transform\u7279\u6027\uff0cDom\u5143\u7d20\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528translate\u3002")),this}},M)}}({name:"chimeeCenterState",tagName:"chimee-center-state",html:"\n    <chimee-center-state-correct>\n      <chimee-center-state-loading></chimee-center-state-loading>\n      <chimee-center-state-tip>\n        <span></span>\n      </chimee-center-state-tip>\n    </chimee-center-state-correct>\n    <chimee-center-state-error></chimee-center-state-error>\n  ",offset:"50%",hide:!1,create:function(){},inited:function(){this.config=hn(this.$config)?Yn(hc,this.$config):hc,this.$dom.querySelector("chimee-center-state-error").innerText=this.config.errorTips,this.src&&("auto"===this.preload||"metadata"===this.preload||""===this.preload||!0===this.autoplay)&&this.showLoading(!0)},penetrate:!0,operable:!1,destroy:function(){this.clearTimeout()},events:{pause:function(){this.showTip("pause"),this.showLoading(!1)},play:function(){this.showTip("play")},canplay:function(){this.playing()},playing:function(){this.playing()},waiting:function(){this.waiting()},timeupdate:function(){this.showLoading(!1),this.clearTimeout()},keydown:function(e){if(this.$videoConfig.plugin.some(function(e){return"chimeeControl"===(e.name||e)}))switch(e.stopPropagation(),e.keyCode){case 37:e.preventDefault(),!this.live&&this.showTip("back");break;case 39:e.preventDefault(),!this.live&&this.showTip("forward");break;case 38:e.preventDefault(),this.showTip("volume-high");break;case 40:e.preventDefault(),this.showTip("volume-low")}}},methods:{playing:function(){this.clearTimeout(),this.showLoading(!1),this.showError(!1)},waiting:function(){var e=this;this.clearTimeout(),this._timeout=setTimeout(function(){return e.showError()},3e4),!this.paused&&this.showLoading(!0)},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}),showTip:function(e){var t=this;this.$domWrap.removeClass("correct tip play pause back forward volume-high volume-low").addClass("correct tip "+e),setTimeout(function(){t.$domWrap.removeClass("tip "+e)},500)},showLoading:function(e){!1===e?this.$domWrap.removeClass("loading"):this.$domWrap.addClass("correct loading")},showError:function(e){!1===e?this.$domWrap.removeClass("error"):(this.$domWrap[0].className="",this.$domWrap.addClass("error"))}}}),vc=n(i(function(e,t){var n;"undefined"!==typeof self&&self,n=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=9)}([function(e,t,n){n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(){}var o={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=o;function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach(function(t){a[t]=e[t]?e[t].bind(e):function(e){var t=self.console[e];return t?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];i[0]&&(i[0]=function(e,t){return t="["+e+"] > "+t}(e,i[0])),t.apply(self.console,i)}:r}(t)})}var u=function(e){if(!0===e||"object"===("undefined"===typeof e?"undefined":i(e))){s(e,"debug","log","info","warn","error");try{a.log()}catch(_c){a=o}}else a=o},l=o},function(e,t,n){t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,n){n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,n){!function(t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=i.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var c=s.path,f=c.substring(0,c.lastIndexOf("/")+1)+o.path;l.path=a.normalizePath(f)}else l.path=s.path,o.params||(l.params=s.params,o.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(l)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}()},function(e,t,n){n.d(t,"b",function(){return r});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var i=n,r=0;e.isHeader(t,n);){r+=10,r+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(r+=10),n+=r}if(r>0)return t.subarray(i,i+r)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),i=0;i<n.length;i++){var r=n[i];if(e.isTimeStampFrame(r))return e._readTimeStamp(r)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:n,size:i,data:t.subarray(10,10+i)}},e.getID3Frames=function(t){for(var n=0,i=[];e.isHeader(t,n);){for(var r=e._readSize(t,n+6),o=(n+=10)+r;n+8<o;){var a=e._getFrameData(t.subarray(n)),s=e._decodeFrame(a);s&&i.push(s),n+=a.size+10}e.isFooter(t,n)&&(n+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),i=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length,i=void 0,r=void 0,o=void 0,a="",s=0;s<n;){if(0===(i=e[s++])&&t)return a;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:r=e[s++],a+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=e[s++],o=e[s++],a+=String.fromCharCode((15&i)<<12|(63&r)<<6|(63&o)<<0)}}return a},e}(),r=i._utf8ArrayToStr;t.a=i},function(e,t,n){var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.aesIV=n}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.key=n}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],o=n[2],a=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],f=s[3],d=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)d[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[h]=m,t[m]=h;var g=d[h],y=d[g],b=d[y],w=257*d[m]^16843008*m;i[h]=w<<24|w>>>8,r[h]=w<<16|w>>>16,o[h]=w<<8|w>>>24,a[h]=w,w=16843009*b^65537*y^257*g^16843008*h,u[m]=w<<24|w>>>8,l[m]=w<<16|w>>>16,c[m]=w<<8|w>>>24,f[m]=w,h?(h=g^d[d[d[b^g]]],p^=d[d[p]]):h=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o=this.ksRows=4*(r+6+1),a=void 0,s=void 0,u=this.keySchedule=new Uint32Array(o),l=this.invKeySchedule=new Uint32Array(o),c=this.sBox,f=this.rcon,d=this.invSubMix,h=d[0],p=d[1],v=d[2],m=d[3],g=void 0,y=void 0;for(a=0;a<o;a++)a<r?g=u[a]=t[a]:(y=g,a%r===0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=f[a/r|0]<<24):r>6&&a%r===4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),u[a]=g=(u[a-r]^y)>>>0);for(s=0;s<o;s++)a=o-s,y=3&s?u[a]:u[a-4],l[s]=s<4||a<=4?y:h[c[y>>>24]]^p[c[y>>>16&255]]^v[c[y>>>8&255]]^m[c[255&y]],l[s]=l[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n,i){for(var r=this.keySize+6,o=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,u=s[0],l=s[1],c=s[2],f=s[3],d=this.uint8ArrayToUint32Array_(n),h=d[0],p=d[1],v=d[2],m=d[3],g=new Int32Array(e),y=new Int32Array(g.length),b=void 0,w=void 0,_=void 0,E=void 0,S=void 0,k=void 0,T=void 0,A=void 0,O=void 0,x=void 0,M=void 0,L=void 0,I=void 0,D=void 0,C=this.networkToHostOrderSwap;t<g.length;){for(O=C(g[t]),x=C(g[t+1]),M=C(g[t+2]),L=C(g[t+3]),S=O^o[0],k=L^o[1],T=M^o[2],A=x^o[3],I=4,D=1;D<r;D++)b=u[S>>>24]^l[k>>16&255]^c[T>>8&255]^f[255&A]^o[I],w=u[k>>>24]^l[T>>16&255]^c[A>>8&255]^f[255&S]^o[I+1],_=u[T>>>24]^l[A>>16&255]^c[S>>8&255]^f[255&k]^o[I+2],E=u[A>>>24]^l[S>>16&255]^c[k>>8&255]^f[255&T]^o[I+3],S=b,k=w,T=_,A=E,I+=4;b=a[S>>>24]<<24^a[k>>16&255]<<16^a[T>>8&255]<<8^a[255&A]^o[I],w=a[k>>>24]<<24^a[T>>16&255]<<16^a[A>>8&255]<<8^a[255&S]^o[I+1],_=a[T>>>24]<<24^a[A>>16&255]<<16^a[S>>8&255]<<8^a[255&k]^o[I+2],E=a[A>>>24]<<24^a[S>>16&255]<<16^a[k>>8&255]<<8^a[255&T]^o[I+3],I+=3,y[t]=C(b^h),y[t+1]=C(E^p),y[t+2]=C(_^v),y[t+3]=C(w^m),h=O,p=x,v=M,m=L,t+=4}return i?function(e){var t=e.byteLength,n=t&&new DataView(e).getUint8(t-1);return n?e.slice(0,t-n):e}(y.buffer):y.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),a=n(2),s=n(0);var u=function(){function e(t,n){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).removePKCS7Padding,r=void 0===i||i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logEnabled=!0,this.observer=t,this.config=n,this.removePKCS7Padding=r,r)try{var o=crypto||self.crypto;this.subtle=o.subtle||o.webkitSubtle}catch(_c){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,a){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.b.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new o),l.expandKey(t),a(l.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new r(c,t)),this.fastAesKey.expandKey().then(function(r){new i(c,n).decrypt(e,r).catch(function(i){u.onWebCryptoError(i,e,t,n,a)}).then(function(e){a(e)})}).catch(function(i){u.onWebCryptoError(i,e,t,n,a)})}},e.prototype.onWebCryptoError=function(e,t,n,i,r){this.config.enableSoftwareAES?(s.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,i,r)):(s.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.a=u},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"===typeof e}function r(e){return"object"===typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(r(n))for(s=Array.prototype.slice.call(arguments,1),a=(l=n.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){var i=n(0),r=n(1);var o=Math.pow(2,32)-1,a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.remuxer=n}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,i,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:i,initSegment:o?t:null})),this.observer.trigger(r.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var i=[],r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0;if(t.data?(u=t.start,a=t.end,t=t.data):(u=0,a=t.byteLength),!n.length)return null;for(r=u;r<a;)l=(o=e.readUint32(t,r))>1?r+o:a,e.bin2str(t.subarray(r+4,r+8))===n[0]&&(1===n.length?i.push({data:t,start:r+8,end:l}):(s=e.findBox({data:t,start:r+8,end:l},n.slice(1))).length&&(i=i.concat(s))),r=l;return i},e.parseSegmentIndex=function(t){var n=e.findBox(t,["moov"])[0],i=n?n.end:null,r=0,o=e.findBox(t,["sidx"]),a=void 0;if(!o||!o[0])return null;a=[];var s=(o=o[0]).data[0];r=0===s?8:16;var u=e.readUint32(o,r);r+=4;r+=0===s?8:16,r+=2;var l=o.end+0,c=e.readUint16(o,r);r+=2;for(var f=0;f<c;f++){var d=r,h=e.readUint32(o,d);d+=4;var p=2147483647&h;if(1===(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=e.readUint32(o,d);d+=4,a.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/u,start:l,end:l+p-1}}),l+=p,r=d+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:a,moovEndOffset:i}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var r=e.findBox(t,["tkhd"])[0];if(r){var o=r.data[r.start],a=0===o?12:20,s=e.readUint32(r,a),u=e.findBox(t,["mdia","mdhd"])[0];if(u){a=0===(o=u.data[u.start])?12:20;var l=e.readUint32(u,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var f={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(f){var d=e.findBox(t,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var h=e.bin2str(d.data.subarray(d.start+12,d.start+16));i.b.log("MP4Demuxer:"+f+":"+h+" found")}n[s]={timescale:l,type:f},n[f]={timescale:l,id:s}}}}}}),n},e.getStartDTS=function(t,n){var i,r,o=void 0;return o=e.findBox(n,["moof","traf"]),i=[].concat.apply([],o.map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var r,o;return r=e.readUint32(i,4),o=t[r].timescale||9e4,e.findBox(n,["tfdt"]).map(function(t){var n,i=void 0;return n=t.data[t.start],i=e.readUint32(t,4),1===n&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i})[0]/o})})),r=Math.min.apply(null,i),isFinite(r)?r:0},e.offsetStartDTS=function(t,n,i){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var a=e.readUint32(r,4),s=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],r=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,r-i*s);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=i*s,r=Math.max(r,0);var a=Math.floor(r/(o+1)),u=Math.floor(r%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,u)}})})})},e.prototype.append=function(t,n,i,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,u=this.initPTS;if(void 0===u){var l=e.getStartDTS(a,t);this.initPTS=u=l-n,this.observer.trigger(r.a.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(a,t,u),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,i,o,t)},e.prototype.destroy=function(){},e}();t.a=a},function(e,t,n){var i=n(1),r=n(2),o=n(5),a=n(0);function s(e,t){return 255===e[t]&&240===(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function l(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return!!(t+1<e.length&&s(e,t))}function f(e,t){if(t+1<e.length&&s(e,t)){var n=u(e,t);t+5<e.length&&(n=l(e,t));var i=t+n;if(i===e.length||i+1<e.length&&s(e,i))return!0}return!1}function d(e,t,n,i,o){if(!e.samplerate){var s=function(e,t,n,i){var o,s=void 0,u=void 0,l=void 0,c=void 0,f=navigator.userAgent.toLowerCase(),d=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[n+2])>>>6),!((o=(60&t[n+2])>>>2)>h.length-1))return l=(1&t[n+2])<<2,l|=(192&t[n+3])>>>6,a.b.log("manifest codec:"+i+",ADTS data:type:"+s+",sampleingIndex:"+o+"["+h[o]+"Hz],channelConfig:"+l),/firefox/i.test(f)?o>=6?(s=5,c=new Array(4),u=o-3):(s=2,c=new Array(2),u=o):-1!==f.indexOf("android")?(s=2,c=new Array(2),u=o):(s=5,c=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&o>=6?u=o-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(o>=6&&1===l||/vivaldi/i.test(f))||!i&&1===l)&&(s=2,c=new Array(2)),u=o)),c[0]=s<<3,c[0]|=(14&o)>>1,c[1]|=(1&o)<<7,c[1]|=l<<3,5===s&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[o],channelCount:l,codec:"mp4a.40."+s,manifestCodec:d};e.trigger(Event.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o})}(t,n,i,o);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,a.b.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}}function h(e){return 9216e4/e}function p(e,t,n,i,r){var o=function(e,t,n,i,r){var o,a=void 0,s=e.length;if(o=u(e,t),a=l(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:n+i*r}}(t,n,i,r,h(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,c=o.frameLength,f={unit:t.subarray(n+s,n+s+c),pts:a,dts:a};return e.samples.push(f),e.len+=c,{sample:f,length:c+s}}}var v=n(4);var m=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(v.a.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(f(e,t))return a.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var r=this._audioTrack,o=v.a.getID3Data(e,0)||[],s=v.a.getTimeStamp(o),u=s?90*s:9e4*t,l=0,f=u,h=e.length,m=o.length,g=[{pts:f,dts:f,data:o}];m<h-1;)if(c(e,m)&&m+5<h){d(r,this.observer,e,m,r.manifestCodec);var y=p(r,e,m,u,l);if(!y){a.b.log("Unable to parse AAC frame");break}m+=y.length,f=y.sample.pts,l++}else v.a.isHeader(e,m)?(o=v.a.getID3Data(e,m),g.push({pts:f,dts:f,data:o}),m+=o.length):m++;this.remuxer.remux(r,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}(),g=n(7),y={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,i,r){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){var a=i+r*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3,a=e[t+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==o){var s=3===n?3-i:3===i?3:4,u=1e3*y.BitratesMap[14*s+r-1],l=3===n?0:2===n?1:2,c=y.SamplingRateMap[3*l+o],f=e[t+3]>>6===3?1:2,d=y.SamplesCoefficients[n][i],h=y.BytesInSlot[i],p=8*d*h;return{sampleRate:c,channelCount:f,frameLength:parseInt(d*u/c+a,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),i=4;n&&n.frameLength&&(i=n.frameLength);var r=t+i;if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},b=y;var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.prototype.skipBits=function(e){var t=void 0;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&a.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e=void 0;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t=8,n=8,i=void 0;for(i=0;i<e;i++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},e.prototype.readSPS=function(){var e,t,n,i,r=0,o=0,a=0,s=0,u=void 0,l=void 0,c=void 0,f=this.readUByte.bind(this),d=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),m=this.skipEG.bind(this),g=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(f(),e=f(),d(5),v(3),f(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=h();if(3===b&&v(1),g(),g(),v(1),p())for(l=3!==b?8:12,c=0;c<l;c++)p()&&y(c<6?16:64)}g();var w=h();if(0===w)h();else if(1===w)for(v(1),m(),m(),u=h(),c=0;c<u;c++)m();g(),v(1),t=h(),n=h(),0===(i=d(1))&&v(1),v(1),p()&&(r=h(),o=h(),a=h(),s=h());var _=[1,1];if(p()&&p())switch(f()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[f()<<8|f(),f()<<8|f()]}return{width:Math.ceil(16*(t+1)-2*r-2*o),height:(2-i)*(n+1)*16-(i?2:4)*(a+s),pixelRatio:_}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();var _=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decryptdata=i,this.discardEPB=r,this.decrypter=new o.a(t,n,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,i){var r=e[t].unit,o=r.subarray(16,r.length-r.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),r.set(o,16),i||s.decryptAacSamples(e,t+1,n)})},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<=e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,i=32;i<=e.length-16;i+=160,n+=16)e.set(t.subarray(n,n+16),i);return e},e.prototype.decryptAvcSample=function(e,t,n,i,r,o){var a=this.discardEPB(r.data),s=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(s.buffer,function(s){r.data=u.getAvcDecryptedUnit(a,s),o||u.decryptAvcSamples(e,t,n+1,i)})},e.prototype.decryptAvcSamples=function(e,t,n,i){for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var o=r[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,o,a),!a)return}}}},e}();var E={video:0,audio:1,id3:2,text:3},S=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.typeSupported=r,this.remuxer=n,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new _(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0)&&(n&&a.b.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:E[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",r),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3",r),this._txtTrack=e.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,n,o,s){var u=void 0,l=t.length,c=void 0,f=void 0,d=void 0,h=void 0,p=!1;this.contiguous=o;var v=this.pmtParsed,m=this._avcTrack,g=this._audioTrack,y=this._id3Track,b=m.pid,w=g.pid,_=y.pid,E=this._pmtId,S=m.pesData,k=g.pesData,T=y.pesData,A=this._parsePAT,O=this._parsePMT,x=this._parsePES,M=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),C=e._syncOffset(t);for(l-=(l+C)%188,u=C;u<l;u+=188)if(71===t[u]){if(c=!!(64&t[u+1]),f=((31&t[u+1])<<8)+t[u+2],(48&t[u+3])>>4>1){if((d=u+5+t[u+4])===u+188)continue}else d=u+4;switch(f){case b:c&&(S&&(h=x(S))&&void 0!==h.pts&&M(h,!1),S={data:[],size:0}),S&&(S.data.push(t.subarray(d,u+188)),S.size+=u+188-d);break;case w:c&&(k&&(h=x(k))&&void 0!==h.pts&&(g.isAAC?L(h):I(h)),k={data:[],size:0}),k&&(k.data.push(t.subarray(d,u+188)),k.size+=u+188-d);break;case _:c&&(T&&(h=x(T))&&void 0!==h.pts&&D(h),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,u+188)),T.size+=u+188-d);break;case 0:c&&(d+=t[d]+1),E=this._pmtId=A(t,d);break;case E:c&&(d+=t[d]+1);var R=O(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=R.avc)>0&&(m.pid=b),(w=R.audio)>0&&(g.pid=w,g.isAAC=R.isAAC),(_=R.id3)>0&&(y.pid=_),p&&!v&&(a.b.log("reparse from beginning"),p=!1,u=C-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(h=x(S))&&void 0!==h.pts?(M(h,!0),m.pesData=null):m.pesData=S,k&&(h=x(k))&&void 0!==h.pts?(g.isAAC?L(h):I(h),g.pesData=null):(k&&k.size&&a.b.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=k),T&&(h=x(T))&&void 0!==h.pts?(D(h),y.pesData=null):y.pesData=T,null==this.sampleAes?this.remuxer.remux(g,m,y,this._txtTrack,n,o,s):this.decryptAndRemux(g,m,y,this._txtTrack,n,o,s)},e.prototype.decryptAndRemux=function(e,t,n,i,r,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,i,r,o,a)})}else this.decryptAndRemuxAvc(e,t,n,i,r,o,a)},e.prototype.decryptAndRemuxAvc=function(e,t,n,i,r,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,i,r,o,a)})}else this.remuxer.remux(e,t,n,i,r,o,a)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,i){var r,o=void 0,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){a.b.log("unkown stream type:"+e[t]);break}case 15:-1===s.audio&&(s.audio=o);break;case 21:-1===s.id3&&(s.id3=o);break;case 219:if(!i){a.b.log("unkown stream type:"+e[t]);break}case 27:-1===s.avc&&(s.avc=o);break;case 3:case 4:n?-1===s.audio&&(s.audio=o,s.isAAC=!1):a.b.log("MPEG audio found, not supported in this browser for now");break;case 36:a.b.warn("HEVC stream type found, not supported for now");break;default:a.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return s},e.prototype._parsePES=function(e){var t=0,n=void 0,i=void 0,r=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,f=e.data;if(!e||0===e.size)return null;for(;f[0].length<19&&f.length>1;){var d=new Uint8Array(f[0].length+f[1].length);d.set(f[0]),d.set(f[1],f[0].length),f[0]=d,f.splice(1,1)}if(1===((n=f[0])[0]<<16)+(n[1]<<8)+n[2]){if((r=(n[4]<<8)+n[5])&&r>e.size-6)return null;192&(i=n[7])&&((u=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2)>4294967295&&(u-=8589934592),64&i?((l=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)>4294967295&&(l-=8589934592),u-l>54e5&&(a.b.warn(Math.round((u-l)/9e4)+"s delta between PTS and DTS, align them"),u=l)):l=u),c=(o=n[8])+9,e.size-=c,s=new Uint8Array(e.size);for(var h=0,p=f.length;h<p;h++){var v=(n=f[h]).byteLength;if(c){if(c>v){c-=v;continue}n=n.subarray(c),v-=c,c=0}s.set(n,t),t+=v}return r&&(r-=o+3),{data:s,pts:u,dts:l,len:r}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,i=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,n.push(e)):t.dropped++}e.debug.length&&a.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var n=this,i=this._avcTrack,r=this._parseAVCNALu(e.data),o=void 0,a=this.avcSample,s=void 0,u=!1,l=void 0,c=this.pushAccesUnit.bind(this),f=function(e,t,n,i){return{key:e,pts:t,dts:n,units:[],debug:i}};e.data=null,a&&r.length&&!i.audFound&&(c(a,i),a=this.avcSample=f(!1,e.pts,e.dts,"")),r.forEach(function(t){switch(t.type){case 1:s=!0,a||(a=n.avcSample=f(!0,e.pts,e.dts,"")),a.frame=!0;var r=t.data;if(u&&r.length>4){var d=new w(r).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(a.key=!0)}break;case 5:s=!0,a||(a=n.avcSample=f(!0,e.pts,e.dts,"")),a.key=!0,a.frame=!0;break;case 6:s=!0,(o=new w(n.discardEPB(t.data))).readUByte();for(var h=0,p=0,v=!1,m=0;!v&&o.bytesAvailable>1;){h=0;do{h+=m=o.readUByte()}while(255===m);p=0;do{p+=m=o.readUByte()}while(255===m);if(4===h&&0!==o.bytesAvailable){if(v=!0,181===o.readUByte())if(49===o.readUShort())if(1195456820===o.readUInt())if(3===o.readUByte()){var g=o.readUByte(),y=31&g,b=[g,o.readUByte()];for(l=0;l<y;l++)b.push(o.readUByte()),b.push(o.readUByte()),b.push(o.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(p<o.bytesAvailable)for(l=0;l<p;l++)o.readUByte()}break;case 7:if(s=!0,u=!0,!i.sps){var _=(o=new w(t.data)).readSPS();i.width=_.width,i.height=_.height,i.pixelRatio=_.pixelRatio,i.sps=[t.data],i.duration=n._duration;var E=t.data.subarray(1,4),S="avc1.";for(l=0;l<3;l++){var k=E[l].toString(16);k.length<2&&(k="0"+k),S+=k}i.codec=S}break;case 8:s=!0,i.pps||(i.pps=[t.data]);break;case 9:s=!1,i.audFound=!0,a&&c(a,i),a=n.avcSample=f(!1,e.pts,e.dts,"");break;case 12:s=!1;break;default:s=!1,a&&(a.debug+="unknown NAL "+t.type+" ")}a&&s&&a.units.push(t)}),t&&a&&(c(a,i),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var i=n-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t=0,n=e.byteLength,i=void 0,r=void 0,o=this._avcTrack,a=o.naluState||0,s=a,u=[],l=void 0,c=-1,f=void 0;for(-1===a&&(c=0,f=31&e[0],a=0,t=1);t<n;)if(i=e[t++],a)if(1!==a)if(i)if(1===i){if(c>=0)l={data:e.subarray(c,t-a-1),type:f},u.push(l);else{var d=this._getLastNalUnit();if(d&&(s&&t<=4-s&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-s)),(r=t-a-1)>0)){var h=new Uint8Array(d.data.byteLength+r);h.set(d.data,0),h.set(e.subarray(0,r),d.data.byteLength),d.data=h}}t<n?(c=t,f=31&e[t],a=0):a=-1}else a=0;else a=3;else a=i?0:2;else a=i?0:1;if(c>=0&&a>=0&&(l={data:e.subarray(c,n),type:f,state:a},u.push(l)),0===u.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return o.naluState=a,u},e.prototype.discardEPB=function(e){for(var t,n=e.byteLength,i=[],r=1,o=void 0;r<n-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(i.push(r+2),r+=2):r++;if(0===i.length)return e;t=n-i.length,o=new Uint8Array(t);var a=0;for(r=0;r<t;a++,r++)a===i[0]&&(a++,i.shift()),o[r]=e[a];return o},e.prototype._parseAACPES=function(e){var t,n,o=this._audioTrack,s=e.data,u=e.pts,l=this.aacOverFlow,f=this.aacLastPTS,v=void 0,m=void 0,g=void 0;if(l){var y=new Uint8Array(l.byteLength+s.byteLength);y.set(l,0),y.set(s,l.byteLength),s=y}for(m=0,n=s.length;m<n-1&&!c(s,m);m++);if(m){var b=void 0,w=void 0;if(m<n-1?(b="AAC PES did not start with ADTS header,offset:"+m,w=!1):(b="no ADTS header found in AAC PES",w=!0),a.b.warn("parsing error:"+b),this.observer.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:w,reason:b}),w)return}if(d(o,this.observer,s,m,this.audioCodec),v=0,t=h(o.samplerate),l&&f){var _=f+t;Math.abs(_-u)>1&&(a.b.log("AAC: align PTS for overlapping frames by "+Math.round((_-u)/90)),u=_)}for(;m<n;)if(c(s,m)&&m+5<n){var E=p(o,s,m,u,v);if(!E)break;m+=E.length,g=E.sample.pts,v++}else m++;l=m<n?s.subarray(m,n):null,this.aacOverFlow=l,this.aacLastPTS=g},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,i=0,r=0,o=e.pts;r<n;)if(b.isHeader(t,r)){var a=b.appendFrame(this._audioTrack,t,r,o,i);if(!a)break;r+=a.length,i++}else r++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();var k=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t=void 0,n=void 0,i=v.a.getID3Data(e,0);if(i&&void 0!==v.a.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);t<n;t++)if(b.probe(e,t))return a.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var r=v.a.getID3Data(e,0),o=v.a.getTimeStamp(r),a=o?90*o:9e4*t,s=r.length,u=e.length,l=0,c=0,f=this._audioTrack,d=[{pts:a,dts:a,data:r}];s<u;)if(b.isHeader(e,s)){var h=b.appendFrame(f,e,s,a,l);if(!h)break;s+=h.length,c=h.sample.pts,l++}else v.a.isHeader(e,s)?(r=v.a.getID3Data(e,s),d.push({pts:c,dts:c,data:r}),s+=r.length):s++;this.remuxer.remux(f,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}();var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();var A=Math.pow(2,32)-1,O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t=void 0;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,u,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=8,i=t.length,r=i,o=void 0;i--;)n+=t[i].byteLength;for((o=new Uint8Array(n))[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=255&n,o.set(e,4),i=0,n=8;i<r;i++)o.set(t[i],n),n+=t[i].byteLength;return o},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(A+1)),r=Math.floor(n%(A+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(A+1)),r=Math.floor(n%(A+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var n=t.samples||[],i=new Uint8Array(4+n.length),r=void 0,o=void 0;for(o=0;o<n.length;o++)r=n[o].flags,i[o+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,i)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n=[],i=[],r=void 0,o=void 0,a=void 0;for(r=0;r<t.sps.length;r++)a=(o=t.sps[r]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(o));for(r=0;r<t.pps.length;r++)a=(o=t.pps[r]).byteLength,i.push(a>>>8&255),i.push(255&a),i=i.concat(Array.prototype.slice.call(o));var s=e.box(e.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(i))),u=t.width,l=t.height,c=t.pixelRatio[0],f=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,f>>24,f>>16&255,f>>8&255,255&f])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,r=t.width,o=t.height,a=Math.floor(i/(A+1)),s=Math.floor(i%(A+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),r=t.id,o=Math.floor(n/(A+1)),a=Math.floor(n%(A+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i=t.samples||[],r=i.length,o=12+16*r,a=new Uint8Array(o),s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,d=void 0;for(n+=8+o,a.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),s=0;s<r;s++)l=(u=i[s]).duration,c=u.size,f=u.flags,d=u.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,61440&f.degradPrio,15&f.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*s);return e.box(e.types.trun,a)},e.initSegment=function(t){e.types||e.init();var n=e.moov(t),i=void 0;return(i=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),i.set(n,e.FTYP.byteLength),i},e}();var x=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.typeSupported=i;var o=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,r,o,s,u){if(this.ISGenerated||this.generateIS(e,t,o),this.ISGenerated){var l=e.samples.length,c=t.samples.length,f=o,d=o;if(l&&c){var h=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;f+=Math.max(0,h),d+=Math.max(0,-h)}if(l){e.timescale||(a.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,o));var p=this.remuxAudio(e,f,s,u);if(c){var v=void 0;p&&(v=p.endPTS-p.startPTS),t.timescale||(a.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,o)),this.remuxVideo(t,d,s,v,u)}}else if(c){var m=this.remuxVideo(t,d,s,0,u);m&&e.codec&&this.remuxEmptyAudio(e,f,s,m)}}n.samples.length&&this.remuxID3(n,o),r.samples.length&&this.remuxText(r,o),this.observer.trigger(i.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var o=this.observer,s=e.samples,u=t.samples,l=this.typeSupported,c="audio/mp4",f={},d={tracks:f},h=void 0===this._initPTS,p=void 0,v=void 0;if(h&&(p=v=1/0),e.config&&s.length&&(e.timescale=e.samplerate,a.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(c="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),f.audio={container:c,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:O.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(p=v=s[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&u.length){var m=t.inputTimeScale;t.timescale=m,f.video={container:"video/mp4",codec:t.codec,initSegment:O.initSegment([t]),metadata:{width:t.width,height:t.height}},h&&(p=Math.min(p,u[0].pts-m*n),v=Math.min(v,u[0].dts-m*n),this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:p}))}Object.keys(f).length?(o.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,h&&(this._initPTS=p,this._initDTS=v)):o.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,o,s){var u,l,c,f=8,d=e.timescale,h=void 0,p=void 0,v=void 0,m=void 0,g=e.samples,y=[],b=g.length,w=this._PTSNormalize,_=this._initDTS,E=this.nextAvcDts,S=this.isSafari;if(0!==b){S&&(n|=g.length&&E&&(s&&Math.abs(t-E/d)<.1||Math.abs(g[0].pts-E-_)<d/5)),n||(E=t*d),g.forEach(function(e){e.pts=w(e.pts-_,E),e.dts=w(e.dts-_,E)}),g.sort(function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||i||e.id-t.id});var k=g.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(k<0){a.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(k/90)+" ms to overcome this issue");for(var T=0;T<g.length;T++)g[T].dts+=k}var A=g[0];m=Math.max(A.dts,0),v=Math.max(A.pts,0);var x=Math.round((m-E)/90);n&&x&&(x>1?a.b.log("AVC:"+x+" ms hole between fragments detected,filling it"):x<-1&&a.b.log("AVC:"+-x+" ms overlapping between fragments detected"),m=E,g[0].dts=m,v=Math.max(v-x,E),g[0].pts=v,a.b.log("Video/PTS/DTS adjusted: "+Math.round(v/90)+"/"+Math.round(m/90)+",delta:"+x+" ms")),A=g[g.length-1],c=Math.max(A.dts,0),l=Math.max(A.pts,0,c),S&&(h=Math.round((c-m)/(g.length-1)));for(var M=0,L=0,I=0;I<b;I++){for(var D=g[I],C=D.units,R=C.length,N=0,P=0;P<R;P++)N+=C[P].data.length;L+=N,M+=R,D.length=N,D.dts=S?m+I*h:Math.max(D.dts,m),D.pts=Math.max(D.pts,D.dts)}var j=L+4*M+8;try{p=new Uint8Array(j)}catch(ie){return void this.observer.trigger(i.a.ERROR,{type:r.b.MUX_ERROR,details:r.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var F=new DataView(p.buffer);F.setUint32(0,j),p.set(O.types.mdat,4);for(var B=0;B<b;B++){for(var z=g[B],U=z.units,G=0,W=void 0,$=0,V=U.length;$<V;$++){var H=U[$],Y=H.data,K=H.data.byteLength;F.setUint32(f,K),f+=4,p.set(Y,f),f+=K,G+=4+K}if(S)W=Math.max(0,h*Math.round((z.pts-z.dts)/h));else{if(B<b-1)h=g[B+1].dts-z.dts;else{var Z=this.config,X=z.dts-g[B>0?B-1:B].dts;if(Z.stretchShortVideoTrack){var q=Z.maxBufferHole,Q=Math.floor(q*d),J=(o?v+o*d:this.nextAudioPts)-z.pts;J>Q?((h=J-X)<0&&(h=X),a.b.log("It is approximately "+J/90+" ms to the next segment; using duration "+h/90+" ms for the last video frame.")):h=X}else h=X}W=Math.round(z.pts-z.dts)}y.push({size:G,duration:h,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:z.key?2:1,isNonSync:z.key?0:1}})}this.nextAvcDts=c+h;var ee=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var te=y[0].flags;te.dependsOn=2,te.isNonSync=0}e.samples=y,u=O.moof(e.sequenceNumber++,m,e),e.samples=[];var ne={data1:u,data2:p,startPTS:v/d,endPTS:(l+h)/d,startDTS:m/d,endDTS:this.nextAvcDts/d,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:ee};return this.observer.trigger(i.a.FRAG_PARSING_DATA,ne),ne}},e.prototype.remuxAudio=function(e,t,n,o){var s=e.inputTimeScale,u=e.timescale,l=s/u,c=(e.isAAC?1024:1152)*l,f=this._PTSNormalize,d=this._initDTS,h=!e.isAAC&&this.typeSupported.mpeg,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,_=e.samples,E=[],S=this.nextAudioPts;if(n|=_.length&&S&&(o&&Math.abs(t-S/s)<.1||Math.abs(_[0].pts-S-d)<20*c),_.forEach(function(e){e.pts=e.dts=f(e.pts-d,t*s)}),0!==(_=_.filter(function(e){return e.pts>=0})).length){if(n||(S=o?t*s:_[0].pts),e.isAAC)for(var k=this.config.maxAudioFramesDrift,A=0,x=S;A<_.length;){var M,L=_[A];M=L.pts-x;var I=Math.abs(1e3*M/s);if(M<=-k*c)a.b.warn("Dropping 1 audio frame @ "+(x/s).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),_.splice(A,1),e.len-=L.unit.length;else if(M>=k*c&&I<1e4&&x){var D=Math.round(M/c);a.b.warn("Injecting "+D+" audio frame @ "+(x/s).toFixed(3)+"s due to "+Math.round(1e3*M/s)+" ms gap.");for(var C=0;C<D;C++){var R=Math.max(x,0);(m=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(a.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),m=L.unit.subarray()),_.splice(A,0,{unit:m,pts:R,dts:R}),e.len+=m.length,x+=c,A++}L.pts=L.dts=x,x+=c,A++}else L.pts=L.dts=x,x+=c,A++}for(var N=0,P=_.length;N<P;N++){var j=_[N],F=j.unit,B=j.pts;if(void 0!==w)v.duration=Math.round((B-w)/l);else{var z=Math.round(1e3*(B-S)/s),U=0;if(n&&e.isAAC&&z){if(z>0&&z<1e4)U=Math.round((B-S)/c),a.b.log(z+" ms hole between AAC samples detected,filling it"),U>0&&((m=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(m=F.subarray()),e.len+=U*m.length);else if(z<-12){a.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(S/s).toFixed(3)+"s/"+(B/s).toFixed(3)+"s/"+-z+"ms"),e.len-=F.byteLength;continue}B=S}if(b=B,!(e.len>0))return;var G=h?e.len:e.len+8;p=h?0:8;try{g=new Uint8Array(G)}catch(X){return void this.observer.trigger(i.a.ERROR,{type:r.b.MUX_ERROR,details:r.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}h||(new DataView(g.buffer).setUint32(0,G),g.set(O.types.mdat,4));for(var W=0;W<U;W++)(m=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(a.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),m=F.subarray()),g.set(m,p),p+=m.byteLength,v={size:m.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(v)}g.set(F,p);var $=F.byteLength;p+=$,v={size:$,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(v),w=B}var V=0,H=E.length;if(H>=2&&(V=E[H-2].duration,v.duration=V),H){this.nextAudioPts=S=w+l*V,e.len=0,e.samples=E,y=h?new Uint8Array:O.moof(e.sequenceNumber++,b/l,e),e.samples=[];var Y=b/s,K=S/s,Z={data1:y,data2:g,startPTS:Y,endPTS:K,startDTS:Y,endDTS:K,type:"audio",hasAudio:!0,hasVideo:!1,nb:H};return this.observer.trigger(i.a.FRAG_PARSING_DATA,Z),Z}return null}},e.prototype.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,o=r/(e.samplerate?e.samplerate:r),s=this.nextAudioPts,u=(void 0!==s?s:i.startDTS*r)+this._initDTS,l=i.endDTS*r+this._initDTS,c=1024*o,f=Math.ceil((l-u)/c),d=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(a.b.warn("remux empty Audio"),d){for(var h=[],p=0;p<f;p++){var v=u+p*c;h.push({unit:d,pts:v,dts:v}),e.len+=d.length}e.samples=h,this.remuxAudio(e,t,n)}else a.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e,t){var n=e.samples.length,r=void 0,o=e.inputTimeScale,a=this._initPTS,s=this._initDTS;if(n){for(var u=0;u<n;u++)(r=e.samples[u]).pts=(r.pts-a)/o,r.dts=(r.dts-s)/o;this.observer.trigger(i.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n=e.samples.length,r=void 0,o=e.inputTimeScale,a=this._initPTS;if(n){for(var s=0;s<n;s++)(r=e.samples[s]).pts=(r.pts-a)/o;this.observer.trigger(i.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var n=void 0;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}();var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,r,o,a,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(i.a.FRAG_PARSING_DATA,{data1:u,startPTS:o,startDTS:o,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(i.a.FRAG_PARSED)},e}();var L=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.typeSupported=n,this.config=i,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,r,a,s,u,l,c,f,d,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new o.a(this.observer,this.config));var v=this,m=void 0;try{m=performance.now()}catch(g){m=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var o=void 0;try{o=performance.now()}catch(g){o=Date.now()}v.observer.trigger(i.a.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:o}}),v.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,a,s,u,l,c,f,d,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,a,s,u,l,c,f,d,h)},e.prototype.pushDecrypted=function(e,t,n,o,a,s,u,l,c,f,d,h){var p=this.demuxer;if(!p||(u||l)&&!this.probe(e)){for(var v=this.observer,y=this.typeSupported,b=this.config,w=[{demux:S,remux:x},{demux:g.a,remux:M},{demux:m,remux:x},{demux:k,remux:x}],_=0,E=w.length;_<E;_++){var T=w[_],A=T.demux.probe;if(A(e)){var O=this.remuxer=new T.remux(v,b,y,this.vendor);p=new T.demux(v,O,b,y),this.probe=A;break}}if(!p)return void v.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var L=this.remuxer;(u||l)&&(p.resetInitSegment(n,o,a,f),L.resetInitSegment()),u&&(p.resetTimeStamp(h),L.resetTimeStamp(h)),"function"===typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,c,d)},e}();t.a=L},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i={};n.d(i,"newCue",function(){return Ne});var r=n(3),o=n.n(r),a=n(2),s=n(1),u=n(0),l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var c=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"===l(this.handledEvents)&&this.handledEvents.length&&"function"===typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(c.has(e))throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!==typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(n){u.b.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.hls.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:n})}},e}(),d=n(7),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return h(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=o.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var m=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=((t={})[e.ElementaryStreamTypes.AUDIO]=!1,t[e.ElementaryStreamTypes.VIDEO]=!1,t)}return e.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},e.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new p).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},v(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=o.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),e}();var g=/^(\d+)x(\d+)$/,y=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,b=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"===typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=g.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t=void 0,n={};for(y.lastIndex=0;null!==(t=y.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}(),w={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function _(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var E=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,S=/#EXT-X-MEDIA:(.*)/g,k=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),T=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.findGroup=function(e,t){if(!e)return null;for(var n=null,i=0;i<e.length;i++){var r=e[i];r.id===t&&(n=r)}return n},e.convertAVC1ToAVCOTI=function(e){var t=void 0,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var i=[],r=void 0;function o(e,t){["video","audio"].forEach(function(n){var i=e.filter(function(e){return function(e,t){var n=w[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)});if(i.length){var r=i.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[n+"Codec"]=r.length>0?r[0]:i[0],e=e.filter(function(e){return-1===i.indexOf(e)})}}),t.unknownCodecs=e}for(E.lastIndex=0;null!=(r=E.exec(t));){var a={},s=a.attrs=new b(r[1]);a.url=e.resolve(r[2],n);var u=s.decimalResolution("RESOLUTION");u&&(a.width=u.width,a.height=u.height),a.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),a.name=s.NAME,o([].concat((s.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=e.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},e.parseMasterPlaylistMedia=function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=void 0,a=[],s=0;for(S.lastIndex=0;null!==(o=S.exec(t));){var u={},l=new b(o[1]);if(l.TYPE===i){if(u.groupId=l["GROUP-ID"],u.name=l.NAME,u.type=i,u.default="YES"===l.DEFAULT,u.autoselect="YES"===l.AUTOSELECT,u.forced="YES"===l.FORCED,l.URI&&(u.url=e.resolve(l.URI,n)),u.lang=l.LANGUAGE,u.name||(u.name=u.lang),r.length){var c=e.findGroup(r,u.groupId);u.audioCodec=c?c.codec:r[0].codec}u.id=s++,a.push(u)}}return a},e.parseLevelPlaylist=function(e,t,n,i){var r=0,o=0,a={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},s=new p,l=0,c=null,f=new m,d=void 0,h=void 0;for(k.lastIndex=0;null!==(d=k.exec(e));){var v=d[1];if(v){f.duration=parseFloat(v);var g=(" "+d[2]).slice(1);f.title=g||null,f.tagList.push(g?["INF",v,g]:["INF",v])}else if(d[3]){if(!isNaN(f.duration)){var y=r++;f.type=i,f.start=o,f.levelkey=s,f.sn=y,f.level=n,f.cc=l,f.baseurl=t,f.relurl=(" "+d[3]).slice(1),a.programDateTime&&(c?f.rawProgramDateTime?f.pdt=Date.parse(f.rawProgramDateTime):f.pdt=c.pdt+1e3*c.duration:f.pdt=Date.parse(a.programDateTime),f.endPdt=f.pdt+1e3*f.duration),a.fragments.push(f),c=f,o+=f.duration,f=new m}}else if(d[4]){if(f.rawByteRange=(" "+d[4]).slice(1),c){var w=c.byteRangeEndOffset;w&&(f.lastByteRangeEndOffset=w)}}else if(d[5])f.rawProgramDateTime=(" "+d[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]),void 0===a.programDateTime&&(a.programDateTime=new Date(new Date(Date.parse(d[5]))-1e3*o));else{for(d=d[0].match(T),h=1;h<d.length&&void 0===d[h];h++);var _=(" "+d[h+1]).slice(1),E=(" "+d[h+2]).slice(1);switch(d[h]){case"#":f.tagList.push(E?[_,E]:[_]);break;case"PLAYLIST-TYPE":a.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":r=a.startSN=parseInt(_);break;case"TARGETDURATION":a.targetduration=parseFloat(_);break;case"VERSION":a.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"DIS":l++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":l=parseInt(_);break;case"KEY":var S=new b(_),A=S.enumeratedString("METHOD"),O=S.URI,x=S.hexadecimalInteger("IV");A&&(s=new p,O&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(A)>=0&&(s.method=A,s.baseuri=t,s.reluri=O,s.key=null,s.iv=x));break;case"START":var M=new b(_).decimalFloatingPoint("TIME-OFFSET");isNaN(M)||(a.startTimeOffset=M);break;case"MAP":var L=new b(_);f.relurl=L.URI,f.rawByteRange=L.BYTERANGE,f.baseurl=t,f.level=n,f.type=i,f.sn="initSegment",a.initSegment=f,f=new m;break;default:u.b.warn("line parsed but not handled: "+d)}}}return(f=c)&&!f.relurl&&(a.fragments.pop(),o-=f.duration),a.totalduration=o,a.averagetargetduration=o/a.fragments.length,a.endSN=r-1,a.startCC=a.fragments[0]?a.fragments[0].cc:0,a.endCC=l,!a.initSegment&&a.fragments.length&&a.fragments.every(function(e){return e.relurl.endsWith(".mp4")})&&(u.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(f=new m).relurl=a.fragments[0].relurl,f.baseurl=t,f.level=n,f.type=i,f.sn="initSegment",a.initSegment=f,a.needSidxRanges=!0),a},e}(),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var x={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},M={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},L=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MANIFEST_LOADING,s.a.LEVEL_LOADING,s.a.AUDIO_TRACK_LOADING,s.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.canHaveQualityLevels=function(e){return e!==x.AUDIO_TRACK&&e!==x.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){switch(e.type){case x.AUDIO_TRACK:return M.AUDIO;case x.SUBTITLE_TRACK:return M.SUBTITLE;default:return M.MAIN}},t.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n},t.prototype.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader,r=new(n||i)(t);return e.loader=r,this.loaders[e.type]=r,r},t.prototype.getInternalLoader=function(e){return this.loaders[e.type]},t.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.prototype.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:x.MANIFEST})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:x.LEVEL,level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:x.AUDIO_TRACK,id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:x.SUBTITLE_TRACK,id:e.id})},t.prototype.load=function(e,t){var n=this.hls.config,i=this.getInternalLoader(t);if(i){var r=i.context;if(r&&r.url===e)return u.b.trace("playlist request ongoing"),!1;u.b.warn("aborting previous loader for type: "+t.type),i.abort()}var o=void 0,a=void 0,s=void 0,l=void 0;switch(t.type){case x.MANIFEST:o=n.manifestLoadingMaxRetry,a=n.manifestLoadingTimeOut,s=n.manifestLoadingRetryDelay,l=n.manifestLoadingMaxRetryTimeout;break;case x.LEVEL:o=0,a=n.levelLoadingTimeOut;break;default:o=n.levelLoadingMaxRetry,a=n.levelLoadingTimeOut,s=n.levelLoadingRetryDelay,l=n.levelLoadingMaxRetryTimeout,u.b.log("Playlist loader for "+t.type+" "+(t.level||t.id))}i=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var c,f;return c={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(t,c,f),!0},t.prototype.loadsuccess=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,i);this.resetInternalLoader(n.type);var r=e.data;t.tload=performance.now(),0===r.indexOf("#EXTM3U")?r.indexOf("#EXTINF:")>0||r.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,i):this._handleMasterPlaylist(e,t,n,i):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",i)},t.prototype.loaderror=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(t,n)},t.prototype.loadtimeout=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(t,n,!0)},t.prototype._handleMasterPlaylist=function(e,n,i,r){var o=this.hls,a=e.data,l=t.getResponseUrl(e,i),c=A.parseMasterPlaylist(a,l);if(c.length){var f=c.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),d=A.parseMasterPlaylistMedia(a,l,"AUDIO",f),h=A.parseMasterPlaylistMedia(a,l,"SUBTITLES");if(d.length){var p=!1;d.forEach(function(e){e.url||(p=!0)}),!1===p&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(u.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main"}))}o.trigger(s.a.MANIFEST_LOADED,{levels:c,audioTracks:d,subtitles:h,url:l,stats:n,networkDetails:r})}else this._handleManifestParsingError(e,i,"no level found in manifest",r)},t.prototype._handleTrackOrLevelPlaylist=function(e,n,i,r){var o=this.hls,a=i.id,u=i.level,l=i.type,c=t.getResponseUrl(e,i),f=isNaN(u)?isNaN(a)?0:a:u,d=t.mapContextToLevelType(i),h=A.parseLevelPlaylist(e.data,c,f,d);if(h.tload=n.tload,l===x.MANIFEST){var p={url:c,details:h};o.trigger(s.a.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:c,stats:n,networkDetails:r})}if(n.tparsed=performance.now(),h.needSidxRanges){var v=h.initSegment.url;this.load(v,{isSidxRequest:!0,type:l,level:u,levelDetails:h,id:a,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else i.levelDetails=h,this._handlePlaylistLoaded(e,n,i,r)},t.prototype._handleSidxRequest=function(e,t){var n=d.a.parseSegmentIndex(new Uint8Array(e.data));n.references.forEach(function(e,n){var i=e.info,r=t.levelDetails.fragments[n];0===r.byteRange.length&&(r.rawByteRange=String(1+i.end-i.start)+"@"+String(i.start))}),t.levelDetails.initSegment.rawByteRange=String(n.moovEndOffset)+"@0"},t.prototype._handleManifestParsingError=function(e,t,n,i){this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:i})},t.prototype._handleNetworkError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0,r=void 0,o=this.getInternalLoader(e);switch(e.type){case x.MANIFEST:i=n?a.a.MANIFEST_LOAD_TIMEOUT:a.a.MANIFEST_LOAD_ERROR,r=!0;break;case x.LEVEL:i=n?a.a.LEVEL_LOAD_TIMEOUT:a.a.LEVEL_LOAD_ERROR,r=!1;break;case x.AUDIO_TRACK:i=n?a.a.AUDIO_TRACK_LOAD_TIMEOUT:a.a.AUDIO_TRACK_LOAD_ERROR,r=!1;break;default:r=!1}o&&(o.abort(),this.resetInternalLoader(e.type)),this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:i,fatal:r,url:o.url,loader:o,context:e,networkDetails:t})},t.prototype._handlePlaylistLoaded=function(e,n,i,r){var o=i.type,a=i.level,u=i.id,l=i.levelDetails;if(l.targetduration)if(t.canHaveQualityLevels(i.type))this.hls.trigger(s.a.LEVEL_LOADED,{details:l,level:a||0,id:u||0,stats:n,networkDetails:r});else switch(o){case x.AUDIO_TRACK:this.hls.trigger(s.a.AUDIO_TRACK_LOADED,{details:l,id:u,stats:n,networkDetails:r});break;case x.SUBTITLE_TRACK:this.hls.trigger(s.a.SUBTITLE_TRACK_LOADED,{details:l,id:u,stats:n,networkDetails:r})}else this._handleManifestParsingError(e,i,"invalid target duration",r)},O(t,null,[{key:"ContextType",get:function(){return x}},{key:"LevelType",get:function(){return M}}]),t}(f);var I=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.FRAG_LOADING));return i.loaders={},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){var t=this.loaders;for(var n in t){var i=t[n];i&&i.destroy()}this.loaders={},e.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,n=t.type,i=this.loaders,r=this.hls.config,o=r.fLoader,a=r.loader;t.loaded=0;var s=i[n];s&&(u.b.warn("abort previous fragment loader for type: "+n),s.abort()),s=i[n]=t.loader=r.fLoader?new o(r):new a(r);var l,c,f=void 0;f={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var d=t.byteRangeStartOffset,h=t.byteRangeEndOffset;isNaN(d)||isNaN(h)||(f.rangeStart=d,f.rangeEnd=h),l={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(f,l,c)},t.prototype.loadsuccess=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,o=n.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(s.a.FRAG_LOADED,{payload:r,frag:o,stats:t,networkDetails:i})},t.prototype.loaderror=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},t.prototype.loadtimeout=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},t.prototype.loadprogress=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.frag;r.loaded=e.loaded,this.hls.trigger(s.a.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:i})},t}(f);var D=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},f.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=t.decryptdata,o=r.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;i&&(u.b.warn("abort previous key loader for type:"+n),i.abort()),t.loader=this.loaders[n]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var l,c,f;l={url:o,frag:t,responseType:"arraybuffer"},c={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(l,c,f)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(s.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(s.a.KEY_LOADED,{frag:i})},t.prototype.loaderror=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.prototype.loadtimeout=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(f),C={search:function(e,t){for(var n=0,i=e.length-1,r=null,o=null;n<=i;){var a=t(o=e[r=(n+i)/2|0]);if(a>0)n=r+1;else{if(!(a<0))return o;i=r-1}}return null}},R={isBuffered:function(e,t){try{if(e)for(var n=e.buffered,i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}catch(r){}return!1},bufferInfo:function(e,t,n){try{if(e){var i=e.buffered,r=[],o=void 0;for(o=0;o<i.length;o++)r.push({start:i.start(o),end:i.end(o)});return this.bufferedInfo(r,t,n)}}catch(a){}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var i=[],r=void 0,o=void 0,a=void 0,s=void 0,u=void 0;for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),u=0;u<e.length;u++){var l=i.length;if(l){var c=i[l-1].end;e[u].start-c<n?e[u].end>c&&(i[l-1].end=e[u].end):i.push(e[u])}else i.push(e[u])}for(u=0,r=0,o=a=t;u<i.length;u++){var f=i[u].start,d=i[u].end;if(t+n>=f&&t<d)o=f,r=(a=d)-t;else if(t+n<f){s=f;break}}return{len:r,start:o,end:a,nextStart:s}}},N=n(8),P=n(6),j=n.n(P),F=n(10),B=n.n(F);function z(){if("undefined"!==typeof window)return window.MediaSource||window.WebKitMediaSource}var U=z(),G=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.id=n;var i=this.observer=new j.a,r=t.config;i.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))};var o=function(e,n){(n=n||{}).frag=this.frag,n.id=this.id,t.trigger(e,n)}.bind(this);i.on(s.a.FRAG_DECRYPTED,o),i.on(s.a.FRAG_PARSING_INIT_SEGMENT,o),i.on(s.a.FRAG_PARSING_DATA,o),i.on(s.a.FRAG_PARSED,o),i.on(s.a.ERROR,o),i.on(s.a.FRAG_PARSING_METADATA,o),i.on(s.a.FRAG_PARSING_USERDATA,o),i.on(s.a.INIT_PTS_FOUND,o);var l={mp4:U.isTypeSupported("video/mp4"),mpeg:U.isTypeSupported("audio/mpeg"),mp3:U.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(r.enableWorker&&"undefined"!==typeof Worker){u.b.log("demuxing in webworker");var f=void 0;try{f=this.w=B()(11),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(e){t.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},f.postMessage({cmd:"init",typeSupported:l,vendor:c,id:n,config:JSON.stringify(r)})}catch(d){u.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),f&&URL.revokeObjectURL(f.objectURL),this.demuxer=new N.a(i,l,r,c),this.w=void 0}}else this.demuxer=new N.a(i,l,r,c)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,n,i,r,o,a,s){var l=this.w,c=isNaN(r.startDTS)?r.start:r.startDTS,f=r.decryptdata,d=this.frag,h=!(d&&r.cc===d.cc),p=!(d&&r.level===d.level),v=d&&r.sn===d.sn+1,m=!p&&v;if(h&&u.b.log(this.id+":discontinuity detected"),p&&u.b.log(this.id+":switch detected"),this.frag=r,l)l.postMessage({cmd:"demux",data:e,decryptdata:f,initSegment:t,audioCodec:n,videoCodec:i,timeOffset:c,discontinuity:h,trackSwitch:p,contiguous:m,duration:o,accurateTimeOffset:a,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var g=this.demuxer;g&&g.push(e,f,t,n,i,c,h,p,m,o,a,s)}},e.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}();var W="NOT_LOADED",$="APPENDING",V="PARTIAL",H="OK",Y=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.BUFFER_APPENDED,s.a.FRAG_BUFFERED,s.a.FRAG_LOADED));return i.bufferPadding=.2,i.fragments=Object.create(null),i.timeRanges=Object.create(null),i.config=n.config,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,f.prototype.destroy.call(this),e.prototype.destroy.call(this)},t.prototype.getBufferedFrag=function(e,t){var n=this.fragments,i=Object.keys(n).filter(function(i){var r=n[i];if(r.body.type!==t)return!1;if(!r.buffered)return!1;var o=r.body;return o.startPTS<=e&&e<=o.endPTS});if(0===i.length)return null;var r=i.pop();return n[r].body},t.prototype.detectEvictedFragments=function(e,t){var n=this,i=void 0,r=void 0;Object.keys(this.fragments).forEach(function(o){var a=n.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){i=s.time;for(var u=0;u<i.length;u++)if(r=i[u],!1===n.isTimeBuffered(r.startPTS,r.endPTS,t)){n.removeFragment(a.body);break}}}})},t.prototype.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),i=this.fragments[n];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach(function(n){if(!0===e.hasElementaryStream(n)){var r=t.timeRanges[n];i.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,r)}}))},t.prototype.getBufferedTimes=function(e,t,n){for(var i=[],r=void 0,o=void 0,a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,o=n.end(s)+this.bufferPadding,e>=r&&t<=o){i.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<o&&t>r)i.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),a=!0;else if(t<=r)break}return{time:i,partial:a}},t.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.sn},t.prototype.getPartialFragment=function(e){var t=this,n=void 0,i=void 0,r=void 0,o=null,a=0;return Object.keys(this.fragments).forEach(function(s){var u=t.fragments[s];t.isPartial(u)&&(i=u.body.startPTS-t.bufferPadding,r=u.body.endPTS+t.bufferPadding,e>=i&&e<=r&&(n=Math.min(e-i,r-e),a<=n&&(o=u.body,a=n)))}),o},t.prototype.getState=function(e){var t=this.getFragmentKey(e),n=this.fragments[t],i=W;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?V:H:$),i},t.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},t.prototype.isTimeBuffered=function(e,t,n){for(var i=void 0,r=void 0,o=0;o<n.length;o++){if(i=n.start(o)-this.bufferPadding,r=n.end(o)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1},t.prototype.onFragLoaded=function(e){var t=e.frag;if(!isNaN(t.sn)){var n=this.getFragmentKey(t),i={body:t,range:Object.create(null),buffered:!1};this.fragments[n]=i}},t.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)})},t.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},t.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},t.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},t.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},t}(f);function K(e,t,n){var i=e[t],r=e[n],o=r.startPTS;isNaN(o)?r.start=n>t?i.start+i.duration:Math.max(i.start-r.duration,0):n>t?(i.duration=o-i.start,i.duration<0&&u.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-o,r.duration<0&&u.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function Z(e,t,n,i,r,o){var a=n;if(!isNaN(t.startPTS)){var s=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),a=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),i=Math.max(i,t.endPTS),r=Math.min(r,t.startDTS),o=Math.max(o,t.endDTS)}var u=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=a,t.endPTS=i,t.startDTS=r,t.endDTS=o,t.duration=i-n;var l=t.sn;if(!e||l<e.startSN||l>e.endSN)return 0;var c,f=void 0,d=void 0;for(c=l-e.startSN,(f=e.fragments)[c]=t,d=c;d>0;d--)K(f,d,d-1);for(d=c;d<f.length-1;d++)K(f,d,d+1);return e.PTSKnown=!0,u}function X(e,t){var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,r=t.startSN-e.startSN,o=e.fragments,a=t.fragments,s=0,l=void 0;if(t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment),i<n)t.PTSKnown=!1;else{for(var c=n;c<=i;c++){var f=o[r+c],d=a[c];d&&f&&(s=f.cc-d.cc,isNaN(f.startPTS)||(d.start=d.startPTS=f.startPTS,d.endPTS=f.endPTS,d.duration=f.duration,d.backtracked=f.backtracked,d.dropped=f.dropped,l=d))}if(s)for(u.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<a.length;c++)a[c].cc+=s;if(l)Z(t,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS);else if(r>=0&&r<o.length){var h=o[r].start;for(c=0;c<a.length;c++)a[c].start+=h}t.PTSKnown=e.PTSKnown}}var q={toString:function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}};function Q(e,t){t.fragments.forEach(function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),t.PTSKnown=!0}function J(e,t,n){if(function(e,t,n){var i=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(i=!0),i}(e,t,n)){var i=function(e,t){var n=e.fragments,i=t.fragments;if(i.length&&n.length){var r=function(e,t){for(var n=null,i=0;i<e.length;i+=1){var r=e[i];if(r&&r.cc===t){n=r;break}}return n}(n,i[0].cc);if(r&&(!r||r.startPTS))return r;u.b.log("No frag in previous level to align on")}else u.b.log("No fragments to align")}(t.details,n);i&&(u.b.log("Adjusting PTS using last level due to CC increase within current level"),Q(i.start,n))}if(!1===n.PTSKnown&&t&&t.details&&t.details.fragments&&t.details.fragments.length){var r=t.details.programDateTime,o=(n.programDateTime-r)/1e3+t.details.fragments[0].start;isNaN(o)||(u.b.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),Q(o,n))}}var ee=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call.apply(e,[this,n].concat(r)));return a._tickInterval=null,a._tickCallCount=0,a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.clearInterval(),e.prototype.destroy.call(this)},t.prototype.hasInterval=function(){return null!==this._tickInterval},t.prototype.setInterval=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this.tick.bind(this,!1),e),!0)}),t.prototype.clearInterval=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)}),t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&setTimeout(this.tick.bind(this),0),this._tickCallCount=0)},t.prototype.doTick=function(){throw new Error("TaskLoop is abstract and `doLoop` must be implemented")},t}(f),te=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var ne={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},ie=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.LEVEL_LOADED,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.FRAG_LOAD_EMERGENCY_ABORTED,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.FRAG_PARSING_DATA,s.a.FRAG_PARSED,s.a.ERROR,s.a.AUDIO_TRACK_SWITCHING,s.a.AUDIO_TRACK_SWITCHED,s.a.BUFFER_CREATED,s.a.BUFFER_APPENDED,s.a.BUFFER_FLUSHED));return r.fragmentTracker=i,r.config=n.config,r.audioCodecSwap=!1,r._state=ne.STOPPED,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onHandlerDestroying=function(){this.stopLoad()},t.prototype.onHandlerDestroyed=function(){this.state=ne.STOPPED,this.fragmentTracker=null},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(u.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=ne.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ne.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=ne.STOPPED,this.forceStartLoad=!1},t.prototype.doTick=function(){switch(this.state){case ne.BUFFER_FLUSHING:this.fragLoadError=0;break;case ne.IDLE:this._doTickIdle();break;case ne.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=ne.IDLE);break;case ne.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(u.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ne.IDLE);break;case ne.ERROR:case ne.STOPPED:case ne.FRAG_LOADING:case ne.PARSING:case ne.PARSED:case ne.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var i=void 0;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,o=this.levels[r];if(o){var a=o.bitrate,l=void 0;l=a?Math.max(8*t.maxBufferSize/a,t.maxBufferLength):t.maxBufferLength,l=Math.min(l,t.maxMaxBufferLength);var c=R.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,t.maxBufferHole),f=c.len;if(!(f>=l)){u.b.trace("buffer length of "+f.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var d=o.details;if(void 0===d||!0===d.live&&this.levelLastLoaded!==r)this.state=ne.WAITING_LEVEL;else{var h=this.fragPrevious;if(!d.live&&h&&!h.backtracked&&h.sn===d.endSN&&!c.nextStart)if(Math.min(n.duration,h.start+h.duration)-Math.max(c.end,h.start)<=Math.max(.2,h.duration)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(s.a.BUFFER_EOS,p),void(this.state=ne.ENDED)}this._fetchPayloadOrEos(i,c,d)}}}}},t.prototype._fetchPayloadOrEos=function(e,t,n){var i=this.fragPrevious,r=this.level,o=n.fragments,a=o.length;if(0!==a){var s=o[0].start,l=o[a-1].start+o[a-1].duration,c=t.end,f=void 0;if(n.initSegment&&!n.initSegment.data)f=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(a<d)return void u.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(f=this._ensureFragmentAtLivePoint(n,c,s,l,i,o,a)))return}else c<s&&(f=o[0]);f||(f=this._findFragment(s,i,a,o,c,l,n)),f&&this._loadFragmentOrKey(f,r,n,e,c)}},t.prototype._ensureFragmentAtLivePoint=function(e,t,n,i,r,o,a){var s=this.hls.config,l=this.media,c=void 0,f=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,i-f)){var d=this.liveSyncPosition=this.computeLivePosition(n,e);u.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),t=d,l&&l.readyState&&l.duration>d&&(l.currentTime=d),this.nextLoadPosition=d}if(e.PTSKnown&&t>i&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(r)if(e.programDateTime)c=this._findFragmentByPDT(o,r.endPdt+1);else{var h=r.sn+1;if(h>=e.startSN&&h<=e.endSN){var p=o[h-e.startSN];r.cc===p.cc&&(c=p,u.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=C.search(o,function(e){return r.cc-e.cc}))&&u.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=o[Math.min(a-1,Math.round(a/2))],u.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},t.prototype._findFragmentByPDT=function(e,t){if(!e||void 0===t)return null;if(t<e[0].pdt)return null;if(t>=e[e.length-1].endPdt)return null;for(var n=0;n<e.length;++n){var i=e[n];if(t<i.endPdt)return i}return null},t.prototype._findFragmentBySN=function(e,t,n,i){var r=void 0,o=this.hls.config.maxFragLookUpTolerance,a=e?t[e.sn-t[0].sn+1]:void 0,s=function(e){var t=Math.min(o,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=n?1:e.start-t>n&&e.start?-1:0};return n<i&&(n>i-o&&(o=0),r=a&&!s(a)?a:C.search(t,s)),r},t.prototype._findFragment=function(e,t,n,i,r,o,a){var s=this.hls.config,l=void 0,c=void 0;if(c=r<o?a.programDateTime?this._findFragmentByPDT(i,1e3*r+(a.programDateTime?Date.parse(a.programDateTime):0)-1e3*e):this._findFragmentBySN(t,i,r,o):i[n-1]){var f=(l=c).sn-a.startSN,d=t&&l.level===t.level,h=i[f-1],p=i[f+1];if(t&&l.sn===t.sn)if(d&&!l.backtracked)if(l.sn<a.endSN){var v=t.deltaPTS;v&&v>s.maxBufferHole&&t.dropped&&f?(l=h,u.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=p,u.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(p&&p.backtracked?(u.b.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+p.sn),l=p):(u.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,h?(l=h).backtracked=!0:f&&(l=null)))}return l},t.prototype._loadFragmentOrKey=function(e,t,n,i,r){if(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key)u.b.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=ne.KEY_LOADING,this.hls.trigger(s.a.KEY_LOADING,{frag:e});else{u.b.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3));var o=this.fragmentTracker.getState(e);this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),e.backtracked||o===W?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(s.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new G(this.hls,"main")),this.state=ne.FRAG_LOADING):o===$&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)}},t.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,L.LevelType.MAIN)},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e=void 0,t=void 0,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),R.isBuffered(n,t)?e=this.getBufferedFrag(t):R.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(s.a.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(s.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},t.prototype.immediateLevelSwitch=function(){if(u.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,R.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n=void 0,i=void 0;if((t=this.getBufferedFrag(e.currentTime))&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),e.paused)n=0;else{var r=this.hls.nextLoadLevel,o=this.levels[r],a=this.fragLastKbps;n=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((i=this.getBufferedFrag(e.currentTime+n))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=ne.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(s.a.BUFFER_FLUSHING,n)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(u.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||u.b.log("media seeking to "+t.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:e,r=R.bufferInfo(i,t,this.config.maxBufferHole);if(this.state===ne.FRAG_LOADING){var o=this.fragCurrent;if(0===r.len&&o){var a=n.maxFragLookUpTolerance,s=o.start-a,l=o.start+o.duration+a;t<s||t>l?(o.loader&&(u.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ne.IDLE):u.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===ne.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=ne.IDLE);e&&(this.lastCurrentTime=t),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||u.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){u.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){u.b.log("trigger BUFFER_RESET"),this.hls.trigger(s.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t=!1,n=!1,i=void 0;e.levels.forEach(function(e){(i=e.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(t=!0),-1!==i.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=t&&n,this.audioCodecSwitch&&u.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,n=e.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],o=t.totalduration,a=0;if(u.b.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+o),t.live){var l=r.details;l&&t.fragments.length>0?(X(l,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,l),t.PTSKnown&&!isNaN(a)?u.b.log("live playlist sliding:"+a.toFixed(3)):(u.b.log("live playlist - outdated PTS, unknown sliding"),J(this.fragPrevious,i,t))):(u.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,J(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(r.details=t,this.levelLastLoaded=n,this.hls.trigger(s.a.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=t.startTimeOffset;isNaN(c)?t.live?(this.startPosition=this.computeLivePosition(a,t),u.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(c<0&&(u.b.log("negative start time offset "+c+", count from end of last fragment"),c=a+o+c),u.b.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ne.WAITING_LEVEL&&(this.state=ne.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===ne.KEY_LOADING&&(this.state=ne.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===ne.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var i=e.stats,r=this.levels[t.level],o=r.details;if(u.b.log("Loaded  "+t.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=i,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=ne.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(s.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=ne.IDLE,i.tparsed=i.tbuffered=performance.now(),o.initSegment.data=e.payload,this.hls.trigger(s.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{this.state=ne.PARSING;var a=o.totalduration,l=t.level,c=t.sn,f=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(u.b.log("swapping playlist audio codec"),void 0===f&&(f=this.lastAudioCodec),f&&(f=-1!==f.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,u.b.log("Parsing "+c+" of ["+o.startSN+" ,"+o.endSN+"],level "+l+", cc "+t.cc);var d=this.demuxer;d||(d=this.demuxer=new G(this.hls,"main"));var h=this.media,p=!(h&&h.seeking)&&(o.PTSKnown||!o.live),v=o.initSegment?o.initSegment.data:[];d.push(e.payload,v,f,r.videoCodec,t,a,p,void 0)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ne.PARSING){var i=e.tracks,r=void 0,o=void 0;if(i.audio&&this.altAudio&&delete i.audio,o=i.audio){var a=this.levels[this.level].audioCodec,l=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(u.b.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===l.indexOf("firefox")&&(a="mp4a.40.5"),-1!==l.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",u.b.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}for(r in(o=i.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(s.a.BUFFER_CODECS,i),i){o=i[r],u.b.log("main track:"+r+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var c=o.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.a.BUFFER_APPENDING,{type:r,data:c,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"main"===e.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===ne.PARSING){var r=this.levels[this.level],o=n;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),!0===e.hasAudio&&o.addElementaryStream(m.ElementaryStreamTypes.AUDIO),!0===e.hasVideo&&o.addElementaryStream(m.ElementaryStreamTypes.VIDEO),u.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped)if(o.backtracked)u.b.warn("Already backtracked on this fragment, appending with the gap");else{var a=r.details;if(!a||o.sn!==a.startSN)return u.b.warn("missing video frame(s), backtracking fragment"),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=ne.IDLE,this.fragPrevious=o,void this.tick();u.b.warn("missing video frame(s) on first frag, appending with gap")}else o.backtracked=!1;var l=Z(r.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),c=this.hls;c.trigger(s.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:l,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(n){n&&n.length&&t.state===ne.PARSING&&(t.appended=!0,t.pendingBuffering=!0,c.trigger(s.a.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ne.PARSING&&(this.stats.tparsed=performance.now(),this.state=ne.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){u.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(u.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ne.IDLE}var r=this.hls;r.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(u.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,n=void 0,i=void 0,r=!1;for(var o in t){var a=t[o];"main"===a.id?(i=o,n=a,"video"===o&&(this.videoBuffer=t[o].buffer)):r=!0}r&&n?(u.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==ne.PARSING&&t!==ne.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(this.state===ne.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;u.b.log("main buffered : "+q.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(s.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=ne.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&R.isBuffered(this.media,this.media.currentTime)&&R.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);u.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ne.FRAG_LOADING_WAITING_RETRY}else u.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=ne.ERROR;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:this.state!==ne.ERROR&&(e.fatal?(this.state=ne.ERROR,u.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==ne.WAITING_LEVEL||(this.state=ne.IDLE));break;case a.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==ne.PARSING&&this.state!==ne.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ne.IDLE):(u.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,u.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},t.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,i=(this.mediaBuffer?this.mediaBuffer:e).buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var r=e.seeking?n:this.startPosition;n!==r&&(u.b.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time"+n+" "),e.currentTime=r)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var o=R.bufferInfo(e,n,t.maxBufferHole),l=!(e.paused&&e.readyState>1||e.ended||0===e.buffered.length);if(n!==this.lastCurrentTime)this.stallReported&&(u.b.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(l){var c=performance.now(),f=this.hls;if(this.stalled){var d=c-this.stalled,h=o.len,p=this.nudgeRetry||0,v=this.fragmentTracker.getPartialFragment(n);if(null!==v)for(var m=0,g=0;g<e.buffered.length;g++){var y=e.buffered.start(g);if(n>=m&&n<y)return e.currentTime=Math.max(y,e.currentTime+.1),u.b.warn("skipping hole, adjusting currentTime from "+n+" to "+e.currentTime),this.stalled=void 0,void f.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+e.currentTime,frag:v});m=e.buffered.end(g)}if(h>.5&&d>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,u.b.warn("playback stalling in high buffer @"+n),f.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:h})),this.stalled=void 0,this.nudgeRetry=++p,p<t.nudgeMaxRetry){var b=e.currentTime,w=b+p*t.nudgeOffset;u.b.log("adjust currentTime from "+b+" to "+w),e.currentTime=w,f.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else u.b.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),f.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=c,this.stallReported=!1}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=ne.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this.fragmentTracker.detectEvictedFragments(m.ElementaryStreamTypes.VIDEO,e.buffered),this.state=ne.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},te(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,u.b.log("main stream:"+t+"->"+e),this.hls.trigger(s.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(ee),re=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var oe=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MANIFEST_LOADED,s.a.LEVEL_LOADED,s.a.FRAG_LOADED,s.a.ERROR));return i.canload=!1,i.currentLevelIndex=null,i.manualLevelIndex=-1,i.timer=null,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onHandlerDestroying=function(){this.cleanTimer(),this.manualLevelIndex=-1},t.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],n=void 0,i={},r=null,o=!1,l=!1,c=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),f=[];if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),!0===c&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),void 0===(r=i[e.bitrate])?(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,t.push(e)):r.url.push(e.url)}),!0===o&&!0===l&&(t=t.filter(function(e){return!!e.videoCodec})),t=t.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||_(t))&&(!n||_(n))}),e.audioTracks&&(f=e.audioTracks.filter(function(e){return!e.audioCodec||_(e.audioCodec,"audio")})),t.length>0){n=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var d=0;d<t.length;d++)if(t[d].bitrate===n){this._firstLevel=d,u.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(s.a.MANIFEST_PARSED,{levels:t,audioTracks:f,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:f.length>0})}else this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this.currentLevelIndex!==e){u.b.log("switching to level "+e),this.currentLevelIndex=e;var i=t[e];i.level=e,n.trigger(s.a.LEVEL_SWITCHING,i)}var r=t[e],o=r.details;if(!o||!0===o.live){var l=r.urlId;n.trigger(s.a.LEVEL_LOADING,{url:r.url[l],level:e,id:l})}}else n.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){if(!0!==e.fatal){var t=!1,n=!1,i=void 0;switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:i=e.frag.level,n=!0;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:i=e.context.level,t=!0;break;case a.a.REMUX_ALLOC_ERROR:i=e.level,t=!0}void 0!==i&&this.recoverLevel(e,i,t,n)}else e.type===a.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.recoverLevel=function(e,t,n,i){var r=this,o=this.hls.config,a=e.details,s=this._levels[t],l=void 0,c=void 0,f=void 0;if(s.loadError++,s.fragmentError=i,!0===n){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return u.b.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(e.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return r.loadLevel()},c),e.levelRetry=!0,this.levelRetryCount++,u.b.warn("level controller, "+a+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}!0!==n&&!0!==i||((l=s.url.length)>1&&s.loadError<l?(u.b.warn("level controller, "+a+" for level "+t+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%l,s.details=void 0):-1===this.manualLevelIndex?(f=0===t?this._levels.length-1:t-1,u.b.warn("level controller, "+a+": switch to "+f),this.hls.nextAutoLevel=this.currentLevelIndex=f):!0===i&&(u.b.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,n=e.level;if(n===this.currentLevelIndex){var i=this._levels[n];!1===i.fragmentError&&(i.loadError=0,this.levelRetryCount=0);var r=e.details;if(r.live){var o=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),a=o,s=i.details;s&&r.endSN===s.endSN&&(a/=2,u.b.log("same live playlist, reload twice faster")),a-=performance.now()-e.stats.trequest,a=Math.max(o/2,Math.round(a)),u.b.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.cleanTimer()}},t.prototype.loadLevel=function(){var e=void 0,t=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(e=this._levels[this.currentLevelIndex])&&e.url.length>0&&(t=e.urlId,this.hls.trigger(s.a.LEVEL_LOADING,{url:e.url[t],level:this.currentLevelIndex,id:t}))},re(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(f),ae=n(4);function se(e,t){var n=null;try{n=new window.Event("addtrack")}catch(i){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function ue(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var le=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){f.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){ue(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return se(n,this.media),n}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var o=ae.a.getID3Frames(n[r].data);if(o){var a=n[r].pts,s=r<n.length-1?n[r+1].pts:t.endPTS;a===s&&(s+=1e-4);for(var u=0;u<o.length;u++){var l=o[u];if(!ae.a.isTimeStampFrame(l)){var c=new i(a,s,"");c.value=l,this.id3Track.addCue(c)}}}}},t}(f);var ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();var fe=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ce(n),this.fast_=new ce(i)}return e.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),i=e/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),de=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var he=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.FRAG_LOADING,s.a.FRAG_LOADED,s.a.FRAG_BUFFERED,s.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=n,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.clearTimer(),f.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,i=e.frag.level,r=n.levels[i].details.live,o=n.config,a=void 0,s=void 0;r?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new fe(n,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=t}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent,i=n.loader,r=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return u.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=i.stats;if(t&&o&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var a=performance.now()-o.trequest,l=Math.abs(t.playbackRate);if(a>500*n.duration/l){var c=e.levels,f=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),d=c[n.level],h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=o.total?o.total:Math.max(o.loaded,Math.round(n.duration*h/8)),v=t.currentTime,m=(p-o.loaded)/f,g=(R.bufferInfo(t,v,e.config.maxBufferHole).end-v)/l;if(g<2*n.duration/l&&m>g){var y=void 0,b=void 0;for(b=n.level-1;b>r;b--){var w=c[b].realBitrate?Math.max(c[b].realBitrate,c[b].bitrate):c[b].bitrate;if((y=n.duration*w/(6.4*f))<g)break}y<m&&(u.b.warn("loading too slow, abort fragment loading and switch to level "+b+":fragLoadedDelay["+b+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+y.toFixed(1)+"<"+m.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=b,this._bwEstimator.sample(a,o.loaded),i.abort(),this.clearTimer(),e.trigger(s.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:o}))}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,r=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!0!==t.aborted&&"main"===n.type&&!isNaN(n.sn)&&(!n.bitrateTest||t.tload===t.tbuffered)){var i=t.tparsed-t.trequest;u.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(e){switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,n,i,r,o,a,s,l){for(var c=r;c>=i;c--){var f=l[c].details,d=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,p=void 0;p=c<=e?a*n:s*n;var v=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,m=v*d/p;if(u.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+v+"/"+d+"/"+o+"/"+m),p>v&&(!m||h&&!this.bitrateTestDelay||m<o))return c}return-1},de(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(-1!==e&&(!t||!t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,i=e.config,r=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=(R.bufferInfo(o,l,i.maxBufferHole).end-l)/c,h=this._findBestLevel(a,s,f,r,t,d,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(h>=0)return h;u.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,v=i.abrBandWidthFactor,m=i.abrBandWidthUpFactor;if(0===d){var g=this.bitrateTestDelay;if(g)p=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-g,u.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),v=m=1}return h=this._findBestLevel(a,s,f,r,t,d+p,v,m,n),Math.max(h,0)}}]),t}(f);var pe=z(),ve=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHING,s.a.MEDIA_DETACHING,s.a.MANIFEST_PARSED,s.a.BUFFER_RESET,s.a.BUFFER_APPENDING,s.a.BUFFER_CODECS,s.a.BUFFER_EOS,s.a.BUFFER_FLUSHING,s.a.LEVEL_PTS_UPDATED,s.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i._live=null,i._objectUrl=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){f.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-e.start)>.1){var r=i.updating;try{i.abort()}catch(o){r=!0,u.b.warn("can not abort audio buffer: "+o)}r?this.audioTimestampOffset=e.start:(u.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,n=e.video||e.levels.length&&e.audio,i=0;e.altAudio&&(t||n)&&(i=(t?1:0)+(n?1:0),u.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new pe;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n),this._objectUrl=t.src}},t.prototype.onMediaDetaching=function(){u.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){u.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):u.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(s.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){u.b.log("media source opened"),this.hls.trigger(s.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){u.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){u.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;u.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0),i={},r=this.sourceBuffer;for(var o in r)i[o]=r[o].buffered;this.hls.trigger(s.a.BUFFER_APPENDED,{parent:t,pending:n,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){u.b.error("sourceBuffer error:",e),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(i){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var i in e)if(!t[i]){var r=e[i],o=r.levelCodec||r.codec,l=r.container+";codecs="+o;u.b.log("creating sourceBuffer("+l+")");try{var c=t[i]=n.addSourceBuffer(l);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[i]={codec:o,container:r.container},r.buffer=c}catch(f){u.b.error("error while trying to add sourceBuffer:"+f.message),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:f,mimeType:l})}}this.hls.trigger(s.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){u.b.error("sourceBuffer error:",e.event),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var i in t)n&&i!==n||t[i].ended||(t[i].ended=!0,u.b.log(i+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var i=e[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}u.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(_c){u.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e,t=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(u.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(u.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var i in n)t+=n[i].buffered.length}catch(r){u.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(s.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void u.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=t[i.type];r?r.updating?n.unshift(i):(r.ended=!1,this.parent=i.parent,r.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(l){u.b.error("error while trying to append buffer:"+l.message),n.unshift(i);var o={type:a.b.MEDIA_ERROR,parent:i.parent};22!==l.code?(this.appendError?this.appendError++:this.appendError=1,o.details=a.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(u.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],o.fatal=!0,e.trigger(s.a.ERROR,o)):(o.fatal=!1,e.trigger(s.a.ERROR,o))):(this.segments=[],o.details=a.a.BUFFER_FULL_ERROR,o.fatal=!1,e.trigger(s.a.ERROR,o))}}}},t.prototype.flushBuffer=function(e,t,n){var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=this.sourceBuffer;if(Object.keys(c).length){if(u.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var f in c)if(!n||f===n){if((i=c[f]).ended=!1,i.updating)return u.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(o=i.buffered.start(r),a=i.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,l=t):(s=Math.max(o,e),l=Math.min(a,t)),Math.min(l,a)-s>.5)return this.flushBufferCounter++,u.b.log("flush "+f+" ["+s+","+l+"], of ["+o+","+a+"], pos:"+this.media.currentTime),i.remove(s,l),!1}catch(_c){u.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else u.b.warn("abort flushing too many retries");u.b.log("buffer flushed")}return!0},t}(f),me=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var ge=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.FPS_DROP_LEVEL_CAPPING,s.a.MEDIA_ATTACHING,s.a.MANIFEST_PARSED))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var n=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,r){return t.isLevelAllowed(r,n.restrictedLevels)&&r<=e});return t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var i,r,o=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&(i=s,!(r=e[a+1])||i.width!==r.width||i.height!==r.height)){o=a;break}}return o},me(t,[{key:"mediaWidth",get:function(){var e=void 0,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(_c){}return e}}]),t}(f);var ye=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHING))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"===typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,n){var i=performance.now();if(t){if(this.lastTime){var r=i-this.lastTime,o=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,l=1e3*o/r,c=this.hls;if(c.trigger(s.a.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){var f=c.currentLevel;u.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=f)&&(f-=1,c.trigger(s.a.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:c.currentLevel}),c.autoLevelCapping=f,c.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(f);var be=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e=void 0,t=this.context;e=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(_c){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(_c){return void this.callbacks.onError({code:e.status,text:_c.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,i=this.stats,r=this.context,o=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var a=t.status;if(a>=200&&a<300){i.tload=Math.max(i.tfirst,performance.now());var s=void 0,l=void 0;l="arraybuffer"===r.responseType?(s=t.response).byteLength:(s=t.responseText).length,i.loaded=i.total=l;var c={url:t.responseURL,data:s};this.callbacks.onSuccess(c,i,r,t)}else i.retry>=o.maxRetry||a>=400&&a<499?(u.b.error(a+" while loading "+r.url),this.callbacks.onError({code:a,text:t.statusText},r,t)):(u.b.warn(a+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},e.prototype.loadtimeout=function(){u.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,t)},e}(),we=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var _e=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.AUDIO_TRACK_LOADED,s.a.ERROR));return i.ticks=0,i.ontick=i.tick.bind(i),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),f.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(e){e.fatal&&e.type===a.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestParsed=function(e){var t=this,n=e.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach(function(e){if(e.default&&!i)return t.audioTrack=r,void(i=!0);r++}),!1===i&&n.length&&(u.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(u.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,u.b.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,i=t.type,r=t.url,o={id:e,type:i,url:r};n.trigger(s.a.AUDIO_TRACK_SWITCHING,o);var a=t.details;!r||void 0!==a&&!0!==a.live||(u.b.log("(re)loading playlist for audioTrack "+e),n.trigger(s.a.AUDIO_TRACK_LOADING,{url:r,id:e}))}},t.prototype.updateTrack=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,u.b.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,i=t.details;!n||void 0!==i&&!0!==i.live||(u.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(s.a.AUDIO_TRACK_LOADING,{url:n,id:e}))}},we(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(f),Ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var Se={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},ke=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.AUDIO_TRACKS_UPDATED,s.a.AUDIO_TRACK_SWITCHING,s.a.AUDIO_TRACK_LOADED,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.FRAG_PARSING_DATA,s.a.FRAG_PARSED,s.a.ERROR,s.a.BUFFER_RESET,s.a.BUFFER_CREATED,s.a.BUFFER_APPENDED,s.a.BUFFER_FLUSHED,s.a.INIT_PTS_FOUND));return r.fragmentTracker=i,r.config=n.config,r.audioCodecSwap=!1,r._state=Se.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onHandlerDestroying=function(){this.stopLoad()},t.prototype.onHandlerDestroyed=function(){this.state=Se.STOPPED,this.fragmentTracker=null},t.prototype.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[n]=i,this.videoTrackCC=n,u.b.log("InitPTS for cc: "+n+" found from video track: "+i),this.state===Se.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(u.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=Se.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=Se.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=Se.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Se.STOPPED},t.prototype.doTick=function(){var e=void 0,t=void 0,n=void 0,i=this.hls,r=i.config;switch(this.state){case Se.ERROR:case Se.PAUSED:case Se.BUFFER_FLUSHING:break;case Se.STARTING:this.state=Se.WAITING_TRACK,this.loadedmetadata=!1;break;case Se.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,l=this.videoBuffer?this.videoBuffer:this.media,c=R.bufferInfo(a,e,r.maxBufferHole),f=R.bufferInfo(l,e,r.maxBufferHole),d=c.len,h=c.end,p=this.fragPrevious,v=Math.min(r.maxBufferLength,r.maxMaxBufferLength),m=Math.max(v,f.len),g=this.audioSwitch,y=this.trackId;if((d<m||g)&&y<o.length){if("undefined"===typeof(n=o[y].details)){this.state=Se.WAITING_TRACK;break}if(!g&&!n.live&&p&&p.sn===n.endSN&&!c.nextStart&&(!this.media.seeking||this.media.duration-h<p.duration/2)){this.hls.trigger(s.a.BUFFER_EOS,{type:"audio"}),this.state=Se.ENDED;break}var b=n.fragments,w=b.length,_=b[0].start,E=b[w-1].start+b[w-1].duration,S=void 0;if(g)if(n.live&&!n.PTSKnown)u.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=e,n.PTSKnown&&e<_){if(!(c.end>_||c.nextStart))return;u.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05}if(n.initSegment&&!n.initSegment.data)S=n.initSegment;else if(h<=_){if(S=b[0],null!==this.videoTrackCC&&S.cc!==this.videoTrackCC&&(S=function(e,t){return C.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(b,this.videoTrackCC)),n.live&&S.loadIdx&&S.loadIdx===this.fragLoadIdx){var k=c.nextStart?c.nextStart:_;return u.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(k+.05)),void(this.media.currentTime=k+.05)}}else{var T=void 0,A=r.maxFragLookUpTolerance,O=p?b[p.sn-b[0].sn+1]:void 0,x=function(e){var t=Math.min(A,e.duration);return e.start+e.duration-t<=h?1:e.start-t>h&&e.start?-1:0};h<E?(h>E-A&&(A=0),T=O&&!x(O)?O:C.search(b,x)):T=b[w-1],T&&(S=T,_=T.start,p&&S.level===p.level&&S.sn===p.sn&&(S.sn<n.endSN?(S=b[S.sn+1-n.startSN],u.b.log("SN just loaded, load next one: "+S.sn)):S=null))}S&&(S.decryptdata&&null!=S.decryptdata.uri&&null==S.decryptdata.key?(u.b.log("Loading key for "+S.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+y),this.state=Se.KEY_LOADING,i.trigger(s.a.KEY_LOADING,{frag:S})):(u.b.log("Loading "+S.sn+", cc: "+S.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+y+", currentTime:"+e+",bufferEnd:"+h.toFixed(3)),this.fragmentTracker.getState(S)===W&&(this.fragCurrent=S,this.startFragRequested=!0,isNaN(S.sn)||(this.nextLoadPosition=S.start+S.duration),i.trigger(s.a.FRAG_LOADING,{frag:S}),this.state=Se.FRAG_LOADING)))}break;case Se.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=Se.IDLE);break;case Se.FRAG_LOADING_WAITING_RETRY:var M=performance.now(),L=this.retryDate,I=(a=this.media)&&a.seeking;(!L||M>=L||I)&&(u.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Se.IDLE);break;case Se.WAITING_INIT_PTS:var D=this.videoTrackCC;if(void 0===this.initPTS[D])break;var N=this.waitingFragment;if(N){var P=N.frag.cc;D!==P?(t=this.tracks[this.trackId]).details&&t.details.live&&(u.b.warn("Waiting fragment CC ("+P+") does not match video track CC ("+D+")"),this.waitingFragment=null,this.state=Se.IDLE):(this.state=Se.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Se.IDLE;break;case Se.STOPPED:case Se.FRAG_LOADING:case Se.PARSING:case Se.PARSED:case Se.ENDED:}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(u.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===Se.ENDED&&(this.state=Se.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){u.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=Se.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=Se.IDLE),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,i=this.tracks[n],r=t.totalduration,o=0;if(u.b.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),t.live){var a=i.details;a&&t.fragments.length>0?(X(a,t),o=t.fragments[0].start,t.PTSKnown?u.b.log("live audio playlist sliding:"+o.toFixed(3)):u.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,u.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(u.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===Se.WAITING_TRACK&&(this.state=Se.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===Se.KEY_LOADING&&(this.state=Se.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===Se.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var i=this.tracks[this.trackId],r=i.details,o=r.totalduration,a=t.level,l=t.sn,c=t.cc,f=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===l)this.state=Se.IDLE,d.tparsed=d.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(s.a.FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=Se.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new G(this.hls,"audio"));var h=this.initPTS[c],p=r.initSegment?r.initSegment.data:[];if(r.initSegment||void 0!==h){this.pendingBuffering=!0,u.b.log("Demuxing "+l+" of ["+r.startSN+" ,"+r.endSN+"],track "+a);this.demuxer.push(e.payload,p,f,null,t,o,!1,h)}else u.b.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+l+" of ["+r.startSN+" ,"+r.endSN+"],track "+a),this.waitingFragment=e,this.state=Se.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Se.PARSING){var i=e.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(s.a.BUFFER_CODECS,i),u.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.a.BUFFER_APPENDING,a))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&this.state===Se.PARSING){var r=this.trackId,o=this.tracks[r],l=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(m.ElementaryStreamTypes.AUDIO),u.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),Z(o.details,n,e.startPTS,e.endPTS);var c=this.audioSwitch,f=this.media,d=!1;if(c&&f)if(f.readyState){var h=f.currentTime;u.b.log("switching audio track : currentTime:"+h),h>=e.startPTS&&(u.b.log("switching audio track : flushing all audio"),this.state=Se.BUFFER_FLUSHING,l.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d=!0,this.audioSwitch=!1,l.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,l.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:r});var p=this.pendingData;if(!p)return console.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void l.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&p.push({type:e.type,data:t,parent:"audio",content:"data"})}),!d&&p.length&&(p.forEach(function(e){t.state===Se.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(s.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Se.PARSING&&(this.stats.tparsed=performance.now(),this.state=Se.PARSED,this._checkAppendedParsed())},t.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==Se.PARSING&&t!==Se.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(this.state===Se.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(s.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;u.b.log("audio buffered : "+q.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Se.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);u.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=Se.FRAG_LOADING_WAITING_RETRY}else u.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Se.ERROR}break;case a.a.AUDIO_TRACK_LOAD_ERROR:case a.a.AUDIO_TRACK_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:this.state!==Se.ERROR&&(this.state=e.fatal?Se.ERROR:Se.IDLE,u.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case a.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===Se.PARSING||this.state===Se.PARSED)){var o=this.mediaBuffer,l=this.media.currentTime;if(o&&R.isBuffered(o,l)&&R.isBuffered(o,l+.5)){var c=this.config;c.maxMaxBufferLength>=c.maxBufferLength&&(c.maxMaxBufferLength/=2,u.b.warn("audio:reduce max buffer length to "+c.maxMaxBufferLength+"s")),this.state=Se.IDLE}else u.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Se.BUFFER_FLUSHING,this.hls.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(u.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(s.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=Se.PARSED):(this.state=Se.IDLE,this.fragPrevious=null,this.tick())},Ee(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,u.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(ee),Te=function(){if("undefined"!==typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function i(e){return"string"===typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function o(n,o,a){var s=this,u=function(){if("undefined"!==typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",f=!1,d=n,h=o,p=a,v=null,m="",g=!0,y="auto",b="start",w=50,_="middle",E=50,S="middle";if(Object.defineProperty(s,"id",r({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},l,{get:function(){return f},set:function(e){f=!!e}})),Object.defineProperty(s,"startTime",r({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},l,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},l,{get:function(){return m},set:function(e){var n=function(e){return"string"===typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},l,{get:function(){return y},set:function(t){if("number"!==typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},l,{get:function(){return b},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},l,{get:function(){return w},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},l,{get:function(){return _},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},l,{get:function(){return S},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}return o.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},o}(),Ae=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function Oe(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Ae,this.regionList=[]}function xe(){this.values=Object.create(null)}function Me(e,t,n,i){var r=i?e.split(i):[e];for(var o in r)if("string"===typeof r[o]){var a=r[o].split(n);if(2===a.length)t(a[0],a[1])}}xe.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var Le=new Te(0,0,0),Ie="middle"===Le.align?"middle":"center";function De(e,t,n){var i=e;function r(){var t=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=r(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),o(),t.endTime=r(),o(),function(e,t){var i=new xe;Me(e,function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];i.integer(e,a),i.percent(e,a)&&i.set("snapToLines",!1),i.alt(e,a,["auto"]),2===o.length&&i.alt("lineAlign",o[1],["start",Ie,"end"]);break;case"position":o=t.split(","),i.percent(e,o[0]),2===o.length&&i.alt("positionAlign",o[1],["start",Ie,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",Ie,"end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===Le.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",Ie);var o=i.get("position","auto");"auto"===o&&50===Le.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function Ce(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Oe.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=Ce(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i=void 0;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(i=n()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:i=n(),t.state){case"HEADER":/:/.test(i)?Me(i,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new Te(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{De(i,t.cue,t.regionList)}catch(_c){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var a=-1!==i.indexOf("--\x3e");if(!i||a&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(_c){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(_c){throw _c}return this.onflush&&this.onflush(),this}};var Re=Oe;function Ne(e,t,n,i){for(var r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=window.VTTCue||window.TextTrackCue,c=0;c<i.rows.length;c++)if(a=!0,s=0,u="",!(r=i.rows[c]).isEmpty()){for(var f=0;f<r.chars.length;f++)r.chars[f].uchar.match(/\s/)&&a?s++:(u+=r.chars[f].uchar,a=!1);r.cueStartTime=t,t===n&&(n+=1e-4),o=new l(t,n,Ce(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=c+1:o.line=c>7?c-2:c+1,o.align="left",o.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(o)}}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var je={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Fe=function(e){var t=e;return je.hasOwnProperty(e)&&(t=je[e]),String.fromCharCode(t)},Be=15,ze=100,Ue={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ge={17:2,18:4,21:6,22:8,23:10,19:13,20:15},We={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},$e={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Ve=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],He={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},Ye=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},Ke=function(){function e(t,n,i,r,o){Pe(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=i||!1,this.background=r||"black",this.flash=o||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Ze=function(){function e(t,n,i,r,o,a){Pe(this,e),this.uchar=t||" ",this.penState=new Ke(n,i,r,o,a)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Xe=function(){function e(){Pe(this,e),this.chars=[];for(var t=0;t<ze;t++)this.chars.push(new Ze);this.pos=0,this.currPenState=new Ke}return e.prototype.equals=function(e){for(var t=!0,n=0;n<ze;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<ze;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<ze;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(He.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>ze&&(He.log("ERROR","Too large cursor position "+this.pos),this.pos=ze)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=Fe(e);this.pos>=ze?He.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t=void 0;for(t=e;t<ze;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,n=0;n<ze;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),qe=function(){function e(){Pe(this,e),this.rows=[];for(var t=0;t<Be;t++)this.rows.push(new Xe);this.currRow=Be-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<Be;e++)this.rows[e].clear();this.currRow=Be-1},e.prototype.equals=function(e){for(var t=!0,n=0;n<Be;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Be;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Be;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){He.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){He.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<Be;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var o=r.rows[i].cueStartTime;if(o&&o<He.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(r.rows[i+a])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);s.setCursor(e.indent),e.color=s.chars[l].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){He.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){He.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),He.log("INFO","Rolling up")}else He.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<Be;r++){var o=this.rows[r].getTextString();o&&(i=r+1,e?t.push("Row "+i+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),Qe=function(){function e(t,n){Pe(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new qe,this.nonDisplayedMemory=new qe,this.lastOutputScreen=new qe,this.currRollUpRow=this.displayedMemory.rows[Be-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Be-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,He.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";He.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(He.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){He.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){He.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){He.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){He.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){He.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){He.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){He.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){He.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){He.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){He.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){He.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(He.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,He.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){He.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}He.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],He.time},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Je=function(){function e(t,n,i){Pe(this,e),this.field=t||1,this.outputs=[n,i],this.channels=[new Qe(1,n),new Qe(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var n=void 0,i=void 0,r=void 0,o=!1;this.lastTime=e,He.setTime(e);for(var a=0;a<t.length;a+=2)if(i=127&t[a],r=127&t[a+1],0!==i||0!==r){if(He.log("DATA","["+Ye([t[a],t[a+1]])+"] -> ("+Ye([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n)if(o=this.parseChars(i,r))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(o);else He.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,He.log("WARNING","Couldn't parse cleaned data "+Ye([i,r])+" orig: "+Ye([t[a],t[a+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,He.log("DEBUG","Repeated command ("+Ye([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var i=this.channels[n-1];return 20===e||28===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&t>=32&&t<=47&&((n=17===e?1:2)!==this.currChNr?(He.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),He.log("DEBUG","MIDROW ("+Ye([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var n,i=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,i=t>=64&&t<=95?1===n?Ue[e]:We[e]:1===n?Ge[e]:$e[e];var r=this.interpretPAC(i,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.interpretPAC=function(e,t){var n=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1===(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},e.prototype.parseChars=function(e,t){var n=null,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&r<=19){var o=t;o=17===r?t+80:18===r?t+112:t+144,He.log("INFO","Special char '"+Fe(o)+"' in channel "+n),i=[o]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var a=Ye(i);He.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},e.prototype.parseBackgroundAttributes=function(e,t){var n,i=void 0,r=void 0;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(i={},16===e||24===e?(r=Math.floor((t-32)/2),i.background=Ve[r],t%2===1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),n=e<24?1:2,this.channels[n-1].setBkgData(i),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();var et=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timelineController=t,this.track=n,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.track)},e}(),tt=function(e,t,n){return e.substr(n||0,t.length)===t},nt=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},it={parse:function(e,t,n,i,r,o){var a=Object(ae.b)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",u=0,l=0,c=0,f=[],d=void 0,h=!0,p=new Re;p.oncue=function(e){var t=n[i],r=n.ccOffset;t&&t.new&&(void 0!==l?r=n.ccOffset=t.start:function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC];e.presentationOffset=n}(n,i,c)),c&&(r=c+n.ccOffset-n.presentationOffset),e.startTime+=r-l,e.endTime+=r-l,e.id=nt(e.startTime.toString())+nt(e.endTime.toString())+nt(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&f.push(e)},p.onparsingerror=function(e){d=e},p.onflush=function(){d&&o?o(d):r(f)},a.forEach(function(e){if(h){if(tt(e,"X-TIMESTAMP-MAP=")){h=!1,e.substr(16).split(",").forEach(function(e){tt(e,"LOCAL:")?s=e.substr(6):tt(e,"MPEGTS:")&&(u=parseInt(e.substr(7)))});try{u-=t=t<0?t+8589934592:t,l=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),r=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)?-1:(t+=1e3*n,t+=6e4*i,t+=36e5*r)}(s)/1e3,c=u/9e4,-1===l&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(_c){d=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(h=!1)}p.parse(e+"\n")}),p.flush()}};var rt=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHING,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_USERDATA,s.a.FRAG_DECRYPTED,s.a.MANIFEST_LOADING,s.a.MANIFEST_LOADED,s.a.FRAG_LOADED,s.a.LEVEL_SWITCHING,s.a.INIT_PTS_FOUND));if(i.hls=n,i.config=n.config,i.enabled=!0,i.Cues=n.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.config.enableCEA708Captions){var r=new et(i,1),o=new et(i,2);i.cea608Parser=new Je(0,r,o)}return i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addCues=function(e,t,n,i){for(var r,o,a,s,u=this.cueRanges,l=!1,c=u.length;c--;){var f=u[c],d=(r=f[0],o=f[1],a=t,s=n,Math.min(o,s)-Math.max(r,a));if(d>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],n),l=!0,d/(n-t)>.5))return}l||u.push([t,n]),this.Cues.newCue(this[e],t,n,i)},t.prototype.onInitPtsFound=function(e){var t=this;"undefined"===typeof this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(!0===i["textTrack"+e])return i}return null},t.prototype.createCaptionsTrack=function(e){var t="textTrack"+e;if(!this[t]){var n=this.getExistingTrack(e);if(n)this[t]=n,ue(this[t]),se(this[t],this.media);else{var i=this.createTextTrack("captions",this.config["captionsTextTrack"+e+"Label"],this.config["captionsTextTrack"+e+"LanguageCode"]);i&&(i[t]=!0,this[t]=i)}}},t.prototype.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},t.prototype.destroy=function(){f.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},t.prototype.onMediaDetaching=function(){ue(this.textTrack1),ue(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},t.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)ue(t[n])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){var r=void 0;if(i<n.length){var o=n[i];(function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)})(o,e)&&(r=o)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),e.default?r.mode=t.hls.subtitleDisplay?"showing":"hidden":r.mode="disabled",t.textTracks.push(r)})}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,n=e.payload;if("main"===t.type){var i=t.sn;if(i!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=i}else if("subtitle"===t.type)if(n.byteLength){if("undefined"===typeof this.initPTS)return void this.unparsedVttFrags.push(e);var o=t.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(t,n)}else this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype._parseVTTs=function(e,t){var n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var i=this.textTracks,r=this.hls;it.parse(t,this.initPTS,n,e.cc,function(t){var n=i[e.trackId];"disabled"!==n.mode?(t.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(i){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),r.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):r.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){u.b.log("Failed to parse VTT cue: "+t),r.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},t.prototype.onFragDecrypted=function(e){var t=e.payload,n=e.frag;if("subtitle"===n.type){if("undefined"===typeof this.initPTS)return void this.unparsedVttFrags.push(e);this._parseVTTs(n,t)}},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},t.prototype.extractCea608Data=function(e){for(var t=31&e[0],n=2,i=void 0,r=void 0,o=void 0,a=[],s=0;s<t;s++)i=e[n++],r=127&e[n++],o=127&e[n++],0===r&&0===o||0!==(4&i)&&0===(3&i)&&(a.push(r),a.push(o));return a},t}(f),ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function at(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}var st=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADING,s.a.MANIFEST_LOADED,s.a.SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=void 0,i.subtitleDisplay=!1,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=at(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},t.prototype.destroy=function(){f.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(s.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(u.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(u.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(e){if(!(e<-1||e>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var t=at(this.media.textTracks);if(-1!==this.trackId&&(t[this.trackId].mode="disabled"),this.trackId=e,u.b.log("switching to subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e){var n=this.tracks[e];e<t.length&&(t[e].mode=this.subtitleDisplay?"showing":"hidden");var i=n.details;void 0!==i&&!0!==i.live||(u.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))}}},ot(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(f),ut=n(5);var lt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},ct=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHED,s.a.ERROR,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.SUBTITLE_TRACKS_UPDATED,s.a.SUBTITLE_TRACK_SWITCH,s.a.SUBTITLE_TRACK_LOADED,s.a.SUBTITLE_FRAG_PROCESSED));return i.config=n.config,i.vttFragSNsProcessed={},i.vttFragQueues=void 0,i.currentlyProcessing=null,i.state=lt.STOPPED,i.currentTrackId=-1,i.decrypter=new ut.a(n.observer,n.config),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onHandlerDestroyed=function(){this.state=lt.STOPPED},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=e,this.hls.trigger(s.a.FRAG_LOADING,{frag:e}),this.state=lt.FRAG_LOADING}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.state=lt.IDLE,this.nextFrag()},t.prototype.onMediaAttached=function(){this.state=lt.IDLE},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.doTick=function(){var e=this;switch(this.state){case lt.IDLE:var t,n=this.tracks,i=this.currentTrackId,r=this.vttFragSNsProcessed[i],o=this.vttFragQueues[i],a=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!n)break;if(i<n.length&&(t=n[i].details),"undefined"===typeof t)break;t.fragments.forEach(function(t){(function(e){return r.indexOf(e.sn)>-1})(t)||t.sn===a||function(e){return o.some(function(t){return t.sn===e.sn})}(t)||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(u.b.log("Loading key for "+t.sn),e.state=lt.KEY_LOADING,e.hls.trigger(s.a.KEY_LOADING,{frag:t})):(t.trackId=i,o.push(t),e.nextFrag()))})}},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;u.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){(this.currentTrackId=e.id,-1!==this.currentTrackId)&&(void 0!==this.tracks[this.currentTrackId].details&&this.tick())},t.prototype.onSubtitleTrackLoaded=function(){this.tick()},t.prototype.onKeyLoaded=function(){this.state===lt.KEY_LOADING&&(this.state=lt.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,i=e.frag,r=this.hls;if(this.state===lt.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&null!=n&&null!=n.key&&"AES-128"===n.method){var o=void 0;try{o=performance.now()}catch(a){o=Date.now()}this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,function(e){var t=void 0;try{t=performance.now()}catch(a){t=Date.now()}r.trigger(s.a.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:o,tdecrypt:t}})})}},t}(ee),ft=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var dt="com.widevine.alpha",ht="com.microsoft.playready",pt=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,s.a.MEDIA_ATTACHED,s.a.MANIFEST_PARSED));return i._widevineLicenseUrl=n.config.widevineLicenseUrl,i._licenseXhrSetup=n.config.licenseXhrSetup,i._emeEnabled=n.config.emeEnabled,i._requestMediaKeySystemAccess=n.config.requestMediaKeySystemAccessFunc,i._mediaKeysList=[],i._media=null,i._hasSetMediaKeys=!1,i._isMediaEncrypted=!1,i._requestLicenseFailureCount=0,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getLicenseServerUrl=function(e){var t=void 0;switch(e){case dt:t=this._widevineLicenseUrl;break;default:t=null}return t||(u.b.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,n){var i=this,r=function(e,t,n){switch(e){case dt:return function(e,t,n){var i={videoCapabilities:[]};return t.forEach(function(e){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[i]}(0,n);default:throw Error("Unknown key-system: "+e)}}(e,0,n);r?(u.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,r).then(function(t){i._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){u.b.error('Failed to obtain key-system "'+e+'" access:',t)})):u.b.warn("Can not create config for key-system (maybe because platform is not supported):",e)},t.prototype._onMediaKeySystemAccessObtained=function(e,t){var n=this;u.b.log('Access for key-system "'+e+'" obtained');var i={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i),t.createMediaKeys().then(function(t){i.mediaKeys=t,u.b.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()}).catch(function(e){u.b.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(e){var t=this;u.b.log("New key-system session "+e.sessionId),e.addEventListener("message",function(n){t._onKeySessionMessage(e,n.message)},!1)},t.prototype._onKeySessionMessage=function(e,t){u.b.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){u.b.log("Received license data, updating key-session"),e.update(t)})},t.prototype._onMediaEncrypted=function(e,t){u.b.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_KEYS,fatal:!0});u.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return u.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)u.b.warn("Key-Session already initialized but requested again");else{var n=t.mediaKeysSession;n||(u.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var i=this._mediaEncryptionInitDataType,r=this._mediaEncryptionInitData;u.b.log('Generating key-session request for "'+i+'" init data type'),t.mediaKeysSessionInitialized=!0,n.generateRequest(i,r).then(function(){u.b.debug("Key-session generation succeeded")}).catch(function(t){u.b.error("Error generating key-session request:",t),e.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},t.prototype._createLicenseXhr=function(e,t,n){var i=new XMLHttpRequest,r=this._licenseXhrSetup;try{if(r)try{r(i,e)}catch(_c){i.open("POST",e,!0),r(i,e)}i.readyState||i.open("POST",e,!0)}catch(_c){return u.b.error("Error setting up key-system license XHR",_c),void this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,n),i},t.prototype._onLicenseRequestReadyStageChange=function(e,t,n,i){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,u.b.log("License request succeeded"),i(e.response);else{if(u.b.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var r=3-this._requestLicenseFailureCount+1;return u.b.warn("Retrying license request, "+r+" attempts left"),void this._requestLicense(n,i)}this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var n=void 0;return e.mediaKeySystemDomain===ht?u.b.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===dt?n=t:u.b.error("Unsupported key-system:",e.mediaKeySystemDomain),n},t.prototype._requestLicense=function(e,t){u.b.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return u.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:a.b.KEY_SYSTEM_ERROR,details:a.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(i,e,t);u.b.log("Sending license request to URL: "+i),r.send(this._generateLicenseRequestChallenge(n,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var n=e.media;this._media=n,n.addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),n=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(dt,t,n)}},ft(t,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),t}(f),vt={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:be,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:he,bufferController:ve,capLevelController:ge,fpsController:ye,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null};vt.subtitleStreamController=ct,vt.subtitleTrackController=st,vt.timelineController=rt,vt.cueHandler=i,vt.enableCEA708Captions=!0,vt.enableWebVTT=!0,vt.captionsTextTrack1Label="English",vt.captionsTextTrack1LanguageCode="en",vt.captionsTextTrack2Label="Spanish",vt.captionsTextTrack2LanguageCode="es",vt.audioStreamController=ke,vt.audioTrackController=_e,vt.emeController=pt;var mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(12);var gt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in n||(n[r]=i[r]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(u.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var o=this.observer=new j.a;o.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit.apply(o,[e,e].concat(n))},o.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.removeListener.apply(o,[e].concat(n))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var a=this.abrController=new n.abrController(this),s=new n.bufferController(this),l=new n.capLevelController(this),c=new n.fpsController(this),f=new L(this),d=new I(this),h=new D(this),p=new le(this),v=this.levelController=new oe(this),m=new Y(this),g=[v,this.streamController=new ie(this,m)],y=n.audioStreamController;y&&g.push(new y(this,m)),this.networkControllers=g;var b=[f,d,h,a,s,l,c,p,m];if(y=n.audioTrackController){var w=new y(this);this.audioTrackController=w,b.push(w)}if(y=n.subtitleTrackController){var _=new y(this);this.subtitleTrackController=_,b.push(_)}if(y=n.emeController){var E=new y(this);this.emeController=E,b.push(E)}[n.subtitleStreamController,n.timelineController].forEach(function(e){e&&b.push(new e(t))}),this.coreComponents=b}return e.isSupported=function(){return function(){var e=z(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!n&&!!i}()},mt(e,null,[{key:"version",get:function(){return"0.9.1"}},{key:"Events",get:function(){return s.a}},{key:"ErrorTypes",get:function(){return a.b}},{key:"ErrorDetails",get:function(){return a.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:vt},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){u.b.log("destroy"),this.trigger(s.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){u.b.log("attachMedia"),this.media=e,this.trigger(s.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){u.b.log("detachMedia"),this.trigger(s.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=o.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),u.b.log("loadSource:"+e),this.url=e,this.trigger(s.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;u.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},e.prototype.stopLoad=function(){u.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){u.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){u.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},mt(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){u.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){u.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){u.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){u.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){u.b.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){u.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++){if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),e}();t.default=gt},function(e,t,n){function i(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var i=n(n.s=ENTRY_MODULE);return i.default||i}var r="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+r+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,i){var s={};s[i]=[];var u=t.toString(),l=u.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var c,f=l[1],d=new RegExp("(\\\\n|\\W)"+a(f)+o,"g");c=d.exec(u);)"dll-reference"!==c[3]&&s[i].push(c[3]);for(d=new RegExp("\\("+a(f)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+o,"g");c=d.exec(u);)e[c[2]]||(s[i].push(c[1]),e[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);return s}function u(e){return Object.keys(e).reduce(function(t,n){return t||e[n].length>0},!1)}e.exports=function(e,t){t=t||{};var r={main:n.m},o=t.all?{main:Object.keys(r)}:function(e,t){for(var n={main:[t]},i={main:[]},r={main:{}};u(n);)for(var o=Object.keys(n),a=0;a<o.length;a++){var l=o[a],c=n[l].pop();if(r[l]=r[l]||{},!r[l][c]&&e[l][c]){r[l][c]=!0,i[l]=i[l]||[],i[l].push(c);for(var f=s(e,e[l][c],l),d=Object.keys(f),h=0;h<d.length;h++)n[d[h]]=n[d[h]]||[],n[d[h]]=n[d[h]].concat(f[d[h]])}}return i}(r,e),a="";Object.keys(o).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;o[e][t];)t++;o[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map(function(t){return JSON.stringify(t)+": "+r[e][t].toString()}).join(",")+"});\n"}),a=a+"("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map(function(e){return JSON.stringify(e)+": "+r.main[e].toString()}).join(",")+"})(self);";var l=new window.Blob([a],{type:"text/javascript"});if(t.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),f=new window.Worker(c);return f.objectURL=c,f}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=n(1),o=n(0),a=n(6),s=n.n(a);t.default=function(e){var t=new s.a;t.trigger=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(i))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(r){var a=r.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new i.a(t,a.typeSupported,s,a.vendor);try{Object(o.a)(!0===s.debug)}catch(u){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),t.on(r.a.FRAG_DECRYPTED,n),t.on(r.a.FRAG_PARSING_INIT_SEGMENT,n),t.on(r.a.FRAG_PARSED,n),t.on(r.a.ERROR,n),t.on(r.a.FRAG_PARSING_METADATA,n),t.on(r.a.FRAG_PARSING_USERDATA,n),t.on(r.a.INIT_PTS_FOUND,n),t.on(r.a.FRAG_PARSING_DATA,function(t,n){var i=[],r={event:t,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),e.postMessage(r,i)})}},function(e,t){String.prototype.endsWith||function(){var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(i){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var i=n.length,r=String(e),o=r.length,a=i;if(arguments.length>1){var s=arguments[1];void 0!==s&&(a=s?Number(s):0)!=a&&(a=0)}var u=Math.min(Math.max(a,0),i)-o;if(u<0)return!1;for(var l=-1;++l<o;)if(n.charCodeAt(u+l)!=r.charCodeAt(l))return!1;return!0};e?e(String.prototype,"endsWith",{value:n,configurable:!0,writable:!0}):String.prototype.endsWith=n}()}]).default},e.exports=n()})),mc={debug:!1,enableWorker:!0},gc="chimee-kernel-hls",yc=(function(e,t,n,i,r){var o={};Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((dc=function(e){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};G(this,t);var r=Lt(this,(t.__proto__||U(t)).call(this));if(r.version="1.3.2",!Sn(e))throw new Error("video element passed in "+gc+" must be a HTMLVideoElement, but not "+("undefined"===typeof e?"undefined":Mt(e)));if(!hn(n))throw new Error("config of "+gc+" must be an Object but not "+("undefined"===typeof n?"undefined":Mt(n)));return r.video=e,r.config=n,r.customConfig=Yn({},mc,i),r.hlsKernel=new vc(r.customConfig),r.bindEvents(),r.attachMedia(),r}return Bt(t,pr),$t(t,null,[{key:"isSupport",value:function(){return vc.isSupported()}}]),$t(t,[{key:"bindEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.hlsKernel;t&&t[e?"off":"on"](vc.Events.ERROR,this.hlsErrorHandler)}},{key:"load",value:function(){return this.hlsKernel.loadSource(this.config.src)}},{key:"startLoad",value:function(){return this.hlsKernel.startLoad()}},{key:"stopLoad",value:function(){return this.hlsKernel.stopLoad()}},{key:"attachMedia",value:function(){return this.hlsKernel.attachMedia(this.video)}},{key:"play",value:function(){return this.video.play()}},{key:"destroy",value:function(){return this.bindEvents(!0),this.hlsKernel.destroy()}},{key:"seek",value:function(e){this.video.currentTime=e}},{key:"pause",value:function(){return this.video.pause()}},{key:"refresh",value:function(){return this.hlsKernel.stopLoad(),this.hlsKernel.loadSource(this.config.src)}},{key:"hlsErrorHandler",value:function(e,t){this.emit("error",t),this.emit(e,t),On.error(gc+(e?" "+e:""),t.details)}}]),t}()).prototype,"hlsErrorHandler",[$o],Yr(dc.prototype,"hlsErrorHandler"),dc.prototype),dc),bc=n(i(function(e,t){var n;"undefined"!==typeof self&&self,n=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){!function(e){function t(e){return e&&e.__esModule?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var i=Math.ceil,r=Math.floor,o=function(e){return isNaN(e=+e)?0:(e>0?r:i)(e)},a=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},s=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),u=n(function(e){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)}),l=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},c=function(e){return"object"===typeof e?null!==e:"function"===typeof e},f=function(e){if(!c(e))throw TypeError(e+" is not an object!");return e},d=function(e){try{return!!e()}catch(_c){return!0}},h=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),p=s.document,v=c(p)&&c(p.createElement),m=function(e){return v?p.createElement(e):{}},g=!h&&!d(function(){return 7!=Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a}),y=function(e,t){if(!c(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!c(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!c(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!c(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},b=Object.defineProperty,w={f:h?Object.defineProperty:function(e,t,n){if(f(e),t=y(t,!0),f(n),g)try{return b(e,t,n)}catch(_c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},_=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},E=h?function(e,t,n){return w.f(e,t,_(1,n))}:function(e,t,n){return e[t]=n,e},S=function e(t,n,i){var r,o,a,c=t&e.F,f=t&e.G,d=t&e.S,h=t&e.P,p=t&e.B,v=t&e.W,m=f?u:u[n]||(u[n]={}),g=m.prototype,y=f?s:d?s[n]:(s[n]||{}).prototype;for(r in f&&(i=n),i)(o=!c&&y&&void 0!==y[r])&&r in m||(a=o?y[r]:i[r],m[r]=f&&"function"!=typeof y[r]?i[r]:p&&o?l(a,s):v&&y[r]==a?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(a):h&&"function"==typeof a?l(Function.call,a):a,h&&((m.virtual||(m.virtual={}))[r]=a,t&e.R&&g&&!g[r]&&E(g,r,a)))};S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;var k,T=S,A=E,O={}.hasOwnProperty,x=function(e,t){return O.call(e,t)},M={}.toString,L=function(e){return M.call(e).slice(8,-1)},I=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==L(e)?e.split(""):Object(e)},D=function(e){return I(a(e))},C=Math.min,R=Math.max,N=Math.min,P=s["__core-js_shared__"]||(s["__core-js_shared__"]={}),j=function(e){return P[e]||(P[e]={})},F=0,B=Math.random(),z=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++F+B).toString(36))},U=j("keys"),G=function(e){return U[e]||(U[e]=z(e))},W=(k=!1,function(e,t,n){var i,r,a=D(e),s=(r=a.length)>0?C(o(r),9007199254740991):0,u=function(e,t){return(e=o(e))<0?R(e+t,0):N(e,t)}(n,s);if(k&&t!=t){for(;s>u;)if((i=a[u++])!=i)return!0}else for(;s>u;u++)if((k||u in a)&&a[u]===t)return k||u||0;return!k&&-1}),$=G("IE_PROTO"),V=function(e,t){var n,i=D(e),r=0,o=[];for(n in i)n!=$&&x(i,n)&&o.push(n);for(;t.length>r;)x(i,n=t[r++])&&(~W(o,n)||o.push(n));return o},H="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Y=Object.keys||function(e){return V(e,H)},K=h?Object.defineProperties:function(e,t){f(e);for(var n,i=Y(t),r=i.length,o=0;r>o;)w.f(e,n=i[o++],t[n]);return e},Z=s.document&&document.documentElement,X=G("IE_PROTO"),q=function(){},Q=function(){var e,t=m("iframe"),n=H.length;for(t.style.display="none",Z.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Q=e.F;n--;)delete Q.prototype[H[n]];return Q()},J=Object.create||function(e,t){var n;return null!==e?(q.prototype=f(e),n=new q,q.prototype=null,n[X]=e):n=Q(),void 0===t?n:K(n,t)},ee=n(function(e){var t=j("wks"),n=s.Symbol,i="function"==typeof n,r=e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:z)("Symbol."+e))};r.store=t}),te=w.f,ne=ee("toStringTag"),ie=function(e,t,n){e&&!x(e=n?e:e.prototype,ne)&&te(e,ne,{configurable:!0,value:t})},re={};E(re,ee("iterator"),function(){return this});var oe,ae=function(e,t,n){e.prototype=J(re,{next:_(1,n)}),ie(e,t+" Iterator")},se=function(e){return Object(a(e))},ue=G("IE_PROTO"),le=Object.prototype,ce=Object.getPrototypeOf||function(e){return e=se(e),x(e,ue)?e[ue]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?le:null},fe=ee("iterator"),de=!([].keys&&"next"in[].keys()),he=function(e,t,n,i,r,o,a){ae(n,t,i);var s,u,l,c=function(e){if(!de&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",d="values"==r,h=!1,p=e.prototype,v=p[fe]||p["@@iterator"]||r&&p[r],m=v||c(r),g=r?d?c("entries"):m:void 0,y="Array"==t&&p.entries||v;if(y&&(l=ce(y.call(new e)))!==Object.prototype&&ie(l,f,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(de||h||!p[fe])&&E(p,fe,m),r)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:g},a)for(u in s)u in p||A(p,u,s[u]);else T(T.P+T.F*(de||h),t,s);return s},pe=(oe=!0,function(e,t){var n,i,r=String(a(e)),s=o(t),u=r.length;return s<0||s>=u?oe?"":void 0:(n=r.charCodeAt(s))<55296||n>56319||s+1===u||(i=r.charCodeAt(s+1))<56320||i>57343?oe?r.charAt(s):n:oe?r.slice(s,s+2):i-56320+(n-55296<<10)+65536});he(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=pe(t,n),this._i+=e.length,{value:e,done:!1})});for(var ve=function(e,t){return{value:t,done:!!e}},me=(he(Array,"Array",function(e,t){this._t=D(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,ve(1)):ve(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),ee("toStringTag")),ge=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],ye=0;ye<5;ye++){var be=ge[ye],we=s[be],_e=we&&we.prototype;_e&&!_e[me]&&E(_e,me,be)}var Ee={f:ee},Se=Ee.f("iterator"),ke=n(function(e){e.exports={default:Se,__esModule:!0}}),Te=n(function(e){var t=z("meta"),n=w.f,i=0,r=Object.isExtensible||function(){return!0},o=!d(function(){return r(Object.preventExtensions({}))}),a=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!c(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!x(e,t)){if(!r(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!x(e,t)){if(!r(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&s.NEED&&r(e)&&!x(e,t)&&a(e),e}}}),Ae=w.f,Oe=function(e){var t=u.Symbol||(u.Symbol={});"_"==e.charAt(0)||e in t||Ae(t,e,{value:Ee.f(e)})},xe={f:Object.getOwnPropertySymbols},Me={f:{}.propertyIsEnumerable},Le=Array.isArray||function(e){return"Array"==L(e)},Ie=H.concat("length","prototype"),De={f:Object.getOwnPropertyNames||function(e){return V(e,Ie)}},Ce=De.f,Re={}.toString,Ne="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Pe={f:function(e){return Ne&&"[object Window]"==Re.call(e)?function(e){try{return Ce(e)}catch(_c){return Ne.slice()}}(e):Ce(D(e))}},je=Object.getOwnPropertyDescriptor,Fe={f:h?je:function(e,t){if(e=D(e),t=y(t,!0),g)try{return je(e,t)}catch(_c){}if(x(e,t))return _(!Me.f.call(e,t),e[t])}},Be=Te.KEY,ze=Fe.f,Ue=w.f,Ge=Pe.f,We=s.Symbol,$e=s.JSON,Ve=$e&&$e.stringify,He=ee("_hidden"),Ye=ee("toPrimitive"),Ke={}.propertyIsEnumerable,Ze=j("symbol-registry"),Xe=j("symbols"),qe=j("op-symbols"),Qe=Object.prototype,Je="function"==typeof We,et=s.QObject,tt=!et||!et.prototype||!et.prototype.findChild,nt=h&&d(function(){return 7!=J(Ue({},"a",{get:function(){return Ue(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=ze(Qe,t);i&&delete Qe[t],Ue(e,t,n),i&&e!==Qe&&Ue(Qe,t,i)}:Ue,it=function(e){var t=Xe[e]=J(We.prototype);return t._k=e,t},rt=Je&&"symbol"==typeof We.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof We},ot=function(e,t,n){return e===Qe&&ot(qe,t,n),f(e),t=y(t,!0),f(n),x(Xe,t)?(n.enumerable?(x(e,He)&&e[He][t]&&(e[He][t]=!1),n=J(n,{enumerable:_(0,!1)})):(x(e,He)||Ue(e,He,_(1,{})),e[He][t]=!0),nt(e,t,n)):Ue(e,t,n)},at=function(e,t){f(e);for(var n,i=function(e){var t=Y(e),n=xe.f;if(n)for(var i,r=n(e),o=Me.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}(t=D(t)),r=0,o=i.length;o>r;)ot(e,n=i[r++],t[n]);return e},st=function(e){var t=Ke.call(this,e=y(e,!0));return!(this===Qe&&x(Xe,e)&&!x(qe,e))&&(!(t||!x(this,e)||!x(Xe,e)||x(this,He)&&this[He][e])||t)},ut=function(e,t){if(e=D(e),t=y(t,!0),e!==Qe||!x(Xe,t)||x(qe,t)){var n=ze(e,t);return!n||!x(Xe,t)||x(e,He)&&e[He][t]||(n.enumerable=!0),n}},lt=function(e){for(var t,n=Ge(D(e)),i=[],r=0;n.length>r;)x(Xe,t=n[r++])||t==He||t==Be||i.push(t);return i},ct=function(e){for(var t,n=e===Qe,i=Ge(n?qe:D(e)),r=[],o=0;i.length>o;)!x(Xe,t=i[o++])||n&&!x(Qe,t)||r.push(Xe[t]);return r};Je||(A((We=function(){if(this instanceof We)throw TypeError("Symbol is not a constructor!");var e=z(arguments.length>0?arguments[0]:void 0);return h&&tt&&nt(Qe,e,{configurable:!0,set:function t(n){this===Qe&&t.call(qe,n),x(this,He)&&x(this[He],e)&&(this[He][e]=!1),nt(this,e,_(1,n))}}),it(e)}).prototype,"toString",function(){return this._k}),Fe.f=ut,w.f=ot,De.f=Pe.f=lt,Me.f=st,xe.f=ct,Ee.f=function(e){return it(ee(e))}),T(T.G+T.W+T.F*!Je,{Symbol:We});for(var ft="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),dt=0;ft.length>dt;)ee(ft[dt++]);for(var ft=Y(ee.store),dt=0;ft.length>dt;)Oe(ft[dt++]);T(T.S+T.F*!Je,"Symbol",{for:function(e){return x(Ze,e+="")?Ze[e]:Ze[e]=We(e)},keyFor:function(e){if(rt(e))return function(e,t){for(var n,i=D(e),r=Y(i),o=r.length,a=0;o>a;)if(i[n=r[a++]]===t)return n}(Ze,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){tt=!0},useSimple:function(){tt=!1}}),T(T.S+T.F*!Je,"Object",{create:function(e,t){return void 0===t?J(e):at(J(e),t)},defineProperty:ot,defineProperties:at,getOwnPropertyDescriptor:ut,getOwnPropertyNames:lt,getOwnPropertySymbols:ct}),$e&&T(T.S+T.F*(!Je||d(function(){var e=We();return"[null]"!=Ve([e])||"{}"!=Ve({a:e})||"{}"!=Ve(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!rt(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(t=i[1])&&(n=t),!n&&Le(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!rt(t))return t}),i[1]=t,Ve.apply($e,i)}}}),We.prototype[Ye]||E(We.prototype,Ye,We.prototype.valueOf),ie(We,"Symbol"),ie(Math,"Math",!0),ie(s.JSON,"JSON",!0),Oe("asyncIterator"),Oe("observable");var ht=u.Symbol,pt=n(function(e){e.exports={default:ht,__esModule:!0}}),vt=t(n(function(e,t){t.__esModule=!0;var n=o(ke),i=o(pt),r="function"===typeof i.default&&"symbol"===typeof n.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===r(n.default)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)}})),mt=t(n(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}));T(T.S+T.F*!h,"Object",{defineProperty:w.f});var gt=u.Object,yt=function(e,t,n){return gt.defineProperty(e,t,n)},bt=n(function(e){e.exports={default:yt,__esModule:!0}}),wt=t(n(function(e,t){t.__esModule=!0;var n,i=(n=bt)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()})),_t=Object.assign,Et=!_t||d(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=_t({},e)[n]||Object.keys(_t({},t)).join("")!=i})?function(e,t){for(var n=se(e),i=arguments.length,r=1,o=xe.f,a=Me.f;i>r;)for(var s,u=I(arguments[r++]),l=o?Y(u).concat(o(u)):Y(u),c=l.length,f=0;c>f;)a.call(u,s=l[f++])&&(n[s]=u[s]);return n}:_t;T(T.S+T.F,"Object",{assign:Et});var St=u.Object.assign,kt=t(n(function(e){e.exports={default:St,__esModule:!0}}));T(T.S,"Object",{create:J});var Tt=u.Object,At=function(e,t){return Tt.create(e,t)},Ot=t(n(function(e){e.exports={default:At,__esModule:!0}}));!function(e,t){var n=(u.Object||{})[e]||Object[e],i={};i[e]=t(n),T(T.S+T.F*d(function(){n(1)}),"Object",i)}("keys",function(){return function(e){return Y(se(e))}});var xt=u.Object.keys,Mt=(n(function(e){e.exports={default:xt,__esModule:!0}}),Math.floor);T(T.S,"Number",{isInteger:function(e){return!c(e)&&isFinite(e)&&Mt(e)===e}});var Lt=u.Number.isInteger,It=(n(function(e){e.exports={default:Lt,__esModule:!0}}),"\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"),Dt="["+It+"]",Ct=RegExp("^"+Dt+Dt+"*"),Rt=RegExp(Dt+Dt+"*$"),Nt=function(e,t,n){var i={},r=d(function(){return!!It[e]()||"\u200b\x85"!="\u200b\x85"[e]()}),o=i[e]=r?t(Pt):It[e];n&&(i[n]=o),T(T.P+T.F*r,"String",i)},Pt=Nt.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(Ct,"")),2&t&&(e=e.replace(Rt,"")),e},jt=Nt,Ft=s.parseFloat,Bt=jt.trim,zt=1/Ft(It+"-0")!==-1/0?function(e){var t=Bt(String(e),3),n=Ft(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Ft;T(T.S+T.F*(Number.parseFloat!=zt),"Number",{parseFloat:zt});var Ut=parseFloat;function Gt(e){return"function"===typeof e}function Wt(e){return Object(e)===e&&"[object Object]"===String(e)&&!Gt(e)&&(t=e,!Array.isArray(t));var t}n(function(e){e.exports={default:Ut,__esModule:!0}});var $t=Ot(null);function Vt(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++$t.count);var i=n+"_"+t,r=$t[i];return r||(r=$t[i]=[]),r}function Ht(e,t,n){var i=Ot(null);i.type=t,i.target=e,n&&kt(i,Wt(n)?n:{data:n}),Vt(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[i])})}function Yt(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];Gt(i)&&!r&&(r=i,i=void 0);var o=[n,void 0,i];i&&!r&&(r=function(){Kt(e,t,n,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(e,o)}),r&&(o[1]=r),Vt(e,t).push(o)}function Kt(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Vt(e,t);if(n||i){var o=-1,a=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,a=e[1],!0}),-1!==o&&r.splice(o,1),a}r.length=0}$t.count=0;var Zt=function(){function e(t,n){var i=this;if(mt(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==("undefined"===typeof t?"undefined":vt(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}return wt(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Yt(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Kt(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return Ht(this.__target,e,{data:t}),this}}]),e}();e.emitEventCache=Ht,e.addEventCache=Yt,e.removeEventCache=Kt,e.CustEvent=Zt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.ERRORNO={NET_ERROR:100,CODEC_ERROR:101,CANNOT_SEEK:102,ENDOFSTREAM_ERROR:103,MEDIASOURCE_ERROR:104,SOURCEBUFFER_ERROR:105,SBABORT_ERROR:106,APPENDBUFFER_ERROR:107}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.PLAYER_EVENTS={LOADER_OPEN:"loader-open",LOADER_CHUNK_ARRIVAL:"loader-chunk-arrival",MEDIA_DEMUX_FLV:"media-demux-flv",MEDIA_SEGMENT_INIT:"media-segment-init",MEDIA_INFO:"media-info",MEDIA_SEGMENT:"media-segment",PLAYING:"playing",CANPLAY:"canplay",TIMEUPDATE:"timeupdate"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t}},function(e,t,n){e.exports=function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=e(t(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}})),i=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),r=t(function(e){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)}),o=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},a=function(e){return"object"===typeof e?null!==e:"function"===typeof e},s=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e},u=function(e){try{return!!e()}catch(_c){return!0}},l=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=i.document,f=a(c)&&a(c.createElement),d=function(e){return f?c.createElement(e):{}},h=!l&&!u(function(){return 7!=Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a}),p=function(e,t){if(!a(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!a(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},v=Object.defineProperty,m={f:l?Object.defineProperty:function(e,t,n){if(s(e),t=p(t,!0),s(n),h)try{return v(e,t,n)}catch(_c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},g=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},y=l?function(e,t,n){return m.f(e,t,g(1,n))}:function(e,t,n){return e[t]=n,e},b=function e(t,n,a){var s,u,l,c=t&e.F,f=t&e.G,d=t&e.S,h=t&e.P,p=t&e.B,v=t&e.W,m=f?r:r[n]||(r[n]={}),g=m.prototype,b=f?i:d?i[n]:(i[n]||{}).prototype;for(s in f&&(a=n),a)(u=!c&&b&&void 0!==b[s])&&s in m||(l=u?b[s]:a[s],m[s]=f&&"function"!=typeof b[s]?a[s]:p&&u?o(l,i):v&&b[s]==l?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):h&&"function"==typeof l?o(Function.call,l):l,h&&((m.virtual||(m.virtual={}))[s]=l,t&e.R&&g&&!g[s]&&y(g,s,l)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128;var w=b;w(w.S+w.F*!l,"Object",{defineProperty:m.f});var _,E=r.Object,S=function(e,t,n){return E.defineProperty(e,t,n)},k=t(function(e){e.exports={default:S,__esModule:!0}}),T=e(t(function(e,t){t.__esModule=!0;var n,i=(n=k)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()})),A=Math.ceil,O=Math.floor,x=function(e){return isNaN(e=+e)?0:(e>0?O:A)(e)},M=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},L=y,I={}.hasOwnProperty,D=function(e,t){return I.call(e,t)},C={}.toString,R=function(e){return C.call(e).slice(8,-1)},N=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==R(e)?e.split(""):Object(e)},P=function(e){return N(M(e))},j=Math.min,F=Math.max,B=Math.min,z=i["__core-js_shared__"]||(i["__core-js_shared__"]={}),U=function(e){return z[e]||(z[e]={})},G=0,W=Math.random(),$=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++G+W).toString(36))},V=U("keys"),H=function(e){return V[e]||(V[e]=$(e))},Y=(_=!1,function(e,t,n){var i,r,o=P(e),a=(r=o.length)>0?j(x(r),9007199254740991):0,s=function(e,t){return(e=x(e))<0?F(e+t,0):B(e,t)}(n,a);if(_&&t!=t){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((_||s in o)&&o[s]===t)return _||s||0;return!_&&-1}),K=H("IE_PROTO"),Z=function(e,t){var n,i=P(e),r=0,o=[];for(n in i)n!=K&&D(i,n)&&o.push(n);for(;t.length>r;)D(i,n=t[r++])&&(~Y(o,n)||o.push(n));return o},X="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),q=Object.keys||function(e){return Z(e,X)},Q=l?Object.defineProperties:function(e,t){s(e);for(var n,i=q(t),r=i.length,o=0;r>o;)m.f(e,n=i[o++],t[n]);return e},J=i.document&&document.documentElement,ee=H("IE_PROTO"),te=function(){},ne=function(){var e,t=d("iframe"),n=X.length;for(t.style.display="none",J.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),ne=e.F;n--;)delete ne.prototype[X[n]];return ne()},ie=Object.create||function(e,t){var n;return null!==e?(te.prototype=s(e),n=new te,te.prototype=null,n[ee]=e):n=ne(),void 0===t?n:Q(n,t)},re=t(function(e){var t=U("wks"),n=i.Symbol,r="function"==typeof n,o=e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:$)("Symbol."+e))};o.store=t}),oe=m.f,ae=re("toStringTag"),se=function(e,t,n){e&&!D(e=n?e:e.prototype,ae)&&oe(e,ae,{configurable:!0,value:t})},ue={};y(ue,re("iterator"),function(){return this});var le,ce=function(e,t,n){e.prototype=ie(ue,{next:g(1,n)}),se(e,t+" Iterator")},fe=function(e){return Object(M(e))},de=H("IE_PROTO"),he=Object.prototype,pe=Object.getPrototypeOf||function(e){return e=fe(e),D(e,de)?e[de]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?he:null},ve=re("iterator"),me=!([].keys&&"next"in[].keys()),ge=function(e,t,n,i,r,o,a){ce(n,t,i);var s,u,l,c=function(e){if(!me&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",d="values"==r,h=!1,p=e.prototype,v=p[ve]||p["@@iterator"]||r&&p[r],m=v||c(r),g=r?d?c("entries"):m:void 0,b="Array"==t&&p.entries||v;if(b&&(l=pe(b.call(new e)))!==Object.prototype&&se(l,f,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(me||h||!p[ve])&&y(p,ve,m),r)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:g},a)for(u in s)u in p||L(p,u,s[u]);else w(w.P+w.F*(me||h),t,s);return s},ye=(le=!0,function(e,t){var n,i,r=String(M(e)),o=x(t),a=r.length;return o<0||o>=a?le?"":void 0:(n=r.charCodeAt(o))<55296||n>56319||o+1===a||(i=r.charCodeAt(o+1))<56320||i>57343?le?r.charAt(o):n:le?r.slice(o,o+2):i-56320+(n-55296<<10)+65536});ge(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=ye(t,n),this._i+=e.length,{value:e,done:!1})});for(var be=function(e,t){return{value:t,done:!!e}},we=(ge(Array,"Array",function(e,t){this._t=P(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,be(1)):be(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),re("toStringTag")),_e=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],Ee=0;Ee<5;Ee++){var Se=_e[Ee],ke=i[Se],Te=ke&&ke.prototype;Te&&!Te[we]&&y(Te,we,Se)}var Ae={f:re},Oe=Ae.f("iterator"),xe=t(function(e){e.exports={default:Oe,__esModule:!0}}),Me=t(function(e){var t=$("meta"),n=m.f,i=0,r=Object.isExtensible||function(){return!0},o=!u(function(){return r(Object.preventExtensions({}))}),s=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},l=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!D(e,t)){if(!r(e))return"F";if(!n)return"E";s(e)}return e[t].i},getWeak:function(e,n){if(!D(e,t)){if(!r(e))return!0;if(!n)return!1;s(e)}return e[t].w},onFreeze:function(e){return o&&l.NEED&&r(e)&&!D(e,t)&&s(e),e}}}),Le=m.f,Ie=function(e){var t=r.Symbol||(r.Symbol={});"_"==e.charAt(0)||e in t||Le(t,e,{value:Ae.f(e)})},De={f:Object.getOwnPropertySymbols},Ce={f:{}.propertyIsEnumerable},Re=Array.isArray||function(e){return"Array"==R(e)},Ne=X.concat("length","prototype"),Pe={f:Object.getOwnPropertyNames||function(e){return Z(e,Ne)}},je=Pe.f,Fe={}.toString,Be="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ze={f:function(e){return Be&&"[object Window]"==Fe.call(e)?function(e){try{return je(e)}catch(_c){return Be.slice()}}(e):je(P(e))}},Ue=Object.getOwnPropertyDescriptor,Ge={f:l?Ue:function(e,t){if(e=P(e),t=p(t,!0),h)try{return Ue(e,t)}catch(_c){}if(D(e,t))return g(!Ce.f.call(e,t),e[t])}},We=Me.KEY,$e=Ge.f,Ve=m.f,He=ze.f,Ye=i.Symbol,Ke=i.JSON,Ze=Ke&&Ke.stringify,Xe=re("_hidden"),qe=re("toPrimitive"),Qe={}.propertyIsEnumerable,Je=U("symbol-registry"),et=U("symbols"),tt=U("op-symbols"),nt=Object.prototype,it="function"==typeof Ye,rt=i.QObject,ot=!rt||!rt.prototype||!rt.prototype.findChild,at=l&&u(function(){return 7!=ie(Ve({},"a",{get:function(){return Ve(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=$e(nt,t);i&&delete nt[t],Ve(e,t,n),i&&e!==nt&&Ve(nt,t,i)}:Ve,st=function(e){var t=et[e]=ie(Ye.prototype);return t._k=e,t},ut=it&&"symbol"==typeof Ye.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Ye},lt=function(e,t,n){return e===nt&&lt(tt,t,n),s(e),t=p(t,!0),s(n),D(et,t)?(n.enumerable?(D(e,Xe)&&e[Xe][t]&&(e[Xe][t]=!1),n=ie(n,{enumerable:g(0,!1)})):(D(e,Xe)||Ve(e,Xe,g(1,{})),e[Xe][t]=!0),at(e,t,n)):Ve(e,t,n)},ct=function(e,t){s(e);for(var n,i=function(e){var t=q(e),n=De.f;if(n)for(var i,r=n(e),o=Ce.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}(t=P(t)),r=0,o=i.length;o>r;)lt(e,n=i[r++],t[n]);return e},ft=function(e){var t=Qe.call(this,e=p(e,!0));return!(this===nt&&D(et,e)&&!D(tt,e))&&(!(t||!D(this,e)||!D(et,e)||D(this,Xe)&&this[Xe][e])||t)},dt=function(e,t){if(e=P(e),t=p(t,!0),e!==nt||!D(et,t)||D(tt,t)){var n=$e(e,t);return!n||!D(et,t)||D(e,Xe)&&e[Xe][t]||(n.enumerable=!0),n}},ht=function(e){for(var t,n=He(P(e)),i=[],r=0;n.length>r;)D(et,t=n[r++])||t==Xe||t==We||i.push(t);return i},pt=function(e){for(var t,n=e===nt,i=He(n?tt:P(e)),r=[],o=0;i.length>o;)!D(et,t=i[o++])||n&&!D(nt,t)||r.push(et[t]);return r};it||(L((Ye=function(){if(this instanceof Ye)throw TypeError("Symbol is not a constructor!");var e=$(arguments.length>0?arguments[0]:void 0);return l&&ot&&at(nt,e,{configurable:!0,set:function t(n){this===nt&&t.call(tt,n),D(this,Xe)&&D(this[Xe],e)&&(this[Xe][e]=!1),at(this,e,g(1,n))}}),st(e)}).prototype,"toString",function(){return this._k}),Ge.f=dt,m.f=lt,Pe.f=ze.f=ht,Ce.f=ft,De.f=pt,Ae.f=function(e){return st(re(e))}),w(w.G+w.W+w.F*!it,{Symbol:Ye});for(var vt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),mt=0;vt.length>mt;)re(vt[mt++]);for(var vt=q(re.store),mt=0;vt.length>mt;)Ie(vt[mt++]);w(w.S+w.F*!it,"Symbol",{for:function(e){return D(Je,e+="")?Je[e]:Je[e]=Ye(e)},keyFor:function(e){if(ut(e))return function(e,t){for(var n,i=P(e),r=q(i),o=r.length,a=0;o>a;)if(i[n=r[a++]]===t)return n}(Je,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),w(w.S+w.F*!it,"Object",{create:function(e,t){return void 0===t?ie(e):ct(ie(e),t)},defineProperty:lt,defineProperties:ct,getOwnPropertyDescriptor:dt,getOwnPropertyNames:ht,getOwnPropertySymbols:pt}),Ke&&w(w.S+w.F*(!it||u(function(){var e=Ye();return"[null]"!=Ze([e])||"{}"!=Ze({a:e})||"{}"!=Ze(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!ut(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(t=i[1])&&(n=t),!n&&Re(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!ut(t))return t}),i[1]=t,Ze.apply(Ke,i)}}}),Ye.prototype[qe]||y(Ye.prototype,qe,Ye.prototype.valueOf),se(Ye,"Symbol"),se(Math,"Math",!0),se(i.JSON,"JSON",!0),Ie("asyncIterator"),Ie("observable");var gt=r.Symbol,yt=t(function(e){e.exports={default:gt,__esModule:!0}}),bt=e(t(function(e,t){t.__esModule=!0;var n=o(xe),i=o(yt),r="function"===typeof i.default&&"symbol"===typeof n.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===r(n.default)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)}}));!function(e,t){var n=(r.Object||{})[e]||Object[e],i={};i[e]=t(n),w(w.S+w.F*u(function(){n(1)}),"Object",i)}("keys",function(){return function(e){return q(fe(e))}});var wt=r.Object.keys,_t=(t(function(e){e.exports={default:wt,__esModule:!0}}),Math.floor);w(w.S,"Number",{isInteger:function(e){return!a(e)&&isFinite(e)&&_t(e)===e}});var Et=r.Number.isInteger,St=(t(function(e){e.exports={default:Et,__esModule:!0}}),"\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"),kt="["+St+"]",Tt=RegExp("^"+kt+kt+"*"),At=RegExp(kt+kt+"*$"),Ot=function(e,t,n){var i={},r=u(function(){return!!St[e]()||"\u200b\x85"!="\u200b\x85"[e]()}),o=i[e]=r?t(xt):St[e];n&&(i[n]=o),w(w.P+w.F*r,"String",i)},xt=Ot.trim=function(e,t){return e=String(M(e)),1&t&&(e=e.replace(Tt,"")),2&t&&(e=e.replace(At,"")),e},Mt=Ot,Lt=i.parseFloat,It=Mt.trim,Dt=1/Lt(St+"-0")!==-1/0?function(e){var t=It(String(e),3),n=Lt(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Lt;w(w.S+w.F*(Number.parseFloat!=Dt),"Number",{parseFloat:Dt});var Ct=parseFloat;function Rt(e){return"string"===typeof e||e instanceof String}function Nt(e,t){if(!Rt(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+("undefined"===typeof e?"undefined":bt(e)));return Rt(t)?"["+(e=Pt.FORCE_GLOBAL_TAG?Pt.GLOBAL_TAG:e||Pt.GLOBAL_TAG)+"] > "+t:"["+Pt.GLOBAL_TAG+"] > "+e}t(function(e){e.exports={default:Ct,__esModule:!0}});var Pt=function(){function e(){n(this,e)}return T(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,Nt(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log).call(console,Nt(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log).call(console,Nt(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log).call(console,Nt(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(Nt(t,n))}}]),e}();return Pt.GLOBAL_TAG="chimee",Pt.FORCE_GLOBAL_TAG=!1,Pt.ENABLE_ERROR=!0,Pt.ENABLE_INFO=!0,Pt.ENABLE_WARN=!0,Pt.ENABLE_DEBUG=!0,Pt.ENABLE_VERBOSE=!0,Pt}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=c(n(16)),o=c(n(18)),a=c(n(19)),s=c(n(20)),u=n(0),l=n(2);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.loader=null,n.config={},n.config=e||{},n.bufferSize=3145728,n.cacheBuffer=new ArrayBuffer(n.bufferSize),n.cacheRemain=0,n.stashByteStart=0,n.enableStash=!0,n.stashSize=n.config.stashSize||393216,n.resumeFrom=0,n.currentRange={},n.totalReceive=0,n.seekPonit=void 0,n.timer=null,n.heartBeatInterval=null,n.preTotalReceive=0,n.seekLock=!1,n.webSocketURLReg=/wss?:\/\/(.+?)/,n.selectLoader(),n.bindEvent(),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.CustEvent),i(t,[{key:"selectLoader",value:function(){var e=this.config,t=this.config.src;this.webSocketURLReg.test(t)?this.loader=new a.default(t,e,this.queryHandle):r.default.isSupport()?this.loader=new r.default(t,e,this.queryHandle):s.default.isSupport()?this.loader=new s.default(t,e,this.queryHandle):o.default.isSupport()&&(this.loader=new o.default(t,e,this.queryHandle)),this.loader.arrivalDataCallback=this.onLoaderChunkArrival.bind(this)}},{key:"bindEvent",value:function(){var e=this;this.loader.on("end",function(){var t=e.cacheBuffer.slice(0,e.cacheRemain);e.arrivalDataCallback(t,e.stashByteStart),e.emit("end")}),["error","performance"].forEach(function(t){e.loader.on(t,function(n){e.emit(t,n.data)})})}},{key:"unbindEvent",value:function(){this.loader.off("end"),this.loader.off("error"),this.loader.off("performance")}},{key:"onLoaderChunkArrival",value:function(e,t,n){if("undefined"===typeof this.startReceiveTime&&(this.startReceiveTime=Date.now()),(!this.seekLock||void 0!==n)&&(void 0!==n&&(this.seekPonit=n,this.seekLock=!1),this.arrivalDataCallback))if(this.emit("player-event",{type:l.PLAYER_EVENTS.LOADER_CHUNK_ARRIVAL,byteLength:e.byteLength,ts:Date.now()}),this.totalReceive+=e.byteLength,0===this.cacheRemain&&0===this.stashByteStart&&(this.stashByteStart=t),this.cacheRemain+e.byteLength<=this.stashSize){new Uint8Array(this.cacheBuffer,0,this.stashSize).set(new Uint8Array(e),this.cacheRemain),this.cacheRemain+=e.byteLength}else{this.startReceiveTime&&(this.emit("performance",{type:"first-flv-package-duration",value:Date.now()-this.startReceiveTime}),this.startReceiveTime=void 0);var i=new Uint8Array(this.cacheBuffer,0,this.bufferSize);if(this.cacheRemain>0){var r=this.cacheBuffer.slice(0,this.cacheRemain),o=0,a=Date.now();if(void 0!==this.seekPonit?(o=this.arrivalDataCallback(r,this.stashByteStart,this.seekPonit),this.seekPonit=void 0):o=this.arrivalDataCallback(r,this.stashByteStart),this.emit("performance",{type:"first-flv-to-mp4",value:Date.now()-a}),o<r.byteLength){if(o>0){var s=new Uint8Array(r,o);i.set(s,0),this.cacheRemain=s.byteLength,this.stashByteStart+=o}}else this.cacheRemain=0,this.stashByteStart+=o;this.cacheRemain+e.byteLength>this.bufferSize&&(this.expandBuffer(this.cacheRemain+e.byteLength),i=new Uint8Array(this.cacheBuffer,0,this.bufferSize)),i.set(new Uint8Array(e),this.cacheRemain),this.cacheRemain+=e.byteLength}else{var u=0,c=Date.now();if(void 0!==this.seekPonit?(u=this.arrivalDataCallback(e,t,this.seekPonit),this.seekPonit=void 0):u=this.arrivalDataCallback(e,t),this.emit("performance",{type:"first-flv-to-mp4",value:Date.now()-c}),u<e.byteLength){var f=e.byteLength-u;f>this.bufferSize&&(this.expandBuffer(f),i=new Uint8Array(this.cacheBuffer,0,this.bufferSize)),i.set(new Uint8Array(e,u),0),this.cacheRemain+=f,this.stashByteStart=t+u}}}}},{key:"initCacheBuffer",value:function(){this.cacheRemain=0,this.totalReceive=0,this.cacheBuffer=new ArrayBuffer(this.bufferSize)}},{key:"expandBuffer",value:function(e){var t=this.bufferSize;t<e&&(t=e),this.cacheBuffer=new ArrayBuffer(t),this.bufferSize=t}},{key:"pause",value:function(){this.loader.pause()}},{key:"open",value:function(e,t){this.emit("player-event",{type:l.PLAYER_EVENTS.LOADER_OPEN,ts:Date.now()}),this.loader.open({from:e||0,to:-1},t),this.heartbeat()}},{key:"heartbeat",value:function(){var e=this;clearInterval(this.heartBeatInterval),this.heartBeatInterval=setInterval(function(){e.emit("heartbeat",{speed:e.totalReceive-e.preTotalReceive,totalReceive:e.totalReceive}),e.preTotalReceive=e.totalReceive},1e3)}},{key:"resume",value:function(){this.paused=!1;var e=this.totalReceive;this.open(e)}},{key:"seek",value:function(e,t,n){this.seekLock=!0,this.totalReceive=e,this.preTotalReceive=e,this.initCacheBuffer(),this.cacheRemain=0,this.stashByteStart=0,this.open(e,n)}},{key:"destroy",value:function(){this.pause(),this.initCacheBuffer(),window.clearInterval(this.heartBeatInterval),this.heartBeatInterval=null,this.unbindEvent()}}]),t}();t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},n=void 0;return n=-1!==e.to?"bytes="+e.from.toString()+"-"+e.to.toString():"bytes="+e.from.toString()+"-",t.Range=n,{headers:t}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(22)),o=l(n(8)),a=l(n(10)),s=l(n(28)),u=n(0);l(n(3));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(){function e(t){c(this,e),a.default.init(),this._config=t,this.onInitSegment=null,this.onMediaSegment=null,this.onMediaInfo=null,this.seekCallBack=null,this._onCdnDropFrame=null,this.loadmetadata=!1,this.ftyp_moov=null,this._tagdemux=new o.default,this._flvparse=new r.default,this.ftyp_moov_v=null,this.ftyp_moov_a=null,this.metaSuccRun=!1,this.metas=[],this.parseChunk=null,this.hasVideo=!1,this.hasAudio=!1,this._error=null,this._pendingResolveSeekPoint=-1,this._tempBaseTime=0,this.setflvBase=this.setflvBasefrist,this._tagdemux._onTrackMetadata=this.Metadata.bind(this),this._tagdemux._onMediaInfo=this.metaSucc.bind(this),this._tagdemux._onDataAvailable=this.onDataAvailable.bind(this),this._tagdemux._onError=this.error.bind(this),this._tagdemux._onCdnDropFrame=this.onCdnDropFrame.bind(this),this.m4mof=new s.default(this._config),this.m4mof.onMediaSegment=this.onMdiaSegment.bind(this)}return i(e,[{key:"seek",value:function(e){this._flvparse.dispose(),this.setflvBase=this.setflvBasefrist,void 0!=e&&0!=e||(e=0,this._pendingResolveSeekPoint=-1),this._tempBaseTime!=e&&(this._tempBaseTime=e,this._tagdemux._timestampBase=e,this.m4mof.seek(e),this.m4mof.insertDiscontinuity(),this._pendingResolveSeekPoint=e)}},{key:"setflvBasefrist",value:function(e,t){var n=0;try{n=this._flvparse.setFlv(new Uint8Array(e))}catch(i){this.error(i)}if(0==this._flvparse.arrTag.length)return n;if(this._flvparse.arrTag.length>0){this._tagdemux.hasAudio=this.hasAudio=this._flvparse._hasAudio,this._tagdemux.hasVideo=this.hasVideo=this._flvparse._hasVideo,0!=this._tempBaseTime&&this._tempBaseTime==this._flvparse.arrTag[0].getTime()&&(this._tagdemux._timestampBase=0);try{this._tagdemux.moofTag(this._flvparse.arrTag)}catch(i){this.error(i)}this.setflvBase=this.setflvBaseUsually}return n}},{key:"setflvBaseUsually",value:function(e,t){var n=0;try{n=this._flvparse.setFlv(new Uint8Array(e))}catch(i){this.error(i)}if(this._flvparse.arrTag.length>0)try{this._tagdemux.moofTag(this._flvparse.arrTag)}catch(i){this.error(i)}return n}},{key:"onMdiaSegment",value:function(e,t){if(this.onMediaSegment&&this.onMediaSegment(e,new Uint8Array(t.data)),-1!=this._pendingResolveSeekPoint&&"video"==e){var n=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=-1,this.seekCallBack&&this.seekCallBack(n)}}},{key:"Metadata",value:function(e,t){switch(e){case"video":if(this.metas.push(["video",t]),this.m4mof._videoMeta=t,this.hasVideo&&!this.hasAudio)return void this.metaSucc();break;case"audio":if(this.metas.push(["audio",t]),this.m4mof._audioMeta=t,!this.hasVideo&&this.hasAudio)return void this.metaSucc()}this.hasVideo&&this.hasAudio&&this.m4mof._videoMeta&&this.m4mof._audioMeta&&this.metaSucc()}},{key:"metaSucc",value:function(e){var t=this;this.onMediaInfo&&e&&this.onMediaInfo(e||this._tagdemux._mediaInfo,{hasAudio:this.hasAudio,hasVideo:this.hasVideo}),0!=this.metas.length?e||(this.metas.length>1?this.metas.map(function(e){"video"==e[0]?t.ftyp_moov_v=a.default.generateInitSegment([e[1]]):t.ftyp_moov_a=a.default.generateInitSegment([e[1]])}):this.ftyp_moov=a.default.generateInitSegment([this.metas[0][1]]),this.onInitSegment&&0==this.loadmetadata&&(this.ftyp_moov?this.onInitSegment(this.ftyp_moov):this.onInitSegment(this.ftyp_moov_v,this.ftyp_moov_a),this.loadmetadata=!0)):this.metaSuccRun=!0}},{key:"onDataAvailable",value:function(e,t){try{this.m4mof.remux(e,t)}catch(_c){this.error(_c)}}},{key:"onCdnDropFrame",value:function(e){this._onCdnDropFrame&&this._onCdnDropFrame(e)}},{key:"setflv",value:function(e,t){return this.setflvBase(e,t)}},{key:"setflvloc",value:function(e){r.default.setFlv(new Uint8Array(e));if(r.default.arrTag.length>0)return r.default.arrTag}},{key:"error",value:function(e){this._error&&this._error(e)}}]),e}(),d=function(e){function t(e){c(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.f2m=new f(e),n.f2m._error=n.error.bind(n),n._onInitSegment=null,n._onMediaSegment=null,n._onMediaInfo=null,n._seekCallBack=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.CustEvent),i(t,[{key:"error",value:function(e){this.emit("error",e.type)}},{key:"seek",value:function(e){this.f2m.seek(e)}},{key:"setflv",value:function(e){return this.f2m.setflv(e,0)}},{key:"setflvloc",value:function(e){return this.f2m.setflvloc(e)}},{key:"onInitSegment",set:function(e){this._onInitSegment=e,this.f2m.onInitSegment=e}},{key:"onMediaSegment",set:function(e){this._onMediaSegment=e,this.f2m.onMediaSegment=e}},{key:"onMediaInfo",set:function(e){this._onMediaInfo=e,this.f2m.onMediaInfo=e}},{key:"seekCallBack",set:function(e){this._seekCallBack=e,this.f2m.seekCallBack=e}},{key:"onCdnDropFrame",set:function(e){console.log("set fun"),this.f2m._onCdnDropFrame=e}}]),t}();t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(24)),a=l(n(27)),s=l(n(9)),u=l(n(3));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG=this.constructor.name,this._config={},this._onError=null,this._onMediaInfo=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._onCdnDropFrame=null,this._dataOffset=0,this._firstParse=!0,this._dispatch=!1,this._hasAudio=!1,this._hasVideo=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new a.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._videoTrack={type:"video",id:1,sequenceNumber:0,addcoefficient:2,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,addcoefficient:2,samples:[],length:0},this._littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),this._timeInfo={aacFirstDts:0,aacCurrentDtsOffset:0,aacCurrentFixedLen:0,aacFixedRecord:[],avcSampleDuration:40,avcLastDts:0,avcLastPts:0}}return r(e,[{key:"onMediaInfo",value:function(e){this._onMediaInfo=e}},{key:"parseFirstTimeStamp",value:function(e){this._mediaInfo.beginTimeStamp||(this._mediaInfo.beginTimeStamp=e.getTime(),this._mediaInfo.audioCodec&&this._mediaInfo.videoCodec&&this._onMediaInfo(this._mediaInfo))}},{key:"parseMetadata",value:function(e){var t=o.default.parseMetadata(e);this._mediaInfo.metadata&&(this._mediaInfo.metadata=t.onMetaData,this._onMediaInfo(this._mediaInfo)),this._parseScriptData(t)}},{key:"_parseScriptData",value:function(e){var t=e;if(t.hasOwnProperty("onMetaData")){this._metadata,this._metadata=t;var n=this._metadata.onMetaData;if("boolean"===typeof n.hasAudio&&(this._hasAudio=n.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"===typeof n.hasVideo&&(this._hasVideo=n.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"===typeof n.audiodatarate&&(this._mediaInfo.audioDataRate=n.audiodatarate),"number"===typeof n.videodatarate&&(this._mediaInfo.videoDataRate=n.videodatarate),"number"===typeof n.width&&(this._mediaInfo.width=n.width),"number"===typeof n.height&&(this._mediaInfo.height=n.height),"number"===typeof n.duration){if(!this._durationOverrided){var r=Math.floor(n.duration*this._timescale);this._duration=r,this._mediaInfo.duration=r}}else this._mediaInfo.duration=0;if("number"===typeof n.framerate){var o=Math.floor(1e3*n.framerate);if(o>0){var a=o/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=a,this._referenceFrameRate.fps_num=o,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=a,this._timeInfo.avcSampleDuration=Math.ceil(1e3/this._mediaInfo.fps)||40}}if("object"===i(n.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var s=n.keyframes;s.times=n.times,s.filepositions=n.filepositions,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(s),n.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;return this._dispatch=!1,this._mediaInfo.metadata=n,console.log(this.TAG,"Parsed onMetaData"),this._mediaInfo}}},{key:"_parseKeyframesIndex",value:function(e){for(var t=[],n=[],i=1;i<e.times.length;i++){var r=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(r),n.push(e.filepositions[i])}return{times:t,filepositions:n}}},{key:"moofTag",value:function(e){for(var t=0;t<e.length;t++)this._dispatch=!0,this.parseChunks(e[t]);this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack)}},{key:"parseChunks",value:function(e){switch(e.tagType){case 8:this._parseAudioData(e.body.buffer,0,e.body.length,e.getTime()),this.parseFirstTimeStamp(e);break;case 9:this._parseVideoData(e.body.buffer,0,e.body.length,e.getTime(),0),this.parseFirstTimeStamp(e);break;case 18:this.parseMetadata(e.body)}}},{key:"_parseVideoData",value:function(e,t,n,i,r){if(i==this._timestampBase&&0!=this._timestampBase)throw new u.default(i,this._timestampBase,"\u592d\u5bff\u5566\u8fd9\u4e2a\u89c6\u9891\u4e0d\u662f\u4ece0\u5f00\u59cb");if(n<=1)console.log(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else{var o=new Uint8Array(e,t,n)[0],a=(240&o)>>>4,s=15&o;7===s?this._parseAVCVideoPacket(e,t+1,n-1,i,r,a):this._onError&&this._onError("Flv: Unsupported codec in video frame: "+s)}}},{key:"_parseAVCVideoPacket",value:function(e,t,n,i,r,o){if(n<4)console.log(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var a=this._littleEndian,s=new DataView(e,t,n),u=s.getUint8(0),l=16777215&s.getUint32(0,!a);if(0===u)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===u)this._parseAVCVideoData(e,t+4,n-4,i,r,o,l);else if(2!==u)return void this._onError("Flv: Invalid video packet type "+u)}}},{key:"_parseAVCDecoderConfigurationRecord",value:function(e,t,n){if(n<7)console.log(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,r=this._videoTrack,o=this._littleEndian,a=new DataView(e,t,n);i?"undefined"!==typeof i.avcc&&console.log(this.TAG,"Found another AVCDecoderConfigurationRecord!"):((i=this._videoMetadata={}).type="video",i.id=r.id,i.timescale=this._timescale,i.duration=this._duration);var u=a.getUint8(0),l=a.getUint8(1);a.getUint8(2),a.getUint8(3);if(1===u&&0!==l)if(this._naluLengthSize=1+(3&a.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var c=31&a.getUint8(5);if(0===c||c>1)this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid H264 SPS count: "+c);else{for(var f=6,d=0;d<c;d++){var h=a.getUint16(f,!o);if(f+=2,0!==h){var p=new Uint8Array(e,t+f,h);f+=h;var v=s.default.parseSPS(p);i.codecWidth=v.codec_size.width,i.codecHeight=v.codec_size.height,i.presentWidth=v.present_size.width,i.presentHeight=v.present_size.height,i.config=v,i.profile=v.profile_string,i.level=v.level_string,i.bitDepth=v.bit_depth,i.chromaFormat=v.chroma_format,i.sarRatio=v.sar_ratio,i.frameRate=v.frame_rate,!1!==v.frame_rate.fixed&&0!==v.frame_rate.fps_num&&0!==v.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var m=i.frameRate.fps_den,g=i.frameRate.fps_num;i.refSampleDuration=Math.floor(i.timescale*(m/g));for(var y=p.subarray(1,4),b="avc1.",w=0;w<3;w++){var _=y[w].toString(16);_.length<2&&(_="0"+_),b+=_}i.codec=b;var E=this._mediaInfo;E.width=i.codecWidth,E.height=i.codecHeight,E.fps=i.frameRate.fps,E.profile=i.profile,E.level=i.level,E.chromaFormat=v.chroma_format_string,E.sarNum=i.sarRatio.width,E.sarDen=i.sarRatio.height,E.videoCodec=b,E.meta=i,E.hasAudio?null!=E.audioCodec&&(E.mimeType='video/x-flv; codecs="'+E.videoCodec+","+E.audioCodec+'"'):E.mimeType='video/x-flv; codecs="'+E.videoCodec+'"',E.isComplete()&&this._onMediaInfo(E)}}var S=a.getUint8(f);if(0===S||S>1)this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid H264 PPS count: "+S);else{f++;for(var k=0;k<S;k++){var T=a.getUint16(f,!o);f+=2,0!==T&&(f+=T)}i.avcc=new Uint8Array(n),i.avcc.set(new Uint8Array(e,t,n),0),console.log(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}}}else this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}}},{key:"timestampBase",value:function(e){this._timestampBase=e}},{key:"_parseAVCVideoData",value:function(e,t,n,i,r,o,a){for(var s=this._littleEndian,u=new DataView(e,t,n),l=[],c=0,f=0,d=this._naluLengthSize,h=this._timestampBase+i,p=1===o,v=h,m=0;m<this._timeInfo.aacFixedRecord.length;m++)if(h>this._timeInfo.aacFixedRecord[m].ed){this._timeInfo.aacFixedRecord.splice(0,m);break}if(this._timeInfo.avcLastDts&&v-this._timeInfo.avcLastDts>this._timeInfo.avcSampleDuration){for(var g=!1,y=0;y<this._timeInfo.aacFixedRecord.length;y++)if(v>=this._timeInfo.aacFixedRecord[y].st&&v<=this._timeInfo.aacFixedRecord[y].ed){v-=this._timeInfo.aacFixedRecord[y].fix,g=!0,this._timeInfo.aacFixedRecord[y].ed==Number.POSITIVE_INFINITY&&v-this._timeInfo.avcLastDts>this._timeInfo.avcSampleDuration&&(g=!1);break}g||(v=this._timeInfo.avcLastDts+this._timeInfo.avcSampleDuration),v<=this._timeInfo.avcLastDts&&(v=this._timeInfo.avcLastDts+1)}for(var b=v+a;f<n;){if(f+4>=n){console.log(this.TAG,"Malformed Nalu near timestamp "+h+", offset = "+f+", dataSize = "+n);break}var w=u.getUint32(f,!s);if(3===d&&(w>>>=8),w>n-d)return void console.log(this.TAG,"Malformed Nalus near timestamp "+h+", NaluSize > DataSize!");var _=31&u.getUint8(f+d);5===_&&(p=!0);var E=new Uint8Array(e,t+f,d+w),S={type:_,data:E};l.push(S),c+=E.byteLength,f+=d+w}if(l.length){var k=this._videoTrack,T={units:l,length:c,isKeyframe:p,dts:v,cts:a,pts:b};p&&(T.fileposition=r),k.samples.push(T),k.length+=c}this._timeInfo.avcLastDts=v}},{key:"_parseAudioData",value:function(e,t,n,i){if(i==this._timestampBase&&0!=this._timestampBase&&console.log(i,this._timestampBase,"\u592d\u5bff\u5566\u8fd9\u4e2a\u89c6\u9891\u4e0d\u662f\u4ece0\u5f00\u59cb"),n<=1)console.log(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else{var r=this._audioMetadata,o=this._audioTrack;if(!r||!r.codec){(r=this._audioMetadata={}).type="audio",r.id=o.id,r.timescale=this._timescale,r.duration=this._duration;this._littleEndian;var a=new DataView(e,t,n).getUint8(0),s=a>>>4;if(10!==s)return void this._onError(DemuxErrors.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+s);var u=0,l=(12&a)>>>2,c=[5500,11025,22050,44100,48e3];if(!(l<c.length))return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+l);u=c[l];var f=1&a;r.audioSampleRate=u,r.channelCount=0===f?1:2,r.refSampleDuration=Math.floor(1024/r.audioSampleRate*r.timescale),r.codec="mp4a.40.5"}var d=this._parseAACAudioData(e,t+1,n-1);if(void 0!=d){if(0===d.packetType){r.config&&console.log(this.TAG,"Found another AudioSpecificConfig!");var h=d.data;r.audioSampleRate=h.samplingRate,r.channelCount=h.channelCount,r.codec=h.codec,r.config=h.config,r.refSampleDuration=Math.floor(1024/r.audioSampleRate*r.timescale),console.log(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1;var p=this._mediaInfo;return p.audioCodec="mp4a.40."+h.originalAudioObjectType,p.audioSampleRate=r.audioSampleRate,p.audioChannelCount=r.channelCount,p.hasVideo?null!=p.videoCodec&&(p.mimeType='video/x-flv; codecs="'+p.videoCodec+","+p.audioCodec+'"'):p.mimeType='video/x-flv; codecs="'+p.audioCodec+'"',this._onTrackMetadata("audio",r),void(p.isComplete()&&this._onMediaInfo(p))}if(1===d.packetType){var v=this._timestampBase+i;this._timeInfo.aacFirstDts||(this._timeInfo.aacFirstDts=v);var m=v-Math.floor(this._timeInfo.aacFirstDts+this._timeInfo.aacCurrentDtsOffset)-this._timeInfo.aacCurrentFixedLen;m>1&&(this._timeInfo.aacCurrentFixedLen+=m,this._timeInfo.aacFixedRecord.length&&(this._timeInfo.aacFixedRecord[this._timeInfo.aacFixedRecord.length-1].ed=v),this._timeInfo.aacFixedRecord.push({st:v,fix:this._timeInfo.aacCurrentFixedLen,ed:Number.POSITIVE_INFINITY}),this._onCdnDropFrame&&this._onCdnDropFrame(m));var g=1024e3/r.audioSampleRate,y=Math.floor(this._timeInfo.aacFirstDts+this._timeInfo.aacCurrentDtsOffset),b={unit:d.data,dts:y,pts:y,length:g};this._timeInfo.aacCurrentDtsOffset+=g,o.samples.push(b),o.length+=d.data.length}else console.log(this.TAG,"Flv: Unsupported AAC data type "+d.packetType)}}}},{key:"_parseAACAudioData",value:function(e,t,n){if(!(n<=1)){var i={},r=new Uint8Array(e,t,n);return i.packetType=r[0],0===r[0]?i.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):i.data=r.subarray(1),i}console.log(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")}},{key:"_parseAACAudioSpecificConfig",value:function(e,t,n){var i,r,o=new Uint8Array(e,t,n),a=null,s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],u=0,l=null;if(u=i=o[0]>>>3,(r=(7&o[0])<<1|o[1]>>>7)<0||r>=s.length)this._onError(DemuxErrors.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var c=s[r],f=(120&o[1])>>>3;if(!(f<0||f>=8)){5===u&&(l=(7&o[1])<<1|o[2]>>>7);var d=self.navigator.userAgent.toLowerCase();return-1!==d.indexOf("firefox")?r>=6?(u=5,a=new Array(4),l=r-3):(u=2,a=new Array(2),l=r):-1!==d.indexOf("android")?(u=2,a=new Array(2),l=r):(u=5,l=r,a=new Array(4),r>=6?l=r-3:1===f&&(u=2,a=new Array(2),l=r)),a[0]=u<<3,a[0]|=(15&r)>>>1,a[1]=(15&r)<<7,a[1]|=(15&f)<<3,5===u&&(a[1]|=(15&l)>>>1,a[2]=(1&l)<<7,a[2]|=8,a[3]=0),{config:a,samplingRate:c,channelCount:f,codec:"mp4a.40."+u,originalAudioObjectType:i}}this._onError(DemuxErrors.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}}},{key:"_isInitialMetadataDispatched",value:function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:void 0}},{key:"hasAudio",set:function(e){this._mediaInfo.hasAudio=this._hasAudio=e}},{key:"hasVideo",set:function(e){this._mediaInfo.hasVideo=this._hasVideo=e}},{key:"onCdnDropFrame",set:function(e){this._onCdnDropFrame=e}}]),e}();t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(26),a=(i=o)&&i.__esModule?i:{default:i};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,o=0;o<n;o++)o>=2&&3===t[o]&&0===t[o-1]&&0===t[o-2]||(i[r]=t[o],r++);return new Uint8Array(i.buffer,0,r)}},{key:"parseSPS",value:function(t){var n=e._ebsp2rbsp(t),i=new a.default(n);i.readByte();var r=i.readByte();i.readByte();var o=i.readByte();i.readUEG();var s=e.getProfileString(r),u=e.getLevelString(o),l=1,c=420,f=8;if((100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r||138===r||144===r)&&(3===(l=i.readUEG())&&i.readBits(1),l<=3&&(c=[0,420,422,444][l]),f=i.readUEG()+8,i.readUEG(),i.readBits(1),i.readBool()))for(var d=3!==l?8:12,h=0;h<d;h++)i.readBool()&&(h<6?e._skipScalingList(i,16):e._skipScalingList(i,64));i.readUEG();var p=i.readUEG();if(0===p)i.readUEG();else if(1===p){i.readBits(1),i.readSEG(),i.readSEG();for(var v=i.readUEG(),m=0;m<v;m++)i.readSEG()}i.readUEG(),i.readBits(1);var g=i.readUEG(),y=i.readUEG(),b=i.readBits(1);0===b&&i.readBits(1),i.readBits(1);var w=0,_=0,E=0,S=0;i.readBool()&&(w=i.readUEG(),_=i.readUEG(),E=i.readUEG(),S=i.readUEG());var k=1,T=1,A=0,O=!0,x=0,M=0;if(i.readBool()){if(i.readBool()){var L=i.readByte();L>0&&L<16?(k=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][L-1],T=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][L-1]):255===L&&(k=i.readByte()<<8|i.readByte(),T=i.readByte()<<8|i.readByte())}if(i.readBool()&&i.readBool(),i.readBool()&&(i.readBits(4),i.readBool()&&i.readBits(24)),i.readBool()&&(i.readUEG(),i.readUEG()),i.readBool()){var I=i.readBits(32),D=i.readBits(32);O=i.readBool(),A=(x=D)/(M=2*I)}}var C=1;1===k&&1===T||(C=k/T);var R=0,N=0;0===l?(R=1,N=2-b):(R=3===l?1:2,N=(1===l?2:1)*(2-b));var P=16*(g+1),j=16*(y+1)*(2-b);P-=(w+_)*R,j-=(E+S)*N;var F=Math.ceil(P*C);return i.destroy(),i=null,{profile_string:s,level_string:u,bit_depth:f,chroma_format:c,chroma_format_string:e.getChromaFormatString(c),frame_rate:{fixed:O,fps:A,fps_den:M,fps_num:x},sar_ratio:{width:k,height:T},codec_size:{width:P,height:j},present_size:{width:F,height:j}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=(n+e.readSEG()+256)%256),n=0===i?n:i}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"init",value:function(){for(var t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=e.constants={};n.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),n.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),n.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),n.STSC=n.STCO=n.STTS,n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),n.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}},{key:"box",value:function(e){for(var t=8,n=null,i=Array.prototype.slice.call(arguments,1),r=i.length,o=0;o<r;o++)t+=i[o].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);for(var a=8,s=0;s<r;s++)n.set(i[s],a),a+=i[s].byteLength;return n}},{key:"generateInitSegment",value:function(t){t.constructor!=Array&&(t=[t]);var n=e.box(e.types.ftyp,e.constants.FTYP),i=e.moov(t),r=new Uint8Array(n.byteLength+i.byteLength);return r.set(n,0),r.set(i,n.byteLength),r}},{key:"moov",value:function(t){var n=e.mvhd(t[0].timescale,t[0].duration),i=e.trak(t[0]),r=void 0;t.length>1&&(r=e.trak(t[1]));var o=e.mvex(t);return t.length>1?e.box(e.types.moov,n,i,r,o):e.box(e.types.moov,n,i,o)}},{key:"mvhd",value:function(t,n){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"tkhd",value:function(t){var n=t.id,i=t.duration,r=t.presentWidth,o=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>>8&255,255&r,0,0,o>>>8&255,255&o,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))}},{key:"mdhd",value:function(t){var n=t.timescale,i=t.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i,85,196,0,0]))}},{key:"hdlr",value:function(t){var n=null;return n="audio"===t.type?e.constants.HDLR_AUDIO:e.constants.HDLR_VIDEO,e.box(e.types.hdlr,n)}},{key:"minf",value:function(t){var n=null;return n="audio"===t.type?e.box(e.types.smhd,e.constants.SMHD):e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,n,e.dinf(),e.stbl(t))}},{key:"dinf",value:function(){return e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF))}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO))}},{key:"stsd",value:function(t){return"audio"===t.type?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(t))}},{key:"mp4a",value:function(t){var n=t.channelCount,i=t.audioSampleRate,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types.mp4a,r,e.esds(t))}},{key:"esds",value:function(t){var n=t.config,i=n.length,r=new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(n).concat([6,1,2]));return e.box(e.types.esds,r)}},{key:"avc1",value:function(t){var n=t.avcc,i=t.codecWidth,r=t.codecHeight,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,r>>>8&255,255&r,0,72,0,0,0,72,0,0,0,0,0,0,0,1,4,103,49,49,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,o,e.box(e.types.avcC,n))}},{key:"mvex",value:function(t){return t.length>1?e.box(e.types.mvex,e.trex(t[0]),e.trex(t[1])):e.box(e.types.mvex,e.trex(t[0]))}},{key:"trex",value:function(t){var n=t.id,i=new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,i)}},{key:"moof",value:function(t,n){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,n))}},{key:"mfhd",value:function(t){var n=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,n)}},{key:"traf",value:function(t,n){var i=t.id,r=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),o=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),a=e.sdtp(t),s=e.trun(t,a.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,r,o,s,a)}},{key:"sdtp",value:function(t){for(var n=t.samples||[],i=n.length,r=new Uint8Array(4+i),o=0;o<i;o++){var a=n[o].flags;r[o+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return e.box(e.types.sdtp,r)}},{key:"trun",value:function(t,n){var i=t.samples||[],r=i.length,o=12+16*r,a=new Uint8Array(o);n+=8+o,a.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var s=0;s<r;s++){var u=i[s].duration,l=i[s].size,c=i[s].flags,f=i[s].cts;a.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,l>>>24&255,l>>>16&255,l>>>8&255,255&l,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.isNonSync,0,0,f>>>24&255,f>>>16&255,f>>>8&255,255&f],12+16*s)}return e.box(e.types.trun,a)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();t.default=r},function(e,t,n){(function(e){(function(t){var n="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var o=Math.ceil,a=Math.floor,s=function(e){return isNaN(e=+e)?0:(e>0?a:o)(e)},u=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},l=r(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),c=r(function(e){var t=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=t)}),f=(c.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),d=function(e,t,n){if(f(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},h=function(e){return"object"===typeof e?null!==e:"function"===typeof e},p=function(e){if(!h(e))throw TypeError(e+" is not an object!");return e},v=function(e){try{return!!e()}catch(_c){return!0}},m=!v(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),g=l.document,y=h(g)&&h(g.createElement),b=function(e){return y?g.createElement(e):{}},w=!m&&!v(function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a}),_=function(e,t){if(!h(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!h(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!h(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!h(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},E=Object.defineProperty,S={f:m?Object.defineProperty:function(e,t,n){if(p(e),t=_(t,!0),p(n),w)try{return E(e,t,n)}catch(_c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},k=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},T=m?function(e,t,n){return S.f(e,t,k(1,n))}:function(e,t,n){return e[t]=n,e},A=function e(t,n,i){var r,o,a,s=t&e.F,u=t&e.G,f=t&e.S,h=t&e.P,p=t&e.B,v=t&e.W,m=u?c:c[n]||(c[n]={}),g=m.prototype,y=u?l:f?l[n]:(l[n]||{}).prototype;for(r in u&&(i=n),i)(o=!s&&y&&void 0!==y[r])&&r in m||(a=o?y[r]:i[r],m[r]=u&&"function"!=typeof y[r]?i[r]:p&&o?d(a,l):v&&y[r]==a?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(a):h&&"function"==typeof a?d(Function.call,a):a,h&&((m.virtual||(m.virtual={}))[r]=a,t&e.R&&g&&!g[r]&&T(g,r,a)))};A.F=1,A.G=2,A.S=4,A.P=8,A.B=16,A.W=32,A.U=64,A.R=128;var O,x=A,M=T,L={}.hasOwnProperty,I=function(e,t){return L.call(e,t)},D={},C={}.toString,R=function(e){return C.call(e).slice(8,-1)},N=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==R(e)?e.split(""):Object(e)},P=function(e){return N(u(e))},j=Math.min,F=function(e){return e>0?j(s(e),9007199254740991):0},B=Math.max,z=Math.min,U=l["__core-js_shared__"]||(l["__core-js_shared__"]={}),G=function(e){return U[e]||(U[e]={})},W=0,$=Math.random(),V=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++W+$).toString(36))},H=G("keys"),Y=function(e){return H[e]||(H[e]=V(e))},K=(O=!1,function(e,t,n){var i,r=P(e),o=F(r.length),a=function(e,t){return(e=s(e))<0?B(e+t,0):z(e,t)}(n,o);if(O&&t!=t){for(;o>a;)if((i=r[a++])!=i)return!0}else for(;o>a;a++)if((O||a in r)&&r[a]===t)return O||a||0;return!O&&-1}),Z=Y("IE_PROTO"),X=function(e,t){var n,i=P(e),r=0,o=[];for(n in i)n!=Z&&I(i,n)&&o.push(n);for(;t.length>r;)I(i,n=t[r++])&&(~K(o,n)||o.push(n));return o},q="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(e){return X(e,q)},J=m?Object.defineProperties:function(e,t){p(e);for(var n,i=Q(t),r=i.length,o=0;r>o;)S.f(e,n=i[o++],t[n]);return e},ee=l.document,te=ee&&ee.documentElement,ne=Y("IE_PROTO"),ie=function(){},re=function(){var e,t=b("iframe"),n=q.length;for(t.style.display="none",te.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),re=e.F;n--;)delete re.prototype[q[n]];return re()},oe=Object.create||function(e,t){var n;return null!==e?(ie.prototype=p(e),n=new ie,ie.prototype=null,n[ne]=e):n=re(),void 0===t?n:J(n,t)},ae=r(function(e){var t=G("wks"),n=l.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:V)("Symbol."+e))}).store=t}),se=S.f,ue=ae("toStringTag"),le=function(e,t,n){e&&!I(e=n?e:e.prototype,ue)&&se(e,ue,{configurable:!0,value:t})},ce={};T(ce,ae("iterator"),function(){return this});var fe,de=function(e,t,n){e.prototype=oe(ce,{next:k(1,n)}),le(e,t+" Iterator")},he=function(e){return Object(u(e))},pe=Y("IE_PROTO"),ve=Object.prototype,me=Object.getPrototypeOf||function(e){return e=he(e),I(e,pe)?e[pe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ve:null},ge=ae("iterator"),ye=!([].keys&&"next"in[].keys()),be=function(){return this},we=function(e,t,n,i,r,o,a){de(n,t,i);var s,u,l,c=function(e){if(!ye&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",d="values"==r,h=!1,p=e.prototype,v=p[ge]||p["@@iterator"]||r&&p[r],m=!ye&&v||c(r),g=r?d?c("entries"):m:void 0,y="Array"==t&&p.entries||v;if(y&&(l=me(y.call(new e)))!==Object.prototype&&l.next&&le(l,f,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(ye||h||!p[ge])&&T(p,ge,m),D[t]=m,D[f]=be,r)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:g},a)for(u in s)u in p||M(p,u,s[u]);else x(x.P+x.F*(ye||h),t,s);return s},_e=(fe=!0,function(e,t){var n,i,r=String(u(e)),o=s(t),a=r.length;return o<0||o>=a?fe?"":void 0:(n=r.charCodeAt(o))<55296||n>56319||o+1===a||(i=r.charCodeAt(o+1))<56320||i>57343?fe?r.charAt(o):n:fe?r.slice(o,o+2):i-56320+(n-55296<<10)+65536});we(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=_e(t,n),this._i+=e.length,{value:e,done:!1})});var Ee=function(e,t,n,i){try{return i?t(p(n)[0],n[1]):t(n)}catch(_c){var r=e.return;throw void 0!==r&&p(r.call(e)),_c}},Se=ae("iterator"),ke=Array.prototype,Te=function(e){return void 0!==e&&(D.Array===e||ke[Se]===e)},Ae=function(e,t,n){t in e?S.f(e,t,k(0,n)):e[t]=n},Oe=ae("toStringTag"),xe="Arguments"==R(function(){return arguments}()),Me=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(_c){}}(t=Object(e),Oe))?n:xe?R(t):"Object"==(i=R(t))&&"function"==typeof t.callee?"Arguments":i},Le=ae("iterator"),Ie=c.getIteratorMethod=function(e){if(void 0!=e)return e[Le]||e["@@iterator"]||D[Me(e)]},De=ae("iterator"),Ce=!1;try{[7][De]().return=function(){Ce=!0}}catch(_c){}var Re=function(e,t){if(!t&&!Ce)return!1;var n=!1;try{var i=[7],r=i[De]();r.next=function(){return{done:n=!0}},i[De]=function(){return r},e(i)}catch(_c){}return n};x(x.S+x.F*!Re(function(e){}),"Array",{from:function(e){var t,n,i,r,o=he(e),a="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,l=void 0!==u,c=0,f=Ie(o);if(l&&(u=d(u,s>2?arguments[2]:void 0,2)),void 0==f||a==Array&&Te(f))for(n=new a(t=F(o.length));t>c;c++)Ae(n,c,l?u(o[c],c):o[c]);else for(r=f.call(o),n=new a;!(i=r.next()).done;c++)Ae(n,c,l?Ee(r,u,[i.value,c],!0):i.value);return n.length=c,n}});var Ne=c.Array.from,Pe=r(function(e){e.exports={default:Ne,__esModule:!0}}),je=i(Pe),Fe=i(r(function(e,t){t.__esModule=!0;var n,i=(n=Pe)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}})),Be=function(e,t){return{value:t,done:!!e}};we(Array,"Array",function(e,t){this._t=P(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Be(1)):Be(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),D.Arguments=D.Array;for(var ze=ae("toStringTag"),Ue="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Ge=0;Ge<Ue.length;Ge++){var We=Ue[Ge],$e=l[We],Ve=$e&&$e.prototype;Ve&&!Ve[ze]&&T(Ve,ze,We),D[We]=D.Array}var He={f:ae},Ye=He.f("iterator"),Ke=r(function(e){e.exports={default:Ye,__esModule:!0}});i(Ke);var Ze=r(function(e){var t=V("meta"),n=S.f,i=0,r=Object.isExtensible||function(){return!0},o=!v(function(){return r(Object.preventExtensions({}))}),a=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!h(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!I(e,t)){if(!r(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!I(e,t)){if(!r(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&s.NEED&&r(e)&&!I(e,t)&&a(e),e}}}),Xe=(Ze.KEY,Ze.NEED,Ze.fastKey,Ze.getWeak,Ze.onFreeze,S.f),qe=function(e){var t=c.Symbol||(c.Symbol={});"_"==e.charAt(0)||e in t||Xe(t,e,{value:He.f(e)})},Qe={f:Object.getOwnPropertySymbols},Je={f:{}.propertyIsEnumerable},et=Array.isArray||function(e){return"Array"==R(e)},tt=q.concat("length","prototype"),nt={f:Object.getOwnPropertyNames||function(e){return X(e,tt)}},it=nt.f,rt={}.toString,ot="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],at={f:function(e){return ot&&"[object Window]"==rt.call(e)?function(e){try{return it(e)}catch(_c){return ot.slice()}}(e):it(P(e))}},st=Object.getOwnPropertyDescriptor,ut={f:m?st:function(e,t){if(e=P(e),t=_(t,!0),w)try{return st(e,t)}catch(_c){}if(I(e,t))return k(!Je.f.call(e,t),e[t])}},lt=Ze.KEY,ct=ut.f,ft=S.f,dt=at.f,ht=l.Symbol,pt=l.JSON,vt=pt&&pt.stringify,mt=ae("_hidden"),gt=ae("toPrimitive"),yt={}.propertyIsEnumerable,bt=G("symbol-registry"),wt=G("symbols"),_t=G("op-symbols"),Et=Object.prototype,St="function"==typeof ht,kt=l.QObject,Tt=!kt||!kt.prototype||!kt.prototype.findChild,At=m&&v(function(){return 7!=oe(ft({},"a",{get:function(){return ft(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=ct(Et,t);i&&delete Et[t],ft(e,t,n),i&&e!==Et&&ft(Et,t,i)}:ft,Ot=function(e){var t=wt[e]=oe(ht.prototype);return t._k=e,t},xt=St&&"symbol"==typeof ht.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof ht},Mt=function(e,t,n){return e===Et&&Mt(_t,t,n),p(e),t=_(t,!0),p(n),I(wt,t)?(n.enumerable?(I(e,mt)&&e[mt][t]&&(e[mt][t]=!1),n=oe(n,{enumerable:k(0,!1)})):(I(e,mt)||ft(e,mt,k(1,{})),e[mt][t]=!0),At(e,t,n)):ft(e,t,n)},Lt=function(e,t){p(e);for(var n,i=function(e){var t=Q(e),n=Qe.f;if(n)for(var i,r=n(e),o=Je.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}(t=P(t)),r=0,o=i.length;o>r;)Mt(e,n=i[r++],t[n]);return e},It=function(e){var t=yt.call(this,e=_(e,!0));return!(this===Et&&I(wt,e)&&!I(_t,e))&&(!(t||!I(this,e)||!I(wt,e)||I(this,mt)&&this[mt][e])||t)},Dt=function(e,t){if(e=P(e),t=_(t,!0),e!==Et||!I(wt,t)||I(_t,t)){var n=ct(e,t);return!n||!I(wt,t)||I(e,mt)&&e[mt][t]||(n.enumerable=!0),n}},Ct=function(e){for(var t,n=dt(P(e)),i=[],r=0;n.length>r;)I(wt,t=n[r++])||t==mt||t==lt||i.push(t);return i},Rt=function(e){for(var t,n=e===Et,i=dt(n?_t:P(e)),r=[],o=0;i.length>o;)!I(wt,t=i[o++])||n&&!I(Et,t)||r.push(wt[t]);return r};St||(M((ht=function(){if(this instanceof ht)throw TypeError("Symbol is not a constructor!");var e=V(arguments.length>0?arguments[0]:void 0);return m&&Tt&&At(Et,e,{configurable:!0,set:function t(n){this===Et&&t.call(_t,n),I(this,mt)&&I(this[mt],e)&&(this[mt][e]=!1),At(this,e,k(1,n))}}),Ot(e)}).prototype,"toString",function(){return this._k}),ut.f=Dt,S.f=Mt,nt.f=at.f=Ct,Je.f=It,Qe.f=Rt,He.f=function(e){return Ot(ae(e))}),x(x.G+x.W+x.F*!St,{Symbol:ht});for(var Nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Pt=0;Nt.length>Pt;)ae(Nt[Pt++]);for(var jt=Q(ae.store),Ft=0;jt.length>Ft;)qe(jt[Ft++]);x(x.S+x.F*!St,"Symbol",{for:function(e){return I(bt,e+="")?bt[e]:bt[e]=ht(e)},keyFor:function(e){if(!xt(e))throw TypeError(e+" is not a symbol!");for(var t in bt)if(bt[t]===e)return t},useSetter:function(){Tt=!0},useSimple:function(){Tt=!1}}),x(x.S+x.F*!St,"Object",{create:function(e,t){return void 0===t?oe(e):Lt(oe(e),t)},defineProperty:Mt,defineProperties:Lt,getOwnPropertyDescriptor:Dt,getOwnPropertyNames:Ct,getOwnPropertySymbols:Rt}),pt&&x(x.S+x.F*(!St||v(function(){var e=ht();return"[null]"!=vt([e])||"{}"!=vt({a:e})||"{}"!=vt(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(h(t)||void 0!==e)&&!xt(e))return et(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!xt(t))return t}),i[1]=t,vt.apply(pt,i)}}),ht.prototype[gt]||T(ht.prototype,gt,ht.prototype.valueOf),le(ht,"Symbol"),le(Math,"Math",!0),le(l.JSON,"JSON",!0),qe("asyncIterator"),qe("observable");var Bt=c.Symbol,zt=r(function(e){e.exports={default:Bt,__esModule:!0}});i(zt);var Ut=i(r(function(e,t){t.__esModule=!0;var n=o(Ke),i=o(zt),r="function"===typeof i.default&&"symbol"===typeof n.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===r(n.default)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)}}));!function(e,t){var n=(c.Object||{})[e]||Object[e],i={};i[e]=t(n),x(x.S+x.F*v(function(){n(1)}),"Object",i)}("keys",function(){return function(e){return Q(he(e))}});var Gt=c.Object.keys,Wt=i(r(function(e){e.exports={default:Gt,__esModule:!0}})),$t=Math.floor;x(x.S,"Number",{isInteger:function(e){return!h(e)&&isFinite(e)&&$t(e)===e}});var Vt=c.Number.isInteger,Ht=i(r(function(e){e.exports={default:Vt,__esModule:!0}})),Yt="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",Kt="["+Yt+"]",Zt=RegExp("^"+Kt+Kt+"*"),Xt=RegExp(Kt+Kt+"*$"),qt=function(e,t,n){var i={},r=v(function(){return!!Yt[e]()||"\u200b\x85"!="\u200b\x85"[e]()}),o=i[e]=r?t(Qt):Yt[e];n&&(i[n]=o),x(x.P+x.F*r,"String",i)},Qt=qt.trim=function(e,t){return e=String(u(e)),1&t&&(e=e.replace(Zt,"")),2&t&&(e=e.replace(Xt,"")),e},Jt=qt,en=l.parseFloat,tn=Jt.trim,nn=1/en(Yt+"-0")!==-1/0?function(e){var t=tn(String(e),3),n=en(t);return 0===n&&"-"==t.charAt(0)?-0:n}:en;x(x.S+x.F*(Number.parseFloat!=nn),"Number",{parseFloat:nn});var rn=parseFloat,on=i(r(function(e){e.exports={default:rn,__esModule:!0}}));function an(e){return void 0===e||null===e}function sn(e){return Array.isArray(e)}function un(e){return"function"===typeof e}function ln(e){return Object(e)===e&&"[object Object]"===String(e)&&!un(e)&&!sn(e)}function cn(e){return"number"===typeof e}function fn(e){return e instanceof Blob}function dn(e){return"string"===typeof e||e instanceof String}function hn(e){return"boolean"===typeof e}function pn(e){return an(e)||hn(e)||dn(e)||cn(e)}function vn(e){return!!("object"===("undefined"===typeof Node?"undefined":Ut(Node))?e instanceof Node:e&&"object"===("undefined"===typeof e?"undefined":Ut(e))&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName)}function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t,n){e[t]=n};return function n(i,r,o){if(sn(i)||ln(i)){for(var a in r=pn(r)?ln(i)?{}:[]:r,i)t(r,a,n(i[a],r[a],a));return r}return e(i,r,o)}}var gn=mn(function(e){return e});function yn(e,t){return e.replace(/(^|[^a-zA-Z]+)([a-zA-Z])/g,function(e,n,i,r){return t||0!==r?i.toUpperCase():i.toLowerCase()})}function bn(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var wn,_n,En,Sn=r(function(e){var t={},n={},i=e.exports=function(e,i,r,o,a){var s,u,l,c,f=a?function(){return e}:Ie(e),h=d(r,o,i?2:1),v=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(Te(f)){for(s=F(e.length);s>v;v++)if((c=i?h(p(u=e[v])[0],u[1]):h(e[v]))===t||c===n)return c}else for(l=f.call(e);!(u=l.next()).done;)if((c=Ee(l,h,u.value,i))===t||c===n)return c};i.BREAK=t,i.RETURN=n}),kn=ae("species"),Tn=function(e,t){var n,i=p(e).constructor;return void 0===i||void 0==(n=p(i)[kn])?t:f(n)},An=l.process,On=l.setImmediate,xn=l.clearImmediate,Mn=l.MessageChannel,Ln=l.Dispatch,In=0,Dn={},Cn=function(){var e=+this;if(Dn.hasOwnProperty(e)){var t=Dn[e];delete Dn[e],t()}},Rn=function(e){Cn.call(e.data)};On&&xn||(On=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Dn[++In]=function(){!function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},wn(In),In},xn=function(e){delete Dn[e]},"process"==R(An)?wn=function(e){An.nextTick(d(Cn,e,1))}:Ln&&Ln.now?wn=function(e){Ln.now(d(Cn,e,1))}:Mn?(En=(_n=new Mn).port2,_n.port1.onmessage=Rn,wn=d(En.postMessage,En,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(wn=function(e){l.postMessage(e+"","*")},l.addEventListener("message",Rn,!1)):wn="onreadystatechange"in b("script")?function(e){te.appendChild(b("script")).onreadystatechange=function(){te.removeChild(this),Cn.call(e)}}:function(e){setTimeout(d(Cn,e,1),0)});var Nn={set:On,clear:xn},Pn=Nn.set,jn=l.MutationObserver||l.WebKitMutationObserver,Fn=l.process,Bn=l.Promise,zn="process"==R(Fn);function Un(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=f(t),this.reject=f(n)}var Gn,Wn,$n,Vn,Hn={f:function(e){return new Un(e)}},Yn=function(e){try{return{e:!1,v:e()}}catch(_c){return{e:!0,v:_c}}},Kn=function(e,t){if(p(e),h(t)&&t.constructor===e)return t;var n=Hn.f(e);return(0,n.resolve)(t),n.promise},Zn=ae("species"),Xn=Nn.set,qn=function(){var e,t,n,i=function(){var i,r;for(zn&&(i=Fn.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(_c){throw e?n():t=void 0,_c}}t=void 0,i&&i.enter()};if(zn)n=function(){Fn.nextTick(i)};else if(!jn||l.navigator&&l.navigator.standalone)if(Bn&&Bn.resolve){var r=Bn.resolve();n=function(){r.then(i)}}else n=function(){Pn.call(l,i)};else{var o=!0,a=document.createTextNode("");new jn(i).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}(),Qn=l.TypeError,Jn=l.process,ei=l.Promise,ti="process"==Me(Jn),ni=function(){},ii=Wn=Hn.f,ri=!!function(){try{var e=ei.resolve(1),t=(e.constructor={})[ae("species")]=function(e){e(ni,ni)};return(ti||"function"==typeof PromiseRejectionEvent)&&e.then(ni)instanceof t}catch(_c){}}(),oi=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},ai=function(e,t){if(!e._n){e._n=!0;var n=e._c;qn(function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a=r?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{a?(r||(2==e._h&&li(e),e._h=1),!0===a?n=i:(l&&l.enter(),n=a(i),l&&l.exit()),n===t.promise?u(Qn("Promise-chain cycle")):(o=oi(n))?o.call(n,s,u):s(n)):u(i)}catch(_c){u(_c)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&si(e)})}},si=function(e){Xn.call(l,function(){var t,n,i,r=e._v,o=ui(e);if(o&&(t=Yn(function(){ti?Jn.emit("unhandledRejection",r,e):(n=l.onunhandledrejection)?n({promise:e,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=ti||ui(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},ui=function(e){return 1!==e._h&&0===(e._a||e._c).length},li=function(e){Xn.call(l,function(){var t;ti?Jn.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},ci=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),ai(t,!0))},fi=function e(t){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw Qn("Promise can't be resolved itself");(n=oi(t))?qn(function(){var r={_w:i,_d:!1};try{n.call(t,d(e,r,1),d(ci,r,1))}catch(_c){ci.call(r,_c)}}):(i._v=t,i._s=1,ai(i,!1))}catch(_c){ci.call({_w:i,_d:!1},_c)}}};ri||(ei=function(e){!function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!")}(this,ei,"Promise","_h"),f(e),Gn.call(this);try{e(d(fi,this,1),d(ci,this,1))}catch(t){ci.call(this,t)}},(Gn=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:T(e,i,t[i]);return e}(ei.prototype,{then:function(e,t){var n=ii(Tn(this,ei));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=ti?Jn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&ai(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),$n=function(){var e=new Gn;this.promise=e,this.resolve=d(fi,e,1),this.reject=d(ci,e,1)},Hn.f=ii=function(e){return e===ei||e===Vn?new $n(e):Wn(e)}),x(x.G+x.W+x.F*!ri,{Promise:ei}),le(ei,"Promise"),function(e){var t="function"==typeof c[e]?c[e]:l[e];m&&t&&!t[Zn]&&S.f(t,Zn,{configurable:!0,get:function(){return this}})}("Promise"),Vn=c.Promise,x(x.S+x.F*!ri,"Promise",{reject:function(e){var t=ii(this);return(0,t.reject)(e),t.promise}}),x(x.S+!0*x.F,"Promise",{resolve:function(e){return Kn(this===Vn?ei:this,e)}}),x(x.S+x.F*!(ri&&Re(function(e){ei.all(e).catch(ni)})),"Promise",{all:function(e){var t=this,n=ii(t),i=n.resolve,r=n.reject,o=Yn(function(){var n=[],o=0,a=1;Sn(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=ii(t),i=n.reject,r=Yn(function(){Sn(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),x(x.P+x.R,"Promise",{finally:function(e){var t=Tn(this,c.Promise||l.Promise),n="function"==typeof e;return this.then(n?function(n){return Kn(t,e()).then(function(){return n})}:e,n?function(n){return Kn(t,e()).then(function(){throw n})}:e)}}),x(x.S,"Promise",{try:function(e){var t=Hn.f(this),n=Yn(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var di=c.Promise,hi=i(r(function(e){e.exports={default:di,__esModule:!0}})),pi="undefined"!==typeof window&&"[object Object]"!==Object.prototype.toString.call(window);function vi(e){return je(e)}function mi(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!==(192&i[++t]))return!1;return!0}return!1}var gi=pi&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame)||function(e){return setTimeout(e,17)},yi=pi&&(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame)||function(e){clearTimeout(e)};function bi(e,t){var n=t,i=(e=""+(e||"")).length;return(((t=(t||i)-i)>0?e.repeat?"0".repeat(t):new Array(t+1).join("0"):"")+e).slice(0,n)}var wi=i(r(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}));x(x.S+x.F*!m,"Object",{defineProperty:S.f});var _i=c.Object,Ei=function(e,t,n){return _i.defineProperty(e,t,n)},Si=r(function(e){e.exports={default:Ei,__esModule:!0}});i(Si);var ki=i(r(function(e,t){t.__esModule=!0;var n,i=(n=Si)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()})),Ti=Object.assign,Ai=!Ti||v(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=Ti({},e)[n]||Object.keys(Ti({},t)).join("")!=i})?function(e,t){for(var n=he(e),i=arguments.length,r=1,o=Qe.f,a=Je.f;i>r;)for(var s,u=N(arguments[r++]),l=o?Q(u).concat(o(u)):Q(u),c=l.length,f=0;c>f;)a.call(u,s=l[f++])&&(n[s]=u[s]);return n}:Ti;x(x.S+x.F,"Object",{assign:Ai});var Oi=c.Object.assign,xi=i(r(function(e){e.exports={default:Oi,__esModule:!0}}));x(x.S,"Object",{create:oe});var Mi=c.Object,Li=function(e,t){return Mi.create(e,t)},Ii=i(r(function(e){e.exports={default:Li,__esModule:!0}})),Di=Ii(null);function Ci(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++Di.count);var i=n+"_"+t,r=Di[i];return r||(r=Di[i]=[]),r}function Ri(e,t,n){var i=Ii(null);i.type=t,i.target=e,n&&xi(i,ln(n)?n:{data:n}),Ci(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[i])})}function Ni(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];un(i)&&!r&&(r=i,i=void 0);var o=[n,void 0,i];i&&!r&&(r=function(){Pi(e,t,n,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(e,o)}),r&&(o[1]=r),Ci(e,t).push(o)}function Pi(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ci(e,t);if(n||i){var o=-1,a=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,a=e[1],!0}),-1!==o&&r.splice(o,1),a}r.length=0}Di.count=0;var ji=function(){function e(t,n){var i=this;if(wi(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==("undefined"===typeof t?"undefined":Ut(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}return ki(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ni(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Pi(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return Ri(this.__target,e,{data:t}),this}}]),e}(),Fi=pi?document.createElement("div"):{},Bi="innerText";"textContent"in Fi&&(Bi="textContent");var zi=Array.prototype;function Ui(e,t){return e.getAttribute(t)}function Gi(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n)}function Wi(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.add(t)});else{var i=" "+(e.className||"")+" ";n.forEach(function(e){-1===i.indexOf(" "+e+" ")&&(i+=" "+e)}),e.className=i.trim()}}}function $i(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.remove(t)});else{var i=" "+e.className+" ";n.forEach(function(e){for(var t=" "+e+" ";-1!==i.indexOf(t);)i=i.replace(t," ")}),e.className=i.trim()}}}function Vi(e,t){return new RegExp("(?:^|\\s)"+t+"(?=\\s|$)").test(e.className)}t.supportsPassive=!1;try{var Hi=Object.defineProperty({},"passive",{get:function(){t.supportsPassive=!0}});pi&&window.addEventListener("test",null,Hi)}catch(_c){console.error(_c)}function Yi(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==o&&!hn(o)&&t.supportsPassive&&(o={passive:!0}),r){var a=Pi(e,n+"_once",i);a&&(i=a)}e.removeEventListener(n,i,o)}function Ki(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==o&&!hn(o)&&t.supportsPassive&&(o={passive:!0}),r){var a=i;i=function(){for(var t=arguments.length,s=Array(t),u=0;u<t;u++)s[u]=arguments[u];a.apply(this,s),Yi(e,n,i,r,o)},Ni(e,n+"_once",a,i)}e.addEventListener(n,i,o)}function Zi(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==o&&!hn(o)&&t.supportsPassive&&(o={passive:!0});var a=function(t){var i=tr(t.target||t.srcElement,e,!0),o=Ji(n,e,!0),a=void 0;o.find?a=o.find(function(e){return i.find(function(t){return e===t})}):o.forEach(function(e){return!a&&i.forEach(function(t){a||e!==t||(a=t)})}),a&&r.apply(a,arguments)};Ni(e,i+"_delegate_"+n,r,a),e.addEventListener(i,a,o)}function Xi(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==o&&!hn(o)&&t.supportsPassive&&(o={passive:!0});var a=Pi(e,i+"_delegate_"+n,r);a&&e.removeEventListener(i,a,o)}function qi(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,null))[t]||e.style[t]}function Qi(e,t,n){if(ln(t))for(var i in t)Qi(e,i,t[i]);else e.style[t]=n}function Ji(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],i=t.querySelectorAll(e);return n?je(i):i}function er(e){e.parentNode.removeChild(e)}function tr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],i=arguments[3],r=[];for(n&&r.push(e);e&&e.parentNode!==t;)(e=e.parentNode)&&r.push(e);return i&&r.push(t),r}var nr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;wi(this,e);this.selector=t;var i=void 0;t&&t.constructor===NodeList?i=vi(t):sn(t)?i=t:dn(t)?0===t.indexOf("<")?(Fi.innerHTML=t,i=Ji("*",Fi,!0)):i=Ji(t,n,!0):i=[t],xi(this,i),this.length=i.length}return ki(e,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return zi.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return zi.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ir(zi.splice.apply(this,t))}},{key:"find",value:function(e){var t=[];this.each(function(n){t=t.concat(Ji(e,n,!0))});var n=ir(t);return n.parent=this,n.selector=e,n}},{key:"append",value:function(e){var t=ir(e),n=this[0];return t.each(function(e){return n.appendChild(e)}),this}},{key:"appendTo",value:function(e){return ir(e).append(this),this}},{key:"text",value:function(e){return 0===arguments.length?this[0][Bi]:this.each(function(t){t[Bi]=e})}},{key:"html",value:function(e){return 0===arguments.length?this[0].innerHTML:this.each(function(t){t.innerHTML=e})}},{key:"attr",value:function(e,t){return 1===arguments.length?Ui(this[0],e):this.each(function(n){return Gi(n,e,t)})}},{key:"data",value:function(e,t){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[e]:this.each(function(n){(n.dataset||(n.dataset={}))[e]=t})}},{key:"css",value:function(e,t){return 1!==arguments.length||ln(e)?this.each(function(n){return Qi(n,e,t)}):qi(this[0],e)}},{key:"addClass",value:function(e){return this.each(function(t){return Wi(t,e)})}},{key:"removeClass",value:function(e){return this.each(function(t){return $i(t,e)})}},{key:"hasClass",value:function(e){return Vi(this[0],e)}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Ki(r,e,t,n,i)})}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Yi(r,e,t,n,i)})}},{key:"delegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Zi(r,e,t,n,i)})}},{key:"undelegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Xi(r,e,t,n,i)})}},{key:"remove",value:function(){return this.each(function(e){return er(e)})}}]),e}();function ir(e,t){return e.constructor===nr?e:new nr(e,t)}function rr(e,t){if(!dn(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+("undefined"===typeof e?"undefined":Ut(e)));return dn(t)?"["+(e=or.FORCE_GLOBAL_TAG?or.GLOBAL_TAG:e||or.GLOBAL_TAG)+"] > "+t:"["+or.GLOBAL_TAG+"] > "+e}var or=function(){function e(){wi(this,e)}return ki(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,rr(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log).call(console,rr(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log).call(console,rr(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log).call(console,rr(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(rr(t,n))}}]),e}();or.GLOBAL_TAG="chimee",or.FORCE_GLOBAL_TAG=!1,or.ENABLE_ERROR=!0,or.ENABLE_INFO=!0,or.ENABLE_WARN=!0,or.ENABLE_DEBUG=!0,or.ENABLE_VERBOSE=!0;var ar=r(function(e,t){!function(n,i){var r="model",o="name",a="type",s="vendor",u="version",l="mobile",c="tablet",f={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"===typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(e,t){for(var n,i,r,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(n=i=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(r=0;r<c.length;r++)s=a[++i],"object"===typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!==typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"===typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(f.has(t[n][i],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,u],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[o,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],u],[/(edge)\/((\d+)?[\w\.]+)/i],[o,u],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],u],[/(QQ)\/([\d\.]+)/i],[o,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[o,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,u],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[u,d.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[r,s,[a,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[s,"Apple"],[a,c]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,r,[a,c]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[r,[s,"Amazon"],[a,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[r,d.str,h.device.amazon.model],[s,"Amazon"],[a,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,s,[a,l]],[/\((ip[honed|\s\w*]+);/i],[r,[s,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,r,[a,l]],[/\(bb10;\s(\w+)/i],[r,[s,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[r,[s,"Asus"],[a,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[r,"Xperia Tablet"],[a,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[r,[s,"Sony"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,r,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[r,[s,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[r,[s,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[s,d.str,h.device.sprint.vendor],[r,d.str,h.device.sprint.model],[a,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,r,[a,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[s,[r,/_/g," "],[a,l]],[/(nexus\s9)/i],[r,[s,"HTC"],[a,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[r,[s,"Huawei"],[a,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[s,r,[a,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[s,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[s,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[r,[s,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[s,"Motorola"],[a,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[s,f.trim],[r,f.trim],[a,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[r,/^/,"SmartTV"],[s,"Samsung"],[a,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[r,[s,"Sharp"],[a,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],r,[a,c]],[/smart-tv.+(samsung)/i],[s,[a,"smarttv"],r],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[s,"Samsung"],r,[a,l]],[/sie-(\w+)*/i],[r,[s,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[s,"Nokia"],r,[a,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[r,[s,"Acer"],[a,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[r,[s,"LG"],[a,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],r,[a,c]],[/(lg) netcast\.tv/i],[s,r,[a,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[r,[s,"LG"],[a,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[s,"Lenovo"],[a,c]],[/linux;.+((jolla));/i],[s,r,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[s,r,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[s,r,[a,l]],[/crkey/i],[[r,"Chromecast"],[s,"Google"]],[/android.+;\s(glass)\s\d/i],[r,[s,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)\s/i],[r,[s,"Google"],[a,c]],[/android.+;\s(pixel xl|pixel)\s/i],[r,[s,"Google"],[a,l]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,l]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[r,[s,"Meizu"],[a,c]],[/android.+a000(1)\s+build/i],[r,[s,"OnePlus"],[a,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[r,[s,"RCA"],[a,c]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[r,[s,"Dell"],[a,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[r,[s,"Verizon"],[a,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[s,"Barnes & Noble"],r,[a,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[r,[s,"NuVision"],[a,c]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[s,"ZTE"],r,[a,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[r,[s,"Swiss"],[a,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[r,[s,"Swiss"],[a,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[r,[s,"Zeki"],[a,c]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[s,"Dragon Touch"],r,[a,c]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[r,[s,"Insignia"],[a,c]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[r,[s,"NextBook"],[a,c]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[s,"Voice"],r,[a,l]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[s,"LvTel"],r,[a,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[r,[s,"Envizen"],[a,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[r,[s,"MachSpeed"],[a,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[r,[s,"Rotor"],[a,c]],[/android.+(KS(.+))\s+build/i],[r,[s,"Amazon"],[a,c]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[s,r,[a,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,f.lowerize],s,r],[/(android.+)[;\/].+build/i],[r,[s,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,u],[/rv\:([\w\.]+).*(gecko)/i],[u,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[u,d.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[u,d.str,h.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[o,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[o,"Symbian"],u],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[o,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],u],[/(sunos)\s?([\w\.]+\d)*/i],[[o,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[o,u],[/(haiku)\s(\w+)/i],[o,u],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[o,u]]},v=function e(t,i){if("object"===typeof t&&(i=t,t=void 0),!(this instanceof e))return new e(t,i).getResult();var r=t||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),o=i?f.extend(p,i):p;return this.getBrowser=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return d.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};v.VERSION="0.7.17",v.BROWSER={NAME:o,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:r,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:o,VERSION:u},v.OS={NAME:o,VERSION:u},e.exports&&(t=e.exports=v),t.UAParser=v;var m=n&&(n.jQuery||n.Zepto);if("undefined"!==typeof m){var g=new v;m.ua=g.getResult(),m.ua.get=function(){return g.getUA()},m.ua.set=function(e){g.setUA(e);var t=g.getResult();for(var n in t)m.ua[n]=t[n]}}}("object"===typeof window?window:n)});ar.UAParser,t.Log=or,t.UAParser=ar,t.genTraversalHandler=mn,t.deepClone=function(e){if(pn(e))throw new TypeError("deepClone only accept non primitive type");return gn(e)},t.deepAssign=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var i=t.length-1;i>-1;i--)if(pn(t[i]))throw new TypeError("deepAssign only accept non primitive type");var r=t.shift();return t.forEach(function(e){return gn(e,r)}),r},t.camelize=yn,t.hypenate=function(e){return yn(e).replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},t.bind=function(e,t){return e.bind?e.bind(t):e.apply?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(t,i)}:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.call.apply(e,[t].concat(Fe(i)))}},t.uuid=function(){return bn()+bn()+"-"+bn()+"-"+bn()+"-"+bn()+"-"+bn()+bn()+bn()},t.S4=bn,t.rand=function(e){for(var t="";t.length<e;)t+=bn();return t.slice(0,e)},t.getDeepProperty=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.throwError,r=void 0!==i&&i,o=n.backup;if(dn(t)&&(t=t.split(".")),!sn(t))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var a=[],s=e,u=0,l=t.length;u<l;u++){var c=t[u];if(an(s)){if(r)throw new Error("obj"+(a.length>0?"."+a.join("."):" itself")+" is "+s);return o}s=s[c],a.push(c)}return s},t.defined=function(e){return"undefined"!==typeof e},t.isVoid=an,t.isArray=sn,t.isFunction=un,t.isObject=ln,t.isNumber=cn,t.isNumeric=function(e){return!sn(e)&&e-on(e)+1>=0},t.isInteger=function(e){return Ht(e)},t.isEmpty=function(e){return sn(e)?0===e.length:ln(e)?0===Wt(e).length:!e},t.isEvent=function(e){return e instanceof Event||(e&&e.originalEvent)instanceof Event},t.isBlob=fn,t.isFile=function(e){return fn(e)&&dn(e.name)},t.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},t.isString=dn,t.isBoolean=hn,t.isPromise=function(e){return!!e&&("object"===("undefined"===typeof e?"undefined":Ut(e))||"function"===typeof e)&&"function"===typeof e.then},t.isPrimitive=pn,t.isUrl=function(e){return dn(e)&&!!e.match(/^((https?|ftp|rtsp|mms):\/\/)(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6}|localhost)(:[0-9]{1,4})?((\/?)|(\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/i)},t.isNode=vn,t.isElement=function(e){return!!("object"===("undefined"===typeof HTMLElement?"undefined":Ut(HTMLElement))?e instanceof HTMLElement:e&&"object"===("undefined"===typeof e?"undefined":Ut(e))&&null!==e&&1===e.nodeType&&"string"===typeof e.nodeName)},t.isChildNode=function(e,t){return!(!vn(e)||!vn(t))&&t.parentNode===e},t.isPosterityNode=function(e,t){if(!vn(e)||!vn(t))return!1;for(;t.parentNode;)if((t=t.parentNode)===e)return!0;return!1},t.isHTMLString=function(e){return/<[^>]+?>/.test(e)},t.isError=function(e){return e instanceof Error},t.isRegExp=function(e){return e instanceof RegExp},t.inBrowser=pi,t.makeArray=vi,t.transObjectAttrIntoArray=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return+e-+t};return Wt(e).sort(t).reduce(function(t,n){return t.concat(e[n])},[])},t.runRejectableQueue=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new hi(function(t,i){!function r(o){if(!(o>=e.length)){var a=un(e[o])?e[o].apply(e,Fe(n)):e[o];return!1===a?i("stop"):hi.resolve(a).then(function(){return r(o+1)}).catch(function(e){return i(e||"stop")})}t()}(0)})},t.runStoppableQueue=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function t(i){return i>=e.length||!1!==(un(e[i])?e[i].apply(e,Fe(n)):e[i])&&t(++i)}(0)},t.decodeUTF8=function(e){for(var t=[],n=e,i=0,r=e.length;i<r;)if(n[i]<128)t.push(String.fromCharCode(n[i])),++i;else{if(n[i]<192);else if(n[i]<224){if(mi(n,i,1)){var o=(31&n[i])<<6|63&n[i+1];if(o>=128){t.push(String.fromCharCode(65535&o)),i+=2;continue}}}else if(n[i]<240){if(mi(n,i,2)){var a=(15&n[i])<<12|(63&n[i+1])<<6|63&n[i+2];if(a>=2048&&55296!==(63488&a)){t.push(String.fromCharCode(65535&a)),i+=3;continue}}}else if(n[i]<248&&mi(n,i,3)){var s=(7&n[i])<<18|(63&n[i+1])<<12|(63&n[i+2])<<6|63&n[i+3];if(s>65536&&s<1114112){s-=65536,t.push(String.fromCharCode(s>>>10|55296)),t.push(String.fromCharCode(1023&s|56320)),i+=4;continue}}t.push(String.fromCharCode(65533)),++i}return t.join("")},t.debounce=function(e,t,n){var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=function u(){var l=new Date-a;l<t&&l>=0?i=setTimeout(u,t-l):(i=null,n||(s=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=new Date;var l=n&&!i;return i||(i=setTimeout(u,t)),l&&(s=e.apply(o,r),o=r=null),s}},t.throttle=function(e,t,n,i){var r=void 0,o=void 0,a=void 0,s=null,u=0;n||(n={});var l=function(){u=!1===n.leading?0:new Date-0,s=null,a=e.apply(r,o),s||(r=o=null)};return t=t||0,function(){var c=new Date;u||!1!==n.leading||(u=c);var f=t-(c-u);return r=i||this,o=arguments,f<=0||f>t?(s&&(clearTimeout(s),s=null),u=c,a=e.apply(r,o),s||(r=o=null)):s||!1===n.trailing||(s=setTimeout(l,f)),a}},t.raf=gi,t.caf=yi,t.strRepeat=bi,t.formatTime=function(e){var t=Math.floor(e/3600);e=Math.floor(e%3600);var n=bi(Math.floor(e/60),2),i=bi(e=Math.floor(e%60),2);return t>=1?t+":"+n+":"+i:n+":"+i},t.appendCSS=function(e){var t=document,n=t.querySelector("style");if(!n){n=t.createElement("style");var i=t.querySelector("head");i&&i.appendChild(n)}return n.appendChild(t.createTextNode(e)),n},t.formatDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss.i",n=e.getFullYear().toString(),i={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),i:e.getMilliseconds()};t=t.replace(/(y+)/gi,function(e,t){return n.substr(4-Math.min(4,t.length))});var r=function(e){t=t.replace(new RegExp("("+e+"+)","g"),function(t,n){return(i[e]<10&&n.length>1?"0":"")+i[e]})};for(var o in i)r(o);return t},t.getLocalStorage=function(e){try{return window.localStorage.getItem(e)}catch(_c){try{var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return sn(t)?unescape(t[2]):""}catch(_c){return""}}},t.setLocalStorage=function(e,t){try{window.localStorage.setItem(e,t)}catch(_c){var n=new Date;n.setTime(n.getTime()+2592e7);try{document.cookie=e+"="+escape(t)+";expires="+n.toUTCString()+";path=/;"}catch(_c){console.error(_c)}}},t.emitEventCache=Ri,t.addEventCache=Ni,t.removeEventCache=Pi,t.CustEvent=ji,t.getAttr=Ui,t.setAttr=Gi,t.addClassName=Wi,t.removeClassName=$i,t.hasClassName=Vi,t.removeEvent=Yi,t.addEvent=Ki,t.addDelegate=Zi,t.removeDelegate=Xi,t.getStyle=qi,t.setStyle=Qi,t.query=Ji,t.removeEl=er,t.findParents=tr,t.NodeWrap=nr,t.$=ir,Object.defineProperty(t,"__esModule",{value:!0})})(t)}).call(t,n(34))},function(e,t,n){e.exports=n(13)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=c(n(14)),o=c(n(15)),a=c(n(33)),s=n(11),u=c(n(35)),l=n(2);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function(){function e(t){f(this,e),this._resetForNewSession(t),this._resetForNewInterval()}return i(e,[{key:"_resetForNewSession",value:function(e){this.currentPlaybackSpeed=1,this.lastDownloadedBytes=0,this.playUrl=e,this.domain=new URL(e).hostname,this.playStartTimestampMillis=(new Date).getTime(),this.lastVideoBuffered={start:-1e9,end:-1e9}}},{key:"_resetForNewInterval",value:function(){this.currentPlaybackSpeedTimestamp=(new Date).getTime(),this.playbackSpeedStat={"0.75x":0,"1.25x":0,"1.5x":0},this.statTimestampMillis=(new Date).getTime(),this.bufferingCount=0,this.bufferingDurationMillis=0,this.bufferingStartTimestampMillis=this.bufferingStartTimestampMillis?(new Date).getTime():null,this.downloadedBytes=0,this.audioBufferedMillis=0,this.videoBufferedMillis=0,this.demuxedDurationSec=0,this.excessiveDataDroppedSec=0,this.blockCountWithBuffer=0,this.bufferDuringBlockSum=0}},{key:"videoBufferedUpdated",value:function(e){if(0!==e.length){var t=e.start(e.length-1),n=e.end(e.length-1);t>this.lastVideoBuffered.end+.001?(this.demuxedDurationSec+=n-t,this.lastVideoBuffered={start:t,end:n}):(this.demuxedDurationSec+=Math.max(0,n-this.lastVideoBuffered.end),this.lastVideoBuffered.end=n)}}},{key:"playbackSpeedChanged",value:function(e){var t=(new Date).getTime()-this.currentPlaybackSpeedTimestamp,n=Math.abs(e-.75)<.001?"0.75x":Math.abs(e-1.25)<.001?"1.25x":Math.abs(e-1.5)<.001?"1.5x":null;n&&(this.playbackSpeedStat[n]+=t,this.currentPlaybackSpeedTimestamp=(new Date).getTime())}},{key:"bufferingStarted",value:function(e){++this.bufferingCount,this.bufferingStartTimestampMillis=(new Date).getTime(),e>.3&&(this.bufferDuringBlockSum+=e,this.blockCountWithBuffer++)}},{key:"bufferingEnded",value:function(){var e=(new Date).getTime();null!=this.bufferingStartTimestampMillis&&(this.bufferingDurationMillis+=e-this.bufferingStartTimestampMillis),this.bufferingStartTimestampMillis=null}},{key:"updateDownloadedBytes",value:function(e){var t=e-this.lastDownloadedBytes;this.downloadedBytes+=t,this.lastDownloadedBytes=e}},{key:"setAudioBufferedSec",value:function(e){this.audioBufferedMillis=Math.round(1e3*e)}},{key:"setVideoBufferedSec",value:function(e){this.videoBufferedMillis=Math.round(1e3*e)}},{key:"excessiveDataDropped",value:function(e){this.excessiveDataDroppedSec+=e}},{key:"buildAndStartNewInterval",value:function(){var e=(new Date).getTime(),t=null==this.bufferingStartTimestampMillis?0:e-this.bufferingStartTimestampMillis,n=(this.bufferingStartTimestampMillis,{play_url:this.playUrl,domain:this.domain,play_start_time:this.playStartTimestampMillis,tick_start:this.statTimestampMillis,tick_duration:e-this.statTimestampMillis,block_count:this.bufferingCount,buffer_time:this.bufferingDurationMillis+t,kbytes_received:this.downloadedBytes>>10,played_video_duration:e-this.statTimestampMillis-(this.bufferingDurationMillis+t),demuxed_video_duration:Math.round(1e3*this.demuxedDurationSec),dropped_packet_duration:Math.round(1e3*this.excessiveDataDroppedSec),a_buf_len:this.audioBufferedMillis,v_buf_len:this.videoBufferedMillis,speed_chg_metric:this.playbackSpeedStat,block_count_with_buffer:this.blockCountWithBuffer,buffer_during_block:this.blockCountWithBuffer>0?Math.round(this.bufferDuringBlockSum/this.blockCountWithBuffer*1e3):0});return this._resetForNewInterval(),n}}]),e}(),h=function(e){function t(e,n){f(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.tag="flv-player",i.video=e,i.box="flv",i.timer=null,i.seekTimer=null,i.checkBufferTimer=null,i.realtimeBeaconTimer=null,i.config=(0,s.deepAssign)({},a.default,n),i.requestSetTime=!1,i.throttle=null,i.bindEvents(),i.attachMedia(),i.initLogger(),console.log("kernel",t.version),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.CustEvent),i(t,null,[{key:"isSupport",value:function(){var e=(new s.UAParser).getBrowser();return!("Safari"===e.name&&parseInt(e.major)<10)&&!(!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.640020,mp4a.40.2"'))}},{key:"version",get:function(){return"1.4.10"}}]),i(t,[{key:"initLogger",value:function(){var e=this;this.logger=new u.default,this.logger.on("performance",function(t){e.emit("performance",t.data)})}},{key:"internalPropertyHandle",value:function(){if(Object.getOwnPropertyDescriptor){var e=this,t=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");Object.defineProperty(this.video,"currentTime",{get:function(){return t.get.call(e.video)},set:function(n){if(e.currentTimeLock)return t.set.call(e.video,n);throw new Error("can not set currentTime by youself")}})}}},{key:"bindEvents",value:function(){this.video&&(this._onVideoCanplay=this._onVideoCanplay.bind(this),this._onVideoWaiting=this._onVideoWaiting.bind(this),this._onVideoPlaying=this._onVideoPlaying.bind(this),this._onVideoTimeupdate=this._onVideoTimeupdate.bind(this),this.video.addEventListener("canplay",this._onVideoCanplay),this.video.addEventListener("waiting",this._onVideoWaiting),this.video.addEventListener("playing",this._onVideoPlaying),this.video.addEventListener("timeupdate",this._onVideoTimeupdate),this._lastBufferd=null,this.checkBufferTimer=setInterval(this._checkBuffer.bind(this),200))}},{key:"unbindMediaSourceEvent",value:function(e){e.off("error"),e.off("bufferFull"),e.off("updateend"),e.off("player-event")}},{key:"attachMedia",value:function(){var e=this;this.mediaSource=new r.default(this.video,this.config),this.mediaSource.on("error",function(t){e.emit("error",t.data),e.transmuxer&&e.transmuxer.pause()}),this.mediaSource.on("bufferFull",function(){e.pauseTransmuxer()}),this.mediaSource.on("updateend",function(){e.onmseUpdateEnd()}),this.mediaSource.on("player-event",function(t){e.logger.record(t.data)})}},{key:"load",value:function(e){e&&(this.config.src=e),this.realtimeBeaconBuilder=new d(this.config.src),this.realtimeBeaconTimer=setInterval(this._sendRealtimeBeacon.bind(this),1e4),this.transmuxer=new o.default(this.mediaSource,this.config,this.globalEvent),this.transmuxerEvent(this.transmuxer),this.transmuxer.loadSource()}},{key:"unbindTransmuxerEvent",value:function(e){e.off("mediaSegment"),e.off("mediaSegmentInit"),e.off("error"),e.off("end"),e.off("heartbeat"),e.off("performance"),e.off("mediaInfo"),e.off("player-event")}},{key:"transmuxerEvent",value:function(e){var t=this,n=this.mediaSource;e.on("mediaSegment",function(e){n.emit("mediaSegment",e.data)}),e.on("mediaSegmentInit",function(e){n.emit("mediaSegmentInit",e.data)}),e.on("error",function(i){t.emit("error",i.data),e.pause(),n.pause()}),e.on("end",function(e){n.endOfStream()}),e.on("heartbeat",function(e){t.emit("heartbeat",e.data),t.realtimeBeaconBuilder.updateDownloadedBytes(e.data.totalReceive)}),e.on("performance",function(e){var n=e.data,i=n.type,r=n.value;return"first-flv-to-mp4"===i?(t.firstFlvToMp4=t.firstFlvToMp4||0,void(t.firstFlvToMp4+=r)):"receive-first-package-duration"===i?(t.receiveFirstPAckageDuration=t.receiveFirstPAckageDuration||0,void(t.receiveFirstPAckageDuration+=r)):void("first-flv-package-duration"===i&&(t.firstFlvPackageDuration=t.firstFlvPackageDuration||0,t.firstFlvPackageDuration+=r))}),e.on("mediaInfo",function(e){t.mediaInfo?t.emit("mediaInfo",e.data):(t.mediaInfo=e,t.emit("mediaInfo",e.data),n.init(e.data),t.video.src=URL.createObjectURL(n.mediaSource),t.video.addEventListener("seeking",t._throttle.call(t)))}),e.on("player-event",function(e){t.logger.record(e.data)})}},{key:"_throttle",value:function(){return this.throttle=(0,s.throttle)(this._seek.bind(this),200,{leading:!1}),this.throttle}},{key:"isTimeinBuffered",value:function(e){for(var t=this.video.buffered,n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(e>=i&&e<r)return!0}return!1}},{key:"_getBufferEnd",value:function(e,t){for(var n=0;n<e.length;n++){var i=e.start(n),r=e.end(n);if(i<=t&&t<r)return r}}},{key:"getCurrentBufferEnd",value:function(){return this._getBufferEnd(this.video.buffered,this.video.currentTime)}},{key:"_seek",value:function(e){var t=this;this.currentTimeLock=!0;var n=(0,s.isNumber)(e)&&!isNaN(e)?e:this.video.currentTime;if(this.requestSetTime)return this.requestSetTime=!1,void(this.currentTimeLock=!1);if(this.isTimeinBuffered(n)){if(this.config.alwaysSeekKeyframe){var i=this.transmuxer.getNearestKeyframe(Math.floor(1e3*n));i&&(this.requestSetTime=!0,this.video.currentTime=i.keyframetime/1e3)}}else{s.Log.verbose(this.tag,"do seek"),this.transmuxer.pause();var r=this.transmuxer.getNearestKeyframe(Math.floor(1e3*n));n=r.keyframetime/1e3,this.seekTimer=setTimeout(function(){t.mediaSource.seek(n),t.transmuxer.seek(r)},100),this.requestSetTime=!0,this.video.currentTime=n,window.clearInterval(this.timer),this.timer=null}return this.currentTimeLock=!1,n}},{key:"onmseUpdateEnd",value:function(){(this.mediaSource.sourceBuffer.video&&this.realtimeBeaconBuilder.videoBufferedUpdated(this.mediaSource.sourceBuffer.video.buffered),this.config.isLive)||this.getCurrentBufferEnd()>=this.video.currentTime+this.config.lazyLoadMaxDuration&&null===this.timer&&(s.Log.verbose(this.tag,"Maximum buffering duration exceeded, suspend transmuxing task"),this.pauseTransmuxer())}},{key:"heartbeat",value:function(){for(var e=this.video.currentTime,t=this.video.buffered,n=!1,i=0;i<t.length;i++){var r=t.start(i),o=t.end(i);if(e>=r&&e<o){e>=o-this.config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this.timer),this.timer=null,s.Log.verbose(this.tag,"Continue loading from paused position"),this.transmuxer.resume(),this.mediaSource.resume())}},{key:"_checkBuffer",value:function(){var e=this;if(this.config.isLive){var t=this.getCurrentBufferEnd();if("undefined"===typeof t){var n=this.video.buffered,i=n.length;if(!(i>0&&n.start(i-1)>this.video.currentTime+.001))return;s.Log.verbose("currentTime being in no-data GaP detected. Jumping to "+n.start(i-1)),this.video.currentTime=n.start(i-1),t=n.end(i-1)}var r=t-this.video.currentTime;if(null!=this._lastBufferd){var o=function(t){s.Log.verbose("Change playback rate from "+e.video.playbackRate+" to "+t+", buffered:"+r),e.video.playbackRate=t,e.realtimeBeaconBuilder.playbackSpeedChanged(t)};this.video.playbackRate<.999?r>4.999&&o(1):this.video.playbackRate>1.001&&r<5.001&&o(1)}this._lastBufferd=r}}},{key:"_sendRealtimeBeacon",value:function(){if(this.mediaSource.sourceBuffer.audio){var e=this._getBufferEnd(this.mediaSource.sourceBuffer.audio.buffered,this.video.currentTime);this.realtimeBeaconBuilder.setAudioBufferedSec(e-this.video.currentTime)}if(this.mediaSource.sourceBuffer.video){var t=this._getBufferEnd(this.mediaSource.sourceBuffer.video.buffered,this.video.currentTime);this.realtimeBeaconBuilder.setVideoBufferedSec(t-this.video.currentTime)}var n=this.realtimeBeaconBuilder.buildAndStartNewInterval();this.emit("realtimeBeacon",n)}},{key:"_onVideoCanplay",value:function(){this.logger.record({type:l.PLAYER_EVENTS.CANPLAY,ts:Date.now()}),this.config.isLive&&this.video.play(),this.config.lockInternalProperty&&this.internalPropertyHandle()}},{key:"_onVideoWaiting",value:function(){if(this.video&&!this.video.seeking){var e=0,t=this.video.buffered;t.length>0&&(e=this.video.buffered.end(t.length-1)-this.video.currentTime),this.realtimeBeaconBuilder.bufferingStarted(e)}}},{key:"_onVideoPlaying",value:function(){for(var e=0,t=this.video.buffered,n=0;n<t.length;n++)if(t.start(n)-.1<=this.video.currentTime&&t.end(n)>=this.video.currentTime){e=t.end(n)-this.video.currentTime;break}this.logger.record({type:l.PLAYER_EVENTS.PLAYING,buffered:e,ts:Date.now()}),this.realtimeBeaconBuilder.bufferingEnded()}},{key:"_onVideoTimeupdate",value:function(){console.log("time update"),this.video.removeEventListener("timeupdate",this._onVideoTimeupdate),this.logger.record({type:l.PLAYER_EVENTS.TIMEUPDATE,ts:Date.now()})}},{key:"pauseTransmuxer",value:function(){this.transmuxer.pause(),this.mediaSource.pause(),this.timer||(this.timer=setInterval(this.heartbeat.bind(this),1e3))}},{key:"resume",value:function(){this._seek(0)}},{key:"destroy",value:function(){window.clearInterval(this.timer),window.clearInterval(this.seekTimer),window.clearInterval(this.checkBufferTimer),this.realtimeBeaconTimer&&(window.clearInterval(this.realtimeBeaconTimer),this._sendRealtimeBeacon(),this.realtimeBeaconTimer=null),this.video.removeEventListener("canplay",this._onVideoCanplay),this.video.removeEventListener("seeking",this.throttle),this.video.removeEventListener("waiting",this._onVideoWaiting),this.video.removeEventListener("playing",this._onVideoPlaying),this.video.removeEventListener("timeupdate",this._onVideoTimeupdate),this.video&&(URL.revokeObjectURL(this.video.src),this.video.src="",this.video.removeAttribute("src"),this.transmuxer&&(this.unbindTransmuxerEvent(this.transmuxer),this.transmuxer.pause(),this.transmuxer.destroy(),this.transmuxer=null),this.mediaSource&&(this.unbindMediaSourceEvent(this.mediaSource),this.mediaSource.destroy(),this.mediaSource=null)),this.logger.off("performance"),this.logger=null}},{key:"seek",value:function(e){return this._seek(e)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){return this.video.pause()}},{key:"refresh",value:function(){this.transmuxer&&this.mediaSource?this._seek(0):s.Log.verbose(this.tag,"transmuxer & mediaSource not ready")}},{key:"stopLoad",value:function(){this.transmuxer&&this.transmuxer.pause(),this.mediaSource&&this.mediaSource.pause(),this.realtimeBeaconTimer&&(window.clearInterval(this.realtimeBeaconTimer),this._sendRealtimeBeacon(),this.realtimeBeaconTimer=null)}}]),t}();t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(4),s=(i=a)&&i.__esModule?i:{default:i},u=n(1),l=n(2);var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.video=e,i.config=n,i.tag="mse-controller",i.e={onSourceOpen:i.onSourceOpen.bind(i),onSourceEnded:i.onSourceEnded.bind(i),onSourceClose:i.onSourceClose.bind(i),onSourceBufferError:i.onSourceBufferError.bind(i)},i.hasVideo=!0,i.hasAudio=!0,i.removeRangesList={video:[],audio:[]},i.removeBucketing=!1,i.timer={video:null,audio:null},i.queue={video:[],audio:[]},i.sourceBuffer={video:null,audio:null},i.mimeCodec={video:null,audio:null},i.sourceBufferEvent(),i.complete=!1,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.CustEvent),r(t,[{key:"init",value:function(e){if(this.emit("player-event",{type:l.PLAYER_EVENTS.MEDIA_INFO,ts:Date.now()}),this.mediaSource)return s.default.Error(this.tag,"MediaSource has been attached to an HTMLMediaElement!"),void this.emit("error",{errno:u.ERRORNO.MEDIASOURCE_ERROR,errmsg:"MediaSource has been attached to an HTMLMediaElement!"});e.hasAudio?this.mimeCodec.audio='audio/mp4; codecs="'+e.audioCodec+'"':this.hasAudio=!1,e.hasVideo?this.mimeCodec.video='video/mp4; codecs="'+e.videoCodec+'"':this.hasVideo=!1;var t=this.mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose)}},{key:"onSourceOpen",value:function(){s.default.verbose(this.tag,"MediaSource onSourceOpen"),this.mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this.hasAudio&&this.addSourceBuffer("audio"),this.hasVideo&&this.addSourceBuffer("video"),this.hasQueueList()&&this.doUpdate(),this.emit("source_open")}},{key:"addSourceBuffer",value:function(e){var t=this;this.sourceBuffer[e]=this.mediaSource.addSourceBuffer(this.mimeCodec[e]),s.default.verbose(this.tag,"add sourcebuffer "+e);var n=this.sourceBuffer[e];n.addEventListener("error",this.e.onSourceBufferError),n.addEventListener("abort",function(){return s.default.verbose(t.tag,"sourceBuffer: abort")}),n.addEventListener("updateend",function(){t.sourceBuffer&&(t.hasRemoveList()?(t.removeRangesList.video.length&&t.cleanRangesList("video"),t.removeRangesList.audio.length&&t.cleanRangesList("audio")):t.hasQueueList()?t.doUpdate():t.complete&&!t.sourceBuffer[e].updating&&t.endOfStream(),t.emit("updateend"))})}},{key:"hasRemoveList",value:function(){return this.removeRangesList.video.length||this.removeRangesList.audio.length}},{key:"hasQueueList",value:function(){return this.queue.video.length||this.queue.audio.length}},{key:"doUpdate",value:function(){for(var e in this.queue)if(this.queue[e].length>0&&!this.sourceBuffer[e].updating){var t=this.queue[e].shift();this.appendBuffer(t,e)}}},{key:"sourceBufferEvent",value:function(){var e=this;this.on("mediaSegment",function(t){var n=t.data,i=n.type;e.emit("player-event",{type:l.PLAYER_EVENTS.MEDIA_SEGMENT,byteLength:n.data.byteLength,ts:Date.now()}),e.needCleanupSourceBuffer(i)&&e.doCleanupSourceBuffer(i),e.queue[i].push(n.data),e.sourceBuffer[i]&&!e.hasRemoveList()&&e.doUpdate()}),this.on("mediaSegmentInit",function(t){e.emit("player-event",{type:l.PLAYER_EVENTS.MEDIA_SEGMENT_INIT,ts:Date.now()});var n=t.data,i=n.type;e.queue[i].push(n.data)})}},{key:"needCleanupSourceBuffer",value:function(e){var t=this.video.currentTime,n=this.video.buffered;return n.length>=1&&t-n.start(0)>=this.config.autoCleanupMaxBackwardDuration}},{key:"doCleanupSourceBuffer",value:function(e){for(var t=this.video.currentTime,n=this.sourceBuffer[e].buffered,i=!1,r=0;r<n.length;r++){var o=n.start(r),a=n.end(r);if(o<=t&&t<a+3&&t-o>=this.config.autoCleanupMaxBackwardDuration){i=!0;var s=t-this.config.autoCleanupMinBackwardDuration;this.removeRangesList[e].push({start:o,end:s})}}i&&!this.sourceBuffer[e].updating&&this.cleanRangesList(e)}},{key:"cleanRangesList",value:function(e){if(!this.sourceBuffer[e].updating)for(var t=this.sourceBuffer[e];this.removeRangesList[e].length&&!t.updating;){var n=this.removeRangesList[e].shift();t.remove(n.start,n.end)}}},{key:"appendBuffer",value:function(e,t){if(this.sourceBuffer[t])try{this.sourceBuffer[t].appendBuffer(e.buffer)}catch(_c){var n=this.video.currentTime-3;if(console.log("removeEnd",n),n>0)for(var i in this.sourceBuffer)this.sourceBuffer[i].remove(0,n);this.queue[t].unshift(e),setTimeout(this.doUpdate.bind(this),100),console.error(_c)}}},{key:"onSourceEnded",value:function(){s.default.verbose(this.tag,"MediaSource onSourceEnded")}},{key:"onSourceClose",value:function(){s.default.verbose(this.tag,"MediaSource onSourceClose"),this.mediaSource&&null!==this.e&&(this.mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this.mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this.mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}},{key:"onSourceBufferError",value:function(e){this.emit("error",{errnono:u.ERRORNO.SOURCEBUFFER_ERROR,errmsg:e.message}),s.default.error(this.tag,"SourceBuffer Error: "+e)}},{key:"seek",value:function(){for(var e in this.sourceBuffer){var t=this.sourceBuffer[e];if(t){if("open"===this.mediaSource.readyState)try{t.abort()}catch(_c){this.emit("error",{errno:u.ERRORNO.SBABORT_ERROR,errmsg:_c}),s.default.error(this.tag,_c.message)}this.queue[e]=[];for(var n=0;n<t.buffered.length;n++){var i=t.buffered.start(n),r=t.buffered.end(n);this.removeRangesList[e].push({start:i,end:r})}t.updating||this.cleanRangesList(e)}}}},{key:"resume",value:function(){this.doUpdate()}},{key:"pause",value:function(){}},{key:"endOfStream",value:function(){if(this.mediaSource){var e=this.mediaSource;this.complete=!0;var t=this.sourceBuffer;if(t.video&&t.video.updating||t.audio&&t.audio.updating)return;if("open"===e.readyState)try{e.endOfStream(),this.complete=!1}catch(n){s.default.verbose(this.tag,n),this.emit("error",{errno:u.ERRORNO.ENDOFSTREAM_ERROR,errmsg:n})}}}},{key:"destroy",value:function(){if(this.mediaSource){var e=this.mediaSource;this.queue={video:[],audio:[]},this.sourceBuffer={video:null,audio:null},this.mimeCodec={video:null,audio:null};var t=this.sourceBuffer;this.complete=!1,this.endOfStream(),t&&("closed"!==e.readyState&&(e.removeSourceBuffer(t),t.removeEventListener("error",this.e.onSourceBufferError),t.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)),this.sourceBuffer=null),e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this.mediaSource=null}this.off("mediaSegmentInit"),this.off("mediaSegment")}}]),t}();t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=c(n(5)),o=n(0),a=c(n(21)),s=c(n(7)),u=n(1),l=n(2);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.config=n||{},r.tag="transmuxer",r.loader=null,r.CPU=null,r.keyframePoint=!1,r.w=null,r.config.webWorker&&(r.onWorkMessage=r.onWorkMessage.bind(r),r.w=(0,a.default)(32),r.w.addEventListener("message",r.onWorkMessage),r.w.postMessage(JSON.parse(JSON.stringify({cmd:"init",data:n})))),r.lock=0,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.CustEvent),i(t,[{key:"onWorkMessage",value:function(e){this.parseCallback.call(this,e.data)}},{key:"loadSource",value:function(){this.config.webWorker?this.w.postMessage({cmd:"loadSource"}):(this.loader=new r.default(this.config),this.loader.arrivalDataCallback=this.arrivalDataCallback.bind(this),this.loaderBindEvent(this.loader),this.loader.open())}},{key:"loaderBindEvent",value:function(e){var t=this;e.on("end",function(){t.emit("end")}),e.on("error",function(e){t.emit("error",e.data)}),e.on("heartbeat",function(e){t.emit("heartbeat",e.data)}),this.loader.on("player-event",function(e){t.emit("player-event",e.data)})}},{key:"loaderUnbindEvent",value:function(e){e.off("end"),e.off("error"),e.off("heartbeat"),e.off("player-event")}},{key:"arrivalDataCallback",value:function(e,t,n){var i=this;return this.CPU||(this.CPU=new s.default(this.config),this.CPU.onInitSegment=this.onRemuxerInitSegmentArrival.bind(this),this.CPU.onMediaSegment=this.onRemuxerMediaSegmentArrival.bind(this),this.CPU.onMediaInfo=this.onMediaInfo.bind(this),this.CPU.onCdnDropFrame=this.onCdnDropFrame.bind(this),this.CPU.on("error",function(e){i.emit("error",{errno:u.ERRORNO.CODEC_ERROR,errmsg:e.data})})),void 0!==n&&this.CPU.seek(n),this.emit("player-event",{type:l.PLAYER_EVENTS.MEDIA_DEMUX_FLV,byteLength:e.byteLength,ts:Date.now()}),this.CPU.setflv(e)}},{key:"parseCallback",value:function(e){switch(e.cmd){case"mediaSegmentInit":this.emit("mediaSegmentInit",e.source);break;case"mediaSegment":this.emit("mediaSegment",e.source);break;case"mediainfo":this.mediaInfo=e.source,this.emit("mediaInfo",e.source);break;case"end":this.emit("end");break;case"error":this.emit("error",e.source);break;case"player-event":this.emit("player-event",e.source);break;case"heartbeat":this.emit("heartbeat",e.source);break;case"cdnDropFrame":this.emit("cdnDropFrame",{dropAudio:e.source})}}},{key:"onMediaInfo",value:function(e){this.mediaInfo=e,this.emit("mediaInfo",e)}},{key:"onCdnDropFrame",value:function(e){this.emit("cdnDropFrame",{dropAudio:e})}},{key:"onRemuxerInitSegmentArrival",value:function(e,t){this.emit("mediaSegmentInit",{type:"video",data:e}),t&&this.emit("mediaSegmentInit",{type:"audio",data:t})}},{key:"onRemuxerMediaSegmentArrival",value:function(e,t){this.emit("mediaSegment",{type:e,data:t})}},{key:"getMediaInfo",value:function(){return this.mediaInfo}},{key:"pause",value:function(){this.config.webWorker?this.w.postMessage({cmd:"pause"}):this.loader.pause()}},{key:"resume",value:function(){this.config.webWorker?this.w.postMessage({cmd:"resume"}):this.loader.resume()}},{key:"isSeekable",value:function(){return this.mediaInfo.hasKeyframesIndex}},{key:"seek",value:function(e){if(!this.isSeekable())return this.emit("error",{errno:u.ERRORNO.CANNOT_SEEK,errmsg:"\u8fd9\u4e2aflv\u89c6\u9891\u4e0d\u652f\u6301seek"}),!1;this.config.webWorker?this.w.postMessage({cmd:"seek",keyframe:e}):this.loader.seek(e.keyframePoint,!1,e.keyframetime)}},{key:"destroy",value:function(){this.config.webWorker?(this.w.postMessage({cmd:"destroy"}),this.w.removeEventListener("message",this.onWorkMessage),this.w.terminate()):(this.loader&&(this.loaderUnbindEvent(this.loader),this.loader.destroy(),this.loader=null),this.CPU&&(this.CPU.off("error"),this.CPU=null))}},{key:"getNearestKeyframe",value:function(e){if(this.mediaInfo&&this.mediaInfo.keyframesIndex){var t=this.mediaInfo.keyframesIndex.times,n=this.mediaInfo.keyframesIndex.filepositions;return function e(i,r){var o=i.length,a=Math.floor(o/2);if(1===o){var s=t.indexOf(i[0]);return{keyframetime:i[0],keyframePoint:n[s]}}if(i[a]>r)return e(i.slice(0,a),r);if(i[a]<r)return e(i.slice(a),r);var u=t.indexOf(i[0]);return{keyframetime:i[0],keyframePoint:n[u]}}(t,e)}return 0}}]),t}();t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(17)),o=n(0),a=u(n(4)),s=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.tag="fetch",i.fetching=!1,i.config=n,i.range={from:0,to:524288},i.src=e,i.totalRange=null,i.block=524288,i.reader=null,i.requestAbort=!1,i.arrivalDataCallback=null,i.bytesStart=0,i.heartbeat=null,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.CustEvent),i(t,null,[{key:"isSupport",value:function(){return!(!self.fetch||!self.ReadableStream)}}]),i(t,[{key:"open",value:function(e,t){var n=this;this.requestAbort=!1;var i=new Headers,o=e||{from:0,to:-1};if(!this.config.isLive){this.range.from=o.from,this.range.to=o.to;var a=(0,r.default)(o,this.config);if("string"===typeof a)this.src=this.config.src+a;else for(var u in a)i.append(u,a[u])}t&&(this.bytesStart=0),this.bytesStart=e.from;var l={method:"GET",headers:i,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},c=Date.now();fetch(this.src,l).then(function(e){if(n.emit("performance",{type:"receive-first-package-duration",value:Date.now()-c}),e.ok){var i=e.body.getReader();return n.pump(i,t)}}).catch(function(e){n.emit("error",{errno:s.ERRORNO.NET_ERROR,errmsg:e.toString()})})}},{key:"pause",value:function(){this.requestAbort=!0}},{key:"pump",value:function(e,t){var n=this;return e.read().then(function(i){if(i.done)n.emit("end"),a.default.verbose(n.tag,"load end");else{if(!0===n.requestAbort)return n.requestAbort=!1,e.cancel();var r=i.value.buffer;n.arrivalDataCallback&&(n.arrivalDataCallback(r,n.bytesStart,t),n.bytesStart+=r.byteLength),setTimeout(function(){n.pump(e)},0)}}).catch(function(e){n.emit("error",{errno:s.ERRORNO.NET_ERROR,errmsg:e.message})})}}]),t}();t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("range"===t.seekType){var n={},i=void 0;return i=-1!==e.to?"bytes="+e.from.toString()+"-"+e.to.toString():"bytes="+e.from.toString()+"-",n.Range=i,n}return-1!==e.to?"?start="+e.from.toString()+"&end="+e.to.toString():"?start="+e.from.toString()}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(6),a=(i=o)&&i.__esModule?i:{default:i},s=n(0),u=n(1);var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.tag="RangeLoader",i.xhr=null,i.src=e,i.totalLength=null,i.chunkSizeKB=524288,i.range={},i.bytesStart=0,i.needSeek=!1,i.keyframePoint=null,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.CustEvent),r(t,null,[{key:"isSupport",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(_c){return!1}}}]),r(t,[{key:"open",value:function(e,t){var n=this.xhr=new XMLHttpRequest;n.open("GET",this.src,!0),n.responseType="arraybuffer",n.onreadystatechange=this.onReadyStateChange.bind(this),n.onprogress=this.onProgress.bind(this),n.onload=this.onLoad.bind(this),n.onerror=this.onXhrError.bind(this);var i=e||{from:0,to:-1};this.range.from=i.from,-1===i.to&&(i.to=i.from+this.chunkSizeKB),t&&(this.bytesStart=e.from,this.needSeek=!0,this.keyframePoint=t),this.range.to=i.to;var r=(0,a.default)(i).headers;for(var o in r)n.setRequestHeader(o,r[o]);n.send()}},{key:"pause",value:function(){this.abort()}},{key:"abort",value:function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr.abort(),this.xhr=null)}},{key:"destroy",value:function(){this.xhr&&(this.abort(),this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr=null),this.totalLength=null,this.bytesStart=null,this.range={}}},{key:"onReadyStateChange",value:function(e){var t=this.xhr;if(2===t.readyState&&t.status<200&&t.status>299){var n={from:this.range.from,to:this.range.to,url:this.src,msg:"http Error: http code "+t.status};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:n})}}},{key:"onProgress",value:function(e){this.totalLength||(this.totalLength=e.total,this.abort(),this.open())}},{key:"onLoad",value:function(e){if(this.totalLength&&this.arrivalDataCallback){var t=e.target.response;this.needSeek?(this.needSeek=!1,this.arrivalDataCallback(t,this.bytesStart,this.keyframePoint)):this.arrivalDataCallback(t,this.bytesStart),this.bytesStart+=t.byteLength,this.open({from:this.bytesStart,to:-1})}}},{key:"onXhrError",value:function(e){var t={from:this.range.from,to:this.range.to,url:this.src,msg:e.constructor.name+" "+e.type};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:t})}}]),t}();t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=n(1);var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.tag="WebSocket",i.src=e,i._ws=null,i._requestAbort=!1,i._receivedLength=0,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.CustEvent),i(t,null,[{key:"isSupported",value:function(){try{return"undefined"!==typeof window.WebSocket}catch(_c){return!1}}}]),i(t,[{key:"open",value:function(e,t){try{var n=this._ws=new self.WebSocket(this.src);n.binaryType="arraybuffer",n.onopen=this.onWebSocketOpen.bind(this),n.onclose=this.onWebSocketClose.bind(this),n.onmessage=this.onWebSocketMessage.bind(this),n.onerror=this.onWebSocketError.bind(this)}catch(_c){var i={code:_c.code,msg:_c.message};this.emit("error",{errno:o.ERRORNO.NET_ERROR,errmsg:i})}}},{key:"pause",value:function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null}},{key:"onWebSocketClose",value:function(e){!0!==this._requestAbort?this.emit("end"):this._requestAbort=!1}},{key:"onWebSocketOpen",value:function(){}},{key:"onWebSocketMessage",value:function(e){var t=this;if(e.data instanceof ArrayBuffer)this.dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t.dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{var i={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};this.emit("error",{errno:o.ERRORNO.NET_ERROR,errmsg:i})}}},{key:"dispatchArrayBuffer",value:function(e){var t=e,n=this.receivedLength;this.receivedLength+=t.byteLength,this.arrivalDataCallback&&this.arrivalDataCallback(t,n)}},{key:"onWebSocketError",value:function(e){var t={code:e.code,msg:e.message};this.emit("error",{errno:o.ERRORNO.NET_ERROR,errmsg:t})}}]),t}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(6),a=(i=o)&&i.__esModule?i:{default:i},s=n(0),u=n(1);var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.tag="mozChunkLoader",i.xhr=null,i.src=e,i.config=n,i.totalLength=null,i.chunkSizeKB=393216,i.range={},i.bytesStart=0,i.keyframePoint=null,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.CustEvent),r(t,null,[{key:"isSupport",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(_c){return!1}}}]),r(t,[{key:"open",value:function(e,t){var n=this.xhr=new XMLHttpRequest;if(n.open("GET",this.src,!0),n.responseType="moz-chunked-arraybuffer",n.onreadystatechange=this.onReadyStateChange.bind(this),n.onprogress=this.onProgress.bind(this),n.onload=this.onLoadEnd.bind(this),n.onerror=this.onXhrError.bind(this),!this.config.isLive){var i=e||{from:0,to:-1};this.range.from=i.from,this.range.to=i.to,t&&(this.needSeek=!0,this.keyframePoint=t);var r=(0,a.default)(i).headers;for(var o in r)n.setRequestHeader(o,r[o])}n.send()}},{key:"pause",value:function(){this.abort()}},{key:"abort",value:function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr.abort(),this.xhr=null)}},{key:"destroy",value:function(){this.xhr&&(this.abort(),this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr=null),this.totalLength=null,this.bytesStart=null,this.range={}}},{key:"onReadyStateChange",value:function(e){var t=this.xhr;if(2===t.readyState&&t.status<200&&t.status>299){var n={from:this.range.from,to:this.range.to,url:this.src,msg:"http Error: http code "+t.status};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:n})}}},{key:"onProgress",value:function(e){this.totalLength||(this.totalLength=e.total,null!==e.total&&0!==e.total&&(this.totalLength=e.total));var t=e.target.response;this.needSeek?(this.needSeek=!1,this.arrivalDataCallback(t,this.bytesStart,this.keyframePoint)):this.arrivalDataCallback(t,this.bytesStart),this.bytesStart+=t.byteLength}},{key:"onLoadEnd",value:function(e){this.emit(this.tag,"video load end")}},{key:"onXhrError",value:function(e){var t={from:this.range.from,to:this.range.to,url:this.src,msg:e.constructor.name+" "+e.type};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:t})}}]),t}();t.default=l},function(e,t,n){function i(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var i=n(n.s=ENTRY_MODULE);return i.default||i}var r="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+r+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,i){var s={};s[i]=[];var u=t.toString(),l=u.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var c,f=l[1],d=new RegExp("(\\\\n|\\W)"+a(f)+o,"g");c=d.exec(u);)"dll-reference"!==c[3]&&s[i].push(c[3]);for(d=new RegExp("\\("+a(f)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+o,"g");c=d.exec(u);)e[c[2]]||(s[i].push(c[1]),e[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);return s}function u(e){return Object.keys(e).reduce(function(t,n){return t||e[n].length>0},!1)}e.exports=function(e,t){t=t||{};var r={main:n.m},o=t.all?{main:Object.keys(r)}:function(e,t){for(var n={main:[t]},i={main:[]},r={main:{}};u(n);)for(var o=Object.keys(n),a=0;a<o.length;a++){var l=o[a],c=n[l].pop();if(r[l]=r[l]||{},!r[l][c]&&e[l][c]){r[l][c]=!0,i[l]=i[l]||[],i[l].push(c);for(var f=s(e,e[l][c],l),d=Object.keys(f),h=0;h<d.length;h++)n[d[h]]=n[d[h]]||[],n[d[h]]=n[d[h]].concat(f[d[h]])}}return i}(r,e),a="";Object.keys(o).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;o[e][t];)t++;o[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map(function(t){return JSON.stringify(t)+": "+r[e][t].toString()}).join(",")+"});\n"}),a=a+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map(function(e){return JSON.stringify(e)+": "+r.main[e].toString()}).join(",")+"}))(self);";var l=new window.Blob([a],{type:"text/javascript"});if(t.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),f=new window.Worker(c);return f.objectURL=c,f}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(23)),o=s(n(8)),a=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tempUint8=new Uint8Array,this.arrTag=[],this.index=0,this.tempArr=[],this.stop=!1,this.offset=0,this.frist=!0,this._hasAudio=!1,this._hasVideo=!1,this._dispose=!1,this.busy=!1,this.busyArr=[]}return i(e,[{key:"setFlv",value:function(e){return this.busy=!0,this._dispose=!1,this.stop=!1,this.arrTag=[],this.index=0,this.tempUint8=e,this.tempUint8.length>13&&70==this.tempUint8[0]&&76==this.tempUint8[1]&&86==this.tempUint8[2]?(this.probe(this.tempUint8.buffer),this.read(9),this.read(4),this.parse(),this.frist=!1,this.busy=!1,this.offset):this.frist?this.offset:(this.parse(),this.offset)}},{key:"probe",value:function(e){var t=new Uint8Array(e),n={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return n;var i=(4&t[4])>>>2!==0,r=0!==(1&t[4]);return i||r?(this._hasAudio=o.default._hasAudio=i,this._hasVideo=o.default._hasVideo=r,{match:!0,hasAudioTrack:i,hasVideoTrack:r}):n}},{key:"dispose",value:function(){}},{key:"parse",value:function(){for(;this.index<this.tempUint8.length&&!this.stop;){this.offset=this.index;var e=new r.default;if(this.tempUint8.length-this.index>=11){if(e.tagType=this.read(1)[0],e.dataSize=this.read(3),e.Timestamp=this.read(4),e.StreamID=this.read(3),18!=e.tagType&&8!=e.tagType&&9!=e.tagType)throw new a.default("wrong tagType"+e.tagType);this.tempUint8.length-this.index>=this.getBodySum(e.dataSize)+4?(e.body=this.read(this.getBodySum(e.dataSize)),9==e.tagType&&this._hasVideo&&this.arrTag.push(e),8==e.tagType&&this._hasAudio&&this.arrTag.push(e),18==e.tagType&&this.arrTag.push(e),e.size=this.read(4),this.offset=this.index):this.stop=!0}else this.stop=!0}return this.offset}},{key:"read",value:function(e){var t=this.tempUint8.slice(this.index,this.index+e);return this.index+=e,t}},{key:"getBodySum",value:function(e){var t="";return t+=1==e[0].toString(16).length?"0"+e[0].toString(16):e[0].toString(16),t+=1==e[1].toString(16).length?"0"+e[1].toString(16):e[1].toString(16),t+=1==e[2].toString(16).length?"0"+e[2].toString(16):e[2].toString(16),parseInt(t,16)}}]),e}();t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tagType=-1,this.dataSize=-1,this.Timestamp=-1,this.StreamID=-1,this.body=-1,this.time=-1,this.arr=[],this.size=-1}return i(e,[{key:"getTime",value:function(){this.arr=[];for(var e=0;e<this.Timestamp.length;e++)this.arr.push(1==this.Timestamp[e].toString(16).length?"0"+this.Timestamp[e].toString(16):this.Timestamp[e].toString(16));this.arr.pop();var t=this.arr.join("");return this.time=parseInt(t,16),parseInt(t,16)}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=o(n(25));o(n(9));function o(e){return e&&e.__esModule?e:{default:e}}var a=null,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"parseObject",value:function(t,n,i){var r=e.parseString(t,n,i),o=e.parseScript(t,n+r.size),a=o.objectEnd;return{data:{name:r.data,value:o.data},size:o.size,objectEnd:a}}},{key:"parseVariable",value:function(t,n,i){return e.parseObject(t,n,i)}},{key:"parseLongString",value:function(e,t,n){var i=new DataView(e,t).getUint32(0,!a);return{data:i>0?(0,r.default)(new Uint8Array(e,t+4,i)):"",size:4+i}}},{key:"parseDate",value:function(e,t,n){var i=new DataView(e,t),r=i.getFloat64(0,!a),o=i.getInt16(8,!a);return{data:new Date(r+=60*o*1e3),size:10}}},{key:"parseString",value:function(e,t,n){var i=new DataView(e,t).getUint16(0,!a);return{data:i>0?(0,r.default)(new Uint8Array(e,t+2,i)):"",size:2+i}}},{key:"parseMetadata",value:function(t){a=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}();var n=e.parseScript(t,0),i=e.parseScript(t,n.size,t.length-n.size),r={};return r[n.data]=i.data,r}},{key:"parseScript",value:function(t,n,i){var r=n,o=new Uint8Array(t).buffer,s=new DataView(o,0,i),u=null,l=s.getUint8(r);switch(r+=1,l){case 0:u=s.getFloat64(r,!a),r+=8;break;case 1:u=!!s.getUint8(r),r+=1;break;case 2:var c=e.parseString(o,r);u=c.data,r+=c.size;break;case 3:u={};var f=0;for(9===(16777215&s.getUint32(i-4,!a))&&(f=3);r<i-4;){var d=e.parseObject(o,r,i-n-f);if(d.objectEnd)break;u[d.data.name]=d.data.value,r=d.size}if(r<=i-3)9===(16777215&v.getUint32(r-1,!a))&&(r+=3);break;case 8:for(u={},r+=4,s.getUint32(i-4,!a);r<i-8;){var h=e.parseVariable(o,r);if(h.objectEnd)break;u[h.data.name]=h.data.value,r=h.size}if(r<=i-3)9===(16777215&s.getUint32(r-1,!a))&&(r+=3);break;case 9:u=void 0,r=1;break;case 10:u=[];var p=s.getUint32(r,!a);r+=4;for(var m=0;m<p;m++){var g=e.parseScript(o,r);u.push(g.data),r=g.size}break;case 11:var y=e.parseDate(o,r+1,i-1);u=y.data,r+=y.size;break;case 12:var b=e.parseString(o,r+1,i-1);u=b.data,r+=b.size;break;default:r=i,console.log("AMF","Unsupported AMF value type "+l)}return{data:u,size:r}}}]),e}();t.default=s},function(e,t,n){function i(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!==(192&i[++t]))return!1;return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],n=e,r=0,o=e.length;r<o;)if(n[r]<128)t.push(String.fromCharCode(n[r])),++r;else{if(n[r]<192);else if(n[r]<224){if(i(n,r,1)){var a=(31&n[r])<<6|63&n[r+1];if(a>=128){t.push(String.fromCharCode(65535&a)),r+=2;continue}}}else if(n[r]<240){if(i(n,r,2)){var s=(15&n[r])<<12|(63&n[r+1])<<6|63&n[r+2];if(s>=2048&&55296!==(63488&s)){t.push(String.fromCharCode(65535&s)),r+=3;continue}}}else if(n[r]<248&&i(n,r,3)){var u=(7&n[r])<<18|(63&n[r+1])<<12|(63&n[r+2])<<6|63&n[r+3];if(u>65536&&u<1114112){u-=65536,t.push(String.fromCharCode(u>>>10|55296)),t.push(String.fromCharCode(1023&u|56320)),r+=4;continue}}t.push(String.fromCharCode(65533)),++r}return t.join("")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG=this.constructor.name,this._buffer=t,this._buffer_index=0,this._total_bytes=t.byteLength,this._total_bits=8*t.byteLength,this._current_word=0,this._current_word_bits_left=0}return i(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t}},{key:"readBits",value:function(e){if(e>32)throw new InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var n=this._current_word_bits_left?this._current_word:0;n>>>=32-this._current_word_bits_left;var i=e-this._current_word_bits_left;this._fillCurrentWord();var r=Math.min(i,this._current_word_bits_left),o=this._current_word>>>32-r;return this._current_word<<=r,this._current_word_bits_left-=r,n=n<<r|o}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e=void 0;for(e=0;e<this._current_word_bits_left;e++)if(0!==(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return i(e,[{key:"isComplete",value:function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t}},{key:"isSeekable",value:function(){return!0===this.hasKeyframesIndex}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(29)),o=u(n(30)),a=u(n(10)),s=n(31);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG="MP4Remuxer",this._isLive=!0===t.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new s.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new s.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!o.default.chrome||!(o.default.version.major<50||50===o.default.version.major&&o.default.version.build<2661)),this._fillSilentAfterSeek=o.default.msedge||o.default.msie,this._mp3UseMpegAudio=!o.default.firefox}return i(e,[{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}},{key:"bindDataSource",value:function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}},{key:"insertDiscontinuity",value:function(){this._audioNextDts=this._videoNextDts=void 0}},{key:"seek",value:function(e){this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}},{key:"remux",value:function(e,t){if(!this._onMediaSegment)throw new IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)}},{key:"_onTrackMetadataReceived",value:function(e,t){var n=null,i="mp4",r=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(i="mpeg",r="",n=new Uint8Array):n=a.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=a.default.generateInitSegment(t)}if(!this._onInitSegment)throw new IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:r,container:e+"/"+i,mediaDuration:t.duration})}},{key:"_calculateDtsBase",value:function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"_remuxAudio",value:function(e){if(null!=this._audioMeta){var t,n=e,i=n.samples,o=void 0,u=-1,l=this._audioMeta.refSampleDuration,c="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,f=this._dtsBaseInited&&void 0===this._audioNextDts,d=!1;if(i&&!(i.length<=1)){var h=0,p=null,v=0;c?(h=0,v=n.length):(h=8,v=8+n.length);var m=i[0].dts-this._dtsBase;if(this._audioNextDts)o=m-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())o=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(d=!0);else{var g=this._audioSegmentInfoList.getLastSampleBefore(m);if(null!=g){var y=m-(g.originalDts+g.duration);y<=3&&(y=0),o=m-(g.dts+g.duration+y)}else o=0}if(d){var b=m-o,w=this._videoSegmentInfoList.getLastSegmentBefore(m);if(null!=w&&w.beginDts<b){var _=r.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(_){var E=w.beginDts,S=b-w.beginDts;Log.v(this.TAG,"InsertPrefixSilentAudio: dts: "+E+", duration: "+S),i.unshift({unit:_,dts:E,pts:E}),v+=_.byteLength}}else d=!1}var k=[];o=0;for(var T=0;T+1<i.length;T++){var A=i[T],O=(A.unit,A.dts-this._dtsBase),x=O-o;-1===u&&(u=x);var M=0;if(T!==i.length-1)M=i[T+1].dts-this._dtsBase-o-x;else M=k.length>=1?k[k.length-1].duration:Math.floor(l);k.push({dts:x,pts:x,cts:0,unit:A.unit,size:A.unit.byteLength,duration:M,originalDts:O,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}})}if(c)p=new Uint8Array(v);else{for(var L=8,I=0;I<k.length;++I)L+=k[I].size;(p=new Uint8Array(L))[0]=L>>>24&255,p[1]=L>>>16&255,p[2]=L>>>8&255,p[3]=255&L,p.set(a.default.types.mdat,4)}for(var D=0;D<k.length;D++){var C=k[D].unit;p.set(C,h),h+=C.byteLength}var R=k[k.length-1];t=R.dts+R.duration,this._audioNextDts=t;var N=new s.MediaSegmentInfo;N.beginDts=u,N.endDts=t,N.beginPts=u,N.endPts=t,N.originalBeginDts=k[0].originalDts,N.originalEndDts=R.originalDts+R.duration,N.firstSample=new s.SampleInfo(k[0].dts,k[0].pts,k[0].duration,k[0].originalDts,!1),N.lastSample=new s.SampleInfo(R.dts,R.pts,R.duration,R.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(N),n.samples=k,n.sequenceNumber++;var P=null;P=c?new Uint8Array:a.default.moof(n,u),n.samples=[i[i.length-1]],n.length=0;var j={type:"audio",data:this._mergeBoxes(P,p).buffer,sampleCount:k.length,info:N};c&&f&&(j.timestampOffset=u),this._onMediaSegment("audio",j)}}}},{key:"_remuxVideo",value:function(e){if(null!=this._videoMeta){var t,n,i=e,r=i.samples,o=void 0,u=-1,l=-1;if(r&&!(r.length<=1)){var c=r[0].dts-this._dtsBase;if(this._videoNextDts)o=Math.max(c-this._videoNextDts,0);else if(this._videoSegmentInfoList.isEmpty())o=0;else{var f=this._videoSegmentInfoList.getLastSampleBefore(c);if(null!=f){var d=c-(f.originalDts+f.duration);d<=3&&(d=0),o=c-(f.dts+f.duration+d)}else o=0}var h=new s.MediaSegmentInfo,p=[],v=o;o=0;for(var m=0;m+1<r.length;m++){var g=r[m],y=g.dts-this._dtsBase-(0==m?v:0),b=g.isKeyframe,w=y-o,_=g.cts,E=w+_;-1===u&&(u=w,l=E);var S=0;if(m!==r.length-1)S=r[m+1].dts-this._dtsBase-o-w;else S=p.length>=1?p[p.length-1].duration:Math.floor(this._videoMeta.refSampleDuration);if(b){var k=new s.SampleInfo(w,E,S,g.dts,!0);k.fileposition=g.fileposition,h.appendSyncPoint(k)}p.push({dts:w,pts:E,cts:_,units:g.units,size:g.length,isKeyframe:b,duration:S,originalDts:y,flags:{isLeading:0,dependsOn:b?2:1,isDependedOn:b?1:0,hasRedundancy:0,isNonSync:b?0:1}})}for(var T=8,A=8,O=0;O<p.length;++O)A+=p[O].size;var x=new Uint8Array(A);x[0]=A>>>24&255,x[1]=A>>>16&255,x[2]=A>>>8&255,x[3]=255&A,x.set(a.default.types.mdat,4);for(var M=0;M<p.length;M++)for(var L=p[M].units;L.length;){var I=L.shift().data;x.set(I,T),T+=I.byteLength}var D=p[p.length-1];if(t=D.dts+D.duration,n=D.pts+D.duration,this._videoNextDts=t,h.beginDts=u,h.endDts=t,h.beginPts=l,h.endPts=n,h.originalBeginDts=p[0].originalDts,h.originalEndDts=D.originalDts+D.duration,h.firstSample=new s.SampleInfo(p[0].dts,p[0].pts,p[0].duration,p[0].originalDts,p[0].isKeyframe),h.lastSample=new s.SampleInfo(D.dts,D.pts,D.duration,D.originalDts,D.isKeyframe),this._isLive||this._videoSegmentInfoList.append(h),i.samples=p,i.sequenceNumber++,this._forceFirstIDR){var C=p[0].flags;C.dependsOn=2,C.isNonSync=0}var R=a.default.moof(i,u);i.samples=[r[r.length-1]],i.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(R,x).buffer,sampleCount:p.length,info:h})}}}},{key:"_mergeBoxes",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}},{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e}}]),e}();t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i={};!function(){var e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],r={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:n[0]||""},o={};if(r.browser){o[r.browser]=!0;var a=r.majorVersion.split(".");o.version={major:parseInt(r.majorVersion,10),string:r.version},a.length>1&&(o.version.minor=parseInt(a[1],10)),a.length>2&&(o.version.build=parseInt(a[2],10))}r.platform&&(o[r.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),(o.rv||o.iemobile)&&(o.rv&&delete o.rv,r.browser="msie",o.msie=!0);o.edge&&(delete o.edge,r.browser="msedge",o.msedge=!0);o.opr&&(r.browser="opera",o.opera=!0);o.safari&&o.android&&(r.browser="android",o.android=!0);for(var s in o.name=r.browser,o.platform=r.platform,i)i.hasOwnProperty(s)&&delete i[s];i=o}(),t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.SampleInfo=function e(t,n,i,o,a){r(this,e),this.dts=t,this.pts=n,this.duration=i,this.originalDts=o,this.isSyncPoint=a,this.fileposition=null},t.MediaSegmentInfo=function(){function e(){r(this,e),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return i(e,[{key:"appendSyncPoint",value:function(e){e.isSyncPoint=!0,this.syncPoints.push(e)}}]),e}(),t.IDRSampleList=function(){function e(){r(this,e),this._list=[]}return i(e,[{key:"clear",value:function(){this._list=[]}},{key:"appendArray",value:function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))}},{key:"getLastSyncPointBeforeDts",value:function(e){if(0==this._list.length)return null;var t=this._list,n=0,i=t.length-1,r=0,o=0,a=i;for(e<t[0].dts&&(n=0,o=a+1);o<=a;){if((r=o+Math.floor((a-o)/2))===i||e>=t[r].dts&&e<t[r+1].dts){n=r;break}t[r].dts<e?o=r+1:a=r-1}return this._list[n]}}]),e}(),t.MediaSegmentInfoList=function(){function e(t){r(this,e),this._type=t,this._list=[],this._lastAppendLocation=-1}return i(e,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(e){var t=this._list;if(0===t.length)return-2;var n=t.length-1,i=0,r=0,o=n,a=0;if(e<t[0].originalBeginDts)return a=-1;for(;r<=o;){if((i=r+Math.floor((o-r)/2))===n||e>t[i].lastSample.originalDts&&e<t[i+1].originalBeginDts){a=i;break}t[i].originalBeginDts<e?r=i+1:o=i-1}return a}},{key:"_searchNearestSegmentAfter",value:function(e){return this._searchNearestSegmentBefore(e)+1}},{key:"append",value:function(e){var t=this._list,n=e,i=this._lastAppendLocation,r=0;-1!==i&&i<t.length&&n.originalBeginDts>=t[i].lastSample.originalDts&&(i===t.length-1||i<t.length-1&&n.originalBeginDts<t[i+1].originalBeginDts)?r=i+1:t.length>0&&(r=this._searchNearestSegmentBefore(n.originalBeginDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,n)}},{key:"getLastSegmentBefore",value:function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}},{key:"getLastSampleBefore",value:function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null}},{key:"getLastSyncPointBefore",value:function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&t>0;)t--,n=this._list[t].syncPoints;return n.length>0?n[n.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null,n=null,a={};function s(e,t){self.postMessage({cmd:"mediaSegmentInit",source:{type:"video",data:e}}),t&&self.postMessage({cmd:"mediaSegmentInit",source:{type:"audio",data:t}})}function u(e,t){self.postMessage({cmd:"mediaSegment",source:{type:e,data:t}})}function l(e){self.postMessage({cmd:"error",source:e})}function c(e){self.postMessage({cmd:"mediainfo",source:e})}function f(e){self.postMessage({cmd:"cdnDropFrame",source:e})}function d(e,n,r){return t||((t=new i.default(a)).onInitSegment=s,t.onMediaSegment=u,t.onError=l,t.onMediaInfo=c,t.onCdnDropFrame=f,t.on("error",function(e){self.postMessage({cmd:"error",source:e.data})})),r&&t.seek(r),self.postMessage({cmd:"player-event",source:{type:o.PLAYER_EVENTS.MEDIA_DEMUX_FLV,ts:Date.now()}}),t.setflv(e)}e.addEventListener("message",function(e){switch(e.data.cmd){case"init":a=e.data.data;break;case"loadSource":(n=new r.default(a))&&(n.on("end",function(){self.postMessage({cmd:"end"})}),n.on("error",function(e){self.postMessage({cmd:"error",source:e.data})}),n.on("heartbeat",function(e){self.postMessage({cmd:"heartbeat",source:e.data})}),n.on("player-event",function(e){self.postMessage({cmd:"player-event",source:e.data})})),n.arrivalDataCallback=d,n.open();break;case"pause":n.pause();break;case"seek":i=e.data.keyframe,n.seek(i.keyframePoint,!1,i.keyframetime);break;case"resume":n.resume();break;case"destroy":!function(){n&&(n.destroy(),(e=n)&&(e.off("end"),e.off("error"),e.off("heartbeat"),e.off("player-event")),n=null);var e;t&&(t.off("error"),t=null)}()}var i})};var i=a(n(7)),r=a(n(5)),o=n(2);function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={isLive:!1,box:"flv",seekInKeyframe:!0,alwaysSeekKeyframe:!0,lazyLoadMaxDuration:120,lazyLoadRecoverDuration:30,lockInternalProperty:!1,debug:!0,webWorker:!1,autoCleanupSourceBuffer:!0,autoCleanupMaxBackwardDuration:10,autoCleanupMinBackwardDuration:10,stashSize:393216,seekType:"range"}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(_c){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(11),o=n(2);var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.reset(),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.CustEvent),i(t,[{key:"reset",value:function(){this.loaderOpenTs=0,this.receiveFirstPackageTs=0,this.firstDemuxFlvTs=0,this.firstSegmentTs=0,this.firstPlay=0}},{key:"record",value:function(e){e.ts=e.ts||Date.now(),this.firstPlay||this.processFirstPlayData(e)}},{key:"processFirstPlayData",value:function(e){switch(e.type){case o.PLAYER_EVENTS.LOADER_CHUNK_ARRIVAL:this.receiveFirstPackageTs||(this.receiveFirstPackageTs=e.ts,this.emit("performance",{type:"receive-first-package-duration",value:this.receiveFirstPackageTs-this.loaderOpenTs}));break;case o.PLAYER_EVENTS.MEDIA_DEMUX_FLV:this.firstDemuxFlvTs||(this.firstDemuxFlvTs=e.ts,this.emit("performance",{type:"first-flv-package-duration",value:this.firstDemuxFlvTs-this.receiveFirstPackageTs}));break;case o.PLAYER_EVENTS.MEDIA_SEGMENT:this.firstSegmentTs||(this.firstSegmentTs=e.ts,this.emit("performance",{type:"first-flv-to-mp4",value:this.firstSegmentTs-this.firstDemuxFlvTs}));break;case o.PLAYER_EVENTS.LOADER_OPEN:this.loaderOpenTs||(this.loaderOpenTs=e.ts,this.emit("performance",{type:"first_loader_open_timestamp",value:this.loaderOpenTs}));break;case o.PLAYER_EVENTS.PLAYING:case o.PLAYER_EVENTS.CANPLAY:case o.PLAYER_EVENTS.TIMEUPDATE:this.firstPlay||(this.firstPlay=e.ts,this.emit("performance",{type:"first_video_frame_duration",value:this.firstPlay-this.firstSegmentTs}))}}}]),t}();t.default=a}]).default},e.exports=n()}));jl.install(oc),jl.install(pc),jl.install(ac),jl.install(fc);var wc=function(e){function t(e){if(G(this,t),!hn(e))throw new TypeError("You must pass an Object as config when you new ChimeePlayer");e.plugin=e.plugin||e.plugins,fn(e.plugin)||(e.plugin=[]);var n=[oc.name,pc.name,ac.name,fc.name],i=e.plugin.map(function(e){return hn(e)?e.name:e});n.forEach(function(t){i.indexOf(t)>-1||e.plugin.push(t)}),e.kernels=Yn(e.kernels||{},{hls:{handler:yc},flv:{handler:bc}});var r=Lt(this,(t.__proto__||U(t)).call(this,e));return r.on("play",function(){return r.chimeeContextmenu.updatemenu([{text:"\u6682\u505c",action:"pause"}])}),r.on("pause",function(){return r.chimeeContextmenu.updatemenu([{text:"\u64ad\u653e",action:"play"}])}),r}return Bt(t,jl),t}();return wc.popupFactory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tagName,n=void 0===t?"chimee-popup":t,i=e.className,r=e.name,o=void 0===r?"popup":r,a=e.html,s=e.title,u=void 0===s?"\u8fd9\u662f\u4e00\u4e2a\u4fe1\u606f\u6846":s,l=e.body,c=void 0===l?"\u8fd9\u91cc\u662f\u4fe1\u606f\u5185\u5bb9":l,f=e.offsetAttr,d=void 0===f?"left top":f,h=e.offset,p=void 0===h?"50% 50%":h,v=e.translate,m=void 0===v?"":v,g=e.width,y=e.height,b=e.level,w=e.init,_=e.inited,E=e.data,S=e.create,k=e.beforeCreate,T=e.destroy,A=e.events,O=e.computed,x=e.methods,M=void 0===x?{}:x,L=e.penetrate,I=void 0!==L&&L,D=e.operable,C=void 0===D||D,R=e.hide,N=void 0!==R&&R,P=e.opened,j=e.closed,F=e.autoFocus,B={html:a||"\n      <cm-pp-close>\xd7</cm-pp-close>\n      "+(!1!==u?"<cm-pp-head>"+u+"</cm-pp-head>":"")+"\n      "+(!1!==c?"<cm-pp-body>"+c+"</cm-pp-body>":"")+"\n    ",closeSelector:"._close"};return{name:o,el:n,className:i,beforeCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.events,n=e.methods,i=arguments[1];hn(i)&&(hn(i.events)&&Yn(t,i.events),hn(i.methods)&&Yn(n,i.methods)),k&&k.apply(this,arguments)},create:function(){var e=hn(this.$config)?Yn(B,this.$config):B;(this.$domWrap=Ir(this.$dom).css("display","none")).html(e.html).delegate("cm-pp-close, "+e.closeSelector,"click",this.close),this.width(g).height(y).offset(p).translate(m),this._hide=N;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];S&&S.apply(this,n),!this._hide&&this.open()},destroy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];T&&T.apply(this,t),this.$domWrap.undelegate(this.$config.closeSelector,"click",this.close).remove()},level:b,init:w,inited:_,data:E,events:A,computed:O,penetrate:I,operable:C,autoFocus:F,methods:Yn({open:function(){if(this.destroyed)return this;this.$domWrap.css("display","block"),this._hide=!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupOpen",t,this),dn(P)&&P.apply(this,t),this},close:function(){if(this.destroyed)return this;this.$domWrap.css("display","none"),this._hide=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupClose",t,this),dn(j)&&j.apply(this,t),this},width:function(e){return e&&this.$domWrap.css("width",e),this},height:function(e){return e&&this.$domWrap.css("height",e),this},offset:function(e){var t=(""+(e||"")).split(" "),n={};if(t.length>2)return["top","right","bottom","left"].forEach(function(e,i){t[i]&&(n[e]=t[i])}),this.$domWrap.css(n),this;var i=no(t,2),r=i[0],o=i[1];if(""===r)return this;var a=o||r,s=d.split(" ");n[s[0]]=r,n[s[1]]=a,this.$domWrap.css(n);var u=[];return"50%"===r&&u.push("-50%"),"50%"===a&&u.push("-50%"),u.length>0&&this.translate(u.join(" ")),this},translate:function(e){var t=(""+(e||"")).split(" "),n=no(t,2),i=n[0],r=n[1];return""!==i&&(this.$domWrap.css("transform","translate("+i+", "+(r||i)+")"),"transform"in document.createElement("a").style||!window.console||!window.console.warn||console.warn("[chimee-plugin-popup] \u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301CSS3\u7684transform\u7279\u6027\uff0cDom\u5143\u7d20\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528translate\u3002")),this}},M)}},wc},e.exports=n()}).call(this,n(35))},343:function(e,t,n){(function(t){var n;n=function(){"use strict";!function(e,t){if("undefined"===typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}('container{position:relative}container,video{display:block;width:100%;height:100%;background:#000;outline:none}video:focus{outline:none}.chimee-flex-component svg:hover g,.chimee-flex-component svg g{fill:#fff;stroke:#fff}chimee-clarity-list,chimee-control-state-pause,chimee-control-state-play,chimee-playbackrate-list,chimee-progressbar-tip,chimee-screen-full,chimee-screen-small,chimee-volume-state-high,chimee-volume-state-low,chimee-volume-state-mute{display:none}chimee-control.full chimee-screen-full,chimee-control.pause chimee-control-state-pause,chimee-control.play chimee-control-state-play,chimee-control.small chimee-screen-small,chimee-volume.high chimee-volume-state-high,chimee-volume.low chimee-volume-state-low,chimee-volume.mute chimee-volume-state-mute{display:inline-block;width:1.4em;height:100%}chimee-control{display:block;height:100%;line-height:2em;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden;font-family:Roboto,Arial,Helvetica,sans-serif;-webkit-transition:visibility .5s ease;transition:visibility .5s ease}chimee-control,chimee-control-wrap{position:absolute;bottom:0;left:0;width:100%}chimee-control-wrap{height:2.2em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;background:rgba(0,0,0,.5);-webkit-transition:bottom .5s ease;transition:bottom .5s ease;pointer-events:auto}.chimee-flex-component{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;height:2em;cursor:pointer}.chimee-flex-component svg{vertical-align:middle;width:2em;height:1.5em}chimee-control-state.chimee-flex-component{-ms-flex-preferred-size:3em;flex-basis:3em;text-align:right;margin-right:1em}chimee-control-state .left,chimee-control-state .right{-webkit-transition:d .2s ease-in-out;transition:d .2s ease-in-out}chimee-progresstime.chimee-flex-component{color:#fff;font-weight:400;text-align:center;white-space:nowrap}chimee-progresstime-pass,chimee-progresstime-total{display:inline}chimee-progressbar.chimee-flex-component{position:relative;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}chimee-progressbar-wrap{display:inline-block;height:100%;position:absolute;left:1em;right:1em;top:0;pointer-events:none}chimee-progressbar.progressbar-layout-top{position:static}chimee-progressbar.progressbar-layout-top chimee-progressbar-wrap{top:-1.6em;height:1.6em;left:0;right:0}chimee-progressbar.progressbar-layout-top .chimee-progressbar-line{left:0;top:.8em}.chimee-progressbar-line{position:absolute;top:.9em;left:0;display:inline-block;height:3px}chimee-progressbar-bg{width:100%;background:#4c4c4c}chimee-progressbar-buffer{width:0;background:#6f6f6f}chimee-progressbar-all{background:#de698c}chimee-progressbar-ball{content:"";position:absolute;right:-.8em;top:-.3em;display:inline-block;width:.8em;height:.8em;border-radius:.8em;background:#fff;pointer-events:none}chimee-progressbar-tip{position:absolute;bottom:.5em;top:-1.5em;left:0;z-index:1;padding:0 .5em;height:1.5em;background:#fff;line-height:1.5em;border-radius:4px;color:#000;text-align:center}chimee-volume.chimee-flex-component{cursor:pointer;padding:0;-ms-flex-preferred-size:7em;flex-basis:7em;white-space:nowrap;margin-right:1em;position:relative}chimee-volume.chimee-flex-component.vertical{padding-right:1em;-ms-flex-preferred-size:2em;flex-basis:2em}chimee-volume-state{display:inline-block;width:2em;vertical-align:top}chimee-volume .line,chimee-volume .ring1,chimee-volume .ring2{stroke-dasharray:150;stroke-dashoffset:150;-webkit-transition:stroke-dashoffset .7s ease-in-out;transition:stroke-dashoffset .7s ease-in-out}chimee-volume.high .ring1,chimee-volume.high .ring2,chimee-volume.low .ring2,chimee-volume.mute .line,chimee-volume.mute .ring1,chimee-volume.mute .ring2{stroke-dashoffset:0}chimee-volume.vertical:hover chimee-volume-bar{display:inline-block}chimee-volume.vertical chimee-volume-bar{position:absolute;top:-7em;left:-.2em;width:2em;height:4em;padding-bottom:3em;display:none;vertical-align:middle}chimee-volume.vertical chimee-volume-bar:before{content:"";position:absolute;left:0;right:0;top:0;bottom:1em;background:#212121;border-radius:4px}chimee-volume.vertical chimee-volume-bar-wrap{display:inline-block;position:absolute;bottom:1em;left:0;top:1em;right:0;height:4em}chimee-volume.vertical chimee-volume-bar-all,chimee-volume.vertical chimee-volume-bar-bg{position:absolute;bottom:0;left:1em;display:inline-block;width:2px;border-radius:4px}chimee-volume.vertical chimee-volume-bar-bg{height:4em;background:#4c4c4c;opacity:.5}chimee-volume.vertical chimee-volume-bar-all{background:#de698c}chimee-volume.vertical chimee-volume-bar-all:after{content:"";position:absolute;right:-.34em;top:-.4em;display:inline-block;width:.8em;height:.8em;border-radius:.8em;background:#fff;pointer-events:none}chimee-volume.horizonal chimee-volume-bar{position:relative;height:1.2em;width:4em;display:inline-block;vertical-align:middle}chimee-volume.horizonal chimee-volume-bar-all,chimee-volume.horizonal chimee-volume-bar-bg{position:absolute;top:.4em;left:0;display:inline-block;height:2px}chimee-volume.horizonal chimee-volume-bar-bg{width:4em;background:#4c4c4c;opacity:.5}chimee-volume.horizonal chimee-volume-bar-all{background:#de698c}chimee-volume.horizonal chimee-volume-bar-all:after{content:"";position:absolute;right:-.4em;top:-.3em;display:inline-block;width:.8em;height:.8em;border-radius:.8em;background:#fff;pointer-events:none}chimee-screen.chimee-flex-component{-ms-flex-preferred-size:3em;flex-basis:3em;text-align:left}chimee-clarity.chimee-flex-component,chimee-playbackrate.chimee-flex-component{position:relative;color:#fff;width:6em;height:1.75em;padding:0;padding-right:1em;padding-left:1em;text-align:center;vertical-align:middle;font-size:16px}chimee-clarity.chimee-flex-component:hover chimee-clarity-list,chimee-playbackrate.chimee-flex-component:hover chimee-playbackrate-list{display:inline-block}chimee-clarity.chimee-flex-component svg,chimee-playbackrate.chimee-flex-component svg{width:auto;height:auto}chimee-clarity-list,chimee-playbackrate-list{position:absolute;left:0;bottom:1em;width:100%;padding-bottom:1.5em;opacity:.8;-webkit-box-sizing:content-box;box-sizing:content-box;line-height:0}chimee-clarity-list ul,chimee-playbackrate-list ul{margin:0;padding:.5em 0;background:#292929;line-height:2em}chimee-clarity-list li,chimee-playbackrate-list li{list-style-type:none}chimee-clarity-list li.active,chimee-clarity-list li:hover,chimee-playbackrate-list li.active,chimee-playbackrate-list li:hover{color:#de698c}chimee-clarity-list-arrow,chimee-playbackrate-list-arrow{position:absolute;bottom:1.5em;width:100%}',void 0);var e="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var r=Math.ceil,o=Math.floor,a=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)},s=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},u=i(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),l=i(function(e){var t=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=t)}),c=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},f=function(e,t,n){if(c(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},d=function(e){return"object"===typeof e?null!==e:"function"===typeof e},h=function(e){if(!d(e))throw TypeError(e+" is not an object!");return e},p=function(e){try{return!!e()}catch(t){return!0}},v=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),m=u.document,g=d(m)&&d(m.createElement),y=function(e){return g?m.createElement(e):{}},b=!v&&!p(function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a}),w=function(e,t){if(!d(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!d(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!d(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!d(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},_=Object.defineProperty,E={f:v?Object.defineProperty:function(e,t,n){if(h(e),t=w(t,!0),h(n),b)try{return _(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},S=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},k=v?function(e,t,n){return E.f(e,t,S(1,n))}:function(e,t,n){return e[t]=n,e},T=function e(t,n,i){var r,o,a,s=t&e.F,c=t&e.G,d=t&e.S,h=t&e.P,p=t&e.B,v=t&e.W,m=c?l:l[n]||(l[n]={}),g=m.prototype,y=c?u:d?u[n]:(u[n]||{}).prototype;for(r in c&&(i=n),i)(o=!s&&y&&void 0!==y[r])&&r in m||(a=o?y[r]:i[r],m[r]=c&&"function"!=typeof y[r]?i[r]:p&&o?f(a,u):v&&y[r]==a?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(a):h&&"function"==typeof a?f(Function.call,a):a,h&&((m.virtual||(m.virtual={}))[r]=a,t&e.R&&g&&!g[r]&&k(g,r,a)))};T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128;var A,O=T,x=k,M={}.hasOwnProperty,L=function(e,t){return M.call(e,t)},I={},D={}.toString,C=function(e){return D.call(e).slice(8,-1)},R=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==C(e)?e.split(""):Object(e)},N=function(e){return R(s(e))},P=Math.min,j=function(e){return e>0?P(a(e),9007199254740991):0},F=Math.max,B=Math.min,z=u["__core-js_shared__"]||(u["__core-js_shared__"]={}),U=function(e){return z[e]||(z[e]={})},G=0,W=Math.random(),$=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++G+W).toString(36))},V=U("keys"),H=function(e){return V[e]||(V[e]=$(e))},Y=(A=!1,function(e,t,n){var i,r=N(e),o=j(r.length),s=function(e,t){return(e=a(e))<0?F(e+t,0):B(e,t)}(n,o);if(A&&t!=t){for(;o>s;)if((i=r[s++])!=i)return!0}else for(;o>s;s++)if((A||s in r)&&r[s]===t)return A||s||0;return!A&&-1}),K=H("IE_PROTO"),Z=function(e,t){var n,i=N(e),r=0,o=[];for(n in i)n!=K&&L(i,n)&&o.push(n);for(;t.length>r;)L(i,n=t[r++])&&(~Y(o,n)||o.push(n));return o},X="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),q=Object.keys||function(e){return Z(e,X)},Q=v?Object.defineProperties:function(e,t){h(e);for(var n,i=q(t),r=i.length,o=0;r>o;)E.f(e,n=i[o++],t[n]);return e},J=u.document,ee=J&&J.documentElement,te=H("IE_PROTO"),ne=function(){},ie=function(){var e,t=y("iframe"),n=X.length;for(t.style.display="none",ee.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),ie=e.F;n--;)delete ie.prototype[X[n]];return ie()},re=Object.create||function(e,t){var n;return null!==e?(ne.prototype=h(e),n=new ne,ne.prototype=null,n[te]=e):n=ie(),void 0===t?n:Q(n,t)},oe=i(function(e){var t=U("wks"),n=u.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:$)("Symbol."+e))}).store=t}),ae=E.f,se=oe("toStringTag"),ue=function(e,t,n){e&&!L(e=n?e:e.prototype,se)&&ae(e,se,{configurable:!0,value:t})},le={};k(le,oe("iterator"),function(){return this});var ce,fe=function(e,t,n){e.prototype=re(le,{next:S(1,n)}),ue(e,t+" Iterator")},de=function(e){return Object(s(e))},he=H("IE_PROTO"),pe=Object.prototype,ve=Object.getPrototypeOf||function(e){return e=de(e),L(e,he)?e[he]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?pe:null},me=oe("iterator"),ge=!([].keys&&"next"in[].keys()),ye=function(){return this},be=function(e,t,n,i,r,o,a){fe(n,t,i);var s,u,l,c=function(e){if(!ge&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",d="values"==r,h=!1,p=e.prototype,v=p[me]||p["@@iterator"]||r&&p[r],m=v||c(r),g=r?d?c("entries"):m:void 0,y="Array"==t&&p.entries||v;if(y&&(l=ve(y.call(new e)))!==Object.prototype&&l.next&&ue(l,f,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(ge||h||!p[me])&&k(p,me,m),I[t]=m,I[f]=ye,r)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:g},a)for(u in s)u in p||x(p,u,s[u]);else O(O.P+O.F*(ge||h),t,s);return s},we=(ce=!0,function(e,t){var n,i,r=String(s(e)),o=a(t),u=r.length;return o<0||o>=u?ce?"":void 0:(n=r.charCodeAt(o))<55296||n>56319||o+1===u||(i=r.charCodeAt(o+1))<56320||i>57343?ce?r.charAt(o):n:ce?r.slice(o,o+2):i-56320+(n-55296<<10)+65536});be(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=we(t,n),this._i+=e.length,{value:e,done:!1})});var _e=function(e,t){return{value:t,done:!!e}};be(Array,"Array",function(e,t){this._t=N(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,_e(1)):_e(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),I.Arguments=I.Array;for(var Ee=oe("toStringTag"),Se="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),ke=0;ke<Se.length;ke++){var Te=Se[ke],Ae=u[Te],Oe=Ae&&Ae.prototype;Oe&&!Oe[Ee]&&k(Oe,Ee,Te),I[Te]=I.Array}var xe={f:oe},Me=xe.f("iterator"),Le=i(function(e){e.exports={default:Me,__esModule:!0}});n(Le);var Ie=i(function(e){var t=$("meta"),n=E.f,i=0,r=Object.isExtensible||function(){return!0},o=!p(function(){return r(Object.preventExtensions({}))}),a=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!d(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!L(e,t)){if(!r(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!L(e,t)){if(!r(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&s.NEED&&r(e)&&!L(e,t)&&a(e),e}}}),De=E.f,Ce=function(e){var t=l.Symbol||(l.Symbol={});"_"==e.charAt(0)||e in t||De(t,e,{value:xe.f(e)})},Re={f:Object.getOwnPropertySymbols},Ne={f:{}.propertyIsEnumerable},Pe=Array.isArray||function(e){return"Array"==C(e)},je=X.concat("length","prototype"),Fe={f:Object.getOwnPropertyNames||function(e){return Z(e,je)}},Be=Fe.f,ze={}.toString,Ue="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ge={f:function(e){return Ue&&"[object Window]"==ze.call(e)?function(e){try{return Be(e)}catch(t){return Ue.slice()}}(e):Be(N(e))}},We=Object.getOwnPropertyDescriptor,$e={f:v?We:function(e,t){if(e=N(e),t=w(t,!0),b)try{return We(e,t)}catch(n){}if(L(e,t))return S(!Ne.f.call(e,t),e[t])}},Ve=Ie.KEY,He=$e.f,Ye=E.f,Ke=Ge.f,Ze=u.Symbol,Xe=u.JSON,qe=Xe&&Xe.stringify,Qe=oe("_hidden"),Je=oe("toPrimitive"),et={}.propertyIsEnumerable,tt=U("symbol-registry"),nt=U("symbols"),it=U("op-symbols"),rt=Object.prototype,ot="function"==typeof Ze,at=u.QObject,st=!at||!at.prototype||!at.prototype.findChild,ut=v&&p(function(){return 7!=re(Ye({},"a",{get:function(){return Ye(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=He(rt,t);i&&delete rt[t],Ye(e,t,n),i&&e!==rt&&Ye(rt,t,i)}:Ye,lt=function(e){var t=nt[e]=re(Ze.prototype);return t._k=e,t},ct=ot&&"symbol"==typeof Ze.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Ze},ft=function(e,t,n){return e===rt&&ft(it,t,n),h(e),t=w(t,!0),h(n),L(nt,t)?(n.enumerable?(L(e,Qe)&&e[Qe][t]&&(e[Qe][t]=!1),n=re(n,{enumerable:S(0,!1)})):(L(e,Qe)||Ye(e,Qe,S(1,{})),e[Qe][t]=!0),ut(e,t,n)):Ye(e,t,n)},dt=function(e,t){h(e);for(var n,i=function(e){var t=q(e),n=Re.f;if(n)for(var i,r=n(e),o=Ne.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}(t=N(t)),r=0,o=i.length;o>r;)ft(e,n=i[r++],t[n]);return e},ht=function(e){var t=et.call(this,e=w(e,!0));return!(this===rt&&L(nt,e)&&!L(it,e))&&(!(t||!L(this,e)||!L(nt,e)||L(this,Qe)&&this[Qe][e])||t)},pt=function(e,t){if(e=N(e),t=w(t,!0),e!==rt||!L(nt,t)||L(it,t)){var n=He(e,t);return!n||!L(nt,t)||L(e,Qe)&&e[Qe][t]||(n.enumerable=!0),n}},vt=function(e){for(var t,n=Ke(N(e)),i=[],r=0;n.length>r;)L(nt,t=n[r++])||t==Qe||t==Ve||i.push(t);return i},mt=function(e){for(var t,n=e===rt,i=Ke(n?it:N(e)),r=[],o=0;i.length>o;)!L(nt,t=i[o++])||n&&!L(rt,t)||r.push(nt[t]);return r};ot||(x((Ze=function(){if(this instanceof Ze)throw TypeError("Symbol is not a constructor!");var e=$(arguments.length>0?arguments[0]:void 0);return v&&st&&ut(rt,e,{configurable:!0,set:function t(n){this===rt&&t.call(it,n),L(this,Qe)&&L(this[Qe],e)&&(this[Qe][e]=!1),ut(this,e,S(1,n))}}),lt(e)}).prototype,"toString",function(){return this._k}),$e.f=pt,E.f=ft,Fe.f=Ge.f=vt,Ne.f=ht,Re.f=mt,xe.f=function(e){return lt(oe(e))}),O(O.G+O.W+O.F*!ot,{Symbol:Ze});for(var gt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),yt=0;gt.length>yt;)oe(gt[yt++]);for(var bt=q(oe.store),wt=0;bt.length>wt;)Ce(bt[wt++]);O(O.S+O.F*!ot,"Symbol",{for:function(e){return L(tt,e+="")?tt[e]:tt[e]=Ze(e)},keyFor:function(e){if(!ct(e))throw TypeError(e+" is not a symbol!");for(var t in tt)if(tt[t]===e)return t},useSetter:function(){st=!0},useSimple:function(){st=!1}}),O(O.S+O.F*!ot,"Object",{create:function(e,t){return void 0===t?re(e):dt(re(e),t)},defineProperty:ft,defineProperties:dt,getOwnPropertyDescriptor:pt,getOwnPropertyNames:vt,getOwnPropertySymbols:mt}),Xe&&O(O.S+O.F*(!ot||p(function(){var e=Ze();return"[null]"!=qe([e])||"{}"!=qe({a:e})||"{}"!=qe(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!ct(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(t=i[1])&&(n=t),!n&&Pe(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!ct(t))return t}),i[1]=t,qe.apply(Xe,i)}}}),Ze.prototype[Je]||k(Ze.prototype,Je,Ze.prototype.valueOf),ue(Ze,"Symbol"),ue(Math,"Math",!0),ue(u.JSON,"JSON",!0),Ce("asyncIterator"),Ce("observable");var _t=l.Symbol,Et=i(function(e){e.exports={default:_t,__esModule:!0}});n(Et);var St=i(function(e,t){t.__esModule=!0;var n=o(Le),i=o(Et),r="function"===typeof i.default&&"symbol"===typeof n.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===r(n.default)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)}}),kt=n(St),Tt=u.Reflect,At=Tt&&Tt.ownKeys||function(e){var t=Fe.f(h(e)),n=Re.f;return n?t.concat(n(e)):t},Ot=function(e,t,n){t in e?E.f(e,t,S(0,n)):e[t]=n};O(O.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=N(e),r=$e.f,o=At(i),a={},s=0;o.length>s;)void 0!==(n=r(i,t=o[s++]))&&Ot(a,t,n);return a}});var xt=l.Object.getOwnPropertyDescriptors,Mt=n(i(function(e){e.exports={default:xt,__esModule:!0}})),Lt=function(e,t,n,i){try{return i?t(h(n)[0],n[1]):t(n)}catch(o){var r=e.return;throw void 0!==r&&h(r.call(e)),o}},It=oe("iterator"),Dt=Array.prototype,Ct=function(e){return void 0!==e&&(I.Array===e||Dt[It]===e)},Rt=oe("toStringTag"),Nt="Arguments"==C(function(){return arguments}()),Pt=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),Rt))?n:Nt?C(t):"Object"==(i=C(t))&&"function"==typeof t.callee?"Arguments":i},jt=oe("iterator"),Ft=l.getIteratorMethod=function(e){if(void 0!=e)return e[jt]||e["@@iterator"]||I[Pt(e)]},Bt=oe("iterator"),zt=!1;try{[7][Bt]().return=function(){zt=!0}}catch(Co){}var Ut=function(e,t){if(!t&&!zt)return!1;var n=!1;try{var i=[7],r=i[Bt]();r.next=function(){return{done:n=!0}},i[Bt]=function(){return r},e(i)}catch(Co){}return n};O(O.S+O.F*!Ut(function(e){}),"Array",{from:function(e){var t,n,i,r,o=de(e),a="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,l=void 0!==u,c=0,d=Ft(o);if(l&&(u=f(u,s>2?arguments[2]:void 0,2)),void 0==d||a==Array&&Ct(d))for(n=new a(t=j(o.length));t>c;c++)Ot(n,c,l?u(o[c],c):o[c]);else for(r=d.call(o),n=new a;!(i=r.next()).done;c++)Ot(n,c,l?Lt(r,u,[i.value,c],!0):i.value);return n.length=c,n}});var Gt=l.Array.from,Wt=i(function(e){e.exports={default:Gt,__esModule:!0}}),$t=n(Wt),Vt=l.Object.getOwnPropertySymbols,Ht=n(i(function(e){e.exports={default:Vt,__esModule:!0}})),Yt=function(e,t){var n=(l.Object||{})[e]||Object[e],i={};i[e]=t(n),O(O.S+O.F*p(function(){n(1)}),"Object",i)};Yt("getOwnPropertyNames",function(){return Ge.f});var Kt=l.Object,Zt=function(e){return Kt.getOwnPropertyNames(e)},Xt=n(i(function(e){e.exports={default:Zt,__esModule:!0}}));O(O.S+O.F*!v,"Object",{defineProperty:E.f});var qt=l.Object,Qt=function(e,t,n){return qt.defineProperty(e,t,n)},Jt=i(function(e){e.exports={default:Qt,__esModule:!0}}),en=n(Jt);Yt("keys",function(){return function(e){return q(de(e))}});var tn=l.Object.keys,nn=n(i(function(e){e.exports={default:tn,__esModule:!0}})),rn=$e.f;Yt("getOwnPropertyDescriptor",function(){return function(e,t){return rn(N(e),t)}});var on=l.Object,an=function(e,t){return on.getOwnPropertyDescriptor(e,t)},sn=i(function(e){e.exports={default:an,__esModule:!0}}),un=n(sn),ln=Math.floor;O(O.S,"Number",{isInteger:function(e){return!d(e)&&isFinite(e)&&ln(e)===e}});var cn=l.Number.isInteger;n(i(function(e){e.exports={default:cn,__esModule:!0}}));var fn="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",dn="["+fn+"]",hn=RegExp("^"+dn+dn+"*"),pn=RegExp(dn+dn+"*$"),vn=function(e,t,n){var i={},r=p(function(){return!!fn[e]()||"\u200b\x85"!="\u200b\x85"[e]()}),o=i[e]=r?t(mn):fn[e];n&&(i[n]=o),O(O.P+O.F*r,"String",i)},mn=vn.trim=function(e,t){return e=String(s(e)),1&t&&(e=e.replace(hn,"")),2&t&&(e=e.replace(pn,"")),e},gn=vn,yn=u.parseFloat,bn=gn.trim,wn=1/yn(fn+"-0")!==-1/0?function(e){var t=bn(String(e),3),n=yn(t);return 0===n&&"-"==t.charAt(0)?-0:n}:yn;O(O.S+O.F*(Number.parseFloat!=wn),"Number",{parseFloat:wn});var _n=parseFloat;function En(e){return void 0===e||null===e}function Sn(e){return Array.isArray(e)}function kn(e){return"function"===typeof e}function Tn(e){return Object(e)===e&&"[object Object]"===String(e)&&!kn(e)&&!Sn(e)}function An(e){return"string"===typeof e||e instanceof String}function On(e){return"boolean"===typeof e}function xn(e){return!!e&&("object"===("undefined"===typeof e?"undefined":kt(e))||"function"===typeof e)&&"function"===typeof e.then}function Mn(e){return En(e)||On(e)||An(e)||"number"===typeof e}n(i(function(e){e.exports={default:_n,__esModule:!0}}));var Ln,In=n(i(function(e,t){t.__esModule=!0;var n,i=(n=Wt)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}})),Dn=(Ln=function(e){return e},function e(t,n,i){if(Sn(t)||Tn(t)){for(var r in n=Mn(n)?Tn(t)?{}:[]:n,t)n[r]=e(t[r],n[r],r);return n}return Ln(t,n,i)});function Cn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var i=t.length-1;i>-1;i--)if(Mn(t[i]))throw new TypeError("deepAssign only accept non primitive type");var r=t.shift();return t.forEach(function(e){return Dn(e,r)}),r}function Rn(e,t){return e.bind?e.bind(t):e.apply?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(t,i)}:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.call.apply(e,[t].concat(In(i)))}}function Nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.throwError,r=void 0!==i&&i,o=n.backup;if(An(t)&&(t=t.split(".")),!Sn(t))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var a=[],s=e,u=0,l=t.length;u<l;u++){var c=t[u];if(En(s)){if(r)throw new Error("obj"+(a.length>0?"."+a.join("."):" itself")+" is "+s);return o}s=s[c],a.push(c)}return s}var Pn=oe("iterator"),jn=l.isIterable=function(e){var t=Object(e);return void 0!==t[Pn]||"@@iterator"in t||I.hasOwnProperty(Pt(t))},Fn=i(function(e){e.exports={default:jn,__esModule:!0}});n(Fn);var Bn=l.getIterator=function(e){var t=Ft(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return h(t.call(e))},zn=i(function(e){e.exports={default:Bn,__esModule:!0}});n(zn),n(i(function(e,t){t.__esModule=!0;var n=r(Fn),i=r(zn);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,u=(0,i.default)(e);!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,a=l}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()})),Yt("getPrototypeOf",function(){return function(e){return ve(de(e))}});var Un=l.Object.getPrototypeOf,Gn=i(function(e){e.exports={default:Un,__esModule:!0}}),Wn=n(Gn),$n=oe("species"),Vn=function(e,t){return new(function(e){var t;return Pe(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Pe(t.prototype)||(t=void 0),d(t)&&null===(t=t[$n])&&(t=void 0)),void 0===t?Array:t}(e))(t)},Hn=function(e,t){var n=1==e,i=2==e,r=3==e,o=4==e,a=6==e,s=5==e||a,u=t||Vn;return function(t,l,c){for(var d,h,p=de(t),v=R(p),m=f(l,c,3),g=j(v.length),y=0,b=n?u(t,g):i?u(t,0):void 0;g>y;y++)if((s||y in v)&&(h=m(d=v[y],y,p),e))if(n)b[y]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return y;case 2:b.push(d)}else if(o)return!1;return a?-1:r||o?o:b}},Yn=Object.assign,Kn=!Yn||p(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=Yn({},e)[n]||Object.keys(Yn({},t)).join("")!=i})?function(e,t){for(var n=de(e),i=arguments.length,r=1,o=Re.f,a=Ne.f;i>r;)for(var s,u=R(arguments[r++]),l=o?q(u).concat(o(u)):q(u),c=l.length,f=0;c>f;)a.call(u,s=l[f++])&&(n[s]=u[s]);return n}:Yn,Zn=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:k(e,i,t[i]);return e},Xn=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e},qn=i(function(e){var t={},n={},i=e.exports=function(e,i,r,o,a){var s,u,l,c,d=a?function(){return e}:Ft(e),p=f(r,o,i?2:1),v=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(Ct(d)){for(s=j(e.length);s>v;v++)if((c=i?p(h(u=e[v])[0],u[1]):p(e[v]))===t||c===n)return c}else for(l=d.call(e);!(u=l.next()).done;)if((c=Lt(l,p,u.value,i))===t||c===n)return c};i.BREAK=t,i.RETURN=n}),Qn=function(e,t){if(!d(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},Jn=Ie.getWeak,ei=Hn(5),ti=Hn(6),ni=0,ii=function(e){return e._l||(e._l=new ri)},ri=function(){this.a=[]},oi=function(e,t){return ei(e.a,function(e){return e[0]===t})};ri.prototype={get:function(e){var t=oi(this,e);if(t)return t[1]},has:function(e){return!!oi(this,e)},set:function(e,t){var n=oi(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=ti(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var ai,si={getConstructor:function(e,t,n,i){var r=e(function(e,o){Xn(e,r,t,"_i"),e._t=t,e._i=ni++,e._l=void 0,void 0!=o&&qn(o,n,e[i],e)});return Zn(r.prototype,{delete:function(e){if(!d(e))return!1;var n=Jn(e);return!0===n?ii(Qn(this,t)).delete(e):n&&L(n,this._i)&&delete n[this._i]},has:function(e){if(!d(e))return!1;var n=Jn(e);return!0===n?ii(Qn(this,t)).has(e):n&&L(n,this._i)}}),r},def:function(e,t,n){var i=Jn(h(t),!0);return!0===i?ii(e).set(t,n):i[e._i]=n,e},ufstore:ii},ui=E.f,li=Hn(0),ci=function(e,t,n,i,r,o){var a=u[e],s=a,l=r?"set":"add",c=s&&s.prototype,f={};return v&&"function"==typeof s&&(o||c.forEach&&!p(function(){(new s).entries().next()}))?(s=t(function(t,n){Xn(t,s,e,"_c"),t._c=new a,void 0!=n&&qn(n,r,t[l],t)}),li("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in c&&(!o||"clear"!=e)&&k(s.prototype,e,function(n,i){if(Xn(this,s,e),!t&&o&&!d(n))return"get"==e&&void 0;var r=this._c[e](0===n?0:n,i);return t?this:r})}),o||ui(s.prototype,"size",{get:function(){return this._c.size}})):(s=i.getConstructor(t,e,r,l),Zn(s.prototype,n),Ie.NEED=!0),ue(s,e),f[e]=s,O(O.G+O.W+O.F,f),o||i.setStrong(s,e,r),s};i(function(e){var t,n=Hn(0),i=Ie.getWeak,r=Object.isExtensible,o=si.ufstore,a={},s=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},u={get:function(e){if(d(e)){var t=i(e);return!0===t?o(Qn(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return si.def(Qn(this,"WeakMap"),e,t)}},l=e.exports=ci("WeakMap",s,u,si,!0,!0);p(function(){return 7!=(new l).set((Object.freeze||Object)(a),7).get(a)})&&(t=si.getConstructor(s,"WeakMap"),Kn(t.prototype,u),Ie.NEED=!0,n(["delete","has","get","set"],function(e){var n=l.prototype,i=n[e];x(n,e,function(n,o){if(d(n)&&!r(n)){this._f||(this._f=new t);var a=this._f[e](n,o);return"set"==e?this:a}return i.call(this,n,o)})}))}),ai="WeakMap",O(O.S,ai,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}}),function(e){O(O.S,e,{from:function(e){var t,n,i,r,o=arguments[1];return c(this),(t=void 0!==o)&&c(o),void 0==e?new this:(n=[],t?(i=0,r=f(o,arguments[2],2),qn(e,!1,function(e){n.push(r(e,i++))})):qn(e,!1,n.push,n),new this(n))}})}("WeakMap");var fi,di,hi,pi=l.WeakMap,vi=n(i(function(e){e.exports={default:pi,__esModule:!0}})),mi=oe("species"),gi=function(e,t){var n,i=h(e).constructor;return void 0===i||void 0==(n=h(i)[mi])?t:c(n)},yi=u.process,bi=u.setImmediate,wi=u.clearImmediate,_i=u.MessageChannel,Ei=u.Dispatch,Si=0,ki={},Ti=function(){var e=+this;if(ki.hasOwnProperty(e)){var t=ki[e];delete ki[e],t()}},Ai=function(e){Ti.call(e.data)};bi&&wi||(bi=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return ki[++Si]=function(){!function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},fi(Si),Si},wi=function(e){delete ki[e]},"process"==C(yi)?fi=function(e){yi.nextTick(f(Ti,e,1))}:Ei&&Ei.now?fi=function(e){Ei.now(f(Ti,e,1))}:_i?(hi=(di=new _i).port2,di.port1.onmessage=Ai,fi=f(hi.postMessage,hi,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(fi=function(e){u.postMessage(e+"","*")},u.addEventListener("message",Ai,!1)):fi="onreadystatechange"in y("script")?function(e){ee.appendChild(y("script")).onreadystatechange=function(){ee.removeChild(this),Ti.call(e)}}:function(e){setTimeout(f(Ti,e,1),0)});var Oi={set:bi,clear:wi},xi=Oi.set,Mi=u.MutationObserver||u.WebKitMutationObserver,Li=u.process,Ii=u.Promise,Di="process"==C(Li);function Ci(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=c(t),this.reject=c(n)}var Ri,Ni,Pi,ji,Fi={f:function(e){return new Ci(e)}},Bi=function(e){try{return{e:!1,v:e()}}catch(Co){return{e:!0,v:Co}}},zi=function(e,t){if(h(e),d(t)&&t.constructor===e)return t;var n=Fi.f(e);return(0,n.resolve)(t),n.promise},Ui=oe("species"),Gi=Oi.set,Wi=function(){var e,t,n,i=function(){var i,r;for(Di&&(i=Li.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(Co){throw e?n():t=void 0,Co}}t=void 0,i&&i.enter()};if(Di)n=function(){Li.nextTick(i)};else if(Mi){var r=!0,o=document.createTextNode("");new Mi(i).observe(o,{characterData:!0}),n=function(){o.data=r=!r}}else if(Ii&&Ii.resolve){var a=Ii.resolve();n=function(){a.then(i)}}else n=function(){xi.call(u,i)};return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}(),$i=u.TypeError,Vi=u.process,Hi=u.Promise,Yi="process"==Pt(Vi),Ki=function(){},Zi=Ni=Fi.f,Xi=!!function(){try{var e=Hi.resolve(1),t=(e.constructor={})[oe("species")]=function(e){e(Ki,Ki)};return(Yi||"function"==typeof PromiseRejectionEvent)&&e.then(Ki)instanceof t}catch(Co){}}(),qi=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},Qi=function(e,t){if(!e._n){e._n=!0;var n=e._c;Wi(function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a=r?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{a?(r||(2==e._h&&tr(e),e._h=1),!0===a?n=i:(l&&l.enter(),n=a(i),l&&l.exit()),n===t.promise?u($i("Promise-chain cycle")):(o=qi(n))?o.call(n,s,u):s(n)):u(i)}catch(Co){u(Co)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&Ji(e)})}},Ji=function(e){Gi.call(u,function(){var t,n,i,r=e._v,o=er(e);if(o&&(t=Bi(function(){Yi?Vi.emit("unhandledRejection",r,e):(n=u.onunhandledrejection)?n({promise:e,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=Yi||er(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},er=function e(t){if(1==t._h)return!1;for(var n,i=t._a||t._c,r=0;i.length>r;)if((n=i[r++]).fail||!e(n.promise))return!1;return!0},tr=function(e){Gi.call(u,function(){var t;Yi?Vi.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},nr=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Qi(t,!0))},ir=function e(t){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw $i("Promise can't be resolved itself");(n=qi(t))?Wi(function(){var r={_w:i,_d:!1};try{n.call(t,f(e,r,1),f(nr,r,1))}catch(Co){nr.call(r,Co)}}):(i._v=t,i._s=1,Qi(i,!1))}catch(Co){nr.call({_w:i,_d:!1},Co)}}};Xi||(Hi=function(e){Xn(this,Hi,"Promise","_h"),c(e),Ri.call(this);try{e(f(ir,this,1),f(nr,this,1))}catch(t){nr.call(this,t)}},(Ri=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Zn(Hi.prototype,{then:function(e,t){var n=Zi(gi(this,Hi));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=Yi?Vi.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Qi(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Pi=function(){var e=new Ri;this.promise=e,this.resolve=f(ir,e,1),this.reject=f(nr,e,1)},Fi.f=Zi=function(e){return e===Hi||e===ji?new Pi(e):Ni(e)}),O(O.G+O.W+O.F*!Xi,{Promise:Hi}),ue(Hi,"Promise"),function(e){var t="function"==typeof l[e]?l[e]:u[e];v&&t&&!t[Ui]&&E.f(t,Ui,{configurable:!0,get:function(){return this}})}("Promise"),ji=l.Promise,O(O.S+O.F*!Xi,"Promise",{reject:function(e){var t=Zi(this);return(0,t.reject)(e),t.promise}}),O(O.S+!0*O.F,"Promise",{resolve:function(e){return zi(this===ji?Hi:this,e)}}),O(O.S+O.F*!(Xi&&Ut(function(e){Hi.all(e).catch(Ki)})),"Promise",{all:function(e){var t=this,n=Zi(t),i=n.resolve,r=n.reject,o=Bi(function(){var n=[],o=0,a=1;qn(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=Zi(t),i=n.reject,r=Bi(function(){qn(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),O(O.P+O.R,"Promise",{finally:function(e){var t=gi(this,l.Promise||u.Promise),n="function"==typeof e;return this.then(n?function(n){return zi(t,e()).then(function(){return n})}:e,n?function(n){return zi(t,e()).then(function(){throw n})}:e)}}),O(O.S,"Promise",{try:function(e){var t=Fi.f(this),n=Bi(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var rr=l.Promise,or=n(i(function(e){e.exports={default:rr,__esModule:!0}}));n(i(function(e,t){t.__esModule=!0;var n,i=(n=Jt)&&n.__esModule?n:{default:n};t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}}));var ar=Ie.onFreeze;Yt("preventExtensions",function(e){return function(t){return e&&d(t)?e(ar(t)):t}});var sr=l.Object.preventExtensions;n(i(function(e){e.exports={default:sr,__esModule:!0}}));var ur=un;function lr(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],n=0,i=t.length;n<i;n++)if(e.hasOwnProperty(t[n]))return!0;return!1}function cr(e){return!!e&&e.hasOwnProperty("value")&&On(e.configurable)&&On(e.enumerable)&&On(e.writable)}function fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"You must pass me an array of function";if(!Sn(e)||e.length<1)throw new TypeError(t);if(1===e.length){if(!kn(e[0]))throw new TypeError(t);return e[0]}return e.reduce(function(e,n){if(!kn(n)||!kn(e))throw new TypeError(t);return function(t){return Rn(n,this)(Rn(e,this)(t))}})}function dr(e){if(kn(console.warn))return console.warn(e);console.log(e)}var hr=function(){var e=Xt,t=Ht;return kn(t)?function(n){return $t(e(n).concat(t(n)))}:e}(),pr=kn(Mt)?Mt:function(e){return hr(e).reduce(function(t,n){return t[n]=ur(e,n),t},{})};function vr(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)throw new TypeError("You must pass in decorators in compressMultipleDecorators");return t.forEach(function(e){if(!kn(e))throw new TypeError('Decorators must be a function, but not "'+e+'" in '+("undefined"===typeof e?"undefined":kt(e)))}),1===t.length?t[0]:function(e,n,i){return t.reduce(function(t,i){return i(e,n,t)},i)}}function mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.get,n=e.set,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.preGet,o=void 0!==r&&r,a=i.preSet,s=void 0===a||a;if(!kn(t)&&!kn(n)&&!(Sn(t)&&t.length>0)&&!(Sn(n)&&n.length>0))throw new TypeError("@accessor need a getter or setter. If you don't need to add setter/getter. You should remove @accessor");var u="@accessor only accept function or array of function as getter/setter";return t=Sn(t)?fr(t,u):t,n=Sn(n)?fr(n,u):n,function(e,i,r){var a=r||{},u=a.configurable,l=void 0===u||u,c=a.enumerable,f=void 0===c||c,d=kn(t),h=kn(n),p=function(e){return d?Rn(t,this)(e):e},v=function(e){return h?Rn(n,this)(e):e};if((S=r)&&(kn(S.get)||kn(S.set))&&On(S.configurable)&&On(S.enumerable)&&void 0===S.writable){var m=r.get,g=r.set,y=kn(m),b=kn(g);return!y&&d&&dr("You are trying to set getter via @accessor on "+i+" without getter. That's not a good idea."),!b&&h&&dr("You are trying to set setter via @accessor on  "+i+" without setter. That's not a good idea."),{get:y||d?function(){var e=this,t=Rn(p,this),n=function(){return y?Rn(m,e)():void 0};return(o?[t,n]:[n,t]).reduce(function(e,t){return t(e)},void 0)}:void 0,set:b||h?function(e){var t=this,n=Rn(v,this),i=function(e){return b?Rn(g,t)(e):e};return(s?[n,i]:[i,n]).reduce(function(e,t){return t(e)},e)}:void 0,configurable:l,enumerable:f}}if(function(e){return!!e&&kn(e.initializer)&&On(e.configurable)&&On(e.enumerable)&&On(e.writable)}(r)){var w=r.initializer,_=void 0,E=!1;return{get:function(){var e=Rn(p,this);return E?e(_):(_=Rn(w,this)(),E=!0,e(_))},set:function(e){var t=Rn(v,this);return _=s?t(e):e,E=!0,s||t(_),_},configurable:l,enumerable:f}}var S,k=(r||{}).value;return{get:function(){return Rn(p,this)(k)},set:function(e){var t=Rn(v,this);return k=s?t(e):e,s||t(k),k},configurable:l,enumerable:f}}}var gr=en;function yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.requirement,i=t.customArgs,r=void 0!==i&&i;return function(){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.exclude,u=void 0===s?[]:s,l=a.include,c=void 0===l?[]:l,f=a.construct,d=void 0!==f&&f,h=a.self,p=void 0!==h&&h;if(!Sn(u))throw new TypeError("options.exclude must be an array");if(!Sn(c))throw new TypeError("options.include must be an array");return function(t){var o=kn(t);if(!p&&!o)throw new TypeError("@"+e.name+"Class can only be used on class");if(p&&Mn(t))throw new TypeError("@"+e.name+"Class must be used on non-primitive type value in 'self' mode");var a=p?t:t.prototype;if(En(a))throw new Error("The prototype of the "+t.name+" is empty, please check it");var s=pr(a);hr(a).concat(c).forEach(function(t){var l=s[t];"constructor"===t&&!d||p&&o&&["name","length","prototype"].indexOf(t)>-1||u.indexOf(t)>-1||kn(n)&&!1===n(a,t,l,{self:p})||gr(a,t,(r?e.apply(void 0,In(i)):e)(a,t,l))})}}}var br=yr(_r,{requirement:function(e,t,n){return cr(n)&&kn(n.value)}}),wr=void 0;function _r(e,t,n){if(1===arguments.length)return br()(e);var i=n||{},r=i.value,o=i.configurable;if(!kn(r))throw new TypeError('@autobind can only be used on functions, not "'+r+'" in '+("undefined"===typeof r?"undefined":kt(r))+' on property "'+t+'"');var a,s=e.constructor;return{configurable:o,enumerable:!1,get:function(){var n=this,i=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.call.apply(r,[n].concat(In(t)))};return this===e?r:this.constructor!==s&&Wn(this).constructor===s?r:this.constructor!==s&&t in this.constructor.prototype?function(e,t){if("undefined"===typeof vi)throw new Error("Using @autobind on "+t.name+"() requires WeakMap support due to its use of super."+t.name+"()");wr||(wr=new vi),!1===wr.has(e)&&wr.set(e,new vi);var n=wr.get(e);return!1===n.has(t)&&n.set(t,Rn(t,e)),n.get(t)}(this,r):(en(this,t,{configurable:!0,writable:!0,enumerable:!1,value:i}),i)},set:(a=t,function(e){return en(this,a,{configurable:!0,writable:!0,enumerable:!0,value:e}),e})}}var Er=un,Sr=en,kr=en,Tr=un;yr(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("@before accept at least one parameter. If you don't need to preprocess before your function, do not add @before decorators");if(t.length>2&&lr(t[2]))throw new Error("You may use @before straightly, @before return decorators, you should call it before you set it as decorator.");for(var i=t.length-1;i>-1;i--)if(!kn(t[i]))throw new TypeError("@before only accept function parameter");return function(e,n,i){var r=i||{},o=r.value,a=r.configurable,s=r.enumerable,u=r.writable;if(!kn(o))throw new TypeError('@before can only be used on function, please check the property "'+n+'" is a method or not.');return{value:function(){for(var e=this,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=t.reduce(function(t,n){var i=Rn(n,e).apply(void 0,In(t));return void 0===i?t:Sn(i)?i:[i]},i);return Rn(o,this).apply(void 0,In(a))},configurable:a,enumerable:s,writable:u}}},{requirement:function(e,t,n){return cr(n)&&kn(n.value)},customArgs:!0}),yr(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("@after accept at least one parameter. If you don't need to preprocess after your function, do not add @after decorators");if(t.length>2&&lr(t[2]))throw new Error("You may have used @after straightly. @after return decorators. You should call it before you use it as decorators");var i=fr(t,"@after only accept function parameter");return function(e,t,n){var r=n||{},o=r.value,a=r.configurable,s=r.enumerable,u=r.writable;if(!kn(o))throw new TypeError('@after can only be used on function, please checkout your property "'+t+'" is a method or not.');return{value:function(){var e=Rn(o,this).apply(void 0,arguments);return Rn(i,this)(e)},configurable:a,enumerable:s,writable:u}}},{requirement:function(e,t,n){return cr(n)&&kn(n.value)},customArgs:!0}),yr(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.other,i=t.backup;if(!kn(e)&&!An(e))throw new TypeError("@runnable only accept Function or String");return function(t,r,o){var a=o||{},s=a.value,u=a.configurable;if(!kn(s))throw new TypeError("@runnable can only be used on method, but not "+s+' on property "'+r+'".');var l=kn(e)?e:function(){var t=e.split(".");return Nn(Mn(n)?this:n,t)};return i=kn(i)?i:function(){},{value:function(){return!0===Rn(l,this).apply(void 0,arguments)?Rn(s,this).apply(void 0,arguments):Rn(i,this).apply(void 0,arguments)},enumerable:!1,configurable:u,writable:!1}}},{requirement:function(e,t,n){return cr(n)&&kn(n.value)},customArgs:!0}),yr(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).other;if(!kn(e)&&!xn(e)&&!An(e))throw new TypeError("@waitUntil only accept Function, Promise or String");return function(n,i,r){var o=r||{},a=o.value,s=o.configurable;if(!kn(a))throw new TypeError("@waituntil can only be used on function, but not "+a+' on property "'+i+'"');var u=!1,l=[],c=xn(e)?function(){return e}:kn(e)?e:function(){var n=e.split("."),i=n.slice(-1),r=Mn(t)?this:t;if(!u){var o=Nn(r,n.slice(0,-1));if(En(o))return o;var a=Er(o,i),s=function(e){if(!0===e)for(;l.length>0;)l[0](),l.shift();return e},c=lr(a)?mr({set:s})(o,i,a):mr({set:s})(o,i,{value:void 0,configurable:!0,enumerable:!0,writable:!0});Sr(o,i,c),u=!0}return Nn(r,n)};return{value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Rn(a,this),o=Rn(c,this).apply(void 0,n);return xn(o)?or.resolve(o).then(function(){return Rn(a,e).apply(void 0,n)}):!0===o?Rn(a,this).apply(void 0,n):new or(function(e){l.push(function(){r.apply(void 0,n),e()})})},enumerable:!1,configurable:s,writable:!1}}},{requirement:function(e,t,n){return cr(n)&&kn(n.value)},customArgs:!0});var Ar=n(i(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}})),Or=n(i(function(e,t){t.__esModule=!0;var n,i=(n=Jt)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()}));function xr(e,t){if(!An(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+("undefined"===typeof e?"undefined":kt(e)));return An(t)?"["+(e=Mr.FORCE_GLOBAL_TAG?Mr.GLOBAL_TAG:e||Mr.GLOBAL_TAG)+"] > "+t:"["+Mr.GLOBAL_TAG+"] > "+e}var Mr=function(){function e(){Ar(this,e)}return Or(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log)(xr(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log)(xr(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log)(xr(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log)(xr(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(xr(t,n))}}]),e}();function Lr(e,t){var n=t,i=(e=""+(e||"")).length;return(((t=(t||i)-i)>0?e.repeat?"0".repeat(t):new Array(t+1).join("0"):"")+e).slice(0,n)}function Ir(e){var t=Math.floor(e/3600);e=Math.floor(e%3600);var n=Lr(Math.floor(e/60),2),i=Lr(e=Math.floor(e%60),2);return t>=1?t+":"+n+":"+i:n+":"+i}Mr.GLOBAL_TAG="chimee",Mr.FORCE_GLOBAL_TAG=!1,Mr.ENABLE_ERROR=!0,Mr.ENABLE_INFO=!0,Mr.ENABLE_WARN=!0,Mr.ENABLE_DEBUG=!0,Mr.ENABLE_VERBOSE=!0,i(function(t,n){!function(e,i){var r="model",o="name",a="type",s="vendor",u="version",l="mobile",c="tablet",f={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"===typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(e,t){for(var n,i,r,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(n=i=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(r=0;r<c.length;r++)s=a[++i],"object"===typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!==typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"===typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(f.has(t[n][i],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,u],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[o,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],u],[/(edge)\/((\d+)?[\w\.]+)/i],[o,u],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],u],[/(QQ)\/([\d\.]+)/i],[o,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[o,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,u],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[u,d.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[r,s,[a,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[s,"Apple"],[a,c]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,r,[a,c]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[r,[s,"Amazon"],[a,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[r,d.str,h.device.amazon.model],[s,"Amazon"],[a,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,s,[a,l]],[/\((ip[honed|\s\w*]+);/i],[r,[s,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,r,[a,l]],[/\(bb10;\s(\w+)/i],[r,[s,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[r,[s,"Asus"],[a,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[r,"Xperia Tablet"],[a,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[r,[s,"Sony"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,r,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[r,[s,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[r,[s,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[s,d.str,h.device.sprint.vendor],[r,d.str,h.device.sprint.model],[a,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,r,[a,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[s,[r,/_/g," "],[a,l]],[/(nexus\s9)/i],[r,[s,"HTC"],[a,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[r,[s,"Huawei"],[a,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[s,r,[a,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[s,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[s,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[r,[s,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[s,"Motorola"],[a,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[s,f.trim],[r,f.trim],[a,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[r,/^/,"SmartTV"],[s,"Samsung"],[a,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[r,[s,"Sharp"],[a,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],r,[a,c]],[/smart-tv.+(samsung)/i],[s,[a,"smarttv"],r],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[s,"Samsung"],r,[a,l]],[/sie-(\w+)*/i],[r,[s,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[s,"Nokia"],r,[a,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[r,[s,"Acer"],[a,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[r,[s,"LG"],[a,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],r,[a,c]],[/(lg) netcast\.tv/i],[s,r,[a,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[r,[s,"LG"],[a,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[s,"Lenovo"],[a,c]],[/linux;.+((jolla));/i],[s,r,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[s,r,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[s,r,[a,l]],[/crkey/i],[[r,"Chromecast"],[s,"Google"]],[/android.+;\s(glass)\s\d/i],[r,[s,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)\s/i],[r,[s,"Google"],[a,c]],[/android.+;\s(pixel xl|pixel)\s/i],[r,[s,"Google"],[a,l]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,l]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[r,[s,"Meizu"],[a,c]],[/android.+a000(1)\s+build/i],[r,[s,"OnePlus"],[a,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[r,[s,"RCA"],[a,c]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[r,[s,"Dell"],[a,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[r,[s,"Verizon"],[a,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[s,"Barnes & Noble"],r,[a,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[r,[s,"NuVision"],[a,c]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[s,"ZTE"],r,[a,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[r,[s,"Swiss"],[a,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[r,[s,"Swiss"],[a,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[r,[s,"Zeki"],[a,c]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[s,"Dragon Touch"],r,[a,c]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[r,[s,"Insignia"],[a,c]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[r,[s,"NextBook"],[a,c]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[s,"Voice"],r,[a,l]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[s,"LvTel"],r,[a,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[r,[s,"Envizen"],[a,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[r,[s,"MachSpeed"],[a,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[r,[s,"Rotor"],[a,c]],[/android.+(KS(.+))\s+build/i],[r,[s,"Amazon"],[a,c]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[s,r,[a,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,f.lowerize],s,r],[/(android.+)[;\/].+build/i],[r,[s,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,u],[/rv\:([\w\.]+).*(gecko)/i],[u,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[u,d.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[u,d.str,h.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[o,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[o,"Symbian"],u],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[o,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],u],[/(sunos)\s?([\w\.]+\d)*/i],[[o,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[o,u],[/(haiku)\s(\w+)/i],[o,u],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[o,u]]},v=function t(n,i){if("object"===typeof n&&(i=n,n=void 0),!(this instanceof t))return new t(n,i).getResult();var r=n||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=i?f.extend(p,i):p;return this.getBrowser=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return d.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};v.VERSION="0.7.17",v.BROWSER={NAME:o,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:r,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:o,VERSION:u},v.OS={NAME:o,VERSION:u},t.exports&&(n=t.exports=v),n.UAParser=v;var m=e&&(e.jQuery||e.Zepto);if("undefined"!==typeof m){var g=new v;m.ua=g.getResult(),m.ua.get=function(){return g.getUA()},m.ua.set=function(e){g.setUA(e);var t=g.getResult();for(var n in t)m.ua[n]=t[n]}}}("object"===typeof window?window:e)}),"undefined"!==typeof window&&Object.prototype.toString.call(window),O(O.S+O.F,"Object",{assign:Kn});var Dr=l.Object.assign,Cr=n(i(function(e){e.exports={default:Dr,__esModule:!0}}));O(O.S,"Object",{create:re});var Rr=l.Object,Nr=function(e,t){return Rr.create(e,t)},Pr=i(function(e){e.exports={default:Nr,__esModule:!0}}),jr=n(Pr),Fr=jr(null);function Br(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++Fr.count);var i=n+"_"+t,r=Fr[i];return r||(r=Fr[i]=[]),r}function zr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Br(e,t);if(n||i){var o=-1,a=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,a=e[1],!0}),-1!==o&&r.splice(o,1),a}r.length=0}Fr.count=0,function(){function e(t,n){var i=this;if(Ar(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==("undefined"===typeof t?"undefined":kt(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}Or(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];kn(i)&&!r&&(r=i,i=void 0);var o=[n,void 0,i];i&&!r&&(r=function(){zr(e,t,n,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(e,o)}),r&&(o[1]=r),Br(e,t).push(o)}(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return zr(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return function(e,t,n){var i=jr(null);i.type=t,i.target=e,n&&Cr(i,Tn(n)?n:{data:n}),Br(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[i])})}(this.__target,e,{data:t}),this}}])}();var Ur=jr(null);function Gr(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++Ur.count);var i=n+"_"+t,r=Ur[i];return r||(r=Ur[i]=[]),r}function Wr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];kn(i)&&!r&&(r=i,i=void 0);var o=[n,void 0,i];i&&!r&&(r=function(){$r(e,t,n,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(e,o)}),r&&(o[1]=r),Gr(e,t).push(o)}function $r(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Gr(e,t);if(n||i){var o=-1,a=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,a=e[1],!0}),-1!==o&&r.splice(o,1),a}r.length=0}Ur.count=0,function(){function e(t,n){var i=this;if(Ar(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==("undefined"===typeof t?"undefined":kt(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}Or(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Wr(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $r(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return function(e,t,n){var i=jr(null);i.type=t,i.target=e,n&&Cr(i,Tn(n)?n:{data:n}),Gr(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[i])})}(this.__target,e,{data:t}),this}}])}(),"undefined"!==typeof window&&Object.prototype.toString.call(window);var Vr=document.createElement("div"),Hr="innerText";"textContent"in Vr&&(Hr="textContent");var Yr=Array.prototype;function Kr(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.add(t)});else{var i=" "+(e.className||"")+" ";n.forEach(function(e){-1===i.indexOf(" "+e+" ")&&(i+=" "+e)}),e.className=i.trim()}}}function Zr(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.remove(t)});else{var i=" "+e.className+" ";n.forEach(function(e){for(var t=" "+e+" ";-1!==i.indexOf(t);)i=i.replace(t," ")}),e.className=i.trim()}}}function Xr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i){var o=$r(e,t+"_once",n);o&&(n=o)}e.removeEventListener(t,n,r)}function qr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i){var o=n;n=function(){for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];o.apply(this,s),Xr(e,t,n,i,r)},Wr(e,t+"_once",o,n)}e.addEventListener(t,n,r)}function Qr(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(n){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],i=arguments[3],r=[];n&&r.push(e);for(;e&&e.parentNode!==t;)(e=e.parentNode)&&r.push(e);i&&r.push(t);return r}(n.target||n.srcElement,e,!0),o=eo(t,e,!0),a=void 0;o.find?a=o.find(function(e){return r.find(function(t){return e===t})}):o.forEach(function(e){return!a&&r.forEach(function(t){a||e!==t||(a=t)})}),a&&i.apply(a,arguments)};Wr(e,n+"_delegate_"+t,i,o),e.addEventListener(n,o,r)}function Jr(e,t,n){if(Tn(t))for(var i in t)Jr(e,i,t[i]);else e.style[t]=n}function eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],i=t.querySelectorAll(e);return n?$t(i):i}function to(e,t){return e.constructor===no?e:new no(e,t)}var no=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;Ar(this,e);this.selector=t;var i=void 0;t&&t.constructor===NodeList?i=$t(t):Sn(t)?i=t:An(t)?0===t.indexOf("<")?(Vr.innerHTML=t,i=eo("*",Vr,!0)):i=eo(t,n,!0):i=[t],Cr(this,i),this.length=i.length}return Or(e,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Yr.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Yr.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return to(Yr.splice.apply(this,t))}},{key:"find",value:function(e){var t=[];this.each(function(n){t=t.concat(eo(e,n,!0))});var n=to(t);return n.parent=this,n.selector=e,n}},{key:"append",value:function(e){var t=to(e),n=this[0];return t.each(function(e){return n.appendChild(e)}),this}},{key:"appendTo",value:function(e){return to(e).append(this),this}},{key:"text",value:function(e){return 0===arguments.length?this[0][Hr]:this.each(function(t){t[Hr]=e})}},{key:"html",value:function(e){return 0===arguments.length?this[0].innerHTML:this.each(function(t){t.innerHTML=e})}},{key:"attr",value:function(e,t){return 1===arguments.length?(n=this[0],i=e,n.getAttribute(i)):this.each(function(n){return function(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n)}(n,e,t)});var n,i}},{key:"data",value:function(e,t){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[e]:this.each(function(n){(n.dataset||(n.dataset={}))[e]=t})}},{key:"css",value:function(e,t){return 1!==arguments.length||Tn(e)?this.each(function(n){return Jr(n,e,t)}):function(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,null))[t]||e.style[t]}(this[0],e)}},{key:"addClass",value:function(e){return this.each(function(t){return Kr(t,e)})}},{key:"removeClass",value:function(e){return this.each(function(t){return Zr(t,e)})}},{key:"hasClass",value:function(e){return t=this[0],new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t.className);var t}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return qr(r,e,t,n,i)})}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Xr(r,e,t,n,i)})}},{key:"delegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Qr(r,e,t,n,i)})}},{key:"undelegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=$r(e,n+"_delegate_"+t,i);o&&e.removeEventListener(n,o,r)}(r,e,t,n,i)})}},{key:"remove",value:function(){return this.each(function(e){return function(e){e.parentNode.removeChild(e)}(e)})}}]),e}(),io=n(i(function(e,t){t.__esModule=!0;var n,i=(n=St)&&n.__esModule?n:{default:n};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}})),ro=n(i(function(e,t){t.__esModule=!0;var n=r(Gn),i=r(sn);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,r,o){null===t&&(t=Function.prototype);var a=(0,i.default)(t,r);if(void 0===a){var s=(0,n.default)(t);return null===s?void 0:e(s,r,o)}if("value"in a)return a.value;var u=a.get;return void 0!==u?u.call(o):void 0}})),oo=function(e,t){if(h(e),!d(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},ao={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=f(Function.call,$e.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(Co){t=!0}return function(e,i){return oo(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:oo};O(O.S,"Object",{setPrototypeOf:ao.set});var so=l.Object.setPrototypeOf,uo=i(function(e){e.exports={default:so,__esModule:!0}});n(uo);var lo,co=n(i(function(e,t){t.__esModule=!0;var n=o(uo),i=o(Pr),r=o(St);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,r.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}})),fo=function(){function e(t){Ar(this,e),this.parent=t}return Or(e,[{key:"create",value:function(){this.createEl(),this.addAllEvent(),this.option.create&&this.option.create.apply(this)}},{key:"destroy",value:function(){this.removeAllEvent(),this.option.destroy&&this.option.destroy.apply(this)}},{key:"createEl",value:function(){this.$dom=document.createElement(this.option.tag),"string"===typeof this.option.html?this.$dom.innerHTML=this.option.html:this.$dom.appendChild(this.option.html),this.parent.$wrap.appendChild(this.$dom)}},{key:"addAllEvent",value:function(){var e=this;this.option.defaultEvent&&nn(this.option.defaultEvent).forEach(function(t){var n=e.option.defaultEvent[t];e[n]=Rn(e[n],e),qr(e.$dom,t,e[n],!1,!1)}),this.option.event&&nn(this.option.event).forEach(function(t){var n="__"+t;e[n]=Rn(e.option.event[t],e),qr(e.$dom,t,e[n],!1,!1)})}},{key:"removeAllEvent",value:function(){var e=this;this.$dom instanceof HTMLElement||(this.$dom=this.$dom[0]),this.option.defaultEvent&&nn(this.option.defaultEvent).forEach(function(t){var n=e.option.defaultEvent[t];e[n]=Rn(e[n],e),Xr(e.$dom,t,e[n],!1,!1)}),this.option.event&&nn(this.option.event).forEach(function(t){var n="__"+t;e[n]=Rn(e.option.event[t],e),Xr(e.$dom,t,e[n],!1,!1)})}}]),e}(),ho=function(e){function t(e,n){Ar(this,t);var i=io(this,(t.__proto__||Wn(t)).call(this,e));return i.option=n,i.init(),i}return co(t,fo),Or(t,[{key:"init",value:function(){ro(t.prototype.__proto__||Wn(t.prototype),"create",this).call(this),Kr(this.$dom,"chimee-flex-component")}}]),t}(),po={tag:"chimee-control-state",html:"\n    <chimee-control-state-play></chimee-control-state-play>\n    <chimee-control-state-pause></chimee-control-state-pause>\n  ",animate:{icon:'\n      <svg viewBox="0 0 200 200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g fill="#ffffff" stroke="#ffffff">\n          <path class="left"></path>\n          <path class="right"></path>\n        </g>\n      </svg>\n    ',path:{play:{left:"M0.921875,0.265625L0.921875,197.074852L95.7890625,149L96.2929688,49Z",right:"M90.3142151,45.9315226L90.3142151,151.774115L201.600944,99.9938782L201.600944,98.0237571Z"},pause:{left:"M0.921875,1.265625L0.921875,198.074852L79.3611677,198.074852L79.3611677,0.258923126Z",right:"M126.921875,1.265625L126.921875,198.074852L205.361168,198.074852L205.361168,0.258923126Z"}}},defaultEvent:{click:"click"}},vo=function(e){function t(e,n){Ar(this,t);var i=io(this,(t.__proto__||Wn(t)).call(this,e));return i.option=Cn(po,Tn(n)?n:{}),i.animate=!1,i.init(),i}return co(t,fo),Or(t,[{key:"init",value:function(){ro(t.prototype.__proto__||Wn(t.prototype),"create",this).call(this),this.$dom=to(this.$dom),this.$dom.addClass("chimee-flex-component"),this.option.icon&&this.option.icon.play&&this.option.icon.pause?(this.$play=this.$dom.find("chimee-control-state-play"),this.$pause=this.$dom.find("chimee-control-state-pause"),this.$play.html(this.option.icon.play),this.$pause.html(this.option.icon.pause)):this.option.bitmap||(this.animate=!0,this.option.animate.path=this.option.path?this.option.path:this.option.animate.path,this.$dom.html(this.option.animate.icon),this.$left=this.$dom.find(".left"),this.$right=this.$dom.find(".right")),this.changeState("pause")}},{key:"changeState",value:function(e){var t="play"===e?"pause":"play";this.state=e,Kr(this.parent.$dom,t),Zr(this.parent.$dom,e),this.animate&&this.setPath(t)}},{key:"setPath",value:function(e){var t=this.option.animate.path;"play"===e?(this.$left.attr("d",t.play.left),this.$right.attr("d",t.play.right)):(this.$left.attr("d",t.pause.left),this.$right.attr("d",t.pause.right))}},{key:"click",value:function(e){var t="play"===this.state?"pause":"play";this.changeState(t),this.parent.$emit(t)}}]),t}();function mo(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var go,yo={tag:"chimee-volume",html:"\n    <chimee-volume-state>\n      <chimee-volume-state-mute></chimee-volume-state-mute>\n      <chimee-volume-state-low></chimee-volume-state-low>\n      <chimee-volume-state-high></chimee-volume-state-high>\n    </chimee-volume-state>\n    <chimee-volume-bar>\n      <chimee-volume-bar-wrap>\n        <chimee-volume-bar-bg></chimee-volume-bar-bg>\n        <chimee-volume-bar-all>\n          <chimee-volume-bar-ball></chimee-volume-bar-ball>\n        </chimee-volume-bar-all>\n        <chimee-volume-bar-track></chimee-volume-bar-track>\n      </chimee-volume-bar-wrap>\n    </chimee-volume-bar>\n  ",animate:{icon:'\n      <svg viewBox="0 0 107 101" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g class="volume">\n          <polygon class="horn" points="0.403399942 30 27.3842118 30 56.8220589 2.84217094e-14 57.9139815 100 27.3842118 70 0.403399942 70"></polygon>\n          <path class="ring1" d="M63,5.00975239 C69.037659,4.78612057 75.9178585,8.40856146 83.6405984,15.877075 C95.2247083,27.0798454 100,34.7975125 100,50.9608558 C100,67.1241991 95.3628694,73.7907482 83.6405984,83.8306724 C75.8257511,90.5239552 68.9455516,94.0320644 63,94.355" fill-opacity="0" stroke-width="10"></path>\n          <path class="ring2" d="M65.2173913,29.4929195 C67.8779343,29.3931169 70.9097496,31.0097416 74.3128371,34.3427934 C79.4174684,39.3423712 81.5217391,42.7866154 81.5217391,50 C81.5217391,57.2133846 79.4783502,60.1885354 74.3128371,64.6691576 C70.8691617,67.656239 67.8373465,69.2218397 65.2173913,69.3659595" fill-opacity="0" stroke-width="10"></path>\n          <path class="line" d="M4.19119202,3.65220497 L102,96" stroke-width="10"></path>\n        </g>\n      </svg>\n    '},defaultEvent:{mousedown:"mousedown"}},bo=(mo((lo=function(e){function t(e,n){Ar(this,t);var i=io(this,(t.__proto__||Wn(t)).call(this,e));return i.parent.preVolume=0,i.option=Cn(yo,Tn(n)?n:{}),i.init(),i}return co(t,fo),Or(t,[{key:"init",value:function(){var e=this;ro(t.prototype.__proto__||Wn(t.prototype),"create",this).call(this),this.$dom=to(this.$dom),this.$state=this.$dom.find("chimee-volume-state"),this.$bar=this.$dom.find("chimee-volume-bar"),this.$all=this.$dom.find("chimee-volume-bar-all"),this.$bg=this.$dom.find("chimee-volume-bar-bg"),this.layout="vertical"===this.option.layout?"vertical":"horizonal",this.option.icon&&this.option.icon.mute&&this.option.icon.low?(this.option.icon.high=this.option.icon.high||this.option.icon.low,this.$mute=this.$dom.find("chimee-volume-state-mute"),this.$low=this.$dom.find("chimee-volume-state-low"),this.$high=this.$dom.find("chimee-volume-state-high"),this.$mute.html(this.option.icon.mute),this.$low.html(this.option.icon.low),this.$high.html(this.option.icon.high)):this.option.bitmap||(this.animate=!0,this.$state.html(this.option.animate.icon)),this.$dom.addClass("chimee-flex-component "+this.layout),this.changeState(),this.watch_muted=this.parent.$watch("muted",function(t){e.update()})}},{key:"inited",value:function(){this.update()}},{key:"destroy",value:function(){this.watch_muted(),ro(t.prototype.__proto__||Wn(t.prototype),"destroy",this).call(this)}},{key:"changeState",value:function(){this.parent.muted||0===this.parent.volume?this.state="mute":this.parent.volume>0&&this.parent.volume<=.5?this.state="low":this.parent.volume>.5&&this.parent.volume<=1&&(this.state="high"),this.$dom.removeClass("mute low high"),this.$dom.addClass(this.state)}},{key:"click",value:function(e){var t=e.path||function(e){var t=[];if(null===e)return t;for(t.push(e);null!==e.parentNode;)e=e.parentNode,t.push(e);return t}(e.target);return-1!==t.indexOf(this.$state[0])?(this.stateClick(e),"state"):-1!==t.indexOf(this.$bar[0])?(this.barClick(e),"bar"):"padding"}},{key:"stateClick",value:function(){if(this.parent.muted)this.parent.muted=!1;else{var e=this.parent.volume;this.parent.volume=0===e?this.parent.preVolume:0,this.parent.preVolume=e,this.changeState()}}},{key:"barClick",value:function(e){var t="vertical"===this.layout?1-e.offsetY/this.$bg[0].offsetHeight:e.offsetX/this.$bg[0].offsetWidth;this.parent.volume=t<0?0:t>1?1:t,this.update()}},{key:"mousedown",value:function(e){"bar"===this.click(e)&&(this.startX="vertical"===this.layout?e.clientY:e.clientX,this.startVolume=this.parent.volume,qr(window,"mousemove",this.draging),qr(window,"mouseup",this.dragEnd),qr(window,"contextmenu",this.dragEnd))}},{key:"update",value:function(){this.changeState();var e=this.parent.muted?0:this.parent.volume;"vertical"===this.layout?this.$all.css("height",100*e+"%"):this.$all.css("width",100*e+"%")}},{key:"draging",value:function(e){this.endX="vertical"===this.layout?e.clientY:e.clientX;var t="vertical"===this.layout?(this.startX-this.endX)/this.$bg[0].offsetHeight:(this.endX-this.startX)/this.$bg[0].offsetWidth,n=+(this.startVolume+t).toFixed(2);this.parent.volume=n<0?0:n>1?1:n,this.parent.muted=!1}},{key:"dragEnd",value:function(){this.startX=0,this.startVolume=0,Xr(window,"mousemove",this.draging),Xr(window,"mouseup",this.dragEnd),Xr(window,"contextmenu",this.dragEnd)}}]),t}()).prototype,"draging",[_r],un(lo.prototype,"draging"),lo.prototype),mo(lo.prototype,"dragEnd",[_r],un(lo.prototype,"dragEnd"),lo.prototype),lo);function wo(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _o,Eo={tag:"chimee-progressbar",html:'\n    <chimee-progressbar-wrap>\n      <chimee-progressbar-bg class="chimee-progressbar-line"></chimee-progressbar-bg>\n      <chimee-progressbar-buffer class="chimee-progressbar-line"></chimee-progressbar-buffer>\n      <chimee-progressbar-all class="chimee-progressbar-line">\n        <chimee-progressbar-ball></chimee-progressbar-ball>\n      </chimee-progressbar-all>\n      <chimee-progressbar-tip></chimee-progressbar-tip>\n    </chimee-progressbar-wrap>\n  '},So=(wo((go=function(e){function t(e,n){Ar(this,t);var i=io(this,(t.__proto__||Wn(t)).call(this,e));return i.option=Cn(Eo,Tn(n)?n:{}),i.visiable=!1!==n,i.init(),i}return co(t,fo),Or(t,[{key:"init",value:function(){ro(t.prototype.__proto__||Wn(t.prototype),"create",this).call(this),this.$dom=to(this.$dom),this.$wrap=this.$dom.find("chimee-progressbar-wrap"),this.$buffer=this.$dom.find("chimee-progressbar-buffer"),this.$all=this.$dom.find("chimee-progressbar-all"),this.$tip=this.$dom.find("chimee-progressbar-tip"),this.$track=this.$dom.find("chimee-progressbar-track"),this.$line=this.$dom.find(".chimee-progressbar-line"),this.$ball=this.$dom.find("chimee-progressbar-ball"),this.$dom.addClass("chimee-flex-component"),!this.visiable&&this.$dom.css("visibility","hidden"),"top"===this.option.layout&&(this.$dom.addClass("progressbar-layout-top"),this.$wrap.css({top:-this.$ball[0].offsetHeight+"px"}),Jr(this.parent.$wrap,"paddingTop",this.$ball[0].offsetHeight+"px")),this.addWrapEvent()}},{key:"destroy",value:function(){this.removeWrapEvent(),this.watch_screen&&this.watch_screen(),ro(t.prototype.__proto__||Wn(t.prototype),"destroy",this).call(this)}},{key:"addWrapEvent",value:function(){this.$wrap.on("mousedown",this.mousedown),this.$wrap.on("mousemove",this.tipShow),this.$wrap.on("mouseleave",this.tipEnd)}},{key:"removeWrapEvent",value:function(){this.$wrap.off("mousedown",this.mousedown),this.$wrap.off("mousemove",this.tipShow),this.$wrap.off("mouseleave",this.tipEnd)}},{key:"progress",value:function(){var e=0;try{e=this.parent.buffered.end(0)}catch(Co){}var t=e/this.parent.duration*100+"%";this.$buffer.css("width",t)}},{key:"update",value:function(){var e=void 0!==this._currentTime?this._currentTime:this.parent.currentTime,t=e?e/this.parent.duration:0;this.$all.css("width","calc("+100*t+"% - "+this.$ball[0].offsetWidth/2+"px")}},{key:"mousedown",value:function(e){e.target!==this.$tip[0]&&(this.parent.duration===this.parent.duration?(this._currentTime=e.offsetX/this.$wrap[0].offsetWidth*this.parent.duration,this.startX=e.clientX,this.startTime=this._currentTime,qr(window,"mousemove",this.draging),qr(window,"mouseup",this.dragEnd),qr(window,"contextmenu",this.dragEnd)):console.error("isNaN(duration) === true"))}},{key:"draging",value:function(e){this.endX=e.clientX;var t=(this.endX-this.startX)/this.$wrap[0].offsetWidth*this.parent.duration,n=+(this.startTime+t).toFixed(2);this._currentTime=n<0?0:n>this.parent.duration?this.parent.duration:n,this.update()}},{key:"dragEnd",value:function(){this.update(),this.startX=0,this.startTime=0,this.parent.currentTime=this._currentTime,this._currentTime=void 0,Xr(window,"mousemove",this.draging),Xr(window,"mouseup",this.dragEnd),Xr(window,"contextmenu",this.dragEnd)}},{key:"tipShow",value:function(e){if(e.target!==this.$tip[0]&&e.target!==this.$ball[0]){var t=e.offsetX/this.$wrap[0].offsetWidth*this.parent.duration,n=Ir(t=t<0?0:t>this.parent.duration?this.parent.duration:t),i=e.offsetX-this.$tip[0].offsetWidth/2,r=this.$wrap[0].offsetWidth-this.$tip[0].offsetWidth;i=i<0?0:i>r?r:i,this.$tip.text(n),this.$tip.css("display","inline-block"),this.$tip.css("left",i+"px")}else this.$tip.css("display","none")}},{key:"tipEnd",value:function(){this.$tip.css("display","none")}},{key:"changePointerEvent",value:function(e){this.$wrap.css("pointerEvents",e)}}]),t}()).prototype,"mousedown",[_r],un(go.prototype,"mousedown"),go.prototype),wo(go.prototype,"draging",[_r],un(go.prototype,"draging"),go.prototype),wo(go.prototype,"dragEnd",[_r],un(go.prototype,"dragEnd"),go.prototype),wo(go.prototype,"tipShow",[_r],un(go.prototype,"tipShow"),go.prototype),wo(go.prototype,"tipEnd",[_r],un(go.prototype,"tipEnd"),go.prototype),go),ko={tag:"chimee-progresstime",html:"\n    <chimee-progresstime-pass>00:00</chimee-progresstime-pass\n    ><chimee-progresstime-total\n      ><span>/</span\n      ><chimee-progresstime-total-value>00:00</chimee-progresstime-total-value>\n    </chimee-progresstime-total>\n  "},To=function(e){function t(e,n){Ar(this,t);var i=io(this,(t.__proto__||Wn(t)).call(this,e));return i.option=Cn(ko,Tn(n)?n:{}),i.init(),i}return co(t,fo),Or(t,[{key:"init",value:function(){ro(t.prototype.__proto__||Wn(t.prototype),"create",this).call(this),this.$dom=to(this.$dom),this.$total=this.$dom.find("chimee-progresstime-total-value"),this.$pass=this.$dom.find("chimee-progresstime-pass"),this.$dom.addClass("chimee-flex-component")}},{key:"updatePass",value:function(){this.$pass.text(Ir(this.parent.currentTime))}},{key:"updateTotal",value:function(){this.$total.text(Ir(this.parent.duration))}}]),t}(),Ao={tag:"chimee-screen",html:'\n    <chimee-screen-full>\n      <svg viewBox="0 0 67 66" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n          <desc>Created with Sketch.</desc>\n          <defs></defs>\n          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="screen-small" transform="translate(33.756308, 32.621867) rotate(45.000000) translate(-33.756308, -32.621867) translate(18.756308, -10.378133)" fill="#FFFFFF">\n                  <polygon id="Path" transform="translate(14.967695, 66.389245) rotate(180.000000) translate(-14.967695, -66.389245) " points="11.5190786 46.9431778 11.7210093 70.7913773 0.565180527 70.7913773 15.4674455 85.8353125 29.3702096 70.7913773 18.5573247 70.7702156 18.5573247 46.9431778"></polygon>\n                  <polygon id="Path" points="11.5190786 0.274130278 11.7210093 24.1223298 0.565180527 24.1223298 15.4674455 39.1662649 29.3702096 24.1223298 18.5573247 24.1011681 18.5573247 0.274130278"></polygon>\n              </g>\n          </g>\n      </svg>\n    </chimee-screen-full>\n    <chimee-screen-small>\n      <svg viewBox="0 0 61 62" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n        <desc>Created with Sketch.</desc>\n        <defs></defs>\n        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="Group" transform="translate(30.756308, 30.621867) rotate(45.000000) translate(-30.756308, -30.621867) translate(15.756308, -12.378133)" fill="#FFFFFF">\n                <polygon id="Path" points="11.5190786 46.9431778 11.7210093 70.7913773 0.565180527 70.7913773 15.4674455 85.8353125 29.3702096 70.7913773 18.5573247 70.7702156 18.5573247 46.9431778"></polygon>\n                <polygon id="Path" transform="translate(14.967695, 19.720198) rotate(180.000000) translate(-14.967695, -19.720198) " points="11.5190786 0.274130278 11.7210093 24.1223298 0.565180527 24.1223298 15.4674455 39.1662649 29.3702096 24.1223298 18.5573247 24.1011681 18.5573247 0.274130278"></polygon>\n            </g>\n        </g>\n      </svg>\n    </chimee-screen-small>\n  ',defaultEvent:{click:"click"}},Oo=(function(e,t,n,i,r){var o={};Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((_o=function(e){function t(e,n){Ar(this,t);var i=io(this,(t.__proto__||Wn(t)).call(this,e));return i.state="small",i.option=Cn(Ao,Tn(n)?n:{}),i.init(),i}return co(t,fo),Or(t,[{key:"init",value:function(){ro(t.prototype.__proto__||Wn(t.prototype),"create",this).call(this),this.$dom=to(this.$dom),this.changeState(this.state),this.$dom.addClass("chimee-flex-component"),this.$full=this.$dom.find("chimee-screen-full"),this.$small=this.$dom.find("chimee-screen-small"),this.option.icon&&this.option.icon.full&&this.option.icon.small?(this.$full.html(this.option.icon.full),this.$small.html(this.option.icon.small)):this.option.bitmap&&(this.$full.html(""),this.$small.html(""))}},{key:"changeState",value:function(e){var t="small"===e?"full":"small";Kr(this.parent.$dom,e),Zr(this.parent.$dom,t)}},{key:"click",value:function(){var e=!1;"small"===this.state?(this.state="full",e=!0):(this.state="small",e=!1),this.changeState(this.state),this.parent.$fullscreen(e,"container"),e?this.watch_screen=this.parent.$watch("isFullscreen",this.screenChange):this.watch_screen()}},{key:"screenChange",value:function(){this.parent.fullscreenElement&&(this.state="small",this.changeState("small"),this.parent.$fullscreen(!1,"container"))}}]),t}()).prototype,"screenChange",[_r],un(_o.prototype,"screenChange"),_o.prototype),_o),xo={tag:"chimee-clarity",width:"2em",html:'\n    <chimee-clarity-text></chimee-clarity-text>\n    <chimee-clarity-list>\n      <ul></ul>\n      <div class="chimee-clarity-list-arrow">\n        <svg viewBox="0 0 115 6"  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g id="Group-3-Copy" fill="#57B0F6">\n            <polygon id="Path-2" points="0.0205224145 0.0374249581 0.0205224145 2.12677903 53.9230712 2.12677903 57.1127727 5.3468462 60.2283558 2.12677903 113.820935 2.12677903 113.820935 0.0374249581"></polygon>\n          </g>\n        </svg>\n      </div>\n    </chimee-clarity-list>\n  ',defaultEvent:{click:"click"},duration:3,bias:0,increment:0,repeatTimes:0,immediate:!1,abort:!1,list:[]},Mo=function(e){function t(e,n){Ar(this,t);var i=io(this,(t.__proto__||Wn(t)).call(this,e));return i.option=Cn(xo,Tn(n)?n:{}),i.init(),i}return co(t,fo),Or(t,[{key:"init",value:function(){if(ro(t.prototype.__proto__||Wn(t.prototype),"create",this).call(this),Kr(this.$dom,"chimee-flex-component"),this.$text=to(this.$dom).find("chimee-clarity-text"),this.$list=to(this.$dom).find("chimee-clarity-list"),this.$listUl=this.$list.find("ul"),this.option.width&&Jr(this.$dom,"width",this.option.width),!this.option.list.length)return Jr(this.$dom,{display:"none"});this.initTextList(this.option.list)}},{key:"initTextList",value:function(e){var t=this;this.$listUl.html(""),e.forEach(function(e){var n=to(document.createElement("li"));n.attr("data-url",e.src),n.text(e.name),e.src===t.parent.$videoConfig.src&&(t.$text.text(e.name),n.addClass("active")),t.$listUl.append(n)})}},{key:"click",value:function(e){var t=this,n=e.target;if("LI"===n.tagName){var i=n.getAttribute("data-url")||"";this.switchClarity(i).then(function(){t.loadOption=void 0,$t(n.parentElement.children).map(function(e){Zr(e,"active")}),Kr(e.target,"active"),t.$text.text(e.target.textContent)}).catch(function(e){console.warn(e)})}}},{key:"switchClarity",value:function(e){this.loadOption&&(this.loadOption.abort=!0);var t=this.option,n=t.duration,i=t.bias,r=t.increment,o=t.repeatTimes,a=t.immediate,s=t.abort;return this.loadOption={duration:n,bias:i,increment:r,repeatTimes:o,immediate:a,abort:s},this.parent.$silentLoad(e,this.loadOption)}}]),t}(),Lo={tag:"chimee-playbackrate",width:"4em",html:'\n    <chimee-playbackrate-text></chimee-playbackrate-text>\n    <chimee-playbackrate-list>\n      <ul></ul>\n      <div class="chimee-playbackrate-list-arrow">\n        <svg viewBox="0 0 115 6"  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g id="Group-3-Copy" fill="#57B0F6">\n            <polygon id="Path-2" points="0.0205224145 0.0374249581 0.0205224145 2.12677903 53.9230712 2.12677903 57.1127727 5.3468462 60.2283558 2.12677903 113.820935 2.12677903 113.820935 0.0374249581"></polygon>\n          </g>\n        </svg>\n      </div>\n    </chimee-playbackrate-list>\n  ',defaultEvent:{click:"click"}},Io=function(e){function t(e,n){Ar(this,t);var i=io(this,(t.__proto__||Wn(t)).call(this,e));return i.option=Cn(Lo,Tn(n)?n:{}),i.init(),i}return co(t,fo),Or(t,[{key:"init",value:function(){ro(t.prototype.__proto__||Wn(t.prototype),"create",this).call(this),Kr(this.$dom,"chimee-flex-component"),this.$text=to(this.$dom).find("chimee-playbackrate-text"),this.$list=to(this.$dom).find("chimee-playbackrate-list"),this.$listUl=this.$list.find("ul"),this.option.width&&Jr(this.$dom,"width",this.option.width),this.initTextList()}},{key:"initTextList",value:function(){var e=this,t=this.option.list.length,n=!1;this.option.list.forEach(function(i,r){var o=to(document.createElement("li"));o.attr("data-value",i.value),o.text(i.name),(i.default||!n&&r===t-1)&&(n=!0,!i.default&&console.warn("\u64ad\u653e\u901f\u7387\u5217\u8868\u9700\u8981\u7ed9\u6bcf\u9879\u914d\u7f6e `default(boolean)` \u6765\u6807\u660e\u662f\u5426\u662f\u9ed8\u8ba4\u64ad\u653e\u901f\u7387"),e.$text.text(i.name),o.addClass("active"),e.switchPlaybackrate(i.value)),e.$listUl.append(o)})}},{key:"click",value:function(e){var t=e.target;if("LI"===t.tagName){var n=t.getAttribute("data-value")||1;this.switchPlaybackrate(n),$t(t.parentElement.children).map(function(e){Zr(e,"active")}),Kr(e.target,"active"),this.$text.text(e.target.textContent)}}},{key:"switchPlaybackrate",value:function(e){var t=this;setTimeout(function(n){t.parent.playbackRate=e},0)}}]),t}(),Do={hideBarTime:2e3,barShowByMouse:"move"};return{name:"chimeeControl",el:"chimee-control",data:{children:{},show:!1,disabled:!0},level:99,operable:!1,penetrate:!1,create:function(){},init:function(e){},destroy:function(){for(var e in window.clearTimeout(this.timeId),this.children)this.children[e].destroy()},inited:function(){var e=this.$videoConfig;e.controls&&(this.show=!0,e.controls=!1);var t=this;for(var n in function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.self,r=void 0!==i&&i,o=n.omit,a=void 0!==o&&o,s=kn(t);if(s||Sn(t)){if(!kn(e))throw new TypeError("If you want to decorator class, you must pass it a legal class");if(s)t(e);else for(var u=0,l=t.length;u<l;u++){var c=t[u];if(!kn(c))throw new TypeError("If you want to decorate an class, you must pass it function or array of function");c(e)}return e}if(!r&&!kn(e))throw new TypeError("applyDecorators only accept class as first arguments. If you want to modify instance, you should set options.self true.");if(r&&Mn(e))throw new TypeError("We can't apply docorators on a primitive value, even in self mode");if(!Tn(t))throw new TypeError("applyDecorators only accept object as second arguments");var f=r?e:e.prototype;if(En(f))throw new Error("The class muse have a prototype, please take a check");for(var d in t){var h=t[d],p=Sn(h)?h:[h],v=void 0;try{v=vr.apply(void 0,In(p))}catch(g){throw dr(g&&g.message),new Error("The decorators set on props must be Function or Array of Function")}var m=Tr(f,d);if(!m||m.configurable)kr(f,d,v(f,d,m));else if(!a)throw new Error(d+" of "+f+" is unconfigurable")}}(e,{controls:mr({get:function(){return t.show},set:function(e){return t.show=Boolean(e),t._display(),!1}},{preSet:!0})},{self:!0}),this.config=Tn(this.$config)?Cn(Do,this.$config):Do,this.config.hideBarTime="move"===this.config.barShowByMouse?this.config.hideBarTime:0,this.$dom.innerHTML="<chimee-control-wrap></chimee-control-wrap>",this.$wrap=this.$dom.querySelector("chimee-control-wrap"),this.children=function(e){var t=e.config.children=function(e){return e.$config.children?e.$config.children:e.isLive?{play:!0,progressTime:!1,progressBar:!1,volume:!0,screen:!0}:{play:!0,progressTime:!0,progressBar:!0,volume:!0,screen:!0}}(e),n={};return t?nn(t).forEach(function(i){switch(i){case"play":t.play&&(n.play=new vo(e,t.play));break;case"progressTime":t.progressTime&&(n.progressTime=new To(e,t.progressTime));break;case"progressBar":n.progressBar=new So(e,t.progressBar);break;case"volume":t.volume&&(n.volume=new bo(e,t.volume));break;case"screen":t.screen&&(n.screen=new Oo(e,t.screen));break;case"clarity":t.clarity&&(n.clarity=new Mo(e,t.clarity));break;case"playbackrate":t.playbackrate&&Array.isArray(t.playbackrate.list)&&t.playbackrate.list.length&&(n.playbackrate=new Io(e,t.playbackrate));break;default:n[i]=new ho(e,t[i])}}):(n.play=new vo(e),n.progressTime=new To(e),n.progressBar=new So(e),n.volume=new bo(e),n.screen=new Oo(e)),n}(this),this._setStyle(),this.children)this.children[n].inited&&this.children[n].inited()},events:{load:function(){this._showItself(),this._progressUpdate(),this.children.play&&this.children.play.changeState("pause"),this.children.progressTime&&this.children.progressTime.updateTotal(),this.children.progressBar&&this.children.progressBar.changePointerEvent("none")},loadstart:function(){this._disable(!0)},canplay:function(){this._disable(!1)},play:function(){this.children.play&&this.children.play.changeState("play"),"move"===this.config.barShowByMouse&&this._hideItself()},pause:function(){this.children.play&&this.children.play.changeState("pause"),this._showItself()},c_mouseenter:function(){"move"!==this.config.barShowByMouse&&this._showItself()},c_mousemove:function(){this._mousemove()},c_mouseleave:function(){"move"!==this.config.barShowByMouse&&this._hideItself()},durationchange:function(){this.children.progressTime&&this.children.progressTime.updateTotal(),this.children.progressBar&&this.children.progressBar.changePointerEvent("auto")},timeupdate:function(){this._progressUpdate()},progress:function(){this.children.progressBar&&this.children.progressBar.progress()},volumechange:function(){this.children.volume&&this.children.volume.update()},keydown:function(e){switch(e.stopPropagation(),e.keyCode){case 32:e.preventDefault(),this.children.play&&this.children.play.click(e);break;case 37:e.preventDefault();var t=this.currentTime-10;this.currentTime=t<0?0:t,this._mousemove();break;case 39:e.preventDefault();var n=this.currentTime+10;this.currentTime=n>this.duration?this.duration:n,this._mousemove();break;case 38:e.preventDefault();var i=this.volume+.1;this.volume=i>1?1:i,this._mousemove();break;case 40:e.preventDefault();var r=this.volume-.1;this.volume=r<0?0:r,this._mousemove()}},click:function(e){var t=this,n=new Date,i=this.clickTime;this.clickTime=n,n-i<300?clearTimeout(this.clickTimeId):this.clickTimeId=setTimeout(function(){!t.disabled&&t.children.play&&t.children.play.click(e)},300)},dblclick:function(e){!this.disabled&&this.children.screen&&this.children.screen.click()}},methods:{_progressUpdate:function(){this.children.progressBar&&this.children.progressBar.update(),this.children.progressTime&&this.children.progressTime.updatePass()},_hideItself:function(){var e=this;window.clearTimeout(this.timeId),this.timeId=setTimeout(function(){var t=e.$wrap.offsetHeight;t=e.children.progressBar?e.children.progressBar.$wrap[0].offsetTop-t:-t,Jr(e.$wrap,{bottom:t+"px"}),Jr(e.$dom,{visibility:"hidden"})},this.config.hideBarTime)},_showItself:function(){window.clearTimeout(this.timeId),Jr(this.$wrap,{bottom:"0"}),Jr(this.$dom,{visibility:"visible"})},_display:function(){var e=this.show?"block":"none";Jr(this.$dom,{display:e})},_mousemove:function(e){this.paused||"enter"===this.config.barShowByMouse||(this._showItself(),this._hideItself())},_disable:function(e){this.show&&(this.disabled=e)},_setStyle:function(){var e="";e+=this.config.majorColor?"\n  .chimee-flex-component svg * {\n    fill: majorColor;\n    stroke: majorColor;\n  }\n\n  chimee-progressbar-all {\n    background: majorColor;\n  }\n\n  chimee-volume.chimee-flex-component chimee-volume-bar-all {\n    background: majorColor;\n  }\n\n  chimee-playbackrate-list li:hover,\n  chimee-playbackrate-list li.active,\n  chimee-clarity-list li:hover,\n  chimee-clarity-list li.active {\n    color: majorColor;\n  }\n".replace(/majorColor/g,this.config.majorColor):"",e+=this.config.hoverColor?"\n  .chimee-flex-component svg:hover *{\n    fill: hoverColor;\n    stroke: hoverColor;\n  }\n".replace(/hoverColor/g,this.config.hoverColor):"";var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t)},updateClarity:function(e){if(!Sn(e))return console.error("list must be an array.");this.children.clarity.initTextList(e)}}}},e.exports=n()}).call(this,n(35))},344:function(e,t,n){(function(t){var n;n=function(){"use strict";var e="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var r=function(e,t){return{value:t,done:!!e}},o={},a={}.toString,s=function(e){return a.call(e).slice(8,-1)},u=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==s(e)?e.split(""):Object(e)},l=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},c=function(e){return u(l(e))},f=i(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),d=i(function(e){var t=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=t)}),h=(d.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),p=function(e,t,n){if(h(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},v=function(e){return"object"===typeof e?null!==e:"function"===typeof e},m=function(e){if(!v(e))throw TypeError(e+" is not an object!");return e},g=function(e){try{return!!e()}catch(t){return!0}},y=!g(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=f.document,w=v(b)&&v(b.createElement),_=function(e){return w?b.createElement(e):{}},E=!y&&!g(function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a}),S=function(e,t){if(!v(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!v(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!v(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!v(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},k=Object.defineProperty,T={f:y?Object.defineProperty:function(e,t,n){if(m(e),t=S(t,!0),m(n),E)try{return k(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},A=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},O=y?function(e,t,n){return T.f(e,t,A(1,n))}:function(e,t,n){return e[t]=n,e},x=function e(t,n,i){var r,o,a,s=t&e.F,u=t&e.G,l=t&e.S,c=t&e.P,h=t&e.B,v=t&e.W,m=u?d:d[n]||(d[n]={}),g=m.prototype,y=u?f:l?f[n]:(f[n]||{}).prototype;for(r in u&&(i=n),i)(o=!s&&y&&void 0!==y[r])&&r in m||(a=o?y[r]:i[r],m[r]=u&&"function"!=typeof y[r]?i[r]:h&&o?p(a,f):v&&y[r]==a?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(a):c&&"function"==typeof a?p(Function.call,a):a,c&&((m.virtual||(m.virtual={}))[r]=a,t&e.R&&g&&!g[r]&&O(g,r,a)))};x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;var M,L=x,I=O,D={}.hasOwnProperty,C=function(e,t){return D.call(e,t)},R=Math.ceil,N=Math.floor,P=function(e){return isNaN(e=+e)?0:(e>0?N:R)(e)},j=Math.min,F=function(e){return e>0?j(P(e),9007199254740991):0},B=Math.max,z=Math.min,U=f["__core-js_shared__"]||(f["__core-js_shared__"]={}),G=function(e){return U[e]||(U[e]={})},W=0,$=Math.random(),V=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++W+$).toString(36))},H=G("keys"),Y=function(e){return H[e]||(H[e]=V(e))},K=(M=!1,function(e,t,n){var i,r=c(e),o=F(r.length),a=function(e,t){return(e=P(e))<0?B(e+t,0):z(e,t)}(n,o);if(M&&t!=t){for(;o>a;)if((i=r[a++])!=i)return!0}else for(;o>a;a++)if((M||a in r)&&r[a]===t)return M||a||0;return!M&&-1}),Z=Y("IE_PROTO"),X=function(e,t){var n,i=c(e),r=0,o=[];for(n in i)n!=Z&&C(i,n)&&o.push(n);for(;t.length>r;)C(i,n=t[r++])&&(~K(o,n)||o.push(n));return o},q="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(e){return X(e,q)},J=y?Object.defineProperties:function(e,t){m(e);for(var n,i=Q(t),r=i.length,o=0;r>o;)T.f(e,n=i[o++],t[n]);return e},ee=f.document,te=ee&&ee.documentElement,ne=Y("IE_PROTO"),ie=function(){},re=function(){var e,t=_("iframe"),n=q.length;for(t.style.display="none",te.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),re=e.F;n--;)delete re.prototype[q[n]];return re()},oe=Object.create||function(e,t){var n;return null!==e?(ie.prototype=m(e),n=new ie,ie.prototype=null,n[ne]=e):n=re(),void 0===t?n:J(n,t)},ae=i(function(e){var t=G("wks"),n=f.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:V)("Symbol."+e))}).store=t}),se=T.f,ue=ae("toStringTag"),le=function(e,t,n){e&&!C(e=n?e:e.prototype,ue)&&se(e,ue,{configurable:!0,value:t})},ce={};O(ce,ae("iterator"),function(){return this});var fe=function(e,t,n){e.prototype=oe(ce,{next:A(1,n)}),le(e,t+" Iterator")},de=function(e){return Object(l(e))},he=Y("IE_PROTO"),pe=Object.prototype,ve=Object.getPrototypeOf||function(e){return e=de(e),C(e,he)?e[he]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?pe:null},me=ae("iterator"),ge=!([].keys&&"next"in[].keys()),ye=function(){return this},be=function(e,t,n,i,r,a,s){fe(n,t,i);var u,l,c,f=function(e){if(!ge&&e in v)return v[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},d=t+" Iterator",h="values"==r,p=!1,v=e.prototype,m=v[me]||v["@@iterator"]||r&&v[r],g=m||f(r),y=r?h?f("entries"):g:void 0,b="Array"==t&&v.entries||m;if(b&&(c=ve(b.call(new e)))!==Object.prototype&&c.next&&le(c,d,!0),h&&m&&"values"!==m.name&&(p=!0,g=function(){return m.call(this)}),s&&(ge||p||!v[me])&&O(v,me,g),o[t]=g,o[d]=ye,r)if(u={values:h?g:f("values"),keys:a?g:f("keys"),entries:y},s)for(l in u)l in v||I(v,l,u[l]);else L(L.P+L.F*(ge||p),t,u);return u};be(Array,"Array",function(e,t){this._t=c(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array;for(var we=ae("toStringTag"),_e="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Ee=0;Ee<_e.length;Ee++){var Se=_e[Ee],ke=f[Se],Te=ke&&ke.prototype;Te&&!Te[we]&&O(Te,we,Se),o[Se]=o.Array}var Ae,Oe=(Ae=!0,function(e,t){var n,i,r=String(l(e)),o=P(t),a=r.length;return o<0||o>=a?Ae?"":void 0:(n=r.charCodeAt(o))<55296||n>56319||o+1===a||(i=r.charCodeAt(o+1))<56320||i>57343?Ae?r.charAt(o):n:Ae?r.slice(o,o+2):i-56320+(n-55296<<10)+65536});be(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Oe(t,n),this._i+=e.length,{value:e,done:!1})});var xe=ae("toStringTag"),Me="Arguments"==s(function(){return arguments}()),Le=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),xe))?n:Me?s(t):"Object"==(i=s(t))&&"function"==typeof t.callee?"Arguments":i},Ie=ae("iterator"),De=d.isIterable=function(e){var t=Object(e);return void 0!==t[Ie]||"@@iterator"in t||o.hasOwnProperty(Le(t))},Ce=i(function(e){e.exports={default:De,__esModule:!0}});n(Ce);var Re=ae("iterator"),Ne=d.getIteratorMethod=function(e){if(void 0!=e)return e[Re]||e["@@iterator"]||o[Le(e)]},Pe=d.getIterator=function(e){var t=Ne(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return m(t.call(e))},je=i(function(e){e.exports={default:Pe,__esModule:!0}});n(je);var Fe=n(i(function(e,t){t.__esModule=!0;var n=r(Ce),i=r(je);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if(n.default(Object(e)))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,u=i.default(e);!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,a=l}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()})),Be=n(i(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}));L(L.S+L.F*!y,"Object",{defineProperty:T.f});var ze=d.Object,Ue=function(e,t,n){return ze.defineProperty(e,t,n)},Ge=i(function(e){e.exports={default:Ue,__esModule:!0}});n(Ge);var We=n(i(function(e,t){t.__esModule=!0;var n,i=(n=Ge)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i.default(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()})),$e={f:ae},Ve=$e.f("iterator"),He=i(function(e){e.exports={default:Ve,__esModule:!0}});n(He);var Ye=i(function(e){var t=V("meta"),n=T.f,i=0,r=Object.isExtensible||function(){return!0},o=!g(function(){return r(Object.preventExtensions({}))}),a=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!v(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!C(e,t)){if(!r(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!C(e,t)){if(!r(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&s.NEED&&r(e)&&!C(e,t)&&a(e),e}}}),Ke=(Ye.KEY,Ye.NEED,Ye.fastKey,Ye.getWeak,Ye.onFreeze,T.f),Ze=function(e){var t=d.Symbol||(d.Symbol={});"_"==e.charAt(0)||e in t||Ke(t,e,{value:$e.f(e)})},Xe={f:Object.getOwnPropertySymbols},qe={f:{}.propertyIsEnumerable},Qe=Array.isArray||function(e){return"Array"==s(e)},Je=q.concat("length","prototype"),et={f:Object.getOwnPropertyNames||function(e){return X(e,Je)}},tt=et.f,nt={}.toString,it="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],rt={f:function(e){return it&&"[object Window]"==nt.call(e)?function(e){try{return tt(e)}catch(t){return it.slice()}}(e):tt(c(e))}},ot=Object.getOwnPropertyDescriptor,at={f:y?ot:function(e,t){if(e=c(e),t=S(t,!0),E)try{return ot(e,t)}catch(n){}if(C(e,t))return A(!qe.f.call(e,t),e[t])}},st=Ye.KEY,ut=at.f,lt=T.f,ct=rt.f,ft=f.Symbol,dt=f.JSON,ht=dt&&dt.stringify,pt=ae("_hidden"),vt=ae("toPrimitive"),mt={}.propertyIsEnumerable,gt=G("symbol-registry"),yt=G("symbols"),bt=G("op-symbols"),wt=Object.prototype,_t="function"==typeof ft,Et=f.QObject,St=!Et||!Et.prototype||!Et.prototype.findChild,kt=y&&g(function(){return 7!=oe(lt({},"a",{get:function(){return lt(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=ut(wt,t);i&&delete wt[t],lt(e,t,n),i&&e!==wt&&lt(wt,t,i)}:lt,Tt=function(e){var t=yt[e]=oe(ft.prototype);return t._k=e,t},At=_t&&"symbol"==typeof ft.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof ft},Ot=function(e,t,n){return e===wt&&Ot(bt,t,n),m(e),t=S(t,!0),m(n),C(yt,t)?(n.enumerable?(C(e,pt)&&e[pt][t]&&(e[pt][t]=!1),n=oe(n,{enumerable:A(0,!1)})):(C(e,pt)||lt(e,pt,A(1,{})),e[pt][t]=!0),kt(e,t,n)):lt(e,t,n)},xt=function(e,t){m(e);for(var n,i=function(e){var t=Q(e),n=Xe.f;if(n)for(var i,r=n(e),o=qe.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}(t=c(t)),r=0,o=i.length;o>r;)Ot(e,n=i[r++],t[n]);return e},Mt=function(e){var t=mt.call(this,e=S(e,!0));return!(this===wt&&C(yt,e)&&!C(bt,e))&&(!(t||!C(this,e)||!C(yt,e)||C(this,pt)&&this[pt][e])||t)},Lt=function(e,t){if(e=c(e),t=S(t,!0),e!==wt||!C(yt,t)||C(bt,t)){var n=ut(e,t);return!n||!C(yt,t)||C(e,pt)&&e[pt][t]||(n.enumerable=!0),n}},It=function(e){for(var t,n=ct(c(e)),i=[],r=0;n.length>r;)C(yt,t=n[r++])||t==pt||t==st||i.push(t);return i},Dt=function(e){for(var t,n=e===wt,i=ct(n?bt:c(e)),r=[],o=0;i.length>o;)!C(yt,t=i[o++])||n&&!C(wt,t)||r.push(yt[t]);return r};_t||(I((ft=function(){if(this instanceof ft)throw TypeError("Symbol is not a constructor!");var e=V(arguments.length>0?arguments[0]:void 0);return y&&St&&kt(wt,e,{configurable:!0,set:function t(n){this===wt&&t.call(bt,n),C(this,pt)&&C(this[pt],e)&&(this[pt][e]=!1),kt(this,e,A(1,n))}}),Tt(e)}).prototype,"toString",function(){return this._k}),at.f=Lt,T.f=Ot,et.f=rt.f=It,qe.f=Mt,Xe.f=Dt,$e.f=function(e){return Tt(ae(e))}),L(L.G+L.W+L.F*!_t,{Symbol:ft});for(var Ct="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Rt=0;Ct.length>Rt;)ae(Ct[Rt++]);for(var Nt=Q(ae.store),Pt=0;Nt.length>Pt;)Ze(Nt[Pt++]);L(L.S+L.F*!_t,"Symbol",{for:function(e){return C(gt,e+="")?gt[e]:gt[e]=ft(e)},keyFor:function(e){if(!At(e))throw TypeError(e+" is not a symbol!");for(var t in gt)if(gt[t]===e)return t},useSetter:function(){St=!0},useSimple:function(){St=!1}}),L(L.S+L.F*!_t,"Object",{create:function(e,t){return void 0===t?oe(e):xt(oe(e),t)},defineProperty:Ot,defineProperties:xt,getOwnPropertyDescriptor:Lt,getOwnPropertyNames:It,getOwnPropertySymbols:Dt}),dt&&L(L.S+L.F*(!_t||g(function(){var e=ft();return"[null]"!=ht([e])||"{}"!=ht({a:e})||"{}"!=ht(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!At(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(t=i[1])&&(n=t),!n&&Qe(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!At(t))return t}),i[1]=t,ht.apply(dt,i)}}}),ft.prototype[vt]||O(ft.prototype,vt,ft.prototype.valueOf),le(ft,"Symbol"),le(Math,"Math",!0),le(f.JSON,"JSON",!0),Ze("asyncIterator"),Ze("observable");var jt=d.Symbol,Ft=i(function(e){e.exports={default:jt,__esModule:!0}});n(Ft);var Bt=n(i(function(e,t){t.__esModule=!0;var n=o(He),i=o(Ft),r="function"===typeof i.default&&"symbol"===typeof n.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===r(n.default)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)}}));!function(e,t){var n=(d.Object||{})[e]||Object[e],i={};i[e]=t(n),L(L.S+L.F*g(function(){n(1)}),"Object",i)}("keys",function(){return function(e){return Q(de(e))}});var zt=d.Object.keys;n(i(function(e){e.exports={default:zt,__esModule:!0}}));var Ut=Math.floor;L(L.S,"Number",{isInteger:function(e){return!v(e)&&isFinite(e)&&Ut(e)===e}});var Gt=d.Number.isInteger;n(i(function(e){e.exports={default:Gt,__esModule:!0}}));var Wt="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",$t="["+Wt+"]",Vt=RegExp("^"+$t+$t+"*"),Ht=RegExp($t+$t+"*$"),Yt=function(e,t,n){var i={},r=g(function(){return!!Wt[e]()||"\u200b\x85"!="\u200b\x85"[e]()}),o=i[e]=r?t(Kt):Wt[e];n&&(i[n]=o),L(L.P+L.F*r,"String",i)},Kt=Yt.trim=function(e,t){return e=String(l(e)),1&t&&(e=e.replace(Vt,"")),2&t&&(e=e.replace(Ht,"")),e},Zt=Yt,Xt=f.parseFloat,qt=Zt.trim,Qt=1/Xt(Wt+"-0")!==-1/0?function(e){var t=qt(String(e),3),n=Xt(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Xt;L(L.S+L.F*(Number.parseFloat!=Qt),"Number",{parseFloat:Qt});var Jt=parseFloat;function en(e){return Array.isArray(e)}function tn(e){return"function"===typeof e}function nn(e){return Object(e)===e&&"[object Object]"===String(e)&&!tn(e)&&!en(e)}function rn(e){return"string"===typeof e||e instanceof String}function on(e){return void 0===(t=e)||null===t||"boolean"===typeof e||rn(e)||function(e){return"number"===typeof e}(e);var t}function an(e,t){if(!rn(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+("undefined"===typeof e?"undefined":Bt(e)));return rn(t)?"["+(e=sn.FORCE_GLOBAL_TAG?sn.GLOBAL_TAG:e||sn.GLOBAL_TAG)+"] > "+t:"["+sn.GLOBAL_TAG+"] > "+e}n(i(function(e){e.exports={default:Jt,__esModule:!0}}));var sn=function(){function e(){Be(this,e)}return We(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log)(an(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log)(an(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log)(an(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log)(an(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(an(t,n))}}]),e}();sn.GLOBAL_TAG="chimee",sn.FORCE_GLOBAL_TAG=!1,sn.ENABLE_ERROR=!0,sn.ENABLE_INFO=!0,sn.ENABLE_WARN=!0,sn.ENABLE_DEBUG=!0,sn.ENABLE_VERBOSE=!0,i(function(t,n){!function(e,i){var r="model",o="name",a="type",s="vendor",u="version",l="mobile",c="tablet",f={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"===typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(e,t){for(var n,i,r,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(n=i=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(r=0;r<c.length;r++)s=a[++i],"object"===typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!==typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"===typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(f.has(t[n][i],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,u],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[o,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],u],[/(edge)\/((\d+)?[\w\.]+)/i],[o,u],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],u],[/(QQ)\/([\d\.]+)/i],[o,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[o,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,u],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[u,d.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[r,s,[a,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[s,"Apple"],[a,c]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,r,[a,c]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[r,[s,"Amazon"],[a,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[r,d.str,h.device.amazon.model],[s,"Amazon"],[a,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,s,[a,l]],[/\((ip[honed|\s\w*]+);/i],[r,[s,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,r,[a,l]],[/\(bb10;\s(\w+)/i],[r,[s,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[r,[s,"Asus"],[a,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[r,"Xperia Tablet"],[a,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[r,[s,"Sony"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,r,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[r,[s,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[r,[s,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[s,d.str,h.device.sprint.vendor],[r,d.str,h.device.sprint.model],[a,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,r,[a,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[s,[r,/_/g," "],[a,l]],[/(nexus\s9)/i],[r,[s,"HTC"],[a,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[r,[s,"Huawei"],[a,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[s,r,[a,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[s,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[s,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[r,[s,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[s,"Motorola"],[a,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[s,f.trim],[r,f.trim],[a,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[r,/^/,"SmartTV"],[s,"Samsung"],[a,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[r,[s,"Sharp"],[a,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],r,[a,c]],[/smart-tv.+(samsung)/i],[s,[a,"smarttv"],r],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[s,"Samsung"],r,[a,l]],[/sie-(\w+)*/i],[r,[s,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[s,"Nokia"],r,[a,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[r,[s,"Acer"],[a,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[r,[s,"LG"],[a,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],r,[a,c]],[/(lg) netcast\.tv/i],[s,r,[a,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[r,[s,"LG"],[a,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[s,"Lenovo"],[a,c]],[/linux;.+((jolla));/i],[s,r,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[s,r,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[s,r,[a,l]],[/crkey/i],[[r,"Chromecast"],[s,"Google"]],[/android.+;\s(glass)\s\d/i],[r,[s,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)\s/i],[r,[s,"Google"],[a,c]],[/android.+;\s(pixel xl|pixel)\s/i],[r,[s,"Google"],[a,l]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,l]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[r,[s,"Meizu"],[a,c]],[/android.+a000(1)\s+build/i],[r,[s,"OnePlus"],[a,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[r,[s,"RCA"],[a,c]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[r,[s,"Dell"],[a,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[r,[s,"Verizon"],[a,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[s,"Barnes & Noble"],r,[a,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[r,[s,"NuVision"],[a,c]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[s,"ZTE"],r,[a,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[r,[s,"Swiss"],[a,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[r,[s,"Swiss"],[a,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[r,[s,"Zeki"],[a,c]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[s,"Dragon Touch"],r,[a,c]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[r,[s,"Insignia"],[a,c]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[r,[s,"NextBook"],[a,c]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[s,"Voice"],r,[a,l]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[s,"LvTel"],r,[a,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[r,[s,"Envizen"],[a,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[r,[s,"MachSpeed"],[a,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[r,[s,"Rotor"],[a,c]],[/android.+(KS(.+))\s+build/i],[r,[s,"Amazon"],[a,c]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[s,r,[a,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,f.lowerize],s,r],[/(android.+)[;\/].+build/i],[r,[s,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,u],[/rv\:([\w\.]+).*(gecko)/i],[u,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[u,d.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[u,d.str,h.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[o,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[o,"Symbian"],u],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[o,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],u],[/(sunos)\s?([\w\.]+\d)*/i],[[o,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[o,u],[/(haiku)\s(\w+)/i],[o,u],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[o,u]]},v=function t(n,i){if("object"===typeof n&&(i=n,n=void 0),!(this instanceof t))return new t(n,i).getResult();var r=n||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=i?f.extend(p,i):p;return this.getBrowser=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return d.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};v.VERSION="0.7.17",v.BROWSER={NAME:o,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:r,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:o,VERSION:u},v.OS={NAME:o,VERSION:u},t.exports&&(n=t.exports=v),n.UAParser=v;var m=e&&(e.jQuery||e.Zepto);if("undefined"!==typeof m){var g=new v;m.ua=g.getResult(),m.ua.get=function(){return g.getUA()},m.ua.set=function(e){g.setUA(e);var t=g.getResult();for(var n in t)m.ua[n]=t[n]}}}("object"===typeof window?window:e)}).UAParser;var un=function(e,t,n,i){try{return i?t(m(n)[0],n[1]):t(n)}catch(o){var r=e.return;throw void 0!==r&&m(r.call(e)),o}},ln=ae("iterator"),cn=Array.prototype,fn=function(e){return void 0!==e&&(o.Array===e||cn[ln]===e)},dn=function(e,t,n){t in e?T.f(e,t,A(0,n)):e[t]=n},hn=ae("iterator"),pn=!1;try{[7][hn]().return=function(){pn=!0}}catch(ji){}var vn=function(e,t){if(!t&&!pn)return!1;var n=!1;try{var i=[7],r=i[hn]();r.next=function(){return{done:n=!0}},i[hn]=function(){return r},e(i)}catch(ji){}return n};L(L.S+L.F*!vn(function(e){}),"Array",{from:function(e){var t,n,i,r,o=de(e),a="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,l=void 0!==u,c=0,f=Ne(o);if(l&&(u=p(u,s>2?arguments[2]:void 0,2)),void 0==f||a==Array&&fn(f))for(n=new a(t=F(o.length));t>c;c++)dn(n,c,l?u(o[c],c):o[c]);else for(r=f.call(o),n=new a;!(i=r.next()).done;c++)dn(n,c,l?un(r,u,[i.value,c],!0):i.value);return n.length=c,n}});var mn=d.Array.from,gn=i(function(e){e.exports={default:mn,__esModule:!0}}),yn=n(gn);n(i(function(e,t){t.__esModule=!0;var n,i=(n=gn)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return i.default(e)}}));var bn,wn=(bn=function(e){return e},function e(t,n,i){if(en(t)||nn(t)){for(var r in n=on(n)?nn(t)?{}:[]:n,t)n[r]=e(t[r],n[r],r);return n}return bn(t,n,i)});function _n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var i=t.length-1;i>-1;i--)if(on(t[i]))throw new TypeError("deepAssign only accept non primitive type");var r=t.shift();return t.forEach(function(e){return wn(e,r)}),r}var En,Sn,kn,Tn=i(function(e){var t={},n={},i=e.exports=function(e,i,r,o,a){var s,u,l,c,f=a?function(){return e}:Ne(e),d=p(r,o,i?2:1),h=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(fn(f)){for(s=F(e.length);s>h;h++)if((c=i?d(m(u=e[h])[0],u[1]):d(e[h]))===t||c===n)return c}else for(l=f.call(e);!(u=l.next()).done;)if((c=un(l,d,u.value,i))===t||c===n)return c};i.BREAK=t,i.RETURN=n}),An=ae("species"),On=function(e,t){var n,i=m(e).constructor;return void 0===i||void 0==(n=m(i)[An])?t:h(n)},xn=f.process,Mn=f.setImmediate,Ln=f.clearImmediate,In=f.MessageChannel,Dn=f.Dispatch,Cn=0,Rn={},Nn=function(){var e=+this;if(Rn.hasOwnProperty(e)){var t=Rn[e];delete Rn[e],t()}},Pn=function(e){Nn.call(e.data)};Mn&&Ln||(Mn=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Rn[++Cn]=function(){!function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},En(Cn),Cn},Ln=function(e){delete Rn[e]},"process"==s(xn)?En=function(e){xn.nextTick(p(Nn,e,1))}:Dn&&Dn.now?En=function(e){Dn.now(p(Nn,e,1))}:In?(kn=(Sn=new In).port2,Sn.port1.onmessage=Pn,En=p(kn.postMessage,kn,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(En=function(e){f.postMessage(e+"","*")},f.addEventListener("message",Pn,!1)):En="onreadystatechange"in _("script")?function(e){te.appendChild(_("script")).onreadystatechange=function(){te.removeChild(this),Nn.call(e)}}:function(e){setTimeout(p(Nn,e,1),0)});var jn={set:Mn,clear:Ln},Fn=jn.set,Bn=f.MutationObserver||f.WebKitMutationObserver,zn=f.process,Un=f.Promise,Gn="process"==s(zn);function Wn(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=h(t),this.reject=h(n)}var $n,Vn,Hn,Yn,Kn={f:function(e){return new Wn(e)}},Zn=function(e){try{return{e:!1,v:e()}}catch(ji){return{e:!0,v:ji}}},Xn=function(e,t){if(m(e),v(t)&&t.constructor===e)return t;var n=Kn.f(e);return(0,n.resolve)(t),n.promise},qn=ae("species"),Qn=jn.set,Jn=function(){var e,t,n,i=function(){var i,r;for(Gn&&(i=zn.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(ji){throw e?n():t=void 0,ji}}t=void 0,i&&i.enter()};if(Gn)n=function(){zn.nextTick(i)};else if(Bn){var r=!0,o=document.createTextNode("");new Bn(i).observe(o,{characterData:!0}),n=function(){o.data=r=!r}}else if(Un&&Un.resolve){var a=Un.resolve();n=function(){a.then(i)}}else n=function(){Fn.call(f,i)};return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}(),ei=f.TypeError,ti=f.process,ni=f.Promise,ii="process"==Le(ti),ri=function(){},oi=Vn=Kn.f,ai=!!function(){try{var e=ni.resolve(1),t=(e.constructor={})[ae("species")]=function(e){e(ri,ri)};return(ii||"function"==typeof PromiseRejectionEvent)&&e.then(ri)instanceof t}catch(ji){}}(),si=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},ui=function(e,t){if(!e._n){e._n=!0;var n=e._c;Jn(function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a=r?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{a?(r||(2==e._h&&fi(e),e._h=1),!0===a?n=i:(l&&l.enter(),n=a(i),l&&l.exit()),n===t.promise?u(ei("Promise-chain cycle")):(o=si(n))?o.call(n,s,u):s(n)):u(i)}catch(ji){u(ji)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&li(e)})}},li=function(e){Qn.call(f,function(){var t,n,i,r=e._v,o=ci(e);if(o&&(t=Zn(function(){ii?ti.emit("unhandledRejection",r,e):(n=f.onunhandledrejection)?n({promise:e,reason:r}):(i=f.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=ii||ci(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},ci=function e(t){if(1==t._h)return!1;for(var n,i=t._a||t._c,r=0;i.length>r;)if((n=i[r++]).fail||!e(n.promise))return!1;return!0},fi=function(e){Qn.call(f,function(){var t;ii?ti.emit("rejectionHandled",e):(t=f.onrejectionhandled)&&t({promise:e,reason:e._v})})},di=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),ui(t,!0))},hi=function e(t){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw ei("Promise can't be resolved itself");(n=si(t))?Jn(function(){var r={_w:i,_d:!1};try{n.call(t,p(e,r,1),p(di,r,1))}catch(ji){di.call(r,ji)}}):(i._v=t,i._s=1,ui(i,!1))}catch(ji){di.call({_w:i,_d:!1},ji)}}};ai||(ni=function(e){!function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!")}(this,ni,"Promise","_h"),h(e),$n.call(this);try{e(p(hi,this,1),p(di,this,1))}catch(t){di.call(this,t)}},($n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:O(e,i,t[i]);return e}(ni.prototype,{then:function(e,t){var n=oi(On(this,ni));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=ii?ti.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&ui(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Hn=function(){var e=new $n;this.promise=e,this.resolve=p(hi,e,1),this.reject=p(di,e,1)},Kn.f=oi=function(e){return e===ni||e===Yn?new Hn(e):Vn(e)}),L(L.G+L.W+L.F*!ai,{Promise:ni}),le(ni,"Promise"),function(e){var t="function"==typeof d[e]?d[e]:f[e];y&&t&&!t[qn]&&T.f(t,qn,{configurable:!0,get:function(){return this}})}("Promise"),Yn=d.Promise,L(L.S+L.F*!ai,"Promise",{reject:function(e){var t=oi(this);return(0,t.reject)(e),t.promise}}),L(L.S+!0*L.F,"Promise",{resolve:function(e){return Xn(this===Yn?ni:this,e)}}),L(L.S+L.F*!(ai&&vn(function(e){ni.all(e).catch(ri)})),"Promise",{all:function(e){var t=this,n=oi(t),i=n.resolve,r=n.reject,o=Zn(function(){var n=[],o=0,a=1;Tn(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=oi(t),i=n.reject,r=Zn(function(){Tn(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),L(L.P+L.R,"Promise",{finally:function(e){var t=On(this,d.Promise||f.Promise),n="function"==typeof e;return this.then(n?function(n){return Xn(t,e()).then(function(){return n})}:e,n?function(n){return Xn(t,e()).then(function(){throw n})}:e)}}),L(L.S,"Promise",{try:function(e){var t=Kn.f(this),n=Zn(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var pi=d.Promise;n(i(function(e){e.exports={default:pi,__esModule:!0}})),"undefined"!==typeof window&&Object.prototype.toString.call(window),window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame;var vi=Object.assign,mi=!vi||g(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=vi({},e)[n]||Object.keys(vi({},t)).join("")!=i})?function(e,t){for(var n=de(e),i=arguments.length,r=1,o=Xe.f,a=qe.f;i>r;)for(var s,l=u(arguments[r++]),c=o?Q(l).concat(o(l)):Q(l),f=c.length,d=0;f>d;)a.call(l,s=c[d++])&&(n[s]=l[s]);return n}:vi;L(L.S+L.F,"Object",{assign:mi});var gi=d.Object.assign,yi=n(i(function(e){e.exports={default:gi,__esModule:!0}}));L(L.S,"Object",{create:oe});var bi=d.Object,wi=function(e,t){return bi.create(e,t)},_i=n(i(function(e){e.exports={default:wi,__esModule:!0}})),Ei=_i(null);function Si(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++Ei.count);var i=n+"_"+t,r=Ei[i];return r||(r=Ei[i]=[]),r}function ki(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Si(e,t);if(n||i){var o=-1,a=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,a=e[1],!0}),-1!==o&&r.splice(o,1),a}r.length=0}Ei.count=0,function(){function e(t,n){var i=this;if(Be(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==("undefined"===typeof t?"undefined":Bt(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}We(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];tn(i)&&!r&&(r=i,i=void 0);var o=[n,void 0,i];i&&!r&&(r=function(){ki(e,t,n,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(e,o)}),r&&(o[1]=r),Si(e,t).push(o)}(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ki(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return function(e,t,n){var i=_i(null);i.type=t,i.target=e,n&&yi(i,nn(n)?n:{data:n}),Si(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[i])})}(this.__target,e,{data:t}),this}}])}();var Ti=_i(null);function Ai(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++Ti.count);var i=n+"_"+t,r=Ti[i];return r||(r=Ti[i]=[]),r}function Oi(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];tn(i)&&!r&&(r=i,i=void 0);var o=[n,void 0,i];i&&!r&&(r=function(){xi(e,t,n,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(e,o)}),r&&(o[1]=r),Ai(e,t).push(o)}function xi(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ai(e,t);if(n||i){var o=-1,a=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,a=e[1],!0}),-1!==o&&r.splice(o,1),a}r.length=0}Ti.count=0,function(){function e(t,n){var i=this;if(Be(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==("undefined"===typeof t?"undefined":Bt(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}We(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oi(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return xi(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return function(e,t,n){var i=_i(null);i.type=t,i.target=e,n&&yi(i,nn(n)?n:{data:n}),Ai(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[i])})}(this.__target,e,{data:t}),this}}])}(),"undefined"!==typeof window&&Object.prototype.toString.call(window);var Mi=document.createElement("div"),Li="innerText";"textContent"in Mi&&(Li="textContent");var Ii=Array.prototype;function Di(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i){var o=xi(e,t+"_once",n);o&&(n=o)}e.removeEventListener(t,n,r)}function Ci(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(n){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],i=arguments[3],r=[];n&&r.push(e);for(;e&&e.parentNode!==t;)(e=e.parentNode)&&r.push(e);i&&r.push(t);return r}(n.target||n.srcElement,e,!0),o=Ri(t,e,!0),a=void 0;o.find?a=o.find(function(e){return r.find(function(t){return e===t})}):o.forEach(function(e){return!a&&r.forEach(function(t){a||e!==t||(a=t)})}),a&&i.apply(a,arguments)};Oi(e,n+"_delegate_"+t,i,o),e.addEventListener(n,o,r)}function Ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],i=t.querySelectorAll(e);return n?yn(i):i}function Ni(e,t){return e.constructor===Pi?e:new Pi(e,t)}var Pi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;Be(this,e);this.selector=t;var i=void 0;t&&t.constructor===NodeList?i=yn(t):en(t)?i=t:rn(t)?0===t.indexOf("<")?(Mi.innerHTML=t,i=Ri("*",Mi,!0)):i=Ri(t,n,!0):i=[t],yi(this,i),this.length=i.length}return We(e,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ii.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ii.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ni(Ii.splice.apply(this,t))}},{key:"find",value:function(e){var t=[];this.each(function(n){t=t.concat(Ri(e,n,!0))});var n=Ni(t);return n.parent=this,n.selector=e,n}},{key:"append",value:function(e){var t=Ni(e),n=this[0];return t.each(function(e){return n.appendChild(e)}),this}},{key:"appendTo",value:function(e){return Ni(e).append(this),this}},{key:"text",value:function(e){return 0===arguments.length?this[0][Li]:this.each(function(t){t[Li]=e})}},{key:"html",value:function(e){return 0===arguments.length?this[0].innerHTML:this.each(function(t){t.innerHTML=e})}},{key:"attr",value:function(e,t){return 1===arguments.length?(n=this[0],i=e,n.getAttribute(i)):this.each(function(n){return function(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n)}(n,e,t)});var n,i}},{key:"data",value:function(e,t){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[e]:this.each(function(n){(n.dataset||(n.dataset={}))[e]=t})}},{key:"css",value:function(e,t){return 1!==arguments.length||nn(e)?this.each(function(n){return function e(t,n,i){if(nn(n))for(var r in n)e(t,r,n[r]);else t.style[n]=i}(n,e,t)}):function(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,null))[t]||e.style[t]}(this[0],e)}},{key:"addClass",value:function(e){return this.each(function(t){return function(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.add(t)});else{var i=" "+(e.className||"")+" ";n.forEach(function(e){-1===i.indexOf(" "+e+" ")&&(i+=" "+e)}),e.className=i.trim()}}}(t,e)})}},{key:"removeClass",value:function(e){return this.each(function(t){return function(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.remove(t)});else{var i=" "+e.className+" ";n.forEach(function(e){for(var t=" "+e+" ";-1!==i.indexOf(t);)i=i.replace(t," ")}),e.className=i.trim()}}}(t,e)})}},{key:"hasClass",value:function(e){return t=this[0],new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t.className);var t}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i){var o=n;n=function(){for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];o.apply(this,s),Di(e,t,n,i,r)},Oi(e,t+"_once",o,n)}e.addEventListener(t,n,r)}(r,e,t,n,i)})}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Di(r,e,t,n,i)})}},{key:"delegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Ci(r,e,t,n,i)})}},{key:"undelegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=xi(e,n+"_delegate_"+t,i);o&&e.removeEventListener(n,o,r)}(r,e,t,n,i)})}},{key:"remove",value:function(){return this.each(function(e){return function(e){e.parentNode.removeChild(e)}(e)})}}]),e}();return function(e,t){if("undefined"===typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}("chimee-popup{position:absolute;color:#fff;background-color:rgba(88,88,88,.5);font-size:13px;font-family:sans-serif;border:1px solid hsla(0,0%,100%,.08);padding:3px}chimee-popup cm-pp-close{float:right;color:#fff;text-decoration:none;line-height:14px;text-shadow:0 0 1px #000;font-size:15px;padding:0 3px;cursor:pointer;opacity:.8}chimee-popup cm-pp-close:hover{opacity:1}chimee-popup cm-pp-body,chimee-popup cm-pp-head{display:block;padding:3px 3px 6px}chimee-popup cm-pp-head{font-weight:700;border-bottom:1px solid hsla(0,0%,100%,.18);padding:0 5px 4px;margin-bottom:5px}chimee-popup cm-pp-body{font-size:12px}",void 0),function(e,t){if("undefined"===typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}("chimee-menu{position:absolute;color:#fff;background-color:rgba(37,37,37,.7);font-size:13px;font-family:sans-serif;border:1px solid hsla(0,0%,100%,.08);border-radius:2px;padding:2px;box-shadow:0 1px 4px rgba(0,0,0,.6)}chimee-menu ul{margin:0;padding:0;font-size:12px}chimee-menu li{cursor:pointer;padding:0 4px;line-height:24px;list-style:none;white-space:nowrap;margin:0;border:0;font-size:12px;font-weight:400}chimee-menu li:hover{background-color:hsla(0,0%,100%,.1)}chimee-menu li[disable]{opacity:.5;cursor:default}chimee-menu li a{color:#fff;text-decoration:none}chimee-menu li a:hover{color:#fff}",void 0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tagName,n=void 0===t?"chimee-popup":t,i=e.className,r=e.name,o=void 0===r?"popup":r,a=e.html,s=e.title,u=void 0===s?"\u8fd9\u662f\u4e00\u4e2a\u4fe1\u606f\u6846":s,l=e.body,c=void 0===l?"\u8fd9\u91cc\u662f\u4fe1\u606f\u5185\u5bb9":l,f=e.offsetAttr,d=void 0===f?"left top":f,h=e.offset,p=void 0===h?"50% 50%":h,v=e.translate,m=void 0===v?"":v,g=e.width,y=e.height,b=e.level,w=e.init,_=e.inited,E=e.data,S=e.create,k=e.beforeCreate,T=e.destroy,A=e.events,O=e.computed,x=e.methods,M=void 0===x?{}:x,L=e.penetrate,I=void 0!==L&&L,D=e.operable,C=void 0===D||D,R=e.hide,N=void 0!==R&&R,P=e.opened,j=e.closed,F=e.autoFocus,B={html:a||"\n      <cm-pp-close>\xd7</cm-pp-close>\n      "+(!1!==u?"<cm-pp-head>"+u+"</cm-pp-head>":"")+"\n      "+(!1!==c?"<cm-pp-body>"+c+"</cm-pp-body>":"")+"\n    ",closeSelector:"._close"};return{name:o,el:n,className:i,beforeCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.events,n=e.methods,i=arguments[1];nn(i)&&(nn(i.events)&&_n(t,i.events),nn(i.methods)&&_n(n,i.methods)),k&&k.apply(this,arguments)},create:function(){var e=nn(this.$config)?_n(B,this.$config):B;(this.$domWrap=Ni(this.$dom).css("display","none")).html(e.html).delegate("cm-pp-close, "+e.closeSelector,"click",this.close),this.width(g).height(y).offset(p).translate(m),this._hide=N;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];S&&S.apply(this,n),!this._hide&&this.open()},destroy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];T&&T.apply(this,t),this.$domWrap.undelegate(this.$config.closeSelector,"click",this.close).remove()},level:b,init:w,inited:_,data:E,events:A,computed:O,penetrate:I,operable:C,autoFocus:F,methods:_n({open:function(){if(this.destroyed)return this;this.$domWrap.css("display","block"),this._hide=!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupOpen",t,this),tn(P)&&P.apply(this,t),this},close:function(){if(this.destroyed)return this;this.$domWrap.css("display","none"),this._hide=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupClose",t,this),tn(j)&&j.apply(this,t),this},width:function(e){return e&&this.$domWrap.css("width",e),this},height:function(e){return e&&this.$domWrap.css("height",e),this},offset:function(e){var t=(""+(e||"")).split(" "),n={};if(t.length>2)return["top","right","bottom","left"].forEach(function(e,i){t[i]&&"auto"!==t[i]&&(n[e]=t[i])}),this.$domWrap.css(n),this;var i=Fe(t,2),r=i[0],o=i[1];if(""===r)return this;var a=o||r,s=d.split(" ");n[s[0]]=r,n[s[1]]=a,this.$domWrap.css(n);var u=[];return"50%"===r&&u.push("-50%"),"50%"===a&&u.push("-50%"),u.length>0&&this.translate(u.join(" ")),this},translate:function(e){var t=(""+(e||"")).split(" "),n=Fe(t,2),i=n[0],r=n[1];return i&&this.$domWrap.css("transform","translate("+i+", "+(r||i)+")"),this}},M)}}({tagName:"chimee-menu",name:"chimeeContextmenu",html:"<ul></ul>",offset:"0",hide:!0,data:{baseMenus:[{text:"\u67e5\u770b\u65e5\u5fd7",action:"openLogPopup",hide:!0},{text:"Chimee {VERSION} &copy; 360",url:"http://chimee.org",disable:!0}]},create:function(){var e=this,t=this.$config,n=t.baseMenus,i=t.menus;en(n)&&(this.baseMenus=n),this.updatemenu(i),this.$domWrap.on("click",this.clickHandler),this.$plugins.chimeeLog&&this.switchLogMenu(!1),this._doc=new this.$domWrap.constructor(document),this._doc_click=function(t){return e.close()},this._doc.on("click",this._doc_click)},destroy:function(){this._doc.off("click",this._doc_click)},opened:function(){this.$bumpToTop()},events:{contextmenu:function(e){var t=e.offsetX,n=e.offsetY,i=this.$dom.parentElement;if(tn(i.getBoundingClientRect)){var r=i.getBoundingClientRect();t=e.pageX-r.left-(document.documentElement.scrollLeft||document.body.scrollLeft||0),n=e.pageY-r.top-(document.documentElement.scrollTop||document.body.scrollTop||0)}this.offset(t+"px "+n+"px").open(e),e.preventDefault()},logPluginDestroy:function(){this.switchLogMenu(!0)},logPluginCreate:function(){this.switchLogMenu(!1)}},methods:{switchLogMenu:function(e){var t=this.baseMenus.find(function(e){return"openLogPopup"===e.action});t&&(t.hide=e,this.$domWrap.find('[data-action="openLogPopup"]').css("display",e?"none":""))},updatemenu:function(e){var t=this,n=[];en(e)&&(n=n.concat(e));var i=n.concat(this.baseMenus).map(function(e){var n=e.hide,i=e.disable,r=e.action,o=e.className,a=e.text,s=e.url,u=i?"disable":"",l=r?'data-action="'+r+'"':"",c=o?'class="'+o+'"':"",f=n?'style="display:none"':"",d=a.replace(/\{([^)]*)\}/g,function(e,n){return t[n]});return s&&(d='<a href="'+s+'" target="_blank">'+d+"</a>"),"<li "+u+" "+l+" "+c+" "+f+">"+d+"</li>"}).join("");this.$domWrap.find("ul").html(i)},clickHandler:function(e){var t=e.target;if(!t.disable){var n=t.dataset.action;n&&(this.$emit(n),tn(this[n])&&this[n](e)),this.close()}e.stopPropagation()}}})},e.exports=n()}).call(this,n(35))},345:function(e,t,n){(function(t){var n;n=function(){"use strict";var e="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var r=n(i(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}})),o=i(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),a=i(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),s=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},u=function(e,t,n){if(s(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},l=function(e){return"object"===typeof e?null!==e:"function"===typeof e},c=function(e){if(!l(e))throw TypeError(e+" is not an object!");return e},f=function(e){try{return!!e()}catch(t){return!0}},d=!f(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),h=o.document,p=l(h)&&l(h.createElement),v=function(e){return p?h.createElement(e):{}},m=!d&&!f(function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a}),g=function(e,t){if(!l(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!l(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!l(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!l(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},y=Object.defineProperty,b={f:d?Object.defineProperty:function(e,t,n){if(c(e),t=g(t,!0),c(n),m)try{return y(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},w=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},_=d?function(e,t,n){return b.f(e,t,w(1,n))}:function(e,t,n){return e[t]=n,e},E={}.hasOwnProperty,S=function(e,t){return E.call(e,t)},k=function e(t,n,i){var r,s,l,c=t&e.F,f=t&e.G,d=t&e.S,h=t&e.P,p=t&e.B,v=t&e.W,m=f?a:a[n]||(a[n]={}),g=m.prototype,y=f?o:d?o[n]:(o[n]||{}).prototype;for(r in f&&(i=n),i)(s=!c&&y&&void 0!==y[r])&&S(m,r)||(l=s?y[r]:i[r],m[r]=f&&"function"!=typeof y[r]?i[r]:p&&s?u(l,o):v&&y[r]==l?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):h&&"function"==typeof l?u(Function.call,l):l,h&&((m.virtual||(m.virtual={}))[r]=l,t&e.R&&g&&!g[r]&&_(g,r,l)))};k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;var T=k;T(T.S+T.F*!d,"Object",{defineProperty:b.f});var A=a.Object,O=function(e,t,n){return A.defineProperty(e,t,n)},x=i(function(e){e.exports={default:O,__esModule:!0}});n(x);var M,L=n(i(function(e,t){t.__esModule=!0;var n,i=(n=x)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()})),I=Math.ceil,D=Math.floor,C=function(e){return isNaN(e=+e)?0:(e>0?D:I)(e)},R=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},N=_,P={},j={}.toString,F=function(e){return j.call(e).slice(8,-1)},B=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==F(e)?e.split(""):Object(e)},z=function(e){return B(R(e))},U=Math.min,G=function(e){return e>0?U(C(e),9007199254740991):0},W=Math.max,$=Math.min,V=i(function(e){var t=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:a.version,mode:"pure",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})}),H=0,Y=Math.random(),K=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++H+Y).toString(36))},Z=V("keys"),X=function(e){return Z[e]||(Z[e]=K(e))},q=(M=!1,function(e,t,n){var i,r=z(e),o=G(r.length),a=function(e,t){return(e=C(e))<0?W(e+t,0):$(e,t)}(n,o);if(M&&t!=t){for(;o>a;)if((i=r[a++])!=i)return!0}else for(;o>a;a++)if((M||a in r)&&r[a]===t)return M||a||0;return!M&&-1}),Q=X("IE_PROTO"),J=function(e,t){var n,i=z(e),r=0,o=[];for(n in i)n!=Q&&S(i,n)&&o.push(n);for(;t.length>r;)S(i,n=t[r++])&&(~q(o,n)||o.push(n));return o},ee="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),te=Object.keys||function(e){return J(e,ee)},ne=d?Object.defineProperties:function(e,t){c(e);for(var n,i=te(t),r=i.length,o=0;r>o;)b.f(e,n=i[o++],t[n]);return e},ie=o.document,re=ie&&ie.documentElement,oe=X("IE_PROTO"),ae=function(){},se=function(){var e,t=v("iframe"),n=ee.length;for(t.style.display="none",re.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),se=e.F;n--;)delete se.prototype[ee[n]];return se()},ue=Object.create||function(e,t){var n;return null!==e?(ae.prototype=c(e),n=new ae,ae.prototype=null,n[oe]=e):n=se(),void 0===t?n:ne(n,t)},le=i(function(e){var t=V("wks"),n=o.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:K)("Symbol."+e))}).store=t}),ce=b.f,fe=le("toStringTag"),de=function(e,t,n){e&&!S(e=n?e:e.prototype,fe)&&ce(e,fe,{configurable:!0,value:t})},he={};_(he,le("iterator"),function(){return this});var pe,ve=function(e,t,n){e.prototype=ue(he,{next:w(1,n)}),de(e,t+" Iterator")},me=function(e){return Object(R(e))},ge=X("IE_PROTO"),ye=Object.prototype,be=Object.getPrototypeOf||function(e){return e=me(e),S(e,ge)?e[ge]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ye:null},we=le("iterator"),_e=!([].keys&&"next"in[].keys()),Ee=function(){return this},Se=function(e,t,n,i,r,o,a){ve(n,t,i);var s,u,l,c=function(e){if(!_e&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",d="values"==r,h=!1,p=e.prototype,v=p[we]||p["@@iterator"]||r&&p[r],m=v||c(r),g=r?d?c("entries"):m:void 0,y="Array"==t&&p.entries||v;if(y&&(l=be(y.call(new e)))!==Object.prototype&&l.next&&de(l,f,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(_e||h||!p[we])&&_(p,we,m),P[t]=m,P[f]=Ee,r)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:g},a)for(u in s)u in p||N(p,u,s[u]);else T(T.P+T.F*(_e||h),t,s);return s},ke=(pe=!0,function(e,t){var n,i,r=String(R(e)),o=C(t),a=r.length;return o<0||o>=a?pe?"":void 0:(n=r.charCodeAt(o))<55296||n>56319||o+1===a||(i=r.charCodeAt(o+1))<56320||i>57343?pe?r.charAt(o):n:pe?r.slice(o,o+2):i-56320+(n-55296<<10)+65536});Se(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=ke(t,n),this._i+=e.length,{value:e,done:!1})});var Te=function(e,t){return{value:t,done:!!e}};Se(Array,"Array",function(e,t){this._t=z(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Te(1)):Te(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),P.Arguments=P.Array;for(var Ae=le("toStringTag"),Oe="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),xe=0;xe<Oe.length;xe++){var Me=Oe[xe],Le=o[Me],Ie=Le&&Le.prototype;Ie&&!Ie[Ae]&&_(Ie,Ae,Me),P[Me]=P.Array}var De={f:le},Ce=De.f("iterator"),Re=i(function(e){e.exports={default:Ce,__esModule:!0}});n(Re);var Ne=i(function(e){var t=K("meta"),n=b.f,i=0,r=Object.isExtensible||function(){return!0},o=!f(function(){return r(Object.preventExtensions({}))}),a=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!S(e,t)){if(!r(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!S(e,t)){if(!r(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&s.NEED&&r(e)&&!S(e,t)&&a(e),e}}}),Pe=b.f,je=function(e){var t=a.Symbol||(a.Symbol={});"_"==e.charAt(0)||e in t||Pe(t,e,{value:De.f(e)})},Fe={f:Object.getOwnPropertySymbols},Be={f:{}.propertyIsEnumerable},ze=Array.isArray||function(e){return"Array"==F(e)},Ue=ee.concat("length","prototype"),Ge={f:Object.getOwnPropertyNames||function(e){return J(e,Ue)}},We=Ge.f,$e={}.toString,Ve="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],He={f:function(e){return Ve&&"[object Window]"==$e.call(e)?function(e){try{return We(e)}catch(t){return Ve.slice()}}(e):We(z(e))}},Ye=Object.getOwnPropertyDescriptor,Ke={f:d?Ye:function(e,t){if(e=z(e),t=g(t,!0),m)try{return Ye(e,t)}catch(n){}if(S(e,t))return w(!Be.f.call(e,t),e[t])}},Ze=Ne.KEY,Xe=Ke.f,qe=b.f,Qe=He.f,Je=o.Symbol,et=o.JSON,tt=et&&et.stringify,nt=le("_hidden"),it=le("toPrimitive"),rt={}.propertyIsEnumerable,ot=V("symbol-registry"),at=V("symbols"),st=V("op-symbols"),ut=Object.prototype,lt="function"==typeof Je,ct=o.QObject,ft=!ct||!ct.prototype||!ct.prototype.findChild,dt=d&&f(function(){return 7!=ue(qe({},"a",{get:function(){return qe(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=Xe(ut,t);i&&delete ut[t],qe(e,t,n),i&&e!==ut&&qe(ut,t,i)}:qe,ht=function(e){var t=at[e]=ue(Je.prototype);return t._k=e,t},pt=lt&&"symbol"==typeof Je.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Je},vt=function(e,t,n){return e===ut&&vt(st,t,n),c(e),t=g(t,!0),c(n),S(at,t)?(n.enumerable?(S(e,nt)&&e[nt][t]&&(e[nt][t]=!1),n=ue(n,{enumerable:w(0,!1)})):(S(e,nt)||qe(e,nt,w(1,{})),e[nt][t]=!0),dt(e,t,n)):qe(e,t,n)},mt=function(e,t){c(e);for(var n,i=function(e){var t=te(e),n=Fe.f;if(n)for(var i,r=n(e),o=Be.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}(t=z(t)),r=0,o=i.length;o>r;)vt(e,n=i[r++],t[n]);return e},gt=function(e){var t=rt.call(this,e=g(e,!0));return!(this===ut&&S(at,e)&&!S(st,e))&&(!(t||!S(this,e)||!S(at,e)||S(this,nt)&&this[nt][e])||t)},yt=function(e,t){if(e=z(e),t=g(t,!0),e!==ut||!S(at,t)||S(st,t)){var n=Xe(e,t);return!n||!S(at,t)||S(e,nt)&&e[nt][t]||(n.enumerable=!0),n}},bt=function(e){for(var t,n=Qe(z(e)),i=[],r=0;n.length>r;)S(at,t=n[r++])||t==nt||t==Ze||i.push(t);return i},wt=function(e){for(var t,n=e===ut,i=Qe(n?st:z(e)),r=[],o=0;i.length>o;)!S(at,t=i[o++])||n&&!S(ut,t)||r.push(at[t]);return r};lt||(N((Je=function(){if(this instanceof Je)throw TypeError("Symbol is not a constructor!");var e=K(arguments.length>0?arguments[0]:void 0);return d&&ft&&dt(ut,e,{configurable:!0,set:function t(n){this===ut&&t.call(st,n),S(this,nt)&&S(this[nt],e)&&(this[nt][e]=!1),dt(this,e,w(1,n))}}),ht(e)}).prototype,"toString",function(){return this._k}),Ke.f=yt,b.f=vt,Ge.f=He.f=bt,Be.f=gt,Fe.f=wt,De.f=function(e){return ht(le(e))}),T(T.G+T.W+T.F*!lt,{Symbol:Je});for(var _t="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Et=0;_t.length>Et;)le(_t[Et++]);for(var St=te(le.store),kt=0;St.length>kt;)je(St[kt++]);T(T.S+T.F*!lt,"Symbol",{for:function(e){return S(ot,e+="")?ot[e]:ot[e]=Je(e)},keyFor:function(e){if(!pt(e))throw TypeError(e+" is not a symbol!");for(var t in ot)if(ot[t]===e)return t},useSetter:function(){ft=!0},useSimple:function(){ft=!1}}),T(T.S+T.F*!lt,"Object",{create:function(e,t){return void 0===t?ue(e):mt(ue(e),t)},defineProperty:vt,defineProperties:mt,getOwnPropertyDescriptor:yt,getOwnPropertyNames:bt,getOwnPropertySymbols:wt}),et&&T(T.S+T.F*(!lt||f(function(){var e=Je();return"[null]"!=tt([e])||"{}"!=tt({a:e})||"{}"!=tt(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(l(t)||void 0!==e)&&!pt(e))return ze(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!pt(t))return t}),i[1]=t,tt.apply(et,i)}}),Je.prototype[it]||_(Je.prototype,it,Je.prototype.valueOf),de(Je,"Symbol"),de(Math,"Math",!0),de(o.JSON,"JSON",!0),je("asyncIterator"),je("observable");var Tt=a.Symbol,At=i(function(e){e.exports={default:Tt,__esModule:!0}});n(At);var Ot=n(i(function(e,t){t.__esModule=!0;var n=o(Re),i=o(At),r="function"===typeof i.default&&"symbol"===typeof n.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===r(n.default)?function(e){return"undefined"===typeof e?"undefined":r(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":r(e)}}));!function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),T(T.S+T.F*f(function(){n(1)}),"Object",i)}("keys",function(){return function(e){return te(me(e))}});var xt=a.Object.keys;n(i(function(e){e.exports={default:xt,__esModule:!0}}));var Mt=Math.floor;T(T.S,"Number",{isInteger:function(e){return!l(e)&&isFinite(e)&&Mt(e)===e}});var Lt=a.Number.isInteger;n(i(function(e){e.exports={default:Lt,__esModule:!0}}));var It="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",Dt="["+It+"]",Ct=RegExp("^"+Dt+Dt+"*"),Rt=RegExp(Dt+Dt+"*$"),Nt=function(e,t,n){var i={},r=f(function(){return!!It[e]()||"\u200b\x85"!="\u200b\x85"[e]()}),o=i[e]=r?t(Pt):It[e];n&&(i[n]=o),T(T.P+T.F*r,"String",i)},Pt=Nt.trim=function(e,t){return e=String(R(e)),1&t&&(e=e.replace(Ct,"")),2&t&&(e=e.replace(Rt,"")),e},jt=Nt,Ft=o.parseFloat,Bt=jt.trim,zt=1/Ft(It+"-0")!==-1/0?function(e){var t=Bt(String(e),3),n=Ft(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Ft;T(T.S+T.F*(Number.parseFloat!=zt),"Number",{parseFloat:zt});var Ut=a.Number.parseFloat;function Gt(e){return Array.isArray(e)}function Wt(e){return"function"===typeof e}function $t(e){return Object(e)===e&&"[object Object]"===String(e)&&!Wt(e)&&!Gt(e)}function Vt(e){return"string"===typeof e||e instanceof String}function Ht(e){return"boolean"===typeof e}function Yt(e){return void 0===(t=e)||null===t||Ht(e)||Vt(e)||function(e){return"number"===typeof e}(e);var t}function Kt(e,t){if(!Vt(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+("undefined"===typeof e?"undefined":Ot(e)));return Vt(t)?"["+(e=Zt.FORCE_GLOBAL_TAG?Zt.GLOBAL_TAG:e||Zt.GLOBAL_TAG)+"] > "+t:"["+Zt.GLOBAL_TAG+"] > "+e}n(i(function(e){e.exports={default:Ut,__esModule:!0}}));var Zt=function(){function e(){r(this,e)}return L(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,Kt(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log).call(console,Kt(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log).call(console,Kt(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log).call(console,Kt(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(Kt(t,n))}}]),e}();Zt.GLOBAL_TAG="chimee",Zt.FORCE_GLOBAL_TAG=!1,Zt.ENABLE_ERROR=!0,Zt.ENABLE_INFO=!0,Zt.ENABLE_WARN=!0,Zt.ENABLE_DEBUG=!0,Zt.ENABLE_VERBOSE=!0,i(function(t,n){!function(e,i){var r="model",o="name",a="type",s="vendor",u="version",l="mobile",c="tablet",f={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"===typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(e,t){for(var n,i,r,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(n=i=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(r=0;r<c.length;r++)s=a[++i],"object"===typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!==typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"===typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(f.has(t[n][i],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,u],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[o,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],u],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[o,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[o,u],[/(QQ)\/([\d\.]+)/i],[o,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[o,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[o,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[o],[/(LBBROWSER)/i],[o],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[o,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,u],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[u,d.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[r,s,[a,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[s,"Apple"],[a,c]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,r,[a,c]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[r,[s,"Amazon"],[a,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[r,d.str,h.device.amazon.model],[s,"Amazon"],[a,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,s,[a,l]],[/\((ip[honed|\s\w*]+);/i],[r,[s,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,r,[a,l]],[/\(bb10;\s(\w+)/i],[r,[s,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[r,[s,"Asus"],[a,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[r,"Xperia Tablet"],[a,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[r,[s,"Sony"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,r,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[r,[s,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[r,[s,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[s,d.str,h.device.sprint.vendor],[r,d.str,h.device.sprint.model],[a,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,r,[a,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[s,[r,/_/g," "],[a,l]],[/(nexus\s9)/i],[r,[s,"HTC"],[a,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[r,[s,"Huawei"],[a,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[s,r,[a,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[s,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[s,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[r,[s,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[s,"Motorola"],[a,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[s,f.trim],[r,f.trim],[a,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[r,/^/,"SmartTV"],[s,"Samsung"],[a,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[r,[s,"Sharp"],[a,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],r,[a,c]],[/smart-tv.+(samsung)/i],[s,[a,"smarttv"],r],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[s,"Samsung"],r,[a,l]],[/sie-(\w*)/i],[r,[s,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[s,"Nokia"],r,[a,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[r,[s,"Acer"],[a,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[r,[s,"LG"],[a,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],r,[a,c]],[/(lg) netcast\.tv/i],[s,r,[a,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[r,[s,"LG"],[a,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[s,"Lenovo"],[a,c]],[/linux;.+((jolla));/i],[s,r,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[s,r,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[s,r,[a,l]],[/crkey/i],[[r,"Chromecast"],[s,"Google"]],[/android.+;\s(glass)\s\d/i],[r,[s,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)\s/i],[r,[s,"Google"],[a,c]],[/android.+;\s(pixel xl|pixel)\s/i],[r,[s,"Google"],[a,l]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,l]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[a,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[r,[s,"Meizu"],[a,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[r,[s,"OnePlus"],[a,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[r,[s,"RCA"],[a,c]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[r,[s,"Dell"],[a,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[r,[s,"Verizon"],[a,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[s,"Barnes & Noble"],r,[a,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[r,[s,"NuVision"],[a,c]],[/android.+;\s(k88)\sbuild/i],[r,[s,"ZTE"],[a,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[r,[s,"Swiss"],[a,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[r,[s,"Swiss"],[a,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[r,[s,"Zeki"],[a,c]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[s,"Dragon Touch"],r,[a,c]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[r,[s,"Insignia"],[a,c]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[r,[s,"NextBook"],[a,c]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[s,"Voice"],r,[a,l]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[s,"LvTel"],r,[a,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[r,[s,"Envizen"],[a,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[r,[s,"MachSpeed"],[a,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[s,r,[a,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[r,[s,"Rotor"],[a,c]],[/android.+(KS(.+))\s+build/i],[r,[s,"Amazon"],[a,c]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[s,r,[a,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,f.lowerize],s,r],[/(android[\w\.\s\-]{0,9});.+build/i],[r,[s,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[u,d.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[u,d.str,h.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[o,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[o,"Symbian"],u],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[o,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[o,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[o,u],[/(haiku)\s(\w+)/i],[o,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[o,u]]},v=function t(n,i){if("object"===typeof n&&(i=n,n=void 0),!(this instanceof t))return new t(n,i).getResult();var r=n||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=i?f.extend(p,i):p;return this.getBrowser=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return d.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};v.VERSION="0.7.18",v.BROWSER={NAME:o,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:r,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:o,VERSION:u},v.OS={NAME:o,VERSION:u},t.exports&&(n=t.exports=v),n.UAParser=v;var m=e&&(e.jQuery||e.Zepto);if("undefined"!==typeof m){var g=new v;m.ua=g.getResult(),m.ua.get=function(){return g.getUA()},m.ua.set=function(e){g.setUA(e);var t=g.getResult();for(var n in t)m.ua[n]=t[n]}}}("object"===typeof window?window:e)});var Xt=function(e,t,n,i){try{return i?t(c(n)[0],n[1]):t(n)}catch(o){var r=e.return;throw void 0!==r&&c(r.call(e)),o}},qt=le("iterator"),Qt=Array.prototype,Jt=function(e){return void 0!==e&&(P.Array===e||Qt[qt]===e)},en=function(e,t,n){t in e?b.f(e,t,w(0,n)):e[t]=n},tn=le("toStringTag"),nn="Arguments"==F(function(){return arguments}()),rn=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),tn))?n:nn?F(t):"Object"==(i=F(t))&&"function"==typeof t.callee?"Arguments":i},on=le("iterator"),an=a.getIteratorMethod=function(e){if(void 0!=e)return e[on]||e["@@iterator"]||P[rn(e)]},sn=le("iterator"),un=!1;try{var ln=[7][sn]();ln.return=function(){un=!0},Array.from(ln,function(){throw 2})}catch(Gi){}var cn=function(e,t){if(!t&&!un)return!1;var n=!1;try{var i=[7],r=i[sn]();r.next=function(){return{done:n=!0}},i[sn]=function(){return r},e(i)}catch(Gi){}return n};T(T.S+T.F*!cn(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,r,o=me(e),a="function"==typeof this?this:Array,s=arguments.length,l=s>1?arguments[1]:void 0,c=void 0!==l,f=0,d=an(o);if(c&&(l=u(l,s>2?arguments[2]:void 0,2)),void 0==d||a==Array&&Jt(d))for(n=new a(t=G(o.length));t>f;f++)en(n,f,c?l(o[f],f):o[f]);else for(r=d.call(o),n=new a;!(i=r.next()).done;f++)en(n,f,c?Xt(r,l,[i.value,f],!0):i.value);return n.length=f,n}});var fn=a.Array.from,dn=i(function(e){e.exports={default:fn,__esModule:!0}}),hn=n(dn);n(i(function(e,t){t.__esModule=!0;var n,i=(n=dn)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}}));var pn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t,n){e[t]=n};return function n(i,r,o){if(Gt(i)||$t(i)){for(var a in r=Yt(r)?$t(i)?{}:[]:r,i)t(r,a,n(i[a],r[a],a));return r}return e(i,r,o)}}(function(e){return e});function vn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var i=t.length-1;i>-1;i--)if(Yt(t[i]))throw new TypeError("deepAssign only accept non primitive type");var r=t.shift();return t.forEach(function(e){return pn(e,r)}),r}var mn,gn,yn,bn=i(function(e){var t={},n={},i=e.exports=function(e,i,r,o,a){var s,l,f,d,h=a?function(){return e}:an(e),p=u(r,o,i?2:1),v=0;if("function"!=typeof h)throw TypeError(e+" is not iterable!");if(Jt(h)){for(s=G(e.length);s>v;v++)if((d=i?p(c(l=e[v])[0],l[1]):p(e[v]))===t||d===n)return d}else for(f=h.call(e);!(l=f.next()).done;)if((d=Xt(f,p,l.value,i))===t||d===n)return d};i.BREAK=t,i.RETURN=n}),wn=le("species"),_n=function(e,t){var n,i=c(e).constructor;return void 0===i||void 0==(n=c(i)[wn])?t:s(n)},En=o.process,Sn=o.setImmediate,kn=o.clearImmediate,Tn=o.MessageChannel,An=o.Dispatch,On=0,xn={},Mn=function(){var e=+this;if(xn.hasOwnProperty(e)){var t=xn[e];delete xn[e],t()}},Ln=function(e){Mn.call(e.data)};Sn&&kn||(Sn=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return xn[++On]=function(){!function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},mn(On),On},kn=function(e){delete xn[e]},"process"==F(En)?mn=function(e){En.nextTick(u(Mn,e,1))}:An&&An.now?mn=function(e){An.now(u(Mn,e,1))}:Tn?(yn=(gn=new Tn).port2,gn.port1.onmessage=Ln,mn=u(yn.postMessage,yn,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts?(mn=function(e){o.postMessage(e+"","*")},o.addEventListener("message",Ln,!1)):mn="onreadystatechange"in v("script")?function(e){re.appendChild(v("script")).onreadystatechange=function(){re.removeChild(this),Mn.call(e)}}:function(e){setTimeout(u(Mn,e,1),0)});var In={set:Sn,clear:kn},Dn=In.set,Cn=o.MutationObserver||o.WebKitMutationObserver,Rn=o.process,Nn=o.Promise,Pn="process"==F(Rn);function jn(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=s(t),this.reject=s(n)}var Fn,Bn,zn,Un,Gn={f:function(e){return new jn(e)}},Wn=function(e){try{return{e:!1,v:e()}}catch(Gi){return{e:!0,v:Gi}}},$n=o.navigator,Vn=$n&&$n.userAgent||"",Hn=function(e,t){if(c(e),l(t)&&t.constructor===e)return t;var n=Gn.f(e);return(0,n.resolve)(t),n.promise},Yn=le("species"),Kn=In.set,Zn=function(){var e,t,n,i=function(){var i,r;for(Pn&&(i=Rn.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(Gi){throw e?n():t=void 0,Gi}}t=void 0,i&&i.enter()};if(Pn)n=function(){Rn.nextTick(i)};else if(!Cn||o.navigator&&o.navigator.standalone)if(Nn&&Nn.resolve){var r=Nn.resolve(void 0);n=function(){r.then(i)}}else n=function(){Dn.call(o,i)};else{var a=!0,s=document.createTextNode("");new Cn(i).observe(s,{characterData:!0}),n=function(){s.data=a=!a}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}(),Xn=o.TypeError,qn=o.process,Qn=qn&&qn.versions,Jn=Qn&&Qn.v8||"",ei=o.Promise,ti="process"==rn(qn),ni=function(){},ii=Bn=Gn.f,ri=!!function(){try{var e=ei.resolve(1),t=(e.constructor={})[le("species")]=function(e){e(ni,ni)};return(ti||"function"==typeof PromiseRejectionEvent)&&e.then(ni)instanceof t&&0!==Jn.indexOf("6.6")&&-1===Vn.indexOf("Chrome/66")}catch(Gi){}}(),oi=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},ai=function(e,t){if(!e._n){e._n=!0;var n=e._c;Zn(function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a,s=r?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(r||(2==e._h&&li(e),e._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),a=!0)),n===t.promise?l(Xn("Promise-chain cycle")):(o=oi(n))?o.call(n,u,l):u(n)):l(i)}catch(Gi){c&&!a&&c.exit(),l(Gi)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&si(e)})}},si=function(e){Kn.call(o,function(){var t,n,i,r=e._v,a=ui(e);if(a&&(t=Wn(function(){ti?qn.emit("unhandledRejection",r,e):(n=o.onunhandledrejection)?n({promise:e,reason:r}):(i=o.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=ti||ui(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},ui=function(e){return 1!==e._h&&0===(e._a||e._c).length},li=function(e){Kn.call(o,function(){var t;ti?qn.emit("rejectionHandled",e):(t=o.onrejectionhandled)&&t({promise:e,reason:e._v})})},ci=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),ai(t,!0))},fi=function e(t){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw Xn("Promise can't be resolved itself");(n=oi(t))?Zn(function(){var r={_w:i,_d:!1};try{n.call(t,u(e,r,1),u(ci,r,1))}catch(Gi){ci.call(r,Gi)}}):(i._v=t,i._s=1,ai(i,!1))}catch(Gi){ci.call({_w:i,_d:!1},Gi)}}};ri||(ei=function(e){!function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!")}(this,ei,"Promise","_h"),s(e),Fn.call(this);try{e(u(fi,this,1),u(ci,this,1))}catch(t){ci.call(this,t)}},(Fn=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:_(e,i,t[i]);return e}(ei.prototype,{then:function(e,t){var n=ii(_n(this,ei));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=ti?qn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&ai(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),zn=function(){var e=new Fn;this.promise=e,this.resolve=u(fi,e,1),this.reject=u(ci,e,1)},Gn.f=ii=function(e){return e===ei||e===Un?new zn(e):Bn(e)}),T(T.G+T.W+T.F*!ri,{Promise:ei}),de(ei,"Promise"),function(e){var t="function"==typeof a[e]?a[e]:o[e];d&&t&&!t[Yn]&&b.f(t,Yn,{configurable:!0,get:function(){return this}})}("Promise"),Un=a.Promise,T(T.S+T.F*!ri,"Promise",{reject:function(e){var t=ii(this);return(0,t.reject)(e),t.promise}}),T(T.S+!0*T.F,"Promise",{resolve:function(e){return Hn(this===Un?ei:this,e)}}),T(T.S+T.F*!(ri&&cn(function(e){ei.all(e).catch(ni)})),"Promise",{all:function(e){var t=this,n=ii(t),i=n.resolve,r=n.reject,o=Wn(function(){var n=[],o=0,a=1;bn(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=ii(t),i=n.reject,r=Wn(function(){bn(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),T(T.P+T.R,"Promise",{finally:function(e){var t=_n(this,a.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return Hn(t,e()).then(function(){return n})}:e,n?function(n){return Hn(t,e()).then(function(){throw n})}:e)}}),T(T.S,"Promise",{try:function(e){var t=Gn.f(this),n=Wn(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var di=a.Promise;n(i(function(e){e.exports={default:di,__esModule:!0}}));var hi="undefined"!==typeof window&&"[object Object]"!==Object.prototype.toString.call(window),pi=Object.assign,vi=!pi||f(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=pi({},e)[n]||Object.keys(pi({},t)).join("")!=i})?function(e,t){for(var n=me(e),i=arguments.length,r=1,o=Fe.f,a=Be.f;i>r;)for(var s,u=B(arguments[r++]),l=o?te(u).concat(o(u)):te(u),c=l.length,f=0;c>f;)a.call(u,s=l[f++])&&(n[s]=u[s]);return n}:pi;T(T.S+T.F,"Object",{assign:vi});var mi=a.Object.assign,gi=n(i(function(e){e.exports={default:mi,__esModule:!0}}));T(T.S,"Object",{create:ue});var yi=a.Object,bi=function(e,t){return yi.create(e,t)},wi=n(i(function(e){e.exports={default:bi,__esModule:!0}})),_i=wi(null);function Ei(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++_i.count);var i=n+"_"+t,r=_i[i];return r||(r=_i[i]=[]),r}function Si(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];Wt(i)&&!r&&(r=i,i=void 0);var o=[n,void 0,i];i&&!r&&(r=function(){ki(e,t,n,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(e,o)}),r&&(o[1]=r),Ei(e,t).push(o)}function ki(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ei(e,t);if(n||i){var o=-1,a=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,a=e[1],!0}),-1!==o&&r.splice(o,1),a}r.length=0}_i.count=0,function(){function e(t,n){var i=this;if(r(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==("undefined"===typeof t?"undefined":Ot(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}L(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Si(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ki(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return function(e,t,n){var i=wi(null);i.type=t,i.target=e,n&&gi(i,$t(n)?n:{data:n}),Ei(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[i])})}(this.__target,e,{data:t}),this}}])}();var Ti=hi?document.createElement("div"):{},Ai="innerText";"textContent"in Ti&&(Ai="textContent");var Oi=Array.prototype,xi=!1;try{var Mi=Object.defineProperty({},"passive",{get:function(){xi=!0}});hi&&window.addEventListener("test",null,Mi)}catch(Gi){console.error(Gi)}function Li(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==r&&!Ht(r)&&xi&&(r={passive:!0}),i){var o=ki(e,t+"_once",n);o&&(n=o)}e.removeEventListener(t,n,r)}function Ii(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==r&&!Ht(r)&&xi&&(r={passive:!0});var o=function(n){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],i=arguments[3],r=[];n&&r.push(e);for(;e&&e.parentNode!==t;)(e=e.parentNode)&&r.push(e);i&&r.push(t);return r}(n.target||n.srcElement,e,!0),o=Di(t,e,!0),a=void 0;o.find?a=o.find(function(e){return r.find(function(t){return e===t})}):o.forEach(function(e){return!a&&r.forEach(function(t){a||e!==t||(a=t)})}),a&&i.apply(a,arguments)};Si(e,n+"_delegate_"+t,i,o),e.addEventListener(n,o,r)}function Di(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],i=t.querySelectorAll(e);return n?hn(i):i}var Ci=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;r(this,e);this.selector=t;var i=void 0;t&&t.constructor===NodeList?i=hn(t):Gt(t)?i=t:Vt(t)?0===t.indexOf("<")?(Ti.innerHTML=t,i=Di("*",Ti,!0)):i=Di(t,n,!0):i=[t],gi(this,i),this.length=i.length}return L(e,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Oi.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Oi.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ri(Oi.splice.apply(this,t))}},{key:"find",value:function(e){var t=[];this.each(function(n){t=t.concat(Di(e,n,!0))});var n=Ri(t);return n.parent=this,n.selector=e,n}},{key:"append",value:function(e){var t=Ri(e),n=this[0];return t.each(function(e){return n.appendChild(e)}),this}},{key:"appendTo",value:function(e){return Ri(e).append(this),this}},{key:"text",value:function(e){return 0===arguments.length?this[0][Ai]:this.each(function(t){t[Ai]=e})}},{key:"html",value:function(e){return 0===arguments.length?this[0].innerHTML:this.each(function(t){t.innerHTML=e})}},{key:"attr",value:function(e,t){return 1===arguments.length?(n=this[0],i=e,n.getAttribute(i)):this.each(function(n){return function(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n)}(n,e,t)});var n,i}},{key:"data",value:function(e,t){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[e]:this.each(function(n){(n.dataset||(n.dataset={}))[e]=t})}},{key:"css",value:function(e,t){return 1!==arguments.length||$t(e)?this.each(function(n){return function e(t,n,i){if($t(n))for(var r in n)e(t,r,n[r]);else t.style[n]=i}(n,e,t)}):function(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,null))[t]||e.style[t]}(this[0],e)}},{key:"addClass",value:function(e){return this.each(function(t){return function(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.add(t)});else{var i=" "+(e.className||"")+" ";n.forEach(function(e){-1===i.indexOf(" "+e+" ")&&(i+=" "+e)}),e.className=i.trim()}}}(t,e)})}},{key:"removeClass",value:function(e){return this.each(function(t){return function(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.remove(t)});else{var i=" "+e.className+" ";n.forEach(function(e){for(var t=" "+e+" ";-1!==i.indexOf(t);)i=i.replace(t," ")}),e.className=i.trim()}}}(t,e)})}},{key:"hasClass",value:function(e){return t=this[0],new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t.className);var t}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==r&&!Ht(r)&&xi&&(r={passive:!0}),i){var o=n;n=function(){for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];o.apply(this,s),Li(e,t,n,i,r)},Si(e,t+"_once",o,n)}e.addEventListener(t,n,r)}(r,e,t,n,i)})}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Li(r,e,t,n,i)})}},{key:"delegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return Ii(r,e,t,n,i)})}},{key:"undelegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==r&&!Ht(r)&&xi&&(r={passive:!0});var o=ki(e,n+"_delegate_"+t,i);o&&e.removeEventListener(n,o,r)}(r,e,t,n,i)})}},{key:"remove",value:function(){return this.each(function(e){return function(e){e.parentNode.removeChild(e)}(e)})}}]),e}();function Ri(e,t){return e.constructor===Ci?e:new Ci(e,t)}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}('chimee-center-state{position:absolute}@keyframes a{0%{opacity:1}to{transform:scale(2);opacity:0}}@keyframes b{0%{transform:rotate(0)}to{transform:rotate(1turn)}}chimee-center-state-correct,chimee-center-state-error,chimee-center-state-loading,chimee-center-state-tip{display:none}chimee-center-state.correct chimee-center-state-correct,chimee-center-state.error chimee-center-state-error,chimee-center-state.loading chimee-center-state-loading,chimee-center-state.tip chimee-center-state-tip{display:inline-block}chimee-center-state-correct{width:104px;height:104px}chimee-center-state-tip{position:absolute;left:26px;bottom:26px;width:52px;height:52px;border-radius:26px;background:rgba(0,0,0,.5);animation:a .5s linear 1 normal forwards}chimee-center-state.play span{background-image:url("data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjQycHgiIGhlaWdodD0iNTFweCIgdmlld0JveD0iMCAwIDQyIDUxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4xICgzOTAxMikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgZmlsbD0iI0ZGRkZGRiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEuMDAwMDAwLCAyNS41MDAwMDApIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMjEuMDAwMDAwLCAtMjUuNTAwMDAwKSAiIHBvaW50cz0iMjEgNSA0NiA0NiAtNCA0NiI+PC9wb2x5Z29uPgogICAgPC9nPgo8L3N2Zz4=")}chimee-center-state.pause span{background-image:url("data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjUwcHgiIGhlaWdodD0iNTBweCIgdmlld0JveD0iMCAwIDUwIDUwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4xICgzOTAxMikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIGZpbGw9IiNGRkZGRkYiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSI1MCI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIGZpbGw9IiNGRkZGRkYiIHg9IjMwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNTAiPjwvcmVjdD4KICAgIDwvZz4KPC9zdmc+")}chimee-center-state.back span{background-image:url("data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjczMXB4IiBoZWlnaHQ9Ijg4NHB4IiB2aWV3Qm94PSIwIDAgNzMxIDg4NCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDQuMSAoNDE0NTUpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iNzcxLeWNlee6v++8jOWIt+aWsCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzY1LjUwMDAwMCwgNDQyLjAwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMzY1LjUwMDAwMCwgLTQ0Mi4wMDAwMDApICIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjZmZmZmZmIj4KICAgICAgICAgICAgPHBhdGggZD0iTTcwNS4xMTg1NTgsNDkyLjQxNDIwMyBDNjkwLjk4OTc2OSw0OTIuNDE0MjAzIDY3OS41MzU5MDMsNTAzLjg2ODA2OSA2NzkuNTM1OTAzLDUxNy45OTY4NTggQzY3OS41MzU5MDMsNjkxLjA2MDQ0OSA1MzguNzM3MTU3LDgzMS44NTkxOTUgMzY1LjY3MzU2Niw4MzEuODU5MTk1IEMxOTIuNjA4OTUyLDgzMS44NTkxOTUgNTEuODEyMjUyLDY5MS4wNjA0NDkgNTEuODEyMjUyLDUxNy45OTY4NTggQzUxLjgxMjI1MiwzNTUuMDM4NDE2IDE3Ni42NTI1MzgsMjIwLjcwNjk2NSAzMzUuNzE0MjMsMjA1LjU3MzI4OSBMMjIzLjYwMDgwMywzMTcuNjg2NzE2IEMyMTMuNjEwMjY1LDMyNy42NzcyNTQgMjEzLjYxMDI2NSwzNDMuODc1MTY4IDIyMy42MDA4MDMsMzUzLjg2NTcwNyBDMjI4LjU5NjU4NCwzNTguODYwNDY1IDIzNS4xNDM2OTcsMzYxLjM1ODM1NSAyNDEuNjkwODEsMzYxLjM1ODM1NSBDMjQ4LjIzNzkyMywzNjEuMzU4MzU1IDI1NC43ODUwMzYsMzU4Ljg2MDQ2NSAyNTkuNzgwODE3LDM1My44NjU3MDcgTDQxNC43MzcwMDUsMTk4LjkwOTUxOSBDNDI0LjcyNzU0MywxODguOTE4OTgxIDQyNC43Mjc1NDMsMTcyLjcyMTA2NyA0MTQuNzM3MDA1LDE2Mi43MzA1MjggTDI1OS43Nzk3OTMsNy43NzQzNDEgQzI0OS43ODgyMzEsLTIuMjE2MTk3IDIzMy41OTEzNDEsLTIuMjE2MTk3IDIyMy42MDA4MDIsNy43NzQzNDEgQzIxMy42MTAyNjQsMTcuNzY0ODc5IDIxMy42MTAyNjQsMzMuOTYyNzkzIDIyMy42MDA4MDIsNDMuOTUzMzMyIEwzMzMuOTkwOTgxLDE1NC4zNDM1MTEgQzI5NS45MDE0NzgsMTU3LjYwMjc0MSAyNTguODgyMzUzLDE2Ni43MzM3MDIgMjIzLjU4MTM1OSwxODEuNjY0NzYzIEMxODAuMTExMzEyLDIwMC4wNTE1MjkgMTQxLjA3NjI3MywyMjYuMzY3ODk0IDEwNy41NjA5NDksMjU5Ljg4MzIxOSBDNzQuMDQ1NjI1LDI5My4zOTg1NDQgNDcuNzI5MjU5LDMzMi40MzI1NTkgMjkuMzQyNDkzLDM3NS45MDM2MjkgQzEwLjMwMTgzNSw0MjAuOTIxOTM5IDAuNjQ2OTQxLDQ2OC43Mjk3ODEgMC42NDY5NDEsNTE3Ljk5NTgzNCBDMC42NDY5NDEsNTY3LjI2MzkzNCAxMC4zMDE4MzUsNjE1LjA2OTczIDI5LjM0MjQ5Myw2NjAuMDg5MDYzIEM0Ny43MjkyNTksNzAzLjU1ODA4NyA3NC4wNDU2MjQsNzQyLjU5NDE0OSAxMDcuNTYwOTQ5LDc3Ni4xMDk0NzMgQzE0MS4wNzYyNzQsODA5LjYyNDc5NyAxODAuMTEwMjg5LDgzNS45NDExNjMgMjIzLjU4MTM1OSw4NTQuMzI2OTA2IEMyNjguNTk5NjY5LDg3My4zNjg1ODggMzE2LjQwNjQ4OCw4ODMuMDIzNDgyIDM2NS42NzM1NjQsODgzLjAyMzQ4MiBDNDE0Ljk0MTY2NCw4ODMuMDIzNDgyIDQ2Mi43NDc0Niw4NzMuMzY4NTg4IDUwNy43NjY3OTMsODU0LjMyNjkwNiBDNTUxLjIzNTgxNyw4MzUuOTQxMTY0IDU5MC4yNzE4NzksODA5LjYyNDc5OCA2MjMuNzg3MjAzLDc3Ni4xMDk0NzMgQzY1Ny4zMDI1MjcsNzQyLjU5NDE0OCA2ODMuNjE4ODkzLDcwMy41NTkxMSA3MDIuMDA0NjM2LDY2MC4wODkwNjMgQzcyMS4wNDYzMTgsNjE1LjA2OTczIDczMC43MDEyMTIsNTY3LjI2MjkxMSA3MzAuNzAxMjEyLDUxNy45OTU4MzQgQzczMC43MDEyMTMsNTAzLjg2ODA2OSA3MTkuMjQ4MzcsNDkyLjQxNDIwMyA3MDUuMTE4NTU4LDQ5Mi40MTQyMDMgWiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgICAgIDx0ZXh0IGlkPSIxMCIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIyODgiIGZvbnQtd2VpZ2h0PSJub3JtYWwiIGZpbGw9IiNmZmZmZmYiPgogICAgICAgICAgICA8dHNwYW4geD0iMjExIiB5PSI2MzQiPjEwPC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICA8L2c+Cjwvc3ZnPg==")}chimee-center-state.forward span{background-image:url("data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjczMXB4IiBoZWlnaHQ9Ijg4NHB4IiB2aWV3Qm94PSIwIDAgNzMxIDg4NCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDQuMSAoNDE0NTUpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iNzcxLeWNlee6v++8jOWIt+aWsCIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjZmZmZmZmIj4KICAgICAgICAgICAgPHBhdGggZD0iTTcwNS4xMTg1NTgsNDkyLjQxNDIwMyBDNjkwLjk4OTc2OSw0OTIuNDE0MjAzIDY3OS41MzU5MDMsNTAzLjg2ODA2OSA2NzkuNTM1OTAzLDUxNy45OTY4NTggQzY3OS41MzU5MDMsNjkxLjA2MDQ0OSA1MzguNzM3MTU3LDgzMS44NTkxOTUgMzY1LjY3MzU2Niw4MzEuODU5MTk1IEMxOTIuNjA4OTUyLDgzMS44NTkxOTUgNTEuODEyMjUyLDY5MS4wNjA0NDkgNTEuODEyMjUyLDUxNy45OTY4NTggQzUxLjgxMjI1MiwzNTUuMDM4NDE2IDE3Ni42NTI1MzgsMjIwLjcwNjk2NSAzMzUuNzE0MjMsMjA1LjU3MzI4OSBMMjIzLjYwMDgwMywzMTcuNjg2NzE2IEMyMTMuNjEwMjY1LDMyNy42NzcyNTQgMjEzLjYxMDI2NSwzNDMuODc1MTY4IDIyMy42MDA4MDMsMzUzLjg2NTcwNyBDMjI4LjU5NjU4NCwzNTguODYwNDY1IDIzNS4xNDM2OTcsMzYxLjM1ODM1NSAyNDEuNjkwODEsMzYxLjM1ODM1NSBDMjQ4LjIzNzkyMywzNjEuMzU4MzU1IDI1NC43ODUwMzYsMzU4Ljg2MDQ2NSAyNTkuNzgwODE3LDM1My44NjU3MDcgTDQxNC43MzcwMDUsMTk4LjkwOTUxOSBDNDI0LjcyNzU0MywxODguOTE4OTgxIDQyNC43Mjc1NDMsMTcyLjcyMTA2NyA0MTQuNzM3MDA1LDE2Mi43MzA1MjggTDI1OS43Nzk3OTMsNy43NzQzNDEgQzI0OS43ODgyMzEsLTIuMjE2MTk3IDIzMy41OTEzNDEsLTIuMjE2MTk3IDIyMy42MDA4MDIsNy43NzQzNDEgQzIxMy42MTAyNjQsMTcuNzY0ODc5IDIxMy42MTAyNjQsMzMuOTYyNzkzIDIyMy42MDA4MDIsNDMuOTUzMzMyIEwzMzMuOTkwOTgxLDE1NC4zNDM1MTEgQzI5NS45MDE0NzgsMTU3LjYwMjc0MSAyNTguODgyMzUzLDE2Ni43MzM3MDIgMjIzLjU4MTM1OSwxODEuNjY0NzYzIEMxODAuMTExMzEyLDIwMC4wNTE1MjkgMTQxLjA3NjI3MywyMjYuMzY3ODk0IDEwNy41NjA5NDksMjU5Ljg4MzIxOSBDNzQuMDQ1NjI1LDI5My4zOTg1NDQgNDcuNzI5MjU5LDMzMi40MzI1NTkgMjkuMzQyNDkzLDM3NS45MDM2MjkgQzEwLjMwMTgzNSw0MjAuOTIxOTM5IDAuNjQ2OTQxLDQ2OC43Mjk3ODEgMC42NDY5NDEsNTE3Ljk5NTgzNCBDMC42NDY5NDEsNTY3LjI2MzkzNCAxMC4zMDE4MzUsNjE1LjA2OTczIDI5LjM0MjQ5Myw2NjAuMDg5MDYzIEM0Ny43MjkyNTksNzAzLjU1ODA4NyA3NC4wNDU2MjQsNzQyLjU5NDE0OSAxMDcuNTYwOTQ5LDc3Ni4xMDk0NzMgQzE0MS4wNzYyNzQsODA5LjYyNDc5NyAxODAuMTEwMjg5LDgzNS45NDExNjMgMjIzLjU4MTM1OSw4NTQuMzI2OTA2IEMyNjguNTk5NjY5LDg3My4zNjg1ODggMzE2LjQwNjQ4OCw4ODMuMDIzNDgyIDM2NS42NzM1NjQsODgzLjAyMzQ4MiBDNDE0Ljk0MTY2NCw4ODMuMDIzNDgyIDQ2Mi43NDc0Niw4NzMuMzY4NTg4IDUwNy43NjY3OTMsODU0LjMyNjkwNiBDNTUxLjIzNTgxNyw4MzUuOTQxMTY0IDU5MC4yNzE4NzksODA5LjYyNDc5OCA2MjMuNzg3MjAzLDc3Ni4xMDk0NzMgQzY1Ny4zMDI1MjcsNzQyLjU5NDE0OCA2ODMuNjE4ODkzLDcwMy41NTkxMSA3MDIuMDA0NjM2LDY2MC4wODkwNjMgQzcyMS4wNDYzMTgsNjE1LjA2OTczIDczMC43MDEyMTIsNTY3LjI2MjkxMSA3MzAuNzAxMjEyLDUxNy45OTU4MzQgQzczMC43MDEyMTMsNTAzLjg2ODA2OSA3MTkuMjQ4MzcsNDkyLjQxNDIwMyA3MDUuMTE4NTU4LDQ5Mi40MTQyMDMgWiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgICAgIDx0ZXh0IGlkPSIxMCIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIyODgiIGZvbnQtd2VpZ2h0PSJub3JtYWwiIGZpbGw9IiNmZmZmZmYiPgogICAgICAgICAgICA8dHNwYW4geD0iMjExIiB5PSI2MzQiPjEwPC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICA8L2c+Cjwvc3ZnPg==")}chimee-center-state.volume-high span{background-image:url("data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjEwMXB4IiB2aWV3Qm94PSIwIDAgMTA3IDEwMSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDQuMSAoNDE0NTUpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAwLjAwMDAwMCkiIHN0cm9rZT0iI0ZGRkZGRiI+CiAgICAgICAgPHBvbHlnb24gaWQ9IlBhdGgiIGZpbGw9IiNmZmZmZmYiIHBvaW50cz0iMC40MDczMTY0NDYgMzAgMjcuNjUwMDc3OSAzMCA1Ny4zNzM3MjkzIDIuODQyMTcwOTRlLTE0IDU4LjQ3NjI1MzIgMTAwIDI3LjY1MDA3NzkgNzAgMC40MDczMTY0NDYgNzAiPjwvcG9seWdvbj4KICAgICAgICA8cGF0aCBkPSJNNjMuNjExNjUwNSw1LjAwOTc1MjM5IEM2OS43MDc5Mjc1LDQuNzg2MTIwNTcgNzYuNjU0OTI1MSw4LjQwODU2MTQ2IDg0LjQ1MjY0MzEsMTUuODc3MDc1IEM5Ni4xNDkyMjAxLDI3LjA3OTg0NTQgMTAwLjk3MDg3NCwzNC43OTc1MTI1IDEwMC45NzA4NzQsNTAuOTYwODU1OCBDMTAwLjk3MDg3NCw2Ny4xMjQxOTkxIDk2LjI4ODcyMjUsNzMuNzkwNzQ4MiA4NC40NTI2NDMxLDgzLjgzMDY3MjQgQzc2LjU2MTkyMzQsOTAuNTIzOTU1MiA2OS42MTQ5MjU5LDk0LjAzMjA2NDQgNjMuNjExNjUwNSw5NC4zNTUiIGlkPSLlpJbnjq8iIHN0cm9rZS13aWR0aD0iMTAiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNNjUuODUwNTY5OSwyOS40OTI5MTk1IEM2OC41MzY5NDM0LDI5LjM5MzExNjkgNzEuNTk4MTkzOCwzMS4wMDk3NDE2IDc1LjAzNDMyMSwzNC4zNDI3OTM0IEM4MC4xODg1MTE4LDM5LjM0MjM3MTIgODIuMzEzMjEyMyw0Mi43ODY2MTU0IDgyLjMxMzIxMjMsNTAgQzgyLjMxMzIxMjMsNTcuMjEzMzg0NiA4MC4yNDk5ODQ3LDYwLjE4ODUzNTQgNzUuMDM0MzIxLDY0LjY2OTE1NzYgQzcxLjU1NzIxMTksNjcuNjU2MjM5IDY4LjQ5NTk2MTUsNjkuMjIxODM5NyA2NS44NTA1Njk5LDY5LjM2NTk1OTUiIGlkPSLlhoXnjq8iIHN0cm9rZS13aWR0aD0iMTAiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+")}chimee-center-state.volume-low span{background-image:url("data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9Ijg5cHgiIGhlaWdodD0iMTAxcHgiIHZpZXdCb3g9IjAgMCA4OSAxMDEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ0LjEgKDQxNDU1KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMC4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiPgogICAgICAgIDxwb2x5Z29uIGlkPSJQYXRoIiBmaWxsPSIjZmZmZmZmIiBwb2ludHM9IjAuNDA3MzE2NDQ2IDMwIDI3LjY1MDA3NzkgMzAgNTcuMzczNzI5MyAyLjg0MjE3MDk0ZS0xNCA1OC40NzYyNTMyIDEwMCAyNy42NTAwNzc5IDcwIDAuNDA3MzE2NDQ2IDcwIj48L3BvbHlnb24+CiAgICAgICAgPHBhdGggZD0iTTY1Ljg1MDU2OTksMjkuNDkyOTE5NSBDNjguNTM2OTQzNCwyOS4zOTMxMTY5IDcxLjU5ODE5MzgsMzEuMDA5NzQxNiA3NS4wMzQzMjEsMzQuMzQyNzkzNCBDODAuMTg4NTExOCwzOS4zNDIzNzEyIDgyLjMxMzIxMjMsNDIuNzg2NjE1NCA4Mi4zMTMyMTIzLDUwIEM4Mi4zMTMyMTIzLDU3LjIxMzM4NDYgODAuMjQ5OTg0Nyw2MC4xODg1MzU0IDc1LjAzNDMyMSw2NC42NjkxNTc2IEM3MS41NTcyMTE5LDY3LjY1NjIzOSA2OC40OTU5NjE1LDY5LjIyMTgzOTcgNjUuODUwNTY5OSw2OS4zNjU5NTk1IiBpZD0i5YaF546vIiBzdHJva2Utd2lkdGg9IjEwIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg==")}chimee-center-state-tip span{display:inline-block;width:24px;height:24px;margin:14px;background-origin:content-box;background-size:auto 100%;background-repeat:no-repeat;background-position:50%;box-sizing:initial}chimee-center-state.play span{background-position:110% 50%}chimee-center-state-loading{width:52px;height:52px;padding:26px;background-image:url("data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjgwcHgiIGhlaWdodD0iODBweCIgdmlld0JveD0iMCAwIDgwIDgwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0Ny4xICg0NTQyMikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJsb2FkaW5nIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAuMDAwMDAwLCAtMTAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1wYXRoIiBmaWxsLW9wYWNpdHk9IjEiIHg9IjQ3IiB5PSIxMCIgd2lkdGg9IjYiIGhlaWdodD0iMjAiIHJ4PSIzIj48L3JlY3Q+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtcGF0aCIgZmlsbC1vcGFjaXR5PSIwLjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY1LjAwMDAwMCwgMjQuMDE5MjM4KSByb3RhdGUoMzAuMDAwMDAwKSB0cmFuc2xhdGUoLTY1LjAwMDAwMCwgLTI0LjAxOTIzOCkgIiB4PSI2MiIgeT0iMTQuMDE5MjM3OSIgd2lkdGg9IjYiIGhlaWdodD0iMjAiIHJ4PSIzIj48L3JlY3Q+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtcGF0aCIgZmlsbC1vcGFjaXR5PSIwLjgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc1Ljk4MDc2MiwgMzUuMDAwMDAwKSByb3RhdGUoNjAuMDAwMDAwKSB0cmFuc2xhdGUoLTc1Ljk4MDc2MiwgLTM1LjAwMDAwMCkgIiB4PSI3Mi45ODA3NjIxIiB5PSIyNSIgd2lkdGg9IjYiIGhlaWdodD0iMjAiIHJ4PSIzIj48L3JlY3Q+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtcGF0aCIgZmlsbC1vcGFjaXR5PSIwLjciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgwLjAwMDAwMCwgNTAuMDAwMDAwKSByb3RhdGUoOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTgwLjAwMDAwMCwgLTUwLjAwMDAwMCkgIiB4PSI3NyIgeT0iNDAiIHdpZHRoPSI2IiBoZWlnaHQ9IjIwIiByeD0iMyI+PC9yZWN0PgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLXBhdGgiIGZpbGwtb3BhY2l0eT0iMC42IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NS45ODA3NjIsIDY1LjAwMDAwMCkgcm90YXRlKDEyMC4wMDAwMDApIHRyYW5zbGF0ZSgtNzUuOTgwNzYyLCAtNjUuMDAwMDAwKSAiIHg9IjcyLjk4MDc2MjEiIHk9IjU1IiB3aWR0aD0iNiIgaGVpZ2h0PSIyMCIgcng9IjMiPjwvcmVjdD4KICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1wYXRoIiBmaWxsLW9wYWNpdHk9IjAuNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuMDAwMDAwLCA3NS45ODA3NjIpIHJvdGF0ZSgxNTAuMDAwMDAwKSB0cmFuc2xhdGUoLTY1LjAwMDAwMCwgLTc1Ljk4MDc2MikgIiB4PSI2MiIgeT0iNjUuOTgwNzYyMSIgd2lkdGg9IjYiIGhlaWdodD0iMjAiIHJ4PSIzIj48L3JlY3Q+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtcGF0aCIgZmlsbC1vcGFjaXR5PSIwLjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgODAuMDAwMDAwKSByb3RhdGUoMTgwLjAwMDAwMCkgdHJhbnNsYXRlKC01MC4wMDAwMDAsIC04MC4wMDAwMDApICIgeD0iNDciIHk9IjcwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyMCIgcng9IjMiPjwvcmVjdD4KICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1wYXRoIiBmaWxsLW9wYWNpdHk9IjAuMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzUuMDAwMDAwLCA3NS45ODA3NjIpIHJvdGF0ZSgtMTUwLjAwMDAwMCkgdHJhbnNsYXRlKC0zNS4wMDAwMDAsIC03NS45ODA3NjIpICIgeD0iMzIiIHk9IjY1Ljk4MDc2MjEiIHdpZHRoPSI2IiBoZWlnaHQ9IjIwIiByeD0iMyI+PC9yZWN0PgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLXBhdGgiIGZpbGwtb3BhY2l0eT0iMC4yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC4wMTkyMzgsIDY1LjAwMDAwMCkgcm90YXRlKC0xMjAuMDAwMDAwKSB0cmFuc2xhdGUoLTI0LjAxOTIzOCwgLTY1LjAwMDAwMCkgIiB4PSIyMS4wMTkyMzc5IiB5PSI1NSIgd2lkdGg9IjYiIGhlaWdodD0iMjAiIHJ4PSIzIj48L3JlY3Q+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtcGF0aCIgZmlsbC1vcGFjaXR5PSIwLjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwLjAwMDAwMCwgNTAuMDAwMDAwKSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC0yMC4wMDAwMDAsIC01MC4wMDAwMDApICIgeD0iMTciIHk9IjQwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyMCIgcng9IjMiPjwvcmVjdD4KICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1wYXRoIiBmaWxsLW9wYWNpdHk9IjAuNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQuMDE5MjM4LCAzNS4wMDAwMDApIHJvdGF0ZSgtNjAuMDAwMDAwKSB0cmFuc2xhdGUoLTI0LjAxOTIzOCwgLTM1LjAwMDAwMCkgIiB4PSIyMS4wMTkyMzc5IiB5PSIyNSIgd2lkdGg9IjYiIGhlaWdodD0iMjAiIHJ4PSIzIj48L3JlY3Q+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtcGF0aCIgZmlsbC1vcGFjaXR5PSIwLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM1LjAwMDAwMCwgMjQuMDE5MjM4KSByb3RhdGUoLTMwLjAwMDAwMCkgdHJhbnNsYXRlKC0zNS4wMDAwMDAsIC0yNC4wMTkyMzgpICIgeD0iMzIiIHk9IjE0LjAxOTIzNzkiIHdpZHRoPSI2IiBoZWlnaHQ9IjIwIiByeD0iMyI+PC9yZWN0PgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+");background-origin:content-box;background-size:auto 100%;background-repeat:no-repeat;background-position:50%;animation:b 1.2s linear infinite}chimee-center-state-error{display:none;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:180px;font-size:16px;z-index:1;color:#ffcf00;text-shadow:0 0 3px red;font-weight:100;text-align:center}',{});var Ni=le("iterator"),Pi=a.isIterable=function(e){var t=Object(e);return void 0!==t[Ni]||"@@iterator"in t||P.hasOwnProperty(rn(t))},ji=i(function(e){e.exports={default:Pi,__esModule:!0}});n(ji);var Fi=a.getIterator=function(e){var t=an(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return c(t.call(e))},Bi=i(function(e){e.exports={default:Fi,__esModule:!0}});n(Bi);var zi=n(i(function(e,t){t.__esModule=!0;var n=r(ji),i=r(Bi);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,u=(0,i.default)(e);!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,a=l}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}));!function(e,t){if("undefined"===typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}("chimee-popup{position:absolute;color:#fff;background-color:rgba(88,88,88,.5);font-size:13px;font-family:sans-serif;border:1px solid hsla(0,0%,100%,.08);padding:3px}chimee-popup cm-pp-close{float:right;color:#fff;text-decoration:none;line-height:14px;text-shadow:0 0 1px #000;font-size:15px;padding:0 3px;cursor:pointer;opacity:.8}chimee-popup cm-pp-close:hover{opacity:1}chimee-popup cm-pp-body,chimee-popup cm-pp-head{display:block;padding:3px 3px 6px}chimee-popup cm-pp-head{font-weight:700;border-bottom:1px solid hsla(0,0%,100%,.18);padding:0 5px 4px;margin-bottom:5px}chimee-popup cm-pp-body{font-size:12px}",void 0);var Ui={errorTips:"\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5"};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tagName,n=void 0===t?"chimee-popup":t,i=e.className,r=e.name,o=void 0===r?"popup":r,a=e.html,s=e.title,u=void 0===s?"\u8fd9\u662f\u4e00\u4e2a\u4fe1\u606f\u6846":s,l=e.body,c=void 0===l?"\u8fd9\u91cc\u662f\u4fe1\u606f\u5185\u5bb9":l,f=e.offsetAttr,d=void 0===f?"left top":f,h=e.offset,p=void 0===h?"50% 50%":h,v=e.translate,m=void 0===v?"":v,g=e.width,y=e.height,b=e.level,w=e.init,_=e.inited,E=e.data,S=e.create,k=e.beforeCreate,T=e.destroy,A=e.events,O=e.computed,x=e.methods,M=void 0===x?{}:x,L=e.penetrate,I=void 0!==L&&L,D=e.operable,C=void 0===D||D,R=e.hide,N=void 0!==R&&R,P=e.opened,j=e.closed,F=e.autoFocus,B={html:a||"\n      <cm-pp-close>\xd7</cm-pp-close>\n      "+(!1!==u?"<cm-pp-head>"+u+"</cm-pp-head>":"")+"\n      "+(!1!==c?"<cm-pp-body>"+c+"</cm-pp-body>":"")+"\n    ",closeSelector:"._close"};return{name:o,el:n,className:i,beforeCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.events,n=e.methods,i=arguments[1];$t(i)&&($t(i.events)&&vn(t,i.events),$t(i.methods)&&vn(n,i.methods)),k&&k.apply(this,arguments)},create:function(){var e=$t(this.$config)?vn(B,this.$config):B;(this.$domWrap=Ri(this.$dom).css("display","none")).html(e.html).delegate("cm-pp-close, "+e.closeSelector,"click",this.close),this.width(g).height(y).offset(p).translate(m),this._hide=N;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];S&&S.apply(this,n),!this._hide&&this.open()},destroy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];T&&T.apply(this,t),this.$domWrap.undelegate(this.$config.closeSelector,"click",this.close).remove()},level:b,init:w,inited:_,data:E,events:A,computed:O,penetrate:I,operable:C,autoFocus:F,methods:vn({open:function(){if(this.destroyed)return this;this.$domWrap.css("display","block"),this._hide=!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupOpen",t,this),Wt(P)&&P.apply(this,t),this},close:function(){if(this.destroyed)return this;this.$domWrap.css("display","none"),this._hide=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$emit("popupClose",t,this),Wt(j)&&j.apply(this,t),this},width:function(e){return e&&this.$domWrap.css("width",e),this},height:function(e){return e&&this.$domWrap.css("height",e),this},offset:function(e){var t=(""+(e||"")).split(" "),n={};if(t.length>2)return["top","right","bottom","left"].forEach(function(e,i){t[i]&&(n[e]=t[i])}),this.$domWrap.css(n),this;var i=zi(t,2),r=i[0],o=i[1];if(""===r)return this;var a=o||r,s=d.split(" ");n[s[0]]=r,n[s[1]]=a,this.$domWrap.css(n);var u=[];return"50%"===r&&u.push("-50%"),"50%"===a&&u.push("-50%"),u.length>0&&this.translate(u.join(" ")),this},translate:function(e){var t=(""+(e||"")).split(" "),n=zi(t,2),i=n[0],r=n[1];return""!==i&&(this.$domWrap.css("transform","translate("+i+", "+(r||i)+")"),"transform"in document.createElement("a").style||!window.console||!window.console.warn||console.warn("[chimee-plugin-popup] \u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301CSS3\u7684transform\u7279\u6027\uff0cDom\u5143\u7d20\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528translate\u3002")),this}},M)}}({name:"chimeeCenterState",tagName:"chimee-center-state",html:"\n    <chimee-center-state-correct>\n      <chimee-center-state-loading></chimee-center-state-loading>\n      <chimee-center-state-tip>\n        <span></span>\n      </chimee-center-state-tip>\n    </chimee-center-state-correct>\n    <chimee-center-state-error></chimee-center-state-error>\n  ",offset:"50%",hide:!1,create:function(){},inited:function(){this.config=$t(this.$config)?vn(Ui,this.$config):Ui,this.$dom.querySelector("chimee-center-state-error").innerText=this.config.errorTips,this.src&&("auto"===this.preload||"metadata"===this.preload||""===this.preload||!0===this.autoplay)&&this.showLoading(!0)},penetrate:!0,operable:!1,destroy:function(){this.clearTimeout()},events:{pause:function(){this.showTip("pause"),this.showLoading(!1)},play:function(){this.showTip("play")},canplay:function(){this.playing()},playing:function(){this.playing()},waiting:function(){this.waiting()},timeupdate:function(){this.showLoading(!1),this.clearTimeout()},keydown:function(e){if(this.$videoConfig.plugin.some(function(e){return"chimeeControl"===(e.name||e)}))switch(e.stopPropagation(),e.keyCode){case 37:e.preventDefault(),!this.live&&this.showTip("back");break;case 39:e.preventDefault(),!this.live&&this.showTip("forward");break;case 38:e.preventDefault(),this.showTip("volume-high");break;case 40:e.preventDefault(),this.showTip("volume-low")}}},methods:{playing:function(){this.clearTimeout(),this.showLoading(!1),this.showError(!1)},waiting:function(){var e=this;this.clearTimeout(),this._timeout=setTimeout(function(){return e.showError()},3e4),!this.paused&&this.showLoading(!0)},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}),showTip:function(e){var t=this;this.$domWrap.removeClass("correct tip play pause back forward volume-high volume-low").addClass("correct tip "+e),setTimeout(function(){t.$domWrap.removeClass("tip "+e)},500)},showLoading:function(e){!1===e?this.$domWrap.removeClass("loading"):this.$domWrap.addClass("correct loading")},showError:function(e){!1===e?this.$domWrap.removeClass("error"):(this.$domWrap[0].className="",this.$domWrap.addClass("error"))}}})},e.exports=n()}).call(this,n(35))},347:function(e,t,n){"use strict";n(25),n(348)},348:function(e,t,n){e.exports=n.p+"static/media/index.7ee413ac.less"},350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n(0)),o=(i=n(94))&&i.__esModule?i:{default:i},a=n(13);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}if("undefined"!==typeof window){window.matchMedia=window.matchMedia||function(e){return{media:e,matches:!1,addListener:function(){},removeListener:function(){}}}}var h=n(351).default,p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,f(t).call(this,e))).onWindowResized=function(){n.props.autoplay&&n.slick&&n.slick.innerSlider&&n.slick.innerSlider.autoPlay&&n.slick.innerSlider.autoPlay()},n.saveSlick=function(e){n.slick=e},n.renderCarousel=function(e){var t=e.getPrefixCls,i=u({},n.props);"fade"===i.effect&&(i.fade=!0);var o=t("carousel",i.prefixCls);return i.vertical&&(o="".concat(o," ").concat(o,"-vertical")),r.createElement("div",{className:o},r.createElement(h,u({ref:n.saveSlick},i)))},n.onWindowResized=(0,o.default)(n.onWindowResized,500,{leading:!1}),n}var n,i,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.Component),n=t,(i=[{key:"componentDidMount",value:function(){this.props.autoplay&&window.addEventListener("resize",this.onWindowResized),this.innerSlider=this.slick&&this.slick.innerSlider}},{key:"componentWillUnmount",value:function(){this.props.autoplay&&(window.removeEventListener("resize",this.onWindowResized),this.onWindowResized.cancel())}},{key:"next",value:function(){this.slick.slickNext()}},{key:"prev",value:function(){this.slick.slickPrev()}},{key:"goTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.slick.slickGoTo(e,t)}},{key:"render",value:function(){return r.createElement(a.ConfigConsumer,null,this.renderCarousel)}}])&&l(n.prototype,i),s&&l(n,s),t}();t.default=p,p.defaultProps={dots:!0,arrows:!1,draggable:!1}},351:function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(352),o=(i=r)&&i.__esModule?i:{default:i};t.default=o.default},352:function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=l(n(0)),o=n(353),a=l(n(359)),s=l(n(361)),u=n(322);function l(e){return e&&e.__esModule?e:{default:e}}var c=(0,u.canUseDOM)()&&n(156),f=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n));return i.innerSliderRefHandler=function(e){return i.innerSlider=e},i.slickPrev=function(){return i.innerSlider.slickPrev()},i.slickNext=function(){return i.innerSlider.slickNext()},i.slickGoTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.innerSlider.slickGoTo(e,t)},i.slickPause=function(){return i.innerSlider.pause("paused")},i.slickPlay=function(){return i.innerSlider.autoPlay("play")},i.state={breakpoint:null},i._responsiveMediaHandlers=[],i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.media=function(e,t){c.register(e,t),this._responsiveMediaHandlers.push({query:e,handler:t})},t.prototype.componentWillMount=function(){var e=this;if(this.props.responsive){var t=this.props.responsive.map(function(e){return e.breakpoint});t.sort(function(e,t){return e-t}),t.forEach(function(n,i){var r=void 0;r=0===i?(0,a.default)({minWidth:0,maxWidth:n}):(0,a.default)({minWidth:t[i-1]+1,maxWidth:n}),(0,u.canUseDOM)()&&e.media(r,function(){e.setState({breakpoint:n})})});var n=(0,a.default)({minWidth:t.slice(-1)[0]});(0,u.canUseDOM)()&&this.media(n,function(){e.setState({breakpoint:null})})}},t.prototype.componentWillUnmount=function(){this._responsiveMediaHandlers.forEach(function(e){c.unregister(e.query,e.handler)})},t.prototype.render=function(){var e,t,n=this;(e=this.state.breakpoint?"unslick"===(t=this.props.responsive.filter(function(e){return e.breakpoint===n.state.breakpoint}))[0].settings?"unslick":i({},s.default,this.props,t[0].settings):i({},s.default,this.props)).centerMode&&(e.slidesToScroll,e.slidesToScroll=1),e.fade&&(e.slidesToShow,e.slidesToScroll,e.slidesToShow=1,e.slidesToScroll=1);var a=r.default.Children.toArray(this.props.children);a=a.filter(function(e){return"string"===typeof e?!!e.trim():!!e}),e.variableWidth&&(e.rows>1||e.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),e.variableWidth=!1);for(var u=[],l=null,c=0;c<a.length;c+=e.rows*e.slidesPerRow){for(var f=[],d=c;d<c+e.rows*e.slidesPerRow;d+=e.slidesPerRow){for(var h=[],p=d;p<d+e.slidesPerRow&&(e.variableWidth&&a[p].props.style&&(l=a[p].props.style.width),!(p>=a.length));p+=1)h.push(r.default.cloneElement(a[p],{key:100*c+10*d+p,tabIndex:-1,style:{width:100/e.slidesPerRow+"%",display:"inline-block"}}));f.push(r.default.createElement("div",{key:10*c+d},h))}e.variableWidth?u.push(r.default.createElement("div",{key:c,style:{width:l}},f)):u.push(r.default.createElement("div",{key:c},f))}if("unslick"===e){var v="regular slider "+(this.props.className||"");return r.default.createElement("div",{className:v},u)}return u.length<=e.slidesToShow&&(e.unslick=!0),r.default.createElement(o.InnerSlider,i({ref:this.innerSliderRefHandler},e),u)},t}(r.default.Component);t.default=f},353:function(e,t,n){"use strict";t.__esModule=!0,t.InnerSlider=void 0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=v(n(0)),a=v(n(9)),s=v(n(354)),u=v(n(355)),l=v(n(2)),c=n(322),f=n(356),d=n(357),h=n(358),p=v(n(155));function v(e){return e&&e.__esModule?e:{default:e}}t.InnerSlider=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n));return v.listRefHandler=function(e){return v.list=e},v.trackRefHandler=function(e){return v.track=e},v.adaptHeight=function(){if(v.props.adaptiveHeight&&v.list){var e=v.list.querySelector('[data-index="'+v.state.currentSlide+'"]');v.list.style.height=(0,c.getHeight)(e)+"px"}},v.componentWillMount=function(){if(v.ssrInit(),v.props.onInit&&v.props.onInit(),v.props.lazyLoad){var e=(0,c.getOnDemandLazySlides)(r({},v.props,v.state));e.length>0&&(v.setState(function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}}),v.props.onLazyLoad&&v.props.onLazyLoad(e))}},v.componentDidMount=function(){var e=r({listRef:v.list,trackRef:v.track},v.props);v.updateState(e,!0,function(){v.adaptHeight(),v.props.autoplay&&v.autoPlay("update")}),"progressive"===v.props.lazyLoad&&(v.lazyLoadTimer=setInterval(v.progressiveLazyLoad,1e3)),v.ro=new p.default(function(){v.state.animating?(v.onWindowResized(!1),v.callbackTimers.push(setTimeout(function(){return v.onWindowResized()},v.props.speed))):v.onWindowResized()}),v.ro.observe(v.list),Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(e){e.onfocus=v.props.pauseOnFocus?v.onSlideFocus:null,e.onblur=v.props.pauseOnFocus?v.onSlideBlur:null}),window&&(window.addEventListener?window.addEventListener("resize",v.onWindowResized):window.attachEvent("onresize",v.onWindowResized))},v.componentWillUnmount=function(){v.animationEndCallback&&clearTimeout(v.animationEndCallback),v.lazyLoadTimer&&clearInterval(v.lazyLoadTimer),v.callbackTimers.length&&(v.callbackTimers.forEach(function(e){return clearTimeout(e)}),v.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",v.onWindowResized):window.detachEvent("onresize",v.onWindowResized),v.autoplayTimer&&clearInterval(v.autoplayTimer)},v.componentWillReceiveProps=function(e){var t=r({listRef:v.list,trackRef:v.track},e,v.state),n=!1,a=Object.keys(v.props),s=Array.isArray(a),u=0;for(a=s?a:a[Symbol.iterator]();;){var l;if(s){if(u>=a.length)break;l=a[u++]}else{if((u=a.next()).done)break;l=u.value}var c=l;if(!e.hasOwnProperty(c)){n=!0;break}if("object"!==i(e[c])&&"function"!==typeof e[c]&&e[c]!==v.props[c]){n=!0;break}}v.updateState(t,n,function(){v.state.currentSlide>=o.default.Children.count(e.children)&&v.changeSlide({message:"index",index:o.default.Children.count(e.children)-e.slidesToShow,currentSlide:v.state.currentSlide}),e.autoplay?v.autoPlay("update"):v.pause("paused")})},v.componentDidUpdate=function(){if(v.checkImagesLoad(),v.props.onReInit&&v.props.onReInit(),v.props.lazyLoad){var e=(0,c.getOnDemandLazySlides)(r({},v.props,v.state));e.length>0&&(v.setState(function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}}),v.props.onLazyLoad&&v.props.onLazyLoad(e))}v.adaptHeight()},v.onWindowResized=function(e){v.debouncedResize&&v.debouncedResize.cancel(),v.debouncedResize=(0,u.default)(function(){return v.resizeWindow(e)},50),v.debouncedResize()},v.resizeWindow=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(a.default.findDOMNode(v.track)){var t=r({listRef:v.list,trackRef:v.track},v.props,v.state);v.updateState(t,e,function(){v.props.autoplay?v.autoPlay("update"):v.pause("paused")}),v.setState({animating:!1}),clearTimeout(v.animationEndCallback),delete v.animationEndCallback}},v.updateState=function(e,t,n){var i=(0,c.initializedState)(e);e=r({},e,i,{slideIndex:i.currentSlide});var a=(0,c.getTrackLeft)(e);e=r({},e,{left:a});var s=(0,c.getTrackCSS)(e);(t||o.default.Children.count(v.props.children)!==o.default.Children.count(e.children))&&(i.trackStyle=s),v.setState(i,n)},v.ssrInit=function(){if(v.props.variableWidth){var e=0,t=0,n=[],i=(0,c.getPreClones)(r({},v.props,v.state,{slideCount:v.props.children.length})),a=(0,c.getPostClones)(r({},v.props,v.state,{slideCount:v.props.children.length}));v.props.children.forEach(function(t){n.push(t.props.style.width),e+=t.props.style.width});for(var s=0;s<i;s++)t+=n[n.length-1-s],e+=n[n.length-1-s];for(var u=0;u<a;u++)e+=n[u];for(var l=0;l<v.state.currentSlide;l++)t+=n[l];var f={width:e+"px",left:-t+"px"};if(v.props.centerMode){var d=n[v.state.currentSlide]+"px";f.left="calc("+f.left+" + (100% - "+d+") / 2 ) "}v.setState({trackStyle:f})}else{var h=o.default.Children.count(v.props.children),p=r({},v.props,v.state,{slideCount:h}),m=(0,c.getPreClones)(p)+(0,c.getPostClones)(p)+h,g=100/v.props.slidesToShow*m,y=100/m,b=-y*((0,c.getPreClones)(p)+v.state.currentSlide)*g/100;v.props.centerMode&&(b+=(100-y*g/100)/2);var w={width:g+"%",left:b+"%"};v.setState({slideWidth:y+"%",trackStyle:w})}},v.checkImagesLoad=function(){var e=document.querySelectorAll(".slick-slide img"),t=e.length,n=0;Array.prototype.forEach.call(e,function(e){var i=function(){return++n&&n>=t&&v.onWindowResized()};if(e.onclick){var r=e.onclick;e.onclick=function(){r(),e.parentNode.focus()}}else e.onclick=function(){return e.parentNode.focus()};e.onload||(v.props.lazyLoad?e.onload=function(){v.adaptHeight(),v.callbackTimers.push(setTimeout(v.onWindowResized,v.props.speed))}:(e.onload=i,e.onerror=function(){i(),v.props.onLazyLoadError&&v.props.onLazyLoadError()}))})},v.progressiveLazyLoad=function(){for(var e=[],t=r({},v.props,v.state),n=v.state.currentSlide;n<v.state.slideCount+(0,c.getPostClones)(t);n++)if(v.state.lazyLoadedList.indexOf(n)<0){e.push(n);break}for(var i=v.state.currentSlide-1;i>=-(0,c.getPreClones)(t);i--)if(v.state.lazyLoadedList.indexOf(i)<0){e.push(i);break}e.length>0?(v.setState(function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}}),v.props.onLazyLoad&&v.props.onLazyLoad(e)):v.lazyLoadTimer&&(clearInterval(v.lazyLoadTimer),delete v.lazyLoadTimer)},v.slideHandler=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=v.props,i=n.asNavFor,o=n.beforeChange,a=n.onLazyLoad,s=n.speed,u=n.afterChange,l=v.state.currentSlide,f=(0,c.slideHandler)(r({index:e},v.props,v.state,{trackRef:v.track,useCSS:v.props.useCSS&&!t})),d=f.state,h=f.nextState;if(d){o&&o(l,d.currentSlide);var p=d.lazyLoadedList.filter(function(e){return v.state.lazyLoadedList.indexOf(e)<0});a&&p.length>0&&a(p),v.setState(d,function(){i&&i.innerSlider.state.currentSlide!==l&&i.innerSlider.slideHandler(e),h&&(v.animationEndCallback=setTimeout(function(){var e=h.animating,t=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(h,["animating"]);v.setState(t,function(){v.callbackTimers.push(setTimeout(function(){return v.setState({animating:e})},10)),u&&u(d.currentSlide),delete v.animationEndCallback})},s))})}},v.changeSlide=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r({},v.props,v.state),i=(0,c.changeSlide)(n,e);(0===i||i)&&(!0===t?v.slideHandler(i,t):v.slideHandler(i))},v.clickHandler=function(e){!1===v.clickable&&(e.stopPropagation(),e.preventDefault()),v.clickable=!0},v.keyHandler=function(e){var t=(0,c.keyHandler)(e,v.props.accessibility,v.props.rtl);""!==t&&v.changeSlide({message:t})},v.selectHandler=function(e){v.changeSlide(e)},v.disableBodyScroll=function(){window.ontouchmove=function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}},v.enableBodyScroll=function(){window.ontouchmove=null},v.swipeStart=function(e){v.props.verticalSwiping&&v.disableBodyScroll();var t=(0,c.swipeStart)(e,v.props.swipe,v.props.draggable);""!==t&&v.setState(t)},v.swipeMove=function(e){var t=(0,c.swipeMove)(e,r({},v.props,v.state,{trackRef:v.track,listRef:v.list,slideIndex:v.state.currentSlide}));t&&(t.swiping&&(v.clickable=!1),v.setState(t))},v.swipeEnd=function(e){var t=(0,c.swipeEnd)(e,r({},v.props,v.state,{trackRef:v.track,listRef:v.list,slideIndex:v.state.currentSlide}));if(t){var n=t.triggerSlideHandler;delete t.triggerSlideHandler,v.setState(t),void 0!==n&&(v.slideHandler(n),v.props.verticalSwiping&&v.enableBodyScroll())}},v.slickPrev=function(){v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"previous"})},0))},v.slickNext=function(){v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"next"})},0))},v.slickGoTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=Number(e),isNaN(e))return"";v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"index",index:e,currentSlide:v.state.currentSlide},t)},0))},v.play=function(){var e;if(v.props.rtl)e=v.state.currentSlide-v.props.slidesToScroll;else{if(!(0,c.canGoNext)(r({},v.props,v.state)))return!1;e=v.state.currentSlide+v.props.slidesToScroll}v.slideHandler(e)},v.autoPlay=function(e){v.autoplayTimer&&clearInterval(v.autoplayTimer);var t=v.state.autoplaying;if("update"===e){if("hovered"===t||"focused"===t||"paused"===t)return}else if("leave"===e){if("paused"===t||"focused"===t)return}else if("blur"===e&&("paused"===t||"hovered"===t))return;v.autoplayTimer=setInterval(v.play,v.props.autoplaySpeed+50),v.setState({autoplaying:"playing"})},v.pause=function(e){v.autoplayTimer&&(clearInterval(v.autoplayTimer),v.autoplayTimer=null);var t=v.state.autoplaying;"paused"===e?v.setState({autoplaying:"paused"}):"focused"===e?"hovered"!==t&&"playing"!==t||v.setState({autoplaying:"focused"}):"playing"===t&&v.setState({autoplaying:"hovered"})},v.onDotsOver=function(){return v.props.autoplay&&v.pause("hovered")},v.onDotsLeave=function(){return v.props.autoplay&&"hovered"===v.state.autoplaying&&v.autoPlay("leave")},v.onTrackOver=function(){return v.props.autoplay&&v.pause("hovered")},v.onTrackLeave=function(){return v.props.autoplay&&"hovered"===v.state.autoplaying&&v.autoPlay("leave")},v.onSlideFocus=function(){return v.props.autoplay&&v.pause("focused")},v.onSlideBlur=function(){return v.props.autoplay&&"focused"===v.state.autoplaying&&v.autoPlay("blur")},v.render=function(){var e,t,n,i=(0,l.default)("slick-slider",v.props.className,{"slick-vertical":v.props.vertical,"slick-initialized":!0}),a=r({},v.props,v.state),s=(0,c.extractObject)(a,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding"]),u=v.props.pauseOnHover;if(s=r({},s,{onMouseEnter:u?v.onTrackOver:null,onMouseLeave:u?v.onTrackLeave:null,onMouseOver:u?v.onTrackOver:null,focusOnSelect:v.props.focusOnSelect?v.selectHandler:null}),!0===v.props.dots&&v.state.slideCount>=v.props.slidesToShow){var p=(0,c.extractObject)(a,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),m=v.props.pauseOnDotsHover;p=r({},p,{clickHandler:v.changeSlide,onMouseEnter:m?v.onDotsLeave:null,onMouseOver:m?v.onDotsOver:null,onMouseLeave:m?v.onDotsLeave:null}),e=o.default.createElement(d.Dots,p)}var g=(0,c.extractObject)(a,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);g.clickHandler=v.changeSlide,v.props.arrows&&(t=o.default.createElement(h.PrevArrow,g),n=o.default.createElement(h.NextArrow,g));var y=null;v.props.vertical&&(y={height:v.state.listHeight});var b=null;!1===v.props.vertical?!0===v.props.centerMode&&(b={padding:"0px "+v.props.centerPadding}):!0===v.props.centerMode&&(b={padding:v.props.centerPadding+" 0px"});var w=r({},y,b),_=v.props.touchMove,E={className:"slick-list",style:w,onClick:v.clickHandler,onMouseDown:_?v.swipeStart:null,onMouseMove:v.state.dragging&&_?v.swipeMove:null,onMouseUp:_?v.swipeEnd:null,onMouseLeave:v.state.dragging&&_?v.swipeEnd:null,onTouchStart:_?v.swipeStart:null,onTouchMove:v.state.dragging&&_?v.swipeMove:null,onTouchEnd:_?v.swipeEnd:null,onTouchCancel:v.state.dragging&&_?v.swipeEnd:null,onKeyDown:v.props.accessibility?v.keyHandler:null},S={className:i,dir:"ltr"};return v.props.unslick&&(E={className:"slick-list"},S={className:i}),o.default.createElement("div",S,v.props.unslick?"":t,o.default.createElement("div",r({ref:v.listRefHandler},E),o.default.createElement(f.Track,r({ref:v.trackRefHandler},s),v.props.children)),v.props.unslick?"":n,v.props.unslick?"":e)},v.list=null,v.track=null,v.state=r({},s.default,{currentSlide:v.props.initialSlide,slideCount:o.default.Children.count(v.props.children)}),v.callbackTimers=[],v.clickable=!0,v.debouncedResize=null,v}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default.Component)},354:function(e,t,n){"use strict";t.__esModule=!0;t.default={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0}},355:function(e,t,n){(function(t){var n="Expected a function",i=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,d=c||f||Function("return this")(),h=Object.prototype.toString,p=Math.max,v=Math.min,m=function(){return d.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&h.call(e)==r}(e))return i;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):a.test(e)?i:+e}e.exports=function(e,t,i){var r,o,a,s,u,l,c=0,f=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(n);function b(t){var n=r,i=o;return r=o=void 0,c=t,s=e.apply(i,n)}function w(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=a}function _(){var e=m();if(w(e))return E(e);u=setTimeout(_,function(e){var n=t-(e-l);return d?v(n,a-(e-c)):n}(e))}function E(e){return u=void 0,h&&r?b(e):(r=o=void 0,s)}function S(){var e=m(),n=w(e);if(r=arguments,o=this,l=e,n){if(void 0===u)return function(e){return c=e,u=setTimeout(_,t),f?b(e):s}(l);if(d)return u=setTimeout(_,t),b(l)}return void 0===u&&(u=setTimeout(_,t)),s}return t=y(t)||0,g(i)&&(f=!!i.leading,a=(d="maxWait"in i)?p(y(i.maxWait)||0,t):a,h="trailing"in i?!!i.trailing:h),S.cancel=function(){void 0!==u&&clearTimeout(u),c=0,r=l=o=u=void 0},S.flush=function(){return void 0===u?s:E(m())},S}}).call(this,n(35))},356:function(e,t,n){"use strict";t.__esModule=!0,t.Track=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=s(n(0)),o=s(n(2)),a=n(322);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t,n,i,r,o;return i=(o=e.rtl?e.slideCount-1-e.index:e.index)<0||o>=e.slideCount,e.centerMode?(r=Math.floor(e.slidesToShow/2),n=(o-e.currentSlide)%e.slideCount===0,o>e.currentSlide-r-1&&o<=e.currentSlide+r&&(t=!0)):t=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow,{"slick-slide":!0,"slick-active":t,"slick-center":n,"slick-cloned":i,"slick-current":o===e.currentSlide}},l=function(e,t){return e.key||t},c=function(e){var t,n=[],s=[],c=[],f=r.default.Children.count(e.children),d=(0,a.lazyStartIndex)(e),h=(0,a.lazyEndIndex)(e);return r.default.Children.forEach(e.children,function(p,v){var m=void 0,g={message:"children",index:v,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};m=!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(v)>=0?p:r.default.createElement("div",null);var y=function(e){var t={};return void 0!==e.variableWidth&&!1!==e.variableWidth||(t.width=e.slideWidth),e.fade&&(t.position="relative",e.vertical?t.top=-e.index*parseInt(e.slideHeight):t.left=-e.index*parseInt(e.slideWidth),t.opacity=e.currentSlide===e.index?1:0,t.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase,t.WebkitTransition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase),t}(i({},e,{index:v})),b=m.props.className||"",w=u(i({},e,{index:v}));if(n.push(r.default.cloneElement(m,{key:"original"+l(m,v),"data-index":v,className:(0,o.default)(w,b),tabIndex:"-1","aria-hidden":!w["slick-active"],style:i({outline:"none"},m.props.style||{},y),onClick:function(t){m.props&&m.props.onClick&&m.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(g)}})),e.infinite&&!1===e.fade){var _=f-v;_<=(0,a.getPreClones)(e)&&f!==e.slidesToShow&&((t=-_)>=d&&(m=p),w=u(i({},e,{index:t})),s.push(r.default.cloneElement(m,{key:"precloned"+l(m,t),"data-index":t,tabIndex:"-1",className:(0,o.default)(w,b),"aria-hidden":!w["slick-active"],style:i({},m.props.style||{},y),onClick:function(t){m.props&&m.props.onClick&&m.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(g)}}))),f!==e.slidesToShow&&((t=f+v)<h&&(m=p),w=u(i({},e,{index:t})),c.push(r.default.cloneElement(m,{key:"postcloned"+l(m,t),"data-index":t,tabIndex:"-1",className:(0,o.default)(w,b),"aria-hidden":!w["slick-active"],style:i({},m.props.style||{},y),onClick:function(t){m.props&&m.props.onClick&&m.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(g)}})))}}),e.rtl?s.concat(n,c).reverse():s.concat(n,c)};t.Track=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=c(this.props),t=this.props,n={onMouseEnter:t.onMouseEnter,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave};return r.default.createElement("div",i({className:"slick-track",style:this.props.trackStyle},n),e)},t}(r.default.PureComponent)},357:function(e,t,n){"use strict";t.__esModule=!0,t.Dots=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=a(n(0)),o=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}t.Dots=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.clickHandler=function(e,t){t.preventDefault(),this.props.clickHandler(e)},t.prototype.render=function(){var e,t=this,n=(e={slideCount:this.props.slideCount,slidesToScroll:this.props.slidesToScroll,slidesToShow:this.props.slidesToShow,infinite:this.props.infinite}).infinite?Math.ceil(e.slideCount/e.slidesToScroll):Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,a=this.props,s={onMouseEnter:a.onMouseEnter,onMouseOver:a.onMouseOver,onMouseLeave:a.onMouseLeave},u=Array.apply(null,Array(n+1).join("0").split("")).map(function(e,n){var i=n*t.props.slidesToScroll,a=n*t.props.slidesToScroll+(t.props.slidesToScroll-1),s=(0,o.default)({"slick-active":t.props.currentSlide>=i&&t.props.currentSlide<=a}),u={message:"dots",index:n,slidesToScroll:t.props.slidesToScroll,currentSlide:t.props.currentSlide},l=t.clickHandler.bind(t,u);return r.default.createElement("li",{key:n,className:s},r.default.cloneElement(t.props.customPaging(n),{onClick:l}))});return r.default.cloneElement(this.props.appendDots(u),i({className:this.props.dotsClass},s))},t}(r.default.PureComponent)},358:function(e,t,n){"use strict";t.__esModule=!0,t.NextArrow=t.PrevArrow=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=s(n(0)),o=s(n(2)),a=n(322);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.PrevArrow=function(e){function t(){return u(this,t),l(this,e.apply(this,arguments))}return c(t,e),t.prototype.clickHandler=function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)},t.prototype.render=function(){var e={"slick-arrow":!0,"slick-prev":!0},t=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(e["slick-disabled"]=!0,t=null);var n={key:"0","data-role":"none",className:(0,o.default)(e),style:{display:"block"},onClick:t},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.prevArrow?r.default.cloneElement(this.props.prevArrow,i({},n,a)):r.default.createElement("button",i({key:"0",type:"button"},n)," ","Previous")},t}(r.default.PureComponent),t.NextArrow=function(e){function t(){return u(this,t),l(this,e.apply(this,arguments))}return c(t,e),t.prototype.clickHandler=function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)},t.prototype.render=function(){var e={"slick-arrow":!0,"slick-next":!0},t=this.clickHandler.bind(this,{message:"next"});(0,a.canGoNext)(this.props)||(e["slick-disabled"]=!0,t=null);var n={key:"1","data-role":"none",className:(0,o.default)(e),style:{display:"block"},onClick:t},s={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.nextArrow?r.default.cloneElement(this.props.nextArrow,i({},n,s)):r.default.createElement("button",i({key:"1",type:"button"},n)," ","Next")},t}(r.default.PureComponent)},359:function(e,t,n){var i=n(360),r=function(e){var t="",n=Object.keys(e);return n.forEach(function(r,o){var a=e[r];(function(e){return/[height|width]$/.test(e)})(r=i(r))&&"number"===typeof a&&(a+="px"),t+=!0===a?r:!1===a?"not "+r:"("+r+": "+a+")",o<n.length-1&&(t+=" and ")}),t};e.exports=function(e){var t="";return"string"===typeof e?e:e instanceof Array?(e.forEach(function(n,i){t+=r(n),i<e.length-1&&(t+=", ")}),t):r(e)}},360:function(e,t){e.exports=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}},361:function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var a={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(e){return o.default.createElement("ul",{style:{display:"block"}},e)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(e){return o.default.createElement("button",null,e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0};t.default=a},362:function(e,t,n){"use strict";n(25),n(363)},363:function(e,t,n){e.exports=n.p+"static/media/index.4b4fc08b.less"},364:function(e,t,n){"use strict";n(25),n(365)},365:function(e,t,n){e.exports=n.p+"static/media/index.9d7904d2.less"},368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n(0)),r=f(n(39)),o=f(n(95)),a=f(n(2)),s=f(n(43)),u=f(n(49)),l=n(13),c=f(n(369));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e,t,n,i){var r=n-t;return(e/=i/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t};function b(){return window}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=v(this,m(t).call(this,e))).getCurrentScrollTop=function(){var e=(n.props.target||b)();return e===window?window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop},n.scrollToTop=function(e){var t=n.getCurrentScrollTop(),i=Date.now();(0,u.default)(function e(){var r=Date.now()-i;n.setScrollTop(y(r,t,0,450)),r<450?(0,u.default)(e):n.setScrollTop(0)}),(n.props.onClick||function(){})(e)},n.handleScroll=function(){var e=n.props,t=e.visibilityHeight,i=e.target,r=void 0===i?b:i,o=(0,c.default)(r(),!0);n.setState({visible:o>t})},n.renderBackTop=function(e){var t=e.getPrefixCls,o=n.props,u=o.prefixCls,l=o.className,c=void 0===l?"":l,f=o.children,d=t("back-top",u),p=(0,a.default)(d,c),v=i.createElement("div",{className:"".concat(d,"-content")},i.createElement("div",{className:"".concat(d,"-icon")})),m=(0,s.default)(n.props,["prefixCls","className","children","visibilityHeight","target","visible"]),g=("visible"in n.props?n.props.visible:n.state.visible)?i.createElement("div",h({},m,{className:p,onClick:n.scrollToTop}),f||v):null;return i.createElement(r.default,{component:"",transitionName:"fade"},g)},n.state={visible:!1},n}var n,f,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,i.Component),n=t,(f=[{key:"setScrollTop",value:function(e){var t=(this.props.target||b)();t===window?(document.body.scrollTop=e,document.documentElement.scrollTop=e):t.scrollTop=e}},{key:"componentDidMount",value:function(){var e=this.props.target||b;this.scrollEvent=(0,o.default)(e(),"scroll",this.handleScroll),this.handleScroll()}},{key:"componentWillUnmount",value:function(){this.scrollEvent&&this.scrollEvent.remove()}},{key:"render",value:function(){return i.createElement(l.ConfigConsumer,null,this.renderBackTop)}}])&&p(n.prototype,f),d&&p(n,d),t}();t.default=w,w.defaultProps={visibilityHeight:400}},369:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("undefined"===typeof window)return 0;var n=t?"pageYOffset":"pageXOffset",i=t?"scrollTop":"scrollLeft",r=e===window,o=r?e[n]:e[i];r&&"number"!==typeof o&&(o=document.documentElement[i]);return o}},370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n(0)),r=s(n(28)),o=n(13),a=s(n(54));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(n[i[r]]=e[i[r]])}return n},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=f(this,d(t).apply(this,arguments))).saveTooltip=function(t){e.tooltip=t},e.renderPopover=function(t){var n=t.getPrefixCls,o=e.props,a=o.prefixCls,s=p(o,["prefixCls"]);delete s.title;var u=n("popover",a);return i.createElement(r.default,l({},s,{prefixCls:u,ref:e.saveTooltip,overlay:e.getOverlay(u)}))},e}var n,s,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.Component),n=t,(s=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"getOverlay",value:function(e){var t=this.props,n=t.title,r=t.content;return(0,a.default)(!("overlay"in this.props),"Popover[overlay] is removed, please use Popover[content] instead, see: https://u.ant.design/popover-content"),i.createElement("div",null,n&&i.createElement("div",{className:"".concat(e,"-title")},n),i.createElement("div",{className:"".concat(e,"-inner-content")},r))}},{key:"render",value:function(){return i.createElement(o.ConfigConsumer,null,this.renderPopover)}}])&&c(n.prototype,s),u&&c(n,u),t}();t.default=v,v.defaultProps={placement:"top",transitionName:"zoom-big",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}}}}]);
//# sourceMappingURL=5.f4484cb5.chunk.js.map